(self.webpackChunkFrontend=self.webpackChunkFrontend||[]).push([[638],{188:(e,t,n)=>{"use strict";n.d(t,{kH:()=>d,nI:()=>l,rS:()=>v,rV:()=>c});n(97107),n(82438),n(50020);var r=n(57195),o=n(29587),i=n(15133),a=n(16851),s=n(46910);const l=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3?arguments[3]:void 0;return i=>!i.state.readOnly&&(i.dispatch(i.state.changeByRange((a=>{const s={prefix:e,suffix:t};if(n){const n=i.state.doc.lineAt(a.anchor);a.empty&&(a=r.OF.range(n.from,n.to)),a.from!==n.from&&(s.prefix=`\n${e}`),a.to!==n.to&&(s.suffix=`${t}\n`)}const l=i.state.sliceDoc(a.from,a.to),c=a.map(i.state.changes([{from:a.from,insert:`${s.prefix}`}]),1);return{range:o?o(c,i):c,changes:[{from:a.from,to:a.to,insert:`${s.prefix}${l}${s.suffix}`}]}})),{scrollIntoView:!0}),!0)},c=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return t=>!t.state.readOnly&&(t.dispatch(t.state.changeByRange((n=>{if(n.empty)return{range:n};const r=t.state.doc.sliceString(n.from,n.to);return{range:n,changes:[{from:n.from,to:n.to,insert:e?r.toUpperCase():r.toLowerCase()}]}}))),!0)},d=e=>{if(e.state.readOnly)return!1;const t=(0,o.hw)(e.state);return e.dispatch(e.state.changeByRange((n=>{const i=[];if(n.empty){const r=e.state.doc.lineAt(n.from);let a,s=r.from,l=r.to;do{a=!1,t.between(s,l,((t,n)=>{const r=Math.min(e.state.doc.lineAt(t).from,s),o=Math.max(e.state.doc.lineAt(n).to,l);r===s&&o===l||(a=!0,s=r,l=o)}))}while(a);return t.between(s,l,((t,n)=>{i.push({offset:t-s,base:l+e.state.lineBreak.length,length:n-t})})),{range:n,changes:[{from:l,insert:e.state.lineBreak+e.state.doc.slice(s,l)}],effects:i.map((e=>o.R3.of({from:e.base+e.offset,to:e.base+e.offset+e.length})))}}{let t=n;return n.head>n.anchor&&(t=r.OF.range(n.head,n.head+(n.to-n.from))),{range:t,changes:[{from:n.head,insert:e.state.doc.slice(n.from,n.to)}]}}}))),!0},h=["LongArg","TextArgument","OpenBrace","CloseBrace"];function u(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const r=(0,o.a_)(t,1e3);let i;if("number"==typeof e){i=r?.resolveInner(e,n)?.parent;const t=(0,a.vL)(i,e);t?.parent&&(i=t.parent)}else i=e?.parent;for(;i&&h.includes(i.type.name);)i=i.parent;return i||void 0}function m(e,t,n){const r=e.sliceDoc(t.from,t.to);return{changes:e.changes([{from:t.from,to:t.to,insert:`${n}{${r}}`}]),range:p(t,t.from+n.length+1,t.from+n.length+r.length+1)}}function p(e,t,n){return e.from===e.anchor?r.OF.range(t,n):r.OF.range(n,t)}function g(e,t){if(e!==t)throw new Error("Replacement in toggleRange failed validation.")}function f(e,t){for(let n=e;n;n=n.parent){if(n.type.is(t))return n;if(s.z[n.type.name])return null}return null}function O(e,t){const n=e?.getChild("TextArgument")?.getChild("LongArg");return Boolean(n&&n.from===t.from&&n.to===t.to)}function b(e,t,n){let r=n;for(let o=(0,i.Bw)(t,"$ToggleTextFormattingCommand");O(o,r)&&o;o=(0,i.Bw)(o.parent,"$ToggleTextFormattingCommand"))if(r=p(r,o.from,o.to),o.type.is(e)){const e=o.getChild("TextArgument")?.getChild("LongArg");return e?p(n,e.from,e.to):n}return n}function v(e){const t=s.z[e];return n=>!n.state.readOnly&&(n.dispatch(n.state.changeByRange((a=>{const s=function(e,t,n){const a=(0,o.mv)(n);if(a.length<t.to)return t;const s=a.resolveInner(t.from,1),l=a.resolveInner(t.to,-1),c=f(s,e),d=f(l,e),h=u(s,n);if(h?.type.is("$ToggleTextFormattingCommand")&&O(h,t))return b(e,(0,i.Bw)(s,"$ToggleTextFormattingCommand"),t);if(!c)return b(e,(0,i.Bw)(s,"$ToggleTextFormattingCommand"),t);if(s.type.is("$CtrlSeq")&&t.from===t.to){const e=s.parent?.parent?.parent;return e?r.OF.cursor(e.from):t}let{from:m,to:g}=t;return s.type.is("$CtrlSeq")&&(m=s.to+1),s.type.is("OpenBrace")&&(m=s.to),c===d&&l.type.is("CloseBrace")&&(g=l.from),b(e,c,p(t,m,g))}(t,a,n.state),l=n.state.sliceDoc(s.from,s.to),c=u(s.from,n.state,0===s.from?1:-1),d=s.empty?c:u(s.to,n.state,s.to===n.state.doc.length?-1:1),h=(0,o.a_)(n.state,1e3),v=h?.resolveInner(s.from,1),w=h?.resolveInner(s.to,-1);if(!(v===w)&&c!==d){const r=c?.type.is(t),o=d&&d.type.is(t);if(r&&o&&c?.parent?.parent?.parent&&d?.parent?.parent?.parent){if(c.parent.parent.parent===d.parent.parent.parent){const t=n.state.sliceDoc(c.to,d.from),r=c.lastChild?.getChild("LongArg"),o=d.lastChild?.getChild("LongArg");if(!r||!o)throw new Error("Can't find argument node");const i=n.state.sliceDoc(c.from,d.to),a=n.state.sliceDoc(r.from,r.to),l=n.state.sliceDoc(o.from,o.to);g(`${e}{${a}}${t}${e}{${l}}`,i);return{changes:n.state.changes([{from:c.from,to:d.to,insert:`${e}{${a}${t}${l}}`}]),range:p(s,s.from,s.to-e.length-1-1)}}}if(o&&d.parent?.parent?.parent===c){const t=n.state.sliceDoc(s.from,d.from),r=d.lastChild?.getChild("LongArg");if(!r)throw new Error("Can't find argument node");const o=n.state.sliceDoc(r.from,r.to),i=n.state.sliceDoc(s.from,d.to);g(`${t}${e}{${o}}`,i);return{changes:n.state.changes([{from:s.from,to:d.to,insert:`${e}{${t}${o}}`}]),range:p(s,s.from+e.length+1,s.to)}}if(r&&c&&c.parent?.parent?.parent===d){const t=n.state.sliceDoc(c.to,s.to),r=c.lastChild?.getChild("LongArg");if(!r)throw new Error("Can't find argument node");const o=n.state.sliceDoc(r.from,r.to),i=n.state.sliceDoc(c.from,s.to);g(`${e}{${o}}${t}`,i);return{changes:n.state.changes([{from:c.from,to:s.to,insert:`${e}{${o}${t}}`}]),range:p(s,s.from,s.to-1)}}return{range:s}}const _=c;if(l.includes("\n\n"))return{range:s};if(s.empty&&_&&s.from===_.from&&_.type.is(t)||!_?.type.is(t))return m(n.state,s,e);const x=_.lastChild?.getChild("LongArg");if(!x)throw new Error("Can't find argument node");if(s.from===x.from&&s.to!==x.to){const t=n.state.sliceDoc(s.to,x.to),r=n.state.sliceDoc(_.from,_.to);g(`${e}{${l}${t}}`,r);const o=n.state.changes([{from:_.from,to:_.to,insert:`${l}${e}{${t}}`}]);return{range:p(s,s.from-e.length-1,s.to-e.length-1),changes:o}}if(s.to===x.to&&s.from!==x.from){const e=n.state.sliceDoc(_.from,s.from);g(`${e}${l}}`,n.state.sliceDoc(_.from,_.to));const t=n.state.changes([{from:_.from,to:_.to,insert:`${e}}${l}`}]);return{range:p(s,s.from+1,s.to+1),changes:t}}if(s.from!==x.from&&s.to!==x.to){const t=n.state.sliceDoc(_.from,s.from),r=n.state.sliceDoc(s.to,_.to);g(`${t}${l}${r}`,n.state.sliceDoc(_.from,_.to));const o=n.state.changes([{from:_.from,to:_.to,insert:`${t}}${l}${e}{${r}`}]);return{range:p(s,s.from+1,s.to+1),changes:o}}if(O(_,s)){const t=n.state.sliceDoc(x.from,x.to),r=n.state.sliceDoc(_.from,_.to);g(`${e}{${l}}`,r);const o=n.state.changes([{from:_.from,to:_.to,insert:t}]);return{range:p(s,s.from-e.length-1,s.to-e.length-1),changes:o}}return m(n.state,s,e)})),{scrollIntoView:!0}),!0)}},1651:(e,t,n)=>{"use strict";const r=n(64347).assert,o=n(33101);class i{constructor(e){r.instance(e,o),this.chunk=e}toRaw(){return{chunk:this.chunk.toRaw()}}static fromRaw(e){return e?new i(o.fromRaw(e.chunk)):null}getChunk(){return this.chunk}}e.exports=i},2058:(e,t)=>{"use strict";t.containsNonBmpChars=function(e){return/[\uD800-\uDBFF]/.test(e)}},2085:(e,t,n)=>{n(97107);const r=n(37603);class o{constructor(e,t){if(e<0||t<0)throw new r("Invalid range",{pos:e,length:t});this.pos=e,this.length=t}get start(){return this.pos}get end(){return this.pos+this.length}equals(e){return this.pos===e.pos&&this.length===e.length}startsAfter(e){return this.start>=e.end}startIsAfter(e){return this.start>e}isEmpty(){return 0===this.length}contains(e){return this.start<=e.start&&this.end>=e.end}containsCursor(e){return this.start<=e&&this.end>=e}overlaps(e){return this.start<e.end&&this.end>e.start}overlapsStart(e){return this.start<=e.start&&this.end>e.start}overlapsEnd(e){return this.start<e.end&&this.end>=e.end}touches(e){return this.end===e.start||this.start===e.end}subtract(e){if(this.contains(e))return this.shrinkBy(e.length);if(e.contains(this))return new o(this.pos,0);if(e.overlaps(this)){if(e.start<this.start){const t=e.end-this.start;return new o(e.pos,this.length-t)}{const t=this.end-e.start;return new o(this.pos,this.length-t)}}return new o(this.pos,this.length)}canMerge(e){return this.overlaps(e)||this.touches(e)}merge(e){if(!this.canMerge(e))throw new Error("Ranges cannot be merged");const t=Math.min(this.pos,e.pos),n=Math.max(this.end,e.end);return new o(t,n-t)}moveBy(e){return new o(this.pos+e,this.length)}extendBy(e){return new o(this.pos,this.length+e)}shrinkBy(e){const t=this.length-e;if(t<0)throw new Error("Cannot shrink range by more than its length");return new o(this.pos,t)}insertAt(e,t){if(!this.containsCursor(e))throw new Error("The cursor must be contained in the range");const n=new o(this.pos,e-this.pos);return[n,new o(e,t),new o(e+t,this.length-n.length)]}toRaw(){return{pos:this.pos,length:this.length}}static fromRaw(e){return new o(e.pos,e.length)}splitAt(e){if(!this.containsCursor(e))throw new Error("The cursor must be contained in the range");const t=new o(this.pos,e-this.pos);return[t,new o(e,this.length-t.length)]}intersect(e){return this.contains(e)?e:e.contains(this)?this:e.overlapsStart(this)?new o(this.pos,e.end-this.start):e.overlapsEnd(this)?new o(e.pos,this.end-e.start):null}}e.exports=o},2727:(e,t,n)=>{"use strict";n.d(t,{A:()=>q});n(82438),n(50020);var r=n(97434),o=n(14041),i=n(53373),a=n.n(i),s=n(46094),l=n(95899),c=n(8164),d=n(4607),h=n(92956),u=n(41026),m=n(71627),p=n(69954),g=n(64932),f=n(31085);function O(){const{startCompile:e,lastCompileOptions:t,setAnimateCompileDropdownArrow:n,isProjectOwner:r}=(0,c.Rf)(),{enableStopOnFirstError:i}=(0,u.V)({eventSource:"timeout-new"}),a=(0,o.useCallback)((()=>{i(),e({stopOnFirstError:!0}),n(!0)}),[i,e,n]),{reducedTimeoutWarning:s,compileTimeout:l}=(0,g.A)("ol-compileSettings"),d=(0,o.useMemo)((()=>({"10s-timeout-warning":s,"is-owner":r,compileTime:l})),[r,s,l]);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(b,{isProjectOwner:r,segmentation:d}),(0,g.A)("ol-ExposedSettings").enableSubscriptions&&(0,f.jsx)(v,{handleEnableStopOnFirstErrorClick:a,lastCompileOptions:t,segmentation:d})]})}const b=(0,o.memo)((function(e){let{isProjectOwner:t,segmentation:n}=e;const{t:o}=(0,r.Bd)();return(0,f.jsx)(h.A,{headerTitle:o("your_compile_timed_out"),formattedContent:(0,g.A)("ol-ExposedSettings").enableSubscriptions&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("p",{children:o(t?"your_project_exceeded_compile_timeout_limit_on_free_plan":"this_project_exceeded_compile_timeout_limit_on_free_plan")}),t?(0,f.jsxs)("p",{children:[(0,f.jsx)("strong",{children:o("upgrade_for_more_compile_time")})," ",o("plus_additional_collaborators_document_history_track_changes_and_more")]}):(0,f.jsx)(r.x6,{i18nKey:"tell_the_project_owner_and_ask_them_to_upgrade",components:[(0,f.jsx)("strong",{})]}),t&&(0,f.jsx)("p",{className:"text-center",children:(0,f.jsx)(d.A,{source:"compile-timeout",buttonProps:{variant:"primary",className:"w-100"},segmentation:n,children:o("start_a_free_trial")})})]}),entryAriaLabel:o("your_compile_timed_out"),level:"error"})})),v=(0,o.memo)((function(e){let{lastCompileOptions:t,handleEnableStopOnFirstErrorClick:n,segmentation:o}=e;const{t:i}=(0,r.Bd)();const a=(0,f.jsx)("a",{"aria-label":i("read_more_about_free_compile_timeouts_servers"),href:"/blog/changes-to-free-compile-timeout",rel:"noopener noreferrer",target:"_blank",onClick:function(){p._("paywall-info-click",{...o,"paywall-type":"compile-timeout",content:"blog"})}});return(0,f.jsx)(h.A,{headerTitle:i("reasons_for_compile_timeouts"),formattedContent:(0,f.jsxs)(f.Fragment,{children:["enabled"===o?.["10s-timeout-warning"]&&(0,f.jsx)("p",{children:(0,f.jsx)("em",{children:(0,f.jsx)(r.x6,{i18nKey:"were_reducing_compile_timeout",components:[a]})})}),(0,f.jsxs)("p",{children:[i("common_causes_of_compile_timeouts_include"),":"]}),(0,f.jsxs)("ul",{children:[(0,f.jsx)("li",{children:(0,f.jsx)(r.x6,{i18nKey:"large_or_high-resolution_images_taking_too_long",components:[(0,f.jsx)("a",{href:"/learn/how-to/Optimising_very_large_image_files",rel:"noopener noreferrer",target:"_blank"})]})}),(0,f.jsxs)("li",{children:[(0,f.jsx)(r.x6,{i18nKey:"a_fatal_compile_error_that_completely_blocks_compilation",components:[(0,f.jsx)("a",{href:"/learn/how-to/Fixing_and_preventing_compile_timeouts#Step_3:_Assess_your_project_for_time-consuming_tasks_and_fatal_errors",rel:"noopener noreferrer",target:"_blank"})]}),!t.stopOnFirstError&&(0,f.jsxs)(f.Fragment,{children:[" ",(0,f.jsx)(r.x6,{i18nKey:"enable_stop_on_first_error_under_recompile_dropdown_menu",components:[(0,f.jsx)(m.A,{variant:"link",className:"btn-inline-link fw-bold",size:"sm",onClick:n}),(0,f.jsx)("strong",{})]})," "]})]})]}),(0,f.jsx)("p",{children:(0,f.jsx)(r.x6,{i18nKey:"learn_more_about_other_causes_of_compile_timeouts",components:[(0,f.jsx)("a",{href:"/learn/how-to/Fixing_and_preventing_compile_timeouts",rel:"noopener noreferrer",target:"_blank"})]})})]}),entryAriaLabel:i("reasons_for_compile_timeouts"),level:"raw"})})),w=(0,o.memo)(O);var _=n(32632);function x(){const{compiling:e,clearCache:t,clearingCache:n}=(0,c.Rf)(),{t:o}=(0,r.Bd)();return(0,f.jsx)(m.A,{size:"sm",variant:"danger",className:"logs-pane-actions-clear-cache",onClick:()=>t(),isLoading:n,disabled:n||e,leadingIcon:"delete",loadingLabel:o("clear_cached_files"),children:(0,f.jsx)("span",{children:o("clear_cached_files")})})}const y=(0,o.memo)(x);var k=n(61160),C=n(90082);function S(){const{compiling:e,fileList:t}=(0,c.Rf)(),{t:n}=(0,r.Bd)();return t?(0,f.jsxs)(k.ms,{drop:"up",children:[(0,f.jsx)(k.C,{id:"dropdown-files-logs-pane",variant:"secondary",size:"sm",disabled:e||!t,children:n("other_logs_and_files")}),(0,f.jsx)(k.rI,{id:"dropdown-files-logs-pane-list",children:(0,f.jsx)(C.A,{fileList:t})})]}):null}const Q=(0,o.memo)(S);var E=n(64762),T=n(67984),j=n(7174),P=n(22046);function $(){const{t:e}=(0,r.Bd)();return(0,f.jsx)(P.A,{type:"error",content:e("code_check_failed_explanation"),className:"m-0"})}const R=(0,o.memo)($);var X=n(63815);function A(e){let{alwaysVisible:t=!1}=e;const{codeCheckFailed:n,error:o,logEntries:i,rawLog:d,validationIssues:u,showLogs:m,stoppedOnFirstError:p}=(0,c.Rf)(),{loadingError:O}=(0,X.J)(),{compileTimeout:b}=(0,g.A)("ol-compileSettings"),{t:v}=(0,r.Bd)();return(0,f.jsx)("div",{className:a()("logs-pane",{hidden:!m&&!t&&!O}),"data-testid":"logs-pane",children:(0,f.jsxs)("div",{className:"logs-pane-content",children:[n&&(0,f.jsx)(R,{}),p&&(0,f.jsx)(l.A,{}),O&&(0,f.jsx)(_.A,{error:"pdf-viewer-loading-error"}),b<60&&"timedout"===o?(0,f.jsx)(w,{}):(0,f.jsx)(f.Fragment,{children:o&&(0,f.jsx)(_.A,{error:o})}),u&&Object.entries(u).map((e=>{let[t,n]=e;return(0,f.jsx)(s.A,{name:t,issue:n},t)})),i?.all&&(0,f.jsx)(E.A,{entries:i.all,hasErrors:i.errors.length>0}),d&&(0,f.jsx)(h.A,{headerTitle:v("raw_logs"),rawContent:d,entryAriaLabel:v("raw_logs_description"),level:"raw"}),(0,f.jsxs)("div",{className:"logs-pane-actions",children:[(0,f.jsx)(y,{}),(0,f.jsx)(Q,{})]})]})})}const q=(0,T.A)((0,o.memo)(A),(()=>(0,f.jsx)(j.A,{type:"logs"})))},3218:(e,t,n)=>{"use strict";function r(e){if(!e)return 0;const t=Math.ceil((e-performance.now())/1e3);return t>0?t:0}n.d(t,{C:()=>r})},5383:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AffilCtrlSeq:()=>oe,AffiliationCtrlSeq:()=>ie,Ampersand:()=>Et,AuthorCtrlSeq:()=>re,BareFilePathArgument:()=>Pt,Begin:()=>g,BibKeyArgument:()=>gt,BibliographyCtrlSeq:()=>te,BibliographyStyleCtrlSeq:()=>ne,BlankLine:()=>Ze,Book:()=>dn,BookCtrlSeq:()=>W,BottomRuleCtrlSeq:()=>me,BracketMath:()=>Bt,CaptionCtrlSeq:()=>$,CenteringCtrlSeq:()=>ee,Chapter:()=>un,ChapterCtrlSeq:()=>U,CiteCtrlSeq:()=>v,CiteStarrableCtrlSeq:()=>w,CloseBrace:()=>He,CloseBracket:()=>it,CloseBracketCtrlSym:()=>Me,CloseBracketMath:()=>Yt,CloseParenCtrlSym:()=>De,CloseParenMath:()=>Jt,ColorBoxCtrlSeq:()=>ce,Command:()=>tt,Comment:()=>Fe,Csname:()=>l,CtrlSeq:()=>yt,CtrlSym:()=>ft,DateCtrlSeq:()=>ae,DefCtrlSeq:()=>R,DefinitionArgument:()=>vt,DefinitionFragment:()=>_t,DefinitionFragmentArgument:()=>kt,DefinitionFragmentCommand:()=>xt,DisplayMath:()=>Zt,DocumentClassCtrlSeq:()=>C,DocumentEnvName:()=>je,DocumentEnvironment:()=>ze,Dollar:()=>St,DollarMath:()=>At,EmphasisCtrlSeq:()=>Ce,End:()=>f,EndnoteCtrlSeq:()=>Te,EnvName:()=>st,Environment:()=>at,EquationArrayEnvName:()=>Re,EquationArrayEnvironment:()=>nn,EquationEnvName:()=>$e,EquationEnvironment:()=>tn,FigureEnvName:()=>qe,FigureEnvironment:()=>sn,FilePathArgument:()=>ut,FootnoteCtrlSeq:()=>Ee,HLineCtrlSeq:()=>de,HboxCtrlSeq:()=>y,HrefCtrlSeq:()=>Q,IncludeCtrlSeq:()=>Y,IncludeGraphicsCtrlSeq:()=>P,InlineMath:()=>qt,InputCtrlSeq:()=>z,ItemCtrlSeq:()=>H,KnownCtrlSym:()=>Ct,KnownEnvironment:()=>Be,LaTeX:()=>Ve,LabelArgument:()=>mt,LabelCtrlSeq:()=>_,LeftCtrlSeq:()=>A,LetCtrlSeq:()=>X,LineBreakCtrlSym:()=>Ue,ListEnvName:()=>Le,ListEnvironment:()=>ln,LiteralArgContent:()=>i,LongArg:()=>ot,LstInlineContent:()=>o,LstInlineCtrlSeq:()=>j,MacroParameter:()=>Ot,MaketitleCtrlSeq:()=>se,Math:()=>Lt,MathArgument:()=>Nt,MathChar:()=>Gt,MathClosing:()=>Ut,MathCommand:()=>It,MathDelimitedGroup:()=>Dt,MathDelimiter:()=>Mt,MathOpening:()=>Wt,MathSpecialChar:()=>Ft,MathTextCtrlSeq:()=>x,MidRuleCtrlSeq:()=>ue,MultiColumnCtrlSeq:()=>pe,NewCommandCtrlSeq:()=>L,NewEnvironmentCtrlSeq:()=>N,NewLine:()=>wt,NewTheoremCtrlSeq:()=>K,Normal:()=>Qt,Number:()=>Vt,OpenBrace:()=>Ye,OpenBracket:()=>Je,OpenBracketCtrlSym:()=>We,OpenBracketMath:()=>zt,OpenParenCtrlSym:()=>Ne,OpenParenMath:()=>Kt,OptionalArgument:()=>Ke,OptionalMacroParameter:()=>bt,PackageArgument:()=>dt,ParBoxCtrlSeq:()=>ge,Paragraph:()=>fn,ParagraphCtrlSeq:()=>Z,ParenMath:()=>Ht,Part:()=>hn,PartCtrlSeq:()=>M,RefArgument:()=>pt,RefCtrlSeq:()=>O,RefStarrableCtrlSeq:()=>b,RenewCommandCtrlSeq:()=>I,RenewEnvironmentCtrlSeq:()=>D,RightCtrlSeq:()=>q,Section:()=>mn,SectionCtrlSeq:()=>F,SectioningArgument:()=>jt,SetLengthCtrlSeq:()=>Qe,ShortArg:()=>ct,ShortOptionalArg:()=>et,ShortTextArgument:()=>lt,SpaceDelimitedLiteralArgContent:()=>a,SubParagraph:()=>On,SubParagraphCtrlSeq:()=>B,SubSection:()=>pn,SubSectionCtrlSeq:()=>V,SubSubSection:()=>gn,SubSubSectionCtrlSeq:()=>G,TableEnvName:()=>Ie,TableEnvironment:()=>cn,TabularArgument:()=>$t,TabularContent:()=>Rt,TabularEnvName:()=>Pe,TabularEnvironment:()=>en,Text:()=>Ge,TextArgument:()=>rt,TextBoldCtrlSeq:()=>fe,TextColorCtrlSeq:()=>le,TextItalicCtrlSeq:()=>Oe,TextMediumCtrlSeq:()=>we,TextSansSerifCtrlSeq:()=>_e,TextSmallCapsCtrlSeq:()=>be,TextStrikeOutCtrlSeq:()=>ke,TextSubscriptCtrlSeq:()=>ye,TextSuperscriptCtrlSeq:()=>xe,TextTeletypeCtrlSeq:()=>ve,TheoremStyleCtrlSeq:()=>J,TikzPictureContent:()=>an,TikzPictureEnvName:()=>Ae,TikzPictureEnvironment:()=>on,Tilde:()=>Tt,TitleCtrlSeq:()=>k,TopRuleCtrlSeq:()=>he,TrailingContent:()=>d,TrailingWhitespaceOnly:()=>c,UnderlineCtrlSeq:()=>Se,UnknownCommand:()=>Xt,UrlArgument:()=>ht,UrlCtrlSeq:()=>E,UsePackageCtrlSeq:()=>S,VerbContent:()=>r,VerbCtrlSeq:()=>T,VerbatimContent:()=>s,VerbatimEnvName:()=>Xe,VerbatimEnvironment:()=>rn,Whitespace:()=>nt,endOfArguments:()=>u,endOfArgumentsAndOptionals:()=>p,hasMoreArguments:()=>h,hasMoreArgumentsOrOptionals:()=>m});const r=1,o=2,i=3,a=4,s=5,l=6,c=7,d=8,h=382,u=383,m=384,p=385,g=9,f=10,O=11,b=12,v=13,w=14,_=15,x=16,y=17,k=18,C=19,S=20,Q=21,E=22,T=23,j=24,P=25,$=26,R=27,X=28,A=29,q=30,L=31,I=32,N=33,D=34,W=35,M=36,U=37,F=38,V=39,G=40,Z=41,B=42,z=43,Y=44,H=45,K=46,J=47,ee=48,te=49,ne=50,re=51,oe=52,ie=53,ae=54,se=55,le=56,ce=57,de=58,he=59,ue=60,me=61,pe=62,ge=63,fe=64,Oe=65,be=66,ve=67,we=68,_e=69,xe=70,ye=71,ke=72,Ce=73,Se=74,Qe=75,Ee=76,Te=77,je=78,Pe=79,$e=80,Re=81,Xe=82,Ae=83,qe=84,Le=85,Ie=86,Ne=87,De=88,We=89,Me=90,Ue=91,Fe=92,Ve=93,Ge=94,Ze=95,Be=96,ze=97,Ye=100,He=101,Ke=102,Je=103,et=104,tt=105,nt=108,rt=109,ot=110,it=111,at=113,st=116,lt=123,ct=124,dt=133,ht=137,ut=145,mt=148,pt=150,gt=152,ft=154,Ot=155,bt=156,vt=157,wt=158,_t=159,xt=160,yt=162,kt=163,Ct=164,St=167,Qt=168,Et=169,Tt=170,jt=172,Pt=181,$t=191,Rt=192,Xt=209,At=210,qt=211,Lt=212,It=213,Nt=228,Dt=278,Wt=279,Mt=280,Ut=281,Ft=282,Vt=283,Gt=284,Zt=285,Bt=286,zt=287,Yt=288,Ht=289,Kt=290,Jt=291,en=294,tn=299,nn=304,rn=308,on=313,an=317,sn=320,ln=324,cn=328,dn=333,hn=336,un=339,mn=342,pn=345,gn=348,fn=351,On=354},5804:(e,t,n)=>{"use strict";n.d(t,{V:()=>r});n(82438),n(50020);function r(e){const t=(new TextEncoder).encode(e),n=function(e){const t=[];for(let n=0,r=0;n<e.length;n++,r+=8)t[r>>>5]|=e[n]<<24-r%32;return t}(t),r=8*t.length,o=[];let i=1732584193,a=-271733879,s=-1732584194,l=271733878,c=-1009589776;n[r>>5]|=128<<24-r%32,n[15+(r+64>>>9<<4)]=r;for(let e=0;e<n.length;e+=16){const t=i,r=a,d=s,h=l,u=c;for(let t=0;t<80;t++){if(t<16)o[t]=n[e+t];else{const e=o[t-3]^o[t-8]^o[t-14]^o[t-16];o[t]=e<<1|e>>>31}const r=(i<<5|i>>>27)+c+(o[t]>>>0)+(t<20?1518500249+(a&s|~a&l):t<40?1859775393+(a^s^l):t<60?(a&s|a&l|s&l)-1894007588:(a^s^l)-899497514);c=l,l=s,s=a<<30|a>>>2,a=i,i=r}i+=t,a+=r,s+=d,l+=h,c+=u}return function(e){const t=[];for(let n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t}([i,a,s,l,c]).map((e=>e.toString(16).padStart(2,"0"))).join("")}},5805:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(78494);const o=function(){const{permissionsLevel:e}=(0,r.yn)();return"readOnly"===e}},6077:(e,t,n)=>{"use strict";n.d(t,{K:()=>p,Q:()=>s});n(82438),n(34840);var r=n(83173),o=n(29587),i=n(49913),a=n(57195);const s=(0,o.y9)(o.cr.define([{tag:i._A.link,class:"ol-cm-link-text"},{tag:i._A.url,class:"ol-cm-url"},{tag:i._A.typeName,class:"ol-cm-monospace"},{tag:i._A.attributeValue,class:"ol-cm-monospace"},{tag:i._A.keyword,class:"ol-cm-monospace"},{tag:i._A.string,class:"ol-cm-monospace"},{tag:i._A.punctuation,class:"ol-cm-punctuation"},{tag:i._A.literal,class:"ol-cm-monospace"},{tag:i._A.strong,class:"ol-cm-strong"},{tag:i._A.monospace,fontFamily:"var(--source-font-family)",lineHeight:1,overflowWrap:"break-word"}])),l=r.Lz.theme({"&.cm-editor":{"--visual-font-family":"'Noto Serif', 'Palatino Linotype', 'Book Antiqua', Palatino, serif !important","--visual-font-size":"calc(var(--font-size) * 1.15)","& .cm-content":{opacity:0},"&.ol-cm-parsed .cm-content":{opacity:1,transition:"opacity 0.1s ease-out"}},".cm-content.cm-content":{overflowX:"hidden",padding:"0 max(calc((var(--content-width) - 95ch) / 2), calc(var(--content-width) * 0.08))",fontFamily:"var(--visual-font-family)",fontSize:"var(--visual-font-size)"},".cm-cursor-primary.cm-cursor-primary":{fontFamily:"var(--visual-font-family)",fontSize:"var(--visual-font-size)"},".cm-line":{overflowX:"visible"},".cm-gutter":{opacity:"0.5"},".cm-tooltip":{fontSize:"calc(var(--font-size) * 1.15) !important"},".ol-cm-link-text":{textDecoration:"underline",fontFamily:"inherit",textUnderlineOffset:"2px"},".ol-cm-monospace":{fontFamily:"var(--source-font-family)",lineHeight:1,fontWeight:"normal",fontStyle:"normal",fontVariant:"normal",textDecoration:"none"},".ol-cm-strong":{fontWeight:700},".ol-cm-punctuation":{fontFamily:"var(--source-font-family)",lineHeight:1},".ol-cm-brace":{opacity:"0.5"},".ol-cm-math":{overflow:"hidden"},".ol-cm-maketitle":{textAlign:"center",paddingBottom:"2em"},".ol-cm-title":{fontSize:"1.7em",cursor:"pointer",padding:"0.5em",lineHeight:"calc(var(--line-height) * 5/6)",textWrap:"balance"},".ol-cm-authors":{display:"flex",justifyContent:"space-evenly",gap:"0.5em",flexWrap:"wrap"},".ol-cm-author":{cursor:"pointer",display:"inline-block",minWidth:"150px"},".ol-cm-icon-brace":{filter:"grayscale(1)",marginRight:"2px"},".ol-cm-indicator":{color:"rgba(125, 125, 125, 0.5)"},".ol-cm-begin":{fontFamily:"var(--source-font-family)",minHeight:"1em",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center"},".ol-cm-end":{fontFamily:"var(--source-font-family)",paddingBottom:"1.5em",minHeight:"1em",textAlign:"center",justifyContent:"center",background:"linear-gradient(180deg, rgba(0,0,0,0) calc(50% - 1px), rgba(192,192,192,1) calc(50%), rgba(0,0,0,0) calc(50% + 1px))"},".ol-cm-environment-top":{paddingTop:"1em"},".ol-cm-environment-bottom":{paddingBottom:"1em"},".ol-cm-environment-first-line":{paddingTop:"0.5em !important",borderTopLeftRadius:"8px",borderTopRightRadius:"8px"},".ol-cm-environment-last-line":{paddingBottom:"1em !important",borderBottomLeftRadius:"8px",borderBottomRightRadius:"8px"},".ol-cm-environment-figure.ol-cm-environment-line, .ol-cm-environment-table.ol-cm-environment-line":{backgroundColor:"rgba(125, 125, 125, 0.05)",padding:"0 12px"},".ol-cm-environment-figure.ol-cm-environment-last-line, .ol-cm-environment-table.ol-cm-environment-last-line, .ol-cm-preamble-line.ol-cm-environment-last-line":{boxShadow:"0 2px 5px -3px rgb(125, 125, 125, 0.5)"},".ol-cm-environment-theorem-plain":{fontStyle:"italic"},".ol-cm-begin-proof > .ol-cm-environment-name":{fontStyle:"italic"},".ol-cm-environment-quote-block.ol-cm-environment-line":{borderLeft:"4px solid rgba(125, 125, 125, 0.25)",paddingLeft:"1em",borderRadius:"0"},".ol-cm-environment-padding":{flex:1,height:"1px",background:"linear-gradient(180deg, rgba(0,0,0,0) calc(50% - 1px), rgba(192,192,192,1) calc(50%), rgba(0,0,0,0) calc(50% + 1px))"},".ol-cm-environment-name":{padding:"0 1em"},".ol-cm-begin-abstract > .ol-cm-environment-name":{fontFamily:"var(--visual-font-family)",fontSize:"1.2em",fontWeight:550,textTransform:"capitalize"},".ol-cm-begin-theorem > .ol-cm-environment-name":{fontFamily:"var(--visual-font-family)",fontWeight:550,padding:"0 6px",textTransform:"capitalize"},".ol-cm-begin-theorem > .ol-cm-environment-padding:first-of-type":{flex:0},".ol-cm-item, .ol-cm-description-item":{paddingInlineStart:"calc(var(--list-depth) * 2ch)"},".ol-cm-item::before":{counterReset:"list-item var(--list-ordinal)",content:"counter(list-item, var(--list-type)) var(--list-suffix)"},".ol-cm-heading":{fontWeight:550,lineHeight:"1.35",color:"inherit !important",background:"inherit !important"},".ol-cm-command-part":{fontSize:"2em"},".ol-cm-command-chapter":{fontSize:"1.6em"},".ol-cm-command-section":{fontSize:"1.44em"},".ol-cm-command-subsection":{fontSize:"1.2em"},".ol-cm-command-subsubsection":{fontSize:"1em"},".ol-cm-command-paragraph":{fontSize:"1em"},".ol-cm-command-subparagraph":{fontSize:"1em"},".ol-cm-frame-title":{fontSize:"1.44em"},".ol-cm-frame-subtitle":{fontSize:"1em"},".ol-cm-divider":{borderBottom:"1px solid rgba(125, 125, 125, 0.1)",padding:"0.5em 6px","&.ol-cm-frame-widget":{borderBottom:"none",borderTop:"1px solid rgba(125, 125, 125, 0.1)"}},".ol-cm-command-textbf":{fontWeight:700},".ol-cm-command-textit":{fontStyle:"italic"},".ol-cm-command-textsc":{fontVariant:"small-caps"},".ol-cm-command-texttt":{fontFamily:"monospace"},".ol-cm-command-textmd, .ol-cm-command-textmd > .ol-cm-command-textbf":{fontWeight:"normal"},".ol-cm-command-textsf":{fontFamily:"var(--source-font-family)"},".ol-cm-command-textsuperscript":{verticalAlign:"super",fontSize:"smaller",lineHeight:"calc(var(--line-height) / 2)"},".ol-cm-command-textsubscript":{verticalAlign:"sub",fontSize:"smaller",lineHeight:"calc(var(--line-height) / 2)"},".ol-cm-command-underline":{textDecoration:"underline"},".ol-cm-command-sout":{textDecoration:"line-through"},".ol-cm-command-emph":{fontStyle:"italic","& .ol-cm-command-textit":{fontStyle:"normal"},".ol-cm-command-textit &":{fontStyle:"normal"}},".ol-cm-command-url":{textDecoration:"underline",fontFamily:"var(--source-font-family)",lineHeight:1,overflowWrap:"break-word",hyphens:"auto"},".ol-cm-space":{display:"inline-block"},".ol-cm-environment-centered":{"&.ol-cm-label-line, &.ol-cm-caption-line":{textAlign:"center"},"&.ol-cm-caption-line":{padding:"0 10%"}},".ol-cm-caption-line .ol-cm-label":{marginRight:"1ch"},".ol-cm-environment-verbatim":{fontFamily:"var(--source-font-family)"},".ol-cm-environment-lstlisting":{fontFamily:"var(--source-font-family)"},".ol-cm-tex":{textTransform:"uppercase","& sup":{position:"inherit",fontSize:"0.85em",verticalAlign:"0.15em",marginLeft:"-0.36em",marginRight:"-0.15em"},"& sub":{position:"inherit",fontSize:"1em",verticalAlign:"-0.5ex",marginLeft:"-0.1667em",marginRight:"-0.125em"}},".ol-cm-graphics":{display:"block",maxWidth:"min(300px, 100%)",paddingTop:"1em",paddingBottom:"1em",cursor:"pointer",".ol-cm-graphics-inline &":{display:"inline"}},".ol-cm-graphics-inline-edit-wrapper":{display:"inline-block",position:"relative",verticalAlign:"middle","& .ol-cm-graphics":{paddingTop:0,paddingBottom:0}},".ol-cm-graphics-loading":{height:"300px"},".ol-cm-graphics-error":{border:"1px solid red",padding:"8px"},".ol-cm-environment-centered .ol-cm-graphics":{margin:"0 auto"},".ol-cm-command-verb .ol-cm-monospace":{color:"inherit"},".ol-cm-preamble-wrapper":{padding:"0.5em 0","&.ol-cm-preamble-expanded":{paddingBottom:"0"}},".ol-cm-preamble-widget, .ol-cm-end-document-widget":{padding:"0.25em 1em",borderRadius:"8px",fontFamily:"var(--font-sans)",fontSize:"14px",".ol-cm-preamble-expanded &":{borderBottomLeftRadius:"0",borderBottomRightRadius:"0",borderBottom:"1px solid rgba(125, 125, 125, 0.2)"}},".ol-cm-preamble-widget":{cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center"},".ol-cm-preamble-expand-icon":{width:"32px",lineHeight:"32px",textAlign:"center",transition:"0.2s ease-out",opacity:"0.5",".ol-cm-preamble-widget:hover &":{opacity:"1"},".ol-cm-preamble-expanded &":{transform:"rotate(180deg)"}},".ol-cm-preamble-line, .ol-cm-end-document-widget, .ol-cm-preamble-widget":{backgroundColor:"rgba(125, 125, 125, 0.05)"},".ol-cm-preamble-line":{padding:"0 12px","&.ol-cm-environment-first-line":{borderRadius:"0"}},".ol-cm-end-document-widget":{textAlign:"center"},".ol-cm-environment-figure":{position:"relative"},".ol-cm-graphics-edit-button":{position:"absolute",top:"18px",right:"18px"},".ol-cm-footnote":{display:"inline-flex",padding:"0 0.1em",background:"rgba(125, 125, 125, 0.25)",borderRadius:"2px",height:"1em",cursor:"pointer",verticalAlign:"text-top","&:not(.ol-cm-footnote-view):hover":{background:"rgba(125, 125, 125, 0.5)"},"&.ol-cm-footnote-view":{height:"auto",verticalAlign:"unset",display:"inline",padding:"0 0.5em"}}}),c=new a.xx,d=a.YH.define(),h=a.sj.define({combine:e=>0===e.length?"":e[0]});function u(e){return[h.of(e),r.Lz.editorAttributes.of({style:`--content-width: ${e}`})]}const m=r.Lz.updateListener.of((e=>{if(e.geometryChanged&&!e.docChanged){if(e.transactions.some((e=>e.annotation(d))))return;const t=`${e.view.contentDOM.offsetWidth}px`;if(e.state.facet(h)===t)return;e.view.dispatch({effects:c.reconfigure(u(t)),selection:e.view.state.selection,annotations:d.of(!0)})}})),p=[c.of(u("100%")),l,m]},6203:(e,t,n)=>{"use strict";const r=n(64347).assert,o=n(97277),i=n(12628);class a extends i{constructor(e,t){super(),r.match(e,o.HEX_HASH_RX,"BinaryFileData: bad hash"),r.integer(t,"BinaryFileData: bad byteLength"),r.greaterOrEqual(t,0,"BinaryFileData: low byteLength"),this.hash=e,this.byteLength=t}static fromRaw(e){return new a(e.hash,e.byteLength)}toRaw(){return{hash:this.hash,byteLength:this.byteLength}}getHash(){return this.hash}isEditable(){return!1}getByteLength(){return this.byteLength}async toEager(){return this}async toLazy(){return this}async toHollow(){return i.createHollow(this.byteLength,null)}async store(){return{hash:this.hash}}}e.exports=a},6599:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(14041);function o(e,t,n){(0,r.useEffect)((()=>(e.on(t,n),()=>{e.removeListener(t,n)})),[t,n,e])}},6638:(e,t,n)=>{"use strict";e.exports=n.p+"images/sparkle-small-white-65edf3aa0af0ec40e8b5.svg"},6896:(e,t,n)=>{"use strict";n.d(t,{b_:()=>l,jr:()=>a,k3:()=>i,lE:()=>c});n(82438),n(57327),n(69033),n(68903),n(21018),n(1415),n(4448),n(58871),n(56539);var r=n(37603),o=n.n(r);function i(e,t){const n=c(e,t);if(n)return n;throw new(o())("Entity not found in tree",{entityId:t})}function a(e,t){const n=new Set;return t.forEach((t=>{n.add(i(e,t))})),n}function s(e){const t=new Set([e._id]);for(const n in e.folders){s(e.folders[n]).forEach((e=>{t.add(e)}))}return t}function l(e){const t=new Set;return e.forEach((e=>{s(e).forEach((e=>{t.add(e)}))})),t}function c(e,t,n){n||(n=[e._id]);for(const r in e.docs){const o=e.docs[r];if(o._id===t)return{entity:o,type:"doc",parent:e.docs,parentFolderId:e._id,path:n,index:Number(r)}}for(const r in e.fileRefs){const o=e.fileRefs[r];if(o._id===t)return{entity:o,type:"fileRef",parent:e.fileRefs,parentFolderId:e._id,path:n,index:Number(r)}}for(const r in e.folders){const o=e.folders[r];if(o._id===t)return{entity:o,type:"folder",parent:e.folders,parentFolderId:e._id,path:n,index:Number(r)};const i=c(o,t,n.concat(o._id));if(i)return i}return null}},7174:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(97434),o=n(45330),i=n(31085);const a=function(e){let{type:t}=e;const{t:n}=(0,r.Bd)(),a=(0,i.jsx)(r.x6,{i18nKey:"try_recompile_project_or_troubleshoot",components:[(0,i.jsx)("a",{href:"/learn/how-to/Resolving_access%2C_loading%2C_and_display_problems",target:"_blank"},"troubleshooting-link")]});switch(t){case"pdf":return(0,i.jsxs)(o.j,{children:[(0,i.jsx)("p",{children:n("pdf_viewer_error")}),(0,i.jsx)("p",{children:a})]});case"logs":return(0,i.jsxs)(o.j,{children:[(0,i.jsx)("p",{children:n("log_viewer_error")}),(0,i.jsx)("p",{children:a})]});default:return(0,i.jsxs)(o.j,{children:[(0,i.jsx)("p",{children:n("pdf_preview_error")}),(0,i.jsx)("p",{children:a})]})}}},7241:(e,t,n)=>{"use strict";n.d(t,{K:()=>E});n(82438),n(12266),n(50020);var r=n(73647),o=n(97519),i=n(31085);const a={ALLOWED_TAGS:["#text","p","ol","ul","li","pre","code"],ALLOWED_ATTR:[]},s=e=>{let{message:t}=e;const n=o.A.sanitize((0,r.yt)(t),a);return(0,i.jsx)("div",{className:"ai-error-assistant-output",dangerouslySetInnerHTML:{__html:n}})};var l=n(14041),c=n(29755),d=n(71627),h=n(97434),u=n(96713),m=n(59162),p=n(17112),g=n(97536);const f=e=>{let{content:t}=e;const{t:n}=(0,h.Bd)(),[r,o]=(0,l.useState)(!1),a=(0,l.useCallback)((()=>{navigator.clipboard.writeText(t).then((()=>{o(!0),window.setTimeout((()=>{o(!1)}),1500)}))}),[t]);return navigator.clipboard?.writeText?(0,i.jsx)(m.A,{id:"ai-error-assistant-copy-code",description:r?`${n("copied")}!`:n("copy"),overlayProps:{delay:r?1e3:250},children:(0,i.jsxs)(d.A,{variant:"ghost",size:"sm",onClick:a,className:"ai-error-assistant-copy-code-btn",children:[r?(0,i.jsx)(u.A,{type:"check"}):(0,i.jsx)(u.A,{type:"content_copy",unfilled:!0}),n("copy")]})}):null},O=e=>{let{content:t}=e;const{t:n}=(0,h.Bd)(),r=(0,g.G)(),o=(0,p.u)("new-editor-error-logs-redesign"),[a,s]=(0,l.useState)(!1),c=(0,l.useCallback)((()=>{navigator.clipboard.writeText(t).then((()=>{s(!0),window.setTimeout((()=>{s(!1)}),1500)}))}),[t]);return navigator.clipboard?.writeText?r&&o?(0,i.jsx)(f,{content:t}):(0,i.jsx)(m.A,{id:"ai-error-assistant-copy-code",description:a?`${n("copied")}!`:n("copy"),overlayProps:{delay:a?1e3:250},children:(0,i.jsxs)(d.A,{variant:"ghost",size:"sm",onClick:c,className:"m-2 ai-error-assistant-copy-code-btn",children:[(0,i.jsx)(u.A,{type:a?"check":"content_copy"})," ",n("copy_code")]})}):null};var b=n(36155);const v=(0,l.memo)((e=>{let{suggestion:t,handleOldDiff:n,handleNewDiff:r,handleLineNumberClick:o,showActions:a=!0}=e;const{t:s}=(0,h.Bd)();return(0,i.jsxs)("div",{className:"ai-error-assistant-suggested-change",children:[(0,i.jsxs)("div",{className:"ai-error-assistant-suggested-change-header",children:[(0,i.jsx)("img",{width:"20",height:"20",alt:"sparkle",className:"ai-error-assistant-sparkle",src:b,"aria-hidden":"true"},"sparkle"),(0,i.jsx)("div",{className:"ai-error-assistant-suggested-change-heading",children:s("suggested_code")}),a&&(0,i.jsx)(O,{content:t.to.content})]}),(0,i.jsxs)("div",{className:"ai-error-assistant-from",children:[(0,i.jsx)(u.A,{className:"ai-error-assistant-change-icon",type:"remove"}),(0,i.jsx)("div",{className:"ai-error-assistant-line-number",children:(0,i.jsx)("button",{onClick:o,children:t.from.line})}),(0,i.jsx)("div",{className:"ai-error-assistant-code",ref:n})]}),(0,i.jsxs)("div",{className:"ai-error-assistant-to",children:[(0,i.jsx)(u.A,{className:"ai-error-assistant-change-icon",type:"add"}),(0,i.jsx)("div",{className:"ai-error-assistant-line-number",children:(0,i.jsx)("button",{onClick:o,children:t.from.line})}),(0,i.jsx)("div",{className:"ai-error-assistant-code",ref:r})]})]})}));v.displayName="SuggestedChange";const w=(0,l.memo)((e=>{let{suggestion:t,syncToEntry:n,showActions:r=!0}=e;const o=(0,c.b2)(t.from.content,t.to.content),a=(0,l.useCallback)((e=>{if(e){e.textContent="";let n=t.from.content;for(const t of o)if(t.count)if(t.removed){const r=document.createElement("del");r.append(n.substring(0,t.value.length)),e.append(r),n=n.substring(t.value.length)}else if(!t.added){const r=n.substring(0,t.value.length);e.append(r),n=n.substring(t.value.length)}}}),[o,t.from.content]),s=(0,l.useCallback)((e=>{if(e){e.textContent="";let n=t.to.content;for(const t of o)if(t.value.length)if(t.added){const r=document.createElement("ins");r.append(n.substring(0,t.value.length)),e.append(r),n=n.substring(t.value.length)}else if(!t.removed){const r=n.substring(0,t.value.length);e.append(r),n=n.substring(t.value.length)}}}),[o,t.to.content]),d=(0,l.useCallback)((()=>{n({file:t.path,line:t.from.line,column:0})}),[t,n]),h=(0,g.G)(),u=(0,p.u)("new-editor-error-logs-redesign");return h&&u?(0,i.jsx)(v,{suggestion:t,handleNewDiff:s,handleOldDiff:a,handleLineNumberClick:d,showActions:r}):(0,i.jsxs)("div",{className:"ai-error-assistant-suggested-change",children:[(0,i.jsxs)("div",{className:"ai-error-assistant-from",children:[(0,i.jsx)("div",{className:"ai-error-assistant-line-number",children:(0,i.jsx)("button",{onClick:d,children:t.from.line})}),(0,i.jsx)("div",{className:"ai-error-assistant-code",ref:a})]}),(0,i.jsxs)("div",{className:"ai-error-assistant-to",children:[(0,i.jsx)("div",{className:"ai-error-assistant-line-number",children:(0,i.jsx)("button",{onClick:d,children:t.from.line})}),(0,i.jsx)("div",{className:"ai-error-assistant-code",ref:s})]}),r&&(0,i.jsx)("div",{className:"ai-error-assistant-suggested-change-footer",children:(0,i.jsx)(O,{content:t.to.content})})]})}));w.displayName="SuggestedChange";var _=n(8164),x=n(89997),y=n(69954),k=n(55937),C=n(59722);const S=(0,l.memo)((e=>{let{replaceContent:t,applySuggestion:n,pathMatches:r,contentMatchesExpected:o,compiling:a,children:s}=e;const{t:l}=(0,h.Bd)(),c=(0,g.G)(),u=(0,p.u)("new-editor-error-logs-redesign");if(!t)return null;const f=()=>(0,i.jsx)(d.A,{className:"ai-error-assistant-action-button",variant:"secondary",disabled:a||r&&!o,onClick:n,size:c&&u?"sm":void 0,children:s});return!r||o||a?(0,i.jsx)(f,{}):(0,i.jsx)(m.A,{description:l("the_original_text_has_changed"),id:"ai-error-assistant-cannot-apply-tooltip",children:(0,i.jsx)("span",{children:(0,i.jsx)(f,{})})})}));S.displayName="AiErrorAssistantMessageActionButton";var Q=n(49438);const E=(0,l.memo)((e=>{let{message:t,view:n,level:r,replaceContent:o}=e;const{t:a}=(0,h.Bd)(),{syncToEntry:c,compiling:d,startCompile:u,recordAction:m}=(0,_.Rf)(),{pathInFolder:p}=(0,x.m8)(),{currentDocument:g}=(0,k.Wq)(),f=(0,C.XW)(),O=Boolean(f?.aiErrorAssistant),b=(0,l.useMemo)((()=>g?.doc_id?p(g.doc_id):null),[g?.doc_id,p]),v=t.tool_calls?.filter((e=>"suggestLineChange"===e.tool)).length,E=(0,l.useCallback)((e=>{const{from:t}=e,r=e.from.line+t.content.split("\n").length-1;if(t.line>0&&r>=t.line&&r<=n.state.doc.lines){const e={from:n.state.doc.line(t.line),to:n.state.doc.line(r)};return n.state.sliceDoc(e.from.from,e.to.to)}}),[n.state]),T=(0,l.useCallback)(((e,t)=>{if(!o)return;const{path:i,from:a,to:s}=e;let l=e.from.line+a.content.split("\n").length-1;if(c({file:i,line:a.line,column:0},!0),b===i){const{doc:e}=n.state;if(a.line>0&&l<=e.length){const n={from:e.line(a.line),to:e.line(l)};a.line<l&&""===n.from.text&&(a.line++,n.from=e.line(a.line)),l>a.line&&""===n.to.text&&(l--,n.to=e.line(l));const i=[{from:n.from.from,to:n.to.to,insert:s.content}];o(i),y._("suggest-apply",{hasAddOn:O}),m(`appliedSuggestionFor${r}`),1===t&&window.setTimeout((()=>{u()}),500)}}}),[b,o,u,c,n.state,r,m,O]);return(0,i.jsxs)("div",{className:"ai-error-assistant-message",children:[t.content&&(0,i.jsx)(s,{message:t.content}),t.tool_calls.length>0&&(0,i.jsx)("ul",{className:"ai-error-assistant-tool-calls",children:t.tool_calls.map((e=>{const{tool:t,toolCallId:n,args:r}=e;if("suggestLineChange"===t){const e=b===r.path,t=e?E(r):void 0,s=e&&t?.includes(r.from.content);return(0,i.jsxs)("li",{children:[(0,i.jsx)(w,{suggestion:r,syncToEntry:c,showActions:!!o}),(0,i.jsx)("div",{className:"ai-error-assistant-actions",children:(0,i.jsx)(S,{replaceContent:o,applySuggestion:()=>{T(r,v)},pathMatches:e,contentMatchesExpected:s,compiling:d,children:e?a("apply_suggestion"):a("open_path",{path:(0,Q.I)(r.path,16)})})})]},n)}return null}))})]})}));E.displayName="AiErrorAssistantMessage"},7707:(e,t,n)=>{"use strict";n.d(t,{KA:()=>s,WB:()=>l,sl:()=>c});n(97107),n(82438),n(50020);var r=n(94857),o=n(14041),i=n(31085);const a=(0,o.createContext)(void 0),s=e=>{let{children:t}=e;const[n,r]=(0,o.useState)(new Map),s=(0,o.useCallback)((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r((e=>new Map([...e,...t.map((e=>[e.id,e]))])))}),[]),l=(0,o.useCallback)((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r((e=>new Map([...e].filter((e=>{let[n]=e;return!t.includes(n)})))))}),[]),c=(0,o.useMemo)((()=>({undo:[{key:"Mod-z"}],redo:[{key:"Mod-y"},{key:"Mod-Shift-Z"}],find:[{key:"Mod-f"}],"select-all":[{key:"Mod-a"}],"insert-comment":[{key:"Mod-Shift-C"}],"format-bold":[{key:"Mod-b"}],"format-italics":[{key:"Mod-i"}]})),[]);return(0,i.jsx)(a.Provider,{value:{registry:n,register:s,unregister:l,shortcuts:c},children:t})},l=()=>{const e=(0,o.useContext)(a);if(!e)throw new Error("useCommandRegistry must be used within a CommandRegistryProvider");return e};const c=e=>{const{alt:t,ctrl:n,shift:o,meta:i,character:a}=function(e){let t=!1,n=!1,o=!1,i=!1,a=null;const s=e.key??"",l=s.split(/-(?!$)/)??[];for(let e=0;e<l.length;e++){const c=e===l.length-1,d=l[e];if(!d)throw new Error("Empty key in shortcut: "+s);if("Alt"===d||!c&&"a"===d)t=!0;else if("Ctrl"===d||"Control"===d||!c&&"c"===d)n=!0;else if("Shift"===d||!c&&"s"===d)o=!0;else if("Meta"===d||"Cmd"===d||!c&&"m"===d)i=!0;else if("Mod"===d)r.c?i=!0:n=!0;else{if("Space"===d&&(a=" "),!c)throw new Error("Character key must be last in shortcut: "+s);if(1!==d.length)throw new Error(`Invalid key '${d}' in shortcut: ${s}`);if(a)throw new Error("Multiple characters in shortcut: "+s);a=d}}if(!a)throw new Error("No character in shortcut: "+s);return{alt:t,ctrl:n,shift:o,meta:i,character:a}}(e);return r.c?[n?"⌃":"",t?"⌥":"",o?"⇧":"",i?"⌘":"",a.toUpperCase()].join(""):[n?"Ctrl":"",o?"Shift":"",i?"Meta":"",t?"Alt":"",a.toUpperCase()].join(" ")}},7881:(e,t,n)=>{"use strict";n.d(t,{e4:()=>i});const r={monaco:["Monaco","Menlo","Ubuntu Mono","Consolas","monospace"],lucida:["Lucida Console","Source Code Pro","monospace"],opendyslexicmono:["OpenDyslexic Mono","monospace"]},o={compact:1.33,normal:1.6,wide:2},i=e=>{let{fontFamily:t,fontSize:n,lineHeight:i}=e;return{fontFamily:r[t]?.join(","),fontSize:`${n}px`,lineHeight:o[i]}}},8010:(e,t,n)=>{"use strict";n(97107);const r=n(45250),o=n(64347).assert,i=n(65734);let a=null,s=null,l=null,c=null,d=null;class h{static fromRaw(e){if("file"in e)return s.fromRaw(e);if("textOperation"in e||"commentId"in e||"deleteComment"in e)return c.fromRaw(e);if("newPathname"in e)return new l(e.pathname,e.newPathname);if("metadata"in e)return new d(e.pathname,e.metadata);if(r.isEmpty(e))return new a;throw new Error("invalid raw operation "+JSON.stringify(e))}toRaw(){return{}}isNoOp(){return!1}findBlobHashes(e){}async loadFiles(e,t){}async store(e){return this.toRaw()}applyTo(e){o.object(e,"bad snapshot")}canBeComposedWithForUndo(e){return!1}canBeComposedWith(e){return!1}compose(e){throw new Error("not implemented")}static transform(e,t){if(e.isNoOp()||t.isNoOp())return[e,t];function n(n){return n(t,e).reverse()}const r=t instanceof s,o=t instanceof c,a=t instanceof l,b=t instanceof d;if(e instanceof s){if(r)return function(e,t){if(e.getPathname()===t.getPathname())return[h.NO_OP,t];return[e,t]}(e,t);if(a)return u(e,t);if(o)return m(e,t);if(b)return p(e,t);throw new Error("bad op b")}if(e instanceof l){if(r)return n(u);if(a)return function(e,t){const n=e.getPathname(),r=t.getPathname(),o=e.getNewPathname(),i=t.getNewPathname();if(n===r&&o===i)return[h.NO_OP,h.NO_OP];if(n===o&&r===i)return[h.NO_OP,h.NO_OP];if(n===o)return[h.NO_OP,t];if(r===i)return[e,h.NO_OP];if(n===i&&r===o)return[h.removeFile(n),h.removeFile(r)];if(n===r&&o!==i)return[h.NO_OP,h.moveFile(o,i)];if(o===i&&n!==r)return[h.removeFile(n),t];if(n===i&&o!==r)return[h.moveFile(i,o),h.moveFile(r,o)];if(o===r&&n!==i)return[h.moveFile(n,i),h.moveFile(o,i)];return[e,t]}(e,t);if(o)return g(e,t);if(b)return f(e,t);throw new Error("bad op b")}if(e instanceof c){if(r)return n(m);if(a)return n(g);if(o)return function(e,t){if(e.getPathname()===t.getPathname()){const n=i.transform(e.getOperation(),t.getOperation());return[h.editFile(e.getPathname(),n[0]),h.editFile(t.getPathname(),n[1])]}return[e,t]}(e,t);if(b)return O(e,t);throw new Error("bad op b")}if(e instanceof d){if(r)return n(p);if(a)return n(f);if(o)return n(O);if(b)return function(e,t){if(e.getPathname()===t.getPathname())return[h.NO_OP,t];return[e,t]}(e,t);throw new Error("bad op b")}throw new Error("bad op a")}static transformMultiple(e,t){for(let n=0;n<e.length;++n)for(let r=0;r<t.length;++r){const o=h.transform(e[n],t[r]);e[n]=o[0],t[r]=o[1]}}static addFile(e,t){return new s(e,t)}static editFile(e,t){return new c(e,t)}static moveFile(e,t){return new l(e,t)}static removeFile(e){return new l(e,"")}static setFileMetadata(e,t){return new d(e,t)}}function u(e,t){function n(){return new s(t.getNewPathname(),e.getFile().clone())}return e.getPathname()===t.getPathname()?t.isRemoveFile()?[e,h.NO_OP]:[n(),new l(e.getPathname(),t.getNewPathname())]:e.getPathname()===t.getNewPathname()?[n(),new l(t.getPathname(),"")]:[e,t]}function m(e,t){return e.getPathname()===t.getPathname()?[e,h.NO_OP]:[e,t]}function p(e,t){if(e.getPathname()===t.getPathname()){const n=e.getFile().clone();return n.setMetadata(t.getMetadata()),[new s(e.getPathname(),n),t]}return[e,t]}function g(e,t){return e.getPathname()===t.getPathname()?e.isRemoveFile()?[e,h.NO_OP]:[e,h.editFile(e.getNewPathname(),t.getOperation())]:e.getNewPathname()===t.getPathname()?[e,h.NO_OP]:[e,t]}function f(e,t){return e.getPathname()===t.getPathname()?[e,h.setFileMetadata(e.getNewPathname(),t.getMetadata())]:e.getNewPathname()===t.getPathname()?[e,h.NO_OP]:[e,t]}function O(e,t){return[e,t]}e.exports=h,a=n(27673),s=n(87520),l=n(84140),c=n(82927),d=n(63821),h.NO_OP=new a},8164:(e,t,n)=>{"use strict";n.d(t,{oG:()=>g,Rf:()=>f});n(97107);var r=n(14041),o=n(80760),i=n(37939);const a=function(e,t,n,o){const[a,s]=(0,i.A)(e,t,n,o);return(0,r.useEffect)((()=>{s(t)}),[s,t]),[a,s]};var s=n(94234),l=n(88495),c=n(56447),d=n(97536),h=n(70569),u=n(10646);var m=n(31085);const p=(0,r.createContext)(void 0),g=e=>{let{children:t}=e;const n=(0,o.tB)();if(!n)throw new Error("DetachCompileProvider is only available inside LocalCompileProvider");const{animateCompileDropdownArrow:i,autoCompile:g,clearingCache:f,clsiServerId:O,codeCheckFailed:b,compiling:v,deliveryLatencies:w,draft:_,editedSinceCompileStarted:x,error:y,fileList:k,hasChanges:C,hasShortCompileTimeout:S,highlights:Q,isProjectOwner:E,lastCompileOptions:T,logEntries:j,logEntryAnnotations:P,pdfFile:$,pdfViewer:R,position:X,rawLog:A,setAnimateCompileDropdownArrow:q,setAutoCompile:L,setDraft:I,setError:N,setHasLintingError:D,setHighlights:W,setPosition:M,setShowCompileTimeWarning:U,setShowLogs:F,toggleLogs:V,setStopOnFirstError:G,setStopOnValidationError:Z,showLogs:B,showCompileTimeWarning:z,stopOnFirstError:Y,stopOnValidationError:H,stoppedOnFirstError:K,uncompiled:J,validationIssues:ee,firstRenderDone:te,cleanupCompileResult:ne,recompileFromScratch:re,setCompiling:oe,startCompile:ie,stopCompile:ae,setChangedAt:se,clearCache:le,syncToEntry:ce,recordAction:de}=n,[he]=a("animateCompileDropdownArrow",i,"detacher","detached"),[ue]=a("autoCompile",g,"detacher","detached"),[me]=a("clearingCache",f,"detacher","detached"),[pe]=a("clsiServerId",O,"detacher","detached"),[ge]=a("codeCheckFailed",b,"detacher","detached"),[fe]=a("compiling",v,"detacher","detached"),[Oe]=a("deliveryLatencies",w,"detacher","detached"),[be]=a("draft",_,"detacher","detached"),[ve]=a("error",y,"detacher","detached"),[we]=a("fileList",k,"detacher","detached"),[_e]=a("hasChanges",C,"detacher","detached"),[xe]=a("hasShortCompileTimeout",S,"detacher","detached"),[ye]=a("highlights",Q,"detacher","detached"),[ke]=a("isProjectOwner",E,"detacher","detached"),[Ce]=a("lastCompileOptions",T,"detacher","detached"),[Se]=a("logEntries",j,"detacher","detached"),[Qe]=a("logEntryAnnotations",P,"detacher","detached"),[Ee]=a("pdfFile",$,"detacher","detached"),[Te]=a("pdfViewer",R,"detacher","detached"),[je]=a("position",X,"detacher","detached"),[Pe]=a("rawLog",A,"detacher","detached"),[$e]=a("showCompileTimeWarning",z,"detacher","detached"),[Re]=a("showLogs",B,"detacher","detached"),[Xe]=a("stopOnFirstError",Y,"detacher","detached"),[Ae]=a("stopOnValidationError",H,"detacher","detached"),[qe]=a("stoppedOnFirstError",K,"detacher","detached"),[Le]=a("uncompiled",J,"detacher","detached"),[Ie]=a("editedSinceCompileStarted",x,"detacher","detached"),[Ne]=a("validationIssues",ee,"detacher","detached"),De=(0,s.A)("setAnimateCompileDropdownArrow",q,"detached","detacher"),We=(0,s.A)("setAutoCompile",L,"detached","detacher"),Me=(0,s.A)("setDraft",I,"detached","detacher"),Ue=(0,s.A)("setError",N,"detacher","detached"),Fe=(0,s.A)("setPosition",M,"detached","detacher"),Ve=(0,s.A)("firstRenderDone",te,"detached","detacher"),Ge=(0,s.A)("setHasLintingError",D,"detacher","detached"),Ze=(0,s.A)("setHighlights",W,"detacher","detached"),Be=(0,s.A)("setShowCompileTimeWarning",U,"detached","detacher"),ze=(0,s.A)("setShowLogs",F,"detached","detacher"),Ye=(0,s.A)("toggleLogs",V,"detached","detacher"),He=(0,s.A)("setStopOnFirstError",G,"detached","detacher"),Ke=(0,s.A)("setStopOnValidationError",Z,"detached","detacher"),Je=(0,s.A)("cleanupCompileResult",ne,"detached","detacher"),et=(0,s.A)("recompileFromScratch",re,"detached","detacher"),tt=(0,s.A)("setCompiling",oe,"detacher","detached"),nt=(0,s.A)("startCompile",ie,"detached","detacher"),rt=(0,s.A)("stopCompile",ae,"detached","detacher"),ot=(0,s.A)("setChangedAt",se,"detached","detacher"),it=(0,s.A)("clearCache",le,"detached","detacher"),at=(0,s.A)("sync-to-entry",ce,"detached","detacher"),st=(0,s.A)("record-action",de,"detached","detacher");(0,l.A)(nt,ot),(e=>{const{pdfLayout:t,setView:n}=(0,c.LV)(),o=(0,d.G)(),{openTab:i}=(0,h.h)(),{hasPremiumSuggestion:a}=(0,u.mi)(),s=(0,r.useCallback)((r=>{const{id:o,suggestFix:i}=r.detail;e(!0),"flat"===t&&n("pdf"),window.setTimeout((()=>{const e=document.querySelector(`.log-entry[data-log-entry-id="${o}"]`);if(e&&(e.scrollIntoView({block:"start",inline:"nearest"}),i)){const t=document.querySelector('button[data-action="assistant-paywall-show"]');t?(t.scrollIntoView({block:"start",inline:"nearest"}),t.click()):e.querySelector('button[data-action="suggest-fix"]')?.click()}}))}),[t,n,e]),l=(0,r.useCallback)((e=>{const{id:t,suggestFix:n}=e.detail;i("errors"),window.setTimeout((()=>{const e=document.querySelector(`.log-entry[data-log-entry-id="${t}"]`);if(e){e.scrollIntoView({block:"start",inline:"nearest"});const t=e.querySelector('button[data-action="expand-collapse"]');"true"===t?.dataset.collapsed&&t.click(),n&&(a?e.querySelector('button[data-action="suggest-fix"]')?.click():window.dispatchEvent(new CustomEvent("aiAssist:showPaywall",{detail:{origin:"suggest-fix"}})))}}))}),[i,a]);(0,r.useEffect)((()=>{const e=e=>{o?l(e):s(e)};return window.addEventListener("editor:view-compile-log-entry",e),()=>{window.removeEventListener("editor:view-compile-log-entry",e)}}),[l,s,o])})(ze);const lt=(0,r.useMemo)((()=>({animateCompileDropdownArrow:he,autoCompile:ue,clearCache:it,clearingCache:me,clsiServerId:pe,codeCheckFailed:ge,compiling:fe,deliveryLatencies:Oe,draft:be,editedSinceCompileStarted:Ie,error:ve,fileList:we,hasChanges:_e,hasShortCompileTimeout:xe,highlights:ye,isProjectOwner:ke,lastCompileOptions:Ce,logEntryAnnotations:Qe,logEntries:Se,pdfDownloadUrl:Ee?.pdfDownloadUrl,pdfFile:Ee,pdfUrl:Ee?.pdfUrl,pdfViewer:Te,position:je,rawLog:Pe,recompileFromScratch:et,setAnimateCompileDropdownArrow:De,setAutoCompile:We,setCompiling:tt,setDraft:Me,setError:Ue,setHasLintingError:Ge,setHighlights:Ze,setPosition:Fe,setShowCompileTimeWarning:Be,setShowLogs:ze,toggleLogs:Ye,setStopOnFirstError:He,setStopOnValidationError:Ke,showLogs:Re,showCompileTimeWarning:$e,startCompile:nt,stopCompile:rt,stopOnFirstError:Xe,stopOnValidationError:Ae,stoppedOnFirstError:qe,uncompiled:Le,validationIssues:Ne,firstRenderDone:Ve,setChangedAt:ot,cleanupCompileResult:Je,syncToEntry:at,recordAction:st})),[he,ue,it,me,pe,ge,fe,Oe,be,Ie,ve,we,_e,xe,ye,ke,Ce,Qe,Se,Ee,Te,je,Pe,et,De,We,tt,Me,Ue,Ge,Ze,Fe,Be,ze,Ye,He,Ke,$e,Re,nt,rt,Xe,Ae,qe,Le,Ne,Ve,ot,Je,at,st]);return(0,m.jsx)(p.Provider,{value:lt,children:t})};function f(){const e=(0,r.useContext)(p);if(!e)throw new Error("useDetachCompileContext is ony available inside DetachCompileProvider");return e}},10048:(e,t,n)=>{"use strict";n(82438),n(50020);const r=n(64347).assert,o=n(99568),i=n(35078),a=n(8010);class s{constructor(e,t,n,i){r.integer(e,"bad baseVersion"),r.array.of.object(t,"bad operations"),r.maybe.boolean(n,"ChangeRequest: bad untransformable"),i=i||[],o.assertV1(i,"bad authors"),this.authors=i,this.baseVersion=e,this.operations=t,this.untransformable=n||!1}toRaw(){return{baseVersion:this.baseVersion,operations:this.operations.map((function(e){return e.toRaw()})),untransformable:this.untransformable,authors:this.authors}}static fromRaw(e){return r.array.of.object(e.operations,"bad raw.operations"),new s(e.baseVersion,e.operations.map(a.fromRaw),e.untransformable,e.authors)}getBaseVersion(){return this.baseVersion}isUntransformable(){return this.untransformable}makeChange(e){return new i(this.operations,e,this.authors)}}e.exports=s},10228:(e,t,n)=>{"use strict";n.d(t,{F:()=>A});n(14041);var r=n(99806),o=n(16896),i=n(8164),a=n(93588),s=n(68543),l=n(55937),c=n(96283),d=n(10646),h=n(46039),u=n(60440),m=n(11326),p=n(89997),g=n(78494),f=n(56447),O=n(80760),b=n(13877),v=n(83096),w=n(52036),_=n(54830),x=n(58516),y=n(86316),k=n(70569),C=n(41416),S=n(94012),Q=n(65982),E=n(17112),T=n(85960),j=n(59722),P=n(66020),$=n(86040),R=n(7707),X=n(31085);const A=e=>{let{children:t,providers:n={}}=e;const A={ChatProvider:r.k_,ConnectionProvider:o.Sg,DetachCompileProvider:i.oG,DetachProvider:a.lt,EditorManagerProvider:s.al,EditorOpenDocProvider:l.d9,EditorPropertiesProvider:c.Ef,EditorProvider:d.zz,EditorViewProvider:h.aO,FileTreeDataProvider:u._,FileTreeOpenProvider:m.Q,FileTreePathProvider:p.rL,IdeReactProvider:g.HA,LayoutProvider:f.UY,LocalCompileProvider:O.eS,MetadataProvider:b.Xj,ModalsContextProvider:v.B,OnlineUsersProvider:w.VH,OutlineProvider:_.i,PermissionsProvider:x.wy,ProjectProvider:y.Np,ProjectSettingsProvider:C.Gn,RailProvider:k.S,ReferencesProvider:S.iH,SnapshotProvider:Q.yg,SplitTestProvider:E.M6,UserProvider:T.vu,UserSettingsProvider:P.wI,IdeRedesignSwitcherProvider:$.Wz,CommandRegistryProvider:R.KA,UserFeaturesProvider:j.Wg,...n};return(0,X.jsx)(A.SplitTestProvider,{children:(0,X.jsx)(A.ModalsContextProvider,{children:(0,X.jsx)(A.ConnectionProvider,{children:(0,X.jsx)(A.ProjectProvider,{children:(0,X.jsx)(A.IdeReactProvider,{children:(0,X.jsx)(A.UserProvider,{children:(0,X.jsx)(A.UserSettingsProvider,{children:(0,X.jsx)(A.SnapshotProvider,{children:(0,X.jsx)(A.DetachProvider,{children:(0,X.jsx)(A.EditorPropertiesProvider,{children:(0,X.jsx)(A.EditorViewProvider,{children:(0,X.jsx)(A.EditorOpenDocProvider,{children:(0,X.jsx)(A.EditorProvider,{children:(0,X.jsx)(A.FileTreeDataProvider,{children:(0,X.jsx)(A.FileTreePathProvider,{children:(0,X.jsx)(A.ReferencesProvider,{children:(0,X.jsx)(A.UserFeaturesProvider,{children:(0,X.jsx)(A.PermissionsProvider,{children:(0,X.jsx)(A.RailProvider,{children:(0,X.jsx)(A.LayoutProvider,{children:(0,X.jsx)(A.ProjectSettingsProvider,{children:(0,X.jsx)(A.EditorManagerProvider,{children:(0,X.jsx)(A.LocalCompileProvider,{children:(0,X.jsx)(A.DetachCompileProvider,{children:(0,X.jsx)(A.ChatProvider,{children:(0,X.jsx)(A.FileTreeOpenProvider,{children:(0,X.jsx)(A.OnlineUsersProvider,{children:(0,X.jsx)(A.MetadataProvider,{children:(0,X.jsx)(A.OutlineProvider,{children:(0,X.jsx)(A.IdeRedesignSwitcherProvider,{children:(0,X.jsx)(A.CommandRegistryProvider,{children:t})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})}},10646:(e,t,n)=>{"use strict";n.d(t,{mi:()=>p,zz:()=>m});n(97107),n(82438),n(34840);var r=n(14041),o=n(30741),i=n(86316),a=n(93588),s=n(64932),l=n(85960),c=n(14901),d=n(83096),h=n(31085);const u=(0,r.createContext)(void 0),m=e=>{let{children:t}=e;const{id:n,featureUsage:m}=(0,l.ur)(),{role:p}=(0,a.Q2)(),{showGenericMessageModal:g}=(0,d.T)(),{features:f,projectId:O,project:b,name:v,updateProject:w}=(0,i.Om)(),{owner:_,members:x}=b||{},y=(0,r.useMemo)((()=>{const e=(0,s.A)("ol-brandVariation");return e&&{logoImgUrl:e.logo_url,brandVariationName:e.name,brandVariationId:e.id,brandId:e.brand_id,brandVariationHomeUrl:e.home_url,publishGuideHtml:e.publish_guide_html,partner:e.partner,brandedMenu:e.branded_menu,submitBtnHtml:e.submit_button_html,submitBtnHtmlNoBreaks:e.submit_button_html_no_br}}),[]),[k,C]=(0,r.useState)((()=>(0,s.A)("ol-inactiveTutorials")||[])),[S,Q]=(0,r.useState)(null),[E,T]=(0,r.useState)((()=>Boolean(m?.aiErrorAssistant&&m?.aiErrorAssistant.remainingUsage>0))),[j,P]=(0,r.useState)((()=>m?.aiErrorAssistant?.resetDate?new Date(m.aiErrorAssistant.resetDate):new Date)),$=(0,r.useMemo)((()=>Boolean(x?.some((e=>e._id===n&&(e.pendingEditor||e.pendingReviewer))))),[x,n]),R=(0,r.useCallback)((e=>{C([...k,e])}),[k]),X=(0,r.useCallback)((e=>{const t=v;e!==t&&(w({name:e}),(0,c.Y)(O,{name:e}).catch((e=>{w({name:t});const{data:n,status:r}=e;g("Error renaming project",400===r?n:"Please try again in a moment")})))}),[v,w,O,g]),{setTitle:A}=(0,o.A)();(0,r.useEffect)((()=>{const e=[];"detached"===p&&e.push("[PDF]"),v&&(e.push(v),e.push("-")),e.push("Online LaTeX Editor"),e.push((0,s.A)("ol-ExposedSettings").appName);const t=e.join(" ");A(t)}),[v,A,p]);const q=(0,r.useCallback)((e=>{window.dispatchEvent(new CustomEvent("editor:insert-symbol",{detail:e}))}),[]),[L,I]=(0,r.useState)(null),N=(0,r.useMemo)((()=>({cobranding:y,hasPremiumCompile:"priority"===f?.compileGroup,renameProject:X,isProjectOwner:_?._id===n,isRestrictedTokenMember:(0,s.A)("ol-isRestrictedTokenMember"),isPendingEditor:$,insertSymbol:q,inactiveTutorials:k,deactivateTutorial:R,currentPopup:S,setCurrentPopup:Q,hasPremiumSuggestion:E,setHasPremiumSuggestion:T,premiumSuggestionResetDate:j,setPremiumSuggestionResetDate:P,writefullInstance:L,setWritefullInstance:I})),[y,f?.compileGroup,_,n,X,$,q,k,R,S,Q,E,T,j,P,L,I]);return(0,h.jsx)(u.Provider,{value:N,children:t})};function p(){const e=(0,r.useContext)(u);if(!e)throw new Error("useEditorContext is only available inside EditorProvider");return e}},10729:(e,t,n)=>{"use strict";const r=n(64347).assert;class o{constructor(e,t,n){r.number(e,"bad id"),r.string(t,"bad email"),r.string(n,"bad name"),this.id=e,this.email=t,this.name=n}static fromRaw(e){return e?new o(e.id,e.email,e.name):null}toRaw(){return{id:this.id,email:this.email,name:this.name}}getId(){return this.id}getEmail(){return this.email}getName(){return this.name}}e.exports=o},11235:(e,t,n)=>{"use strict";n.d(t,{ZS:()=>qe,Hk:()=>Le,aK:()=>De,KF:()=>Ie,EZ:()=>$e,Tn:()=>Ae});var r=n(57195),o=n(6077),i=n(95646),a=n(82306),s=n(83173),l=(n(82438),n(50020),n(15133)),c=n(79384),d=n(29587);const h=(e,t)=>{const n=new d.KB(e).lineIndent(t);return`${(0,d.EI)(e,n)}\\item `},u=r.Nb.highest(s.w4.of([{key:"Enter",run:e=>{const{state:t}=e;let n=!1;const o=t.changeByRange((e=>{if(e.empty){const{from:o}=e,i=(0,l.rn)(t,o,"ListEnvironment");if(i){const a=t.doc.lineAt(e.from),s=t.doc.lineAt(i.to);if(a.number===s.number-1&&/^\\item(\[])?$/.test(a.text.trim())){const e=i.to+1,o={from:a.from,to:a.to+1,insert:""},s=[o];let l;if(i.parent?.parent?.parent?.parent?.type.is("ListEnvironment")){const n=h(t,e);s.push({from:e,insert:n+"\n"}),l=r.OF.cursor(e+n.length)}else l=r.OF.cursor(e);return n=!0,{changes:s,range:l.map(t.changes(o))}}let l="\n"+h(t,o);const c=e=>{const n=t.doc.lineAt(e),r=t.sliceDoc(e,n.to).match(/^(\s+)/);return r?r[1].length:0};let d;return"description"===((e,t)=>{const n=t.getChild("BeginEnv")?.getChild("EnvNameGroup")?.getChild("ListEnvName"),r=t.getChild("EndEnv")?.getChild("EnvNameGroup")?.getChild("ListEnvName");if(n&&r)return e.sliceDoc(n.from,n.to).trim()})(t,i)?(l=l.replace(/\\item $/,"\\item[] "),d=o+l.length-2):d=o+l.length+c(o),n=!0,{changes:{from:o,insert:l},range:r.OF.cursor(d,-1)}}if((0,l.rn)(t,o,"SectioningCommand")){const e=t.doc.lineAt(o).number+1;if(e<=t.doc.lines){const o=t.doc.line(e);return n=!0,{range:r.OF.cursor(o.from)}}}}return{range:e}}));return n&&e.dispatch(o,{scrollIntoView:!0,userEvent:"input"}),n}},{key:"Mod-]",preventDefault:!0,run:c.NZ},{key:"Mod-[",preventDefault:!0,run:c.ji},{key:"Tab",preventDefault:!0,run:e=>(0,c.kv)(e.state)&&(0,c.NZ)(e)},{key:"Shift-Tab",preventDefault:!0,run:c.ji}]));var m=n(14791),p=n(38188),g=n(41235);const f=r.$t.transactionFilter.of((e=>{if(e.selection){let t=e.selection;for(const[n,o]of e.selection.ranges.entries())if(o.empty){const i=(0,d.mv)(e.state).resolveInner(o.anchor,1),a=O(i,e,o,n);null!==a&&(t=t.replaceRange(r.OF.cursor(a,o.assoc,o.bidiLevel??void 0,o.goalColumn),n))}if(t!==e.selection)return[e,{selection:t}]}return e})),O=(e,t,n,r)=>{let o;if(e.type.is("Item")?o=e:e.type.is("ItemCtrlSeq")?o=e.parent:e.type.is("Whitespace")&&e.nextSibling?.type.is("Command")&&(o=e.nextSibling?.firstChild?.firstChild),!o?.type.is("Item"))return null;if(t.isUserEvent("select.pointer"))return o.to;const i=t.startState.selection.ranges[r]?.head;return n.head<i?Math.max(t.state.doc.lineAt(n.anchor).from-1,1):o.to};n(97107),n(12266);var b=n(47143),v=n(16851),w=n(25873),_=n(14041),x=n(89135),y=n(97434),k=n(89139),C=n(77631),S=n(69954),Q=n(96713),E=n(64735),T=n(32424),j=n(94857),P=n(31085);const $=e=>{let{view:t,insertPastedContent:n,pastedContent:r,formatted:o}=e;const[i,a]=(0,_.useState)(!1),s=(0,_.useRef)(null),{t:l}=(0,y.Bd)(),c=(0,_.useRef)(!1);(0,k.A)("keydown",(0,_.useCallback)((e=>{c.current=e.shiftKey}),[]));const d=(0,_.useRef)({"pasted-content-button-shown":!1,"pasted-content-button-click":!1}),h=(0,_.useCallback)((e=>{d.current[e]||(d.current[e]=!0,(0,S._)(e))}),[]);return(0,_.useEffect)((()=>{h(i?"pasted-content-button-click":"pasted-content-button-shown")}),[i,h]),(0,_.useEffect)((()=>{if(i){const e=new AbortController;return t.dom.addEventListener("paste",(e=>{e.preventDefault(),e.stopPropagation(),n(t,r,!c.current),a(!1)}),{signal:e.signal,capture:!0}),()=>{e.abort()}}}),[t,i,r,n]),(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)("button",{ref:s,type:"button",id:"pasted-content-menu-button","aria-haspopup":"true","aria-expanded":i,"aria-controls":"pasted-content-menu","aria-label":l("paste_options"),className:"ol-cm-pasted-content-menu-toggle",tabIndex:0,onMouseDown:e=>e.preventDefault(),onClick:()=>a((e=>!e)),style:{userSelect:"none"},children:[(0,P.jsx)(Q.A,{type:"content_copy"}),(0,P.jsx)(Q.A,{type:"expand_more"})]}),i&&(0,P.jsx)(E.A,{show:!0,onHide:()=>a(!1),transition:!1,container:t.scrollDOM,containerPadding:0,placement:"bottom",rootClose:!0,target:s?.current,children:(0,P.jsx)(T.A,{id:"popover-pasted-content-menu",className:"ol-cm-pasted-content-menu-popover",children:(0,P.jsxs)("div",{className:"ol-cm-pasted-content-menu",id:"pasted-content-menu",role:"menu","aria-labelledby":"pasted-content-menu-button",children:[(0,P.jsxs)(R,{onClick:()=>{n(t,r,!0),(0,S._)("pasted-content-menu-click",{action:"paste-with-formatting"}),a(!1)},children:[(0,P.jsx)("span",{style:{visibility:o?"visible":"hidden"},children:(0,P.jsx)(x.A,{type:"check",fw:!0})}),(0,P.jsx)("span",{className:"ol-cm-pasted-content-menu-item-label",children:l("paste_with_formatting")}),(0,P.jsx)("span",{className:"ol-cm-pasted-content-menu-item-shortcut",children:j.c?"⌘V":"Ctrl+V"})]}),(0,P.jsxs)(R,{onClick:()=>{n(t,r,!1),(0,S._)("pasted-content-menu-click",{action:"paste-without-formatting"}),a(!1)},children:[(0,P.jsx)("span",{style:{visibility:o?"hidden":"visible"},children:(0,P.jsx)(x.A,{type:"check",fw:!0})}),(0,P.jsx)("span",{className:"ol-cm-pasted-content-menu-item-label",children:l("paste_without_formatting")}),(0,P.jsx)("span",{className:"ol-cm-pasted-content-menu-item-shortcut",children:j.c?"⇧⌘V":"Ctrl+Shift+V"})]}),(0,P.jsxs)(R,{style:{borderTop:"1px solid #eee"},onClick:()=>{window.open("https://docs.google.com/forms/d/e/1FAIpQLSc7WcHrwz9fnCkUP5hXyvkG3LkSYZiR3lVJWZ0o6uqNQYrV7Q/viewform","_blank"),(0,S._)("pasted-content-menu-click",{action:"give-feedback"}),a(!1)},children:[(0,P.jsx)(C.n,{id:"paste-html-feedback",url:"https://docs.google.com/forms/d/e/1FAIpQLSc7WcHrwz9fnCkUP5hXyvkG3LkSYZiR3lVJWZ0o6uqNQYrV7Q/viewform"}),(0,P.jsx)("span",{className:"ol-cm-pasted-content-menu-item-label",children:l("give_feedback")})]})]})})})]})},R=e=>{let{children:t,...n}=e;return(0,P.jsx)("button",{...n,type:"button",role:"menuitem",className:"ol-cm-pasted-content-menu-item",children:t})};var X=n(17112);const A=r.Pe.define(),q=(e,t)=>{let{latex:n,text:o}=t;return e.state.changeByRange((t=>(0,v.rn)(e.state,t.anchor,"$MathContainer")?{range:r.OF.cursor(t.from+o.length),changes:{from:t.from,to:t.to,insert:o}}:{range:r.OF.cursor(t.from+n.length),changes:{from:t.from,to:t.to,insert:n}}))},L=(e,t)=>({effects:A.of({content:e,formatted:t})}),I=s.Lz.baseTheme({".ol-cm-pasted-content-menu-toggle":{background:"none",borderRadius:"8px",border:"1px solid rgb(125, 125, 125)",color:"inherit",margin:"0 4px",opacity:"0.7","&:hover":{opacity:"1"},"& .material-symbols":{verticalAlign:"text-bottom"}},".ol-cm-pasted-content-menu-popover":{backgroundColor:"#fff",maxWidth:"unset","& .popover-content":{padding:0},"& .popover-body":{color:"inherit",padding:0},"& .popover-arrow::after":{borderBottomColor:"#fff"}},"&dark .ol-cm-pasted-content-menu-popover":{background:"rgba(0, 0, 0)"},".ol-cm-pasted-content-menu":{display:"flex",flexDirection:"column",boxSizing:"border-box",fontSize:"14px",fontFamily:"var(--font-sans)"},".ol-cm-pasted-content-menu-item":{color:"inherit",border:"none",background:"none",padding:"8px 16px",width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",whiteSpace:"nowrap",gap:"12px",'&[aria-disabled="true"]':{color:"rgba(125, 125, 125, 0.5)"},"&:hover":{backgroundColor:"rgba(125, 125, 125, 0.2)"}},".ol-cm-pasted-content-menu-item-label":{flex:1,textAlign:"left"},".ol-cm-pasted-content-menu-item-shortcut":{textAlign:"right"}}),N=r.sU.define({create:()=>null,update(e,t){if(t.docChanged)e=null;else for(const n of t.effects)n.is(A)&&(e={...n.value,selection:t.state.selection});return e},provide:e=>[s.Lz.decorations.compute([e],(t=>{const n=t.field(e);if(!n)return s.NZ.none;const r=[],{content:o,selection:i,formatted:a}=n;return r.push(s.NZ.widget({widget:new D(o,a),side:1}).range(i.main.to)),s.NZ.set(r,!0)})),I]});class D extends s.xO{constructor(e,t){super(),this.pastedContent=e,this.formatted=t}toDOM(e){const t=document.createElement("span");return(0,w.H)(t).render((0,P.jsx)(X.M6,{children:(0,P.jsx)($,{insertPastedContent:this.insertPastedContent,view:e,formatted:this.formatted,pastedContent:this.pastedContent})})),t}insertPastedContent(e,t,n){(0,b.tN)(e),e.dispatch(q(e,{latex:n?t.latex:t.text,text:t.text})),e.dispatch(L(t,n)),e.focus()}eq(e){return e.pastedContent===this.pastedContent&&e.formatted===this.formatted}}var W=n(60961);n(69033),n(68903),n(21018),n(1415),n(4448),n(58871),n(56539);const M=new Set(["DL","FIELDSET","FIGURE","HEAD","OL","TABLE","TBODY","TFOOT","THEAD","TR","UL"]),U=e=>M.has(e.nodeName),F=new Set(["ADDRESS","ARTICLE","ASIDE","BLOCKQUOTE","BODY","CANVAS","DD","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","LI","MAIN","NAV","NOSCRIPT","OL","P","PRE","SECTION","TABLE","TBODY","TD","TFOOT","TH","THEAD","TR","UL","VIDEO"]),V=e=>F.has(e.nodeName),G=new Set(["A","ABBR","ACRONYM","B","BIG","CITE","DEL","EM","I","INS","SMALL","SPAN","STRONG","SUB","SUP","TEXTAREA","TIME","TT"]),Z=e=>G.has(e.nodeName),B=(new Set(["CODE","PRE"]),new Set(["TD","TH","CANVAS","DT","DD","HR"])),z=e=>!B.has(e.nodeName)&&!e.hasChildNodes(),Y=e=>e.nodeType===Node.TEXT_NODE,H=e=>e.nodeType===Node.ELEMENT_NODE,K=[r.Nb.highest(s.Lz.domEventHandlers({paste(e,t){const{clipboardData:n}=e;if(!n)return!1;if(!n.types.includes("text/html"))return!1;if(n.types.includes("application/vnd.code.copymetadata")||n.types.includes("vscode-editor-data"))return!1;const r=n.getData("text/html").trim(),o=n.getData("text/plain").trim();if(0===r.length)return!1;try{const e=new DOMParser,{documentElement:i}=e.parseFromString(r,"text/html");if(n.files.length>0&&!ee(i)&&!te(i))return!1;const a=i.querySelector("body");if(!a)return!1;if(J(a))return!1;const s=ne(a);return(s!==o||0!==n.files.length)&&(t.dispatch(q(t,{latex:s,text:o})),t.dispatch(L({latex:s,text:o},!0)),!0)}catch(e){return W.$.error(e),!1}}})),N],J=e=>{const t=(e=>{let t;return t=e.querySelector("code"),t||(t=e.querySelector("pre"),t?.style.fontFamily.includes("monospace")?t:null)})(e);return t?.textContent?.trim()===e.textContent?.trim()},ee=e=>{const t=e.querySelector('meta[name="ProgId"]');return t&&t.content.trim().length>0},te=e=>{const t=e.querySelector("body");return t&&1===t.childElementCount&&"TABLE"===t.firstElementChild.nodeName},ne=e=>{((e,t)=>{for(const n of e.querySelectorAll(t))n.remove()})(e,"style");let t=null,n=null;do{t=e.textContent,ie(e),oe(e),n=e.textContent}while(t!==n);me(e),ue(e),ce(e),de(e);const r=e.textContent;return r?r.replaceAll("​","").replaceAll(/\n{2,}/g,"\n\n").replaceAll(/(^\n+|\n+$)/g,"\n").replaceAll("\t","    "):""},re=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];for(const n of e.childNodes)if(Y(n)){let e=n.textContent;t&&(e=e.replace(/^\s+/,"")),""===e?n.remove():(n.textContent=e,t=/\s$/.test(e))}else t=Z(n)?re(n,t):!!V(n);return t},oe=e=>{re(e);const t=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,(e=>H(e)&&le(e)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT));for(let e=t.nextNode();e;e=t.nextNode()){if(U(e))for(const t of e.childNodes)Y(t)&&t.remove();V(e)&&(re(e),z(e)&&e.remove())}},ie=e=>{const t=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,(e=>H(e)&&le(e)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT));for(let e=t.nextNode();e;e=t.nextNode()){const t=e.textContent;null!==t&&(/^\s+$/.test(t)?e.textContent=" ":e.textContent=t.replaceAll(/[\n\r\f\t \u2028\u2029]+/g," "))}},ae=/(^|[^\\])([#$%&~_^\\{}])/g,se=(e,t,n)=>("\\"===n&&(n="textbackslash{}"),`${t}\\${n}`),le=e=>"CODE"===e.nodeName||"PRE"===e.nodeName&&e.style.fontFamily.includes("monospace"),ce=e=>{const t=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT,(e=>H(e)&&le(e)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT));for(let e=t.nextNode();e;e=t.nextNode())if(Y(e)){const t=e.textContent;t&&(e.textContent=t.replaceAll(ae,se))}},de=e=>{for(const t of Ee)for(const n of e.querySelectorAll(t.selector))if(!t.match||t.match(n)){if(t.start){const e=document.createTextNode(t.start(n));t.inside?n.prepend(e):n.before(e)}if(t.end){const e=document.createTextNode(t.end(n));t.inside?n.append(e):n.after(e)}}},he=new Map([["\\","\\\\"],["#","\\#"],["%","\\%"],["{","%7B"],["}","%7D"]]),ue=e=>{for(const t of e.querySelectorAll("ol,ul"))if(1===t.childElementCount){const e=document.createElement("div");e.append(...t.firstElementChild.childNodes),t.before("\n",e,"\n"),t.remove()}},me=e=>{for(const t of e.querySelectorAll("table")){const e=document.createElement("div");e.className="ol-table-wrap",t.after(e);const n=t.querySelector("caption");n&&e.append(n),e.append(t);for(const e of t.querySelectorAll("th[rowspan],td[rowspan]")){const t=Number(e.getAttribute("rowspan")||"1"),n=Number(e.getAttribute("colspan")||"1");let r=e.closest("tr");if(r){let o=0;for(const t of r.cells){if(t===e)break;o+=Number(t.getAttribute("colspan")||"1")}for(let e=1;e<t;e++){const e=r?.nextElementSibling;if(!pe(e))break;let t;r=e;let i=0;for(const e of r.cells){if(i===o){t=e;break}i+=Number(e.getAttribute("colspan")||"1")}const a=Array.from({length:n},(()=>document.createElement("td")));t?t.before(...a):r.append(...a)}}}}},pe=e=>"TR"===e?.nodeName,ge=new Map([["left","l"],["center","c"],["right","r"]]),fe=e=>Math.max(0,((e,t)=>{const n=[];for(let r=e.parentElement?.closest(t);r;r=r.parentElement?.closest(t))n.push(r);return n})(e,"ul,ol").length),Oe="    ",be=e=>e?Oe.repeat(fe(e)):"",ve=e=>{let{selector:t,...n}=e;return{selector:t,...n}},we=["H1","H2","H3","H4","H5","H6"],_e=e=>Boolean(e.textContent&&e.textContent.trim().length>0),xe=e=>!!e&&"none"!==e&&"hidden"!==e,ye=(e,t)=>{if(xe(e.style[t]))return!0;return[...e.querySelectorAll("th,td")].every((e=>xe(e.style[t])))},ke=e=>Se(e.parentElement)?"\n":"\n\n",Ce=e=>0===fe(e)?"\n":"",Se=e=>null!==e&&((e=>null!==e&&Qe.includes(e.nodeName))(e)||"LI"===e.nodeName),Qe=["OL","UL"],Ee=[ve({selector:"b",match:e=>!e.style.fontWeight&&!(e=>e&&we.includes(e.nodeName))(e.parentElement)&&_e(e),start:()=>"\\textbf{",end:()=>"}"}),ve({selector:"*",match:e=>("bold"===e.style.fontWeight||parseInt(e.style.fontWeight)>=700)&&_e(e),start:()=>"\\textbf{",end:()=>"}",inside:!0}),ve({selector:"strong",match:e=>!e.style.fontWeight&&_e(e),start:()=>"\\textbf{",end:()=>"}"}),ve({selector:"i",match:e=>!e.style.fontStyle&&_e(e),start:()=>"\\textit{",end:()=>"}"}),ve({selector:"*",match:e=>"italic"===e.style.fontStyle&&_e(e),start:()=>"\\textit{",end:()=>"}",inside:!0}),ve({selector:"em",match:e=>!e.style.fontStyle&&_e(e),start:()=>"\\textit{",end:()=>"}"}),ve({selector:"sup",match:e=>!e.style.verticalAlign&&_e(e),start:()=>"\\textsuperscript{",end:()=>"}"}),ve({selector:"span",match:e=>"super"===e.style.verticalAlign&&_e(e),start:()=>"\\textsuperscript{",end:()=>"}"}),ve({selector:"sub",match:e=>!e.style.verticalAlign&&_e(e),start:()=>"\\textsubscript{",end:()=>"}"}),ve({selector:"span",match:e=>"sub"===e.style.verticalAlign&&_e(e),start:()=>"\\textsubscript{",end:()=>"}"}),ve({selector:"a",match:e=>!!e.href&&_e(e),start:e=>`\\href{${(e=>e.replaceAll(/[\\#%{}]/g,(e=>{const t=he.get(e);if(!t)throw new Error(`No replacement found for ${e}`);return t})))(e.href)}}{`,end:()=>"}"}),ve({selector:"h1",match:e=>!e.closest("table")&&_e(e),start:()=>"\n\n\\section{",end:()=>"}\n\n"}),ve({selector:"h2",match:e=>!e.closest("table")&&_e(e),start:()=>"\n\n\\subsection{",end:()=>"}\n\n"}),ve({selector:"h3",match:e=>!e.closest("table")&&_e(e),start:()=>"\n\n\\subsubsection{",end:()=>"}\n\n"}),ve({selector:"h4",match:e=>!e.closest("table")&&_e(e),start:()=>"\n\n\\paragraph{",end:()=>"}\n\n"}),ve({selector:"h5",match:e=>!e.closest("table")&&_e(e),start:()=>"\n\n\\subparagraph{",end:()=>"}\n\n"}),ve({selector:"br",match:e=>!e.closest("table"),start:()=>"\n\n"}),ve({selector:"code",match:e=>"PRE"!==e.parentElement?.nodeName&&_e(e),start:()=>"\\verb|",end:()=>"|"}),ve({selector:"pre > code",match:e=>_e(e),start:()=>"\n\n\\begin{verbatim}\n",end:()=>"\n\\end{verbatim}\n\n"}),ve({selector:"pre",match:e=>e.style.fontFamily.includes("monospace")&&"CODE"!==e.firstElementChild?.nodeName&&_e(e),start:()=>"\n\n\\begin{verbatim}\n",end:()=>"\n\\end{verbatim}\n\n"}),ve({selector:".ol-table-wrap",start:()=>"\n\n\\begin{table}\n\\centering\n",end:()=>"\n\\end{table}\n\n"}),ve({selector:"table",start:e=>`\n\\begin{tabular}{${(e=>{const t=[],n=e.querySelectorAll("tr");for(const e of n){const n=[...e.childNodes].filter((e=>"TD"===e.nodeName||"TH"===e.nodeName));let r=0;for(const e of n){const n=Number(e.getAttribute("colspan")??1),{textAlign:o,borderLeftStyle:i,borderRightStyle:a}=e.style;for(let e=0;e<n;e++)(void 0===t[r+e]||1===n&&t[r+e].inferred)&&(t[r+e]={alignment:o,borderLeft:xe(i),borderRight:xe(a),inferred:n>1});r+=n}}for(let e=0;e<=t.length;e++){const n=t[e]||{alignment:"left",borderLeft:!1,borderRight:!1};n.borderLeft&&e>0&&t[e-1]?.borderRight&&(n.borderLeft=!1)}return t.flatMap((e=>[e.borderLeft?"|":"",ge.get(e.alignment)??"l",e.borderRight?"|":""])).filter(Boolean).join(" ")})(e)}}`,end:()=>"\\end{tabular}\n"}),ve({selector:"thead",start:()=>"\n",end:()=>"\n"}),ve({selector:"tfoot",start:()=>"\n",end:()=>"\n"}),ve({selector:"tbody",start:()=>"\n",end:()=>"\n"}),ve({selector:"tr",start:e=>ye(e,"borderTopStyle")?"\\hline\n":"",end:e=>ye(e,"borderBottomStyle")&&!((e,t)=>{const{nextElementSibling:n}=e;return(e=>"TR"===e?.nodeName)(n)&&ye(n,t)})(e,"borderTopStyle")?"\n\\hline\n":"\n"}),ve({selector:"tr > td, tr > th",start:e=>{let t="";const n=e.getAttribute("colspan");n&&Number(n)>1&&(t+=(e=>{const{textAlign:t,borderLeftStyle:n,borderRightStyle:r}=e.style,o=Number(e.getAttribute("colspan")||1),i=ge.get(t)??"l";return`\\multicolumn{${o}}{${xe(n)?"|":""}${i}${xe(r)?"|":""}}{`})(e));const r=e.getAttribute("rowspan");return r&&Number(r)>1&&(t+=(e=>`\\multirow{${Number(e.getAttribute("rowspan")||1)}}{*}{`)(e)),t},end:e=>{let t="";const n=e.getAttribute("rowspan");n&&Number(n)>1&&(t+="}");const r=e.getAttribute("colspan");r&&Number(r)>1&&(t+="}");const o=e.parentElement;return t+(o.cells.item(o.cells.length-1)===e?" \\\\":" & ")}}),ve({selector:"caption",start:()=>"\n\n\\caption{",end:()=>"}\n\n"}),ve({selector:"ul",start:e=>`${ke(e)}${be(e)}\\begin{itemize}`,end:e=>`\n${be(e)}\\end{itemize}${Ce(e)}`}),ve({selector:"ol",start:e=>`${ke(e)}${be(e)}\\begin{enumerate}`,end:e=>`\n${be(e)}\\end{enumerate}${Ce(e)}`}),ve({selector:"li",start:e=>`\n${be(e.parentElement)}${Oe}\\item `}),ve({selector:"p",match:e=>!!_e(e)&&(!e.closest("li")&&!e.closest("table")||"P"===e.nextElementSibling?.nodeName),end:()=>"\n\n"}),ve({selector:"blockquote",start:()=>"\n\n\\begin{quote}\n",end:()=>"\n\\end{quote}\n\n"})];var Te=n(44015),je=n(53969);const Pe=new r.xx,$e=r.Pe.define(),Re=r.sU.define({create:()=>!1,update(e,t){for(const e of t.effects)if(e.is($e))return e.value;return e}}),Xe=e=>e.visual?Me(e):[],Ae=e=>[Re.init((()=>e.visual)),Pe.of(Xe(e))],qe=e=>e.state.field(Re,!1)||!1,Le=e=>({effects:[$e.of(e.visual),Pe.reconfigure(Xe(e))]}),Ie=(e,t)=>{const n=new r.xx,o=e=>e?[]:t;return[n.of(o(e)),r.$t.transactionExtender.of((e=>{for(const t of e.effects)if(t.is($e))return{effects:n.reconfigure(o(t.value))};return null}))]},Ne=new r.xx,De=[Ne.of([s.Lz.editable.of(!1)]),s.Z9.define((e=>{const t=()=>{e.dispatch({effects:Ne.reconfigure([s.Lz.editorAttributes.of({class:"ol-cm-parsed"}),s.Lz.editable.of(!0)])},(0,g.X)()),e.focus()};if((0,d.mv)(e.state).length===e.state.doc.length)return window.setTimeout(t),{};const n=window.setTimeout(t,5e3);let r=!1;return{update(o){!r&&(0,p.B8)(o)&&(r=!0,window.setTimeout((()=>{new Promise((()=>{(0,d.k7)(e,e.state.doc.length,1/0),window.clearTimeout(n),window.setTimeout(t)})).catch(W.$.error)})))}}}))],We=r.$t.transactionExtender.of((e=>{if(!e.scrollIntoView)for(const t of e.effects)if(t.is(m.D5)&&!1===t.value)return{effects:s.Lz.scrollIntoView(e.newSelection.main.head)};return{}})),Me=e=>[o.K,o.Q,m.eQ,f,(0,i.x)(e),a.j,u,Te.$j,We,De,K,je.L,s.Lz.contentAttributes.of({"aria-label":"Visual Editor editing"})]},11326:(e,t,n)=>{"use strict";n.d(t,{Q:()=>p,r:()=>g});n(97107);var r=n(14041),o=n(86316),i=n(78494),a=n(68543),s=n(55937),l=n(60961),c=n(39891),d=n(69954),h=n(56447),u=n(31085);const m=(0,r.createContext)(void 0),p=e=>{let{children:t}=e;const{project:n}=(0,o.Om)(),p=n?.rootDocId,g=n?.owner?._id,{eventEmitter:f,projectJoined:O}=(0,i.yn)(),{openDocWithId:b,openInitialDoc:v}=(0,a.TS)(),{currentDocumentId:w}=(0,s.Wq)(),{setOpenFile:_}=(0,h.LV)(),[x,y]=(0,r.useState)(null),[k,C]=(0,r.useState)(0),[S,Q]=(0,r.useState)(!1),[E,T]=(0,r.useState)(!0),j=(0,r.useCallback)((()=>{T((e=>!e))}),[]),P=(0,r.useCallback)((()=>{Q(!0)}),[]),$=(0,r.useCallback)((e=>{if(l.$.log("File tree selection changed",e),C(e.length),1!==e.length)return void y(null);const[t]=e;if("folder"===t.type)return;y(t),"doc"===t.type&&S&&(b(t.entity._id,{keepCurrentView:!0}),t.entity.name.endsWith(".bib")&&(0,d._)("open-bib-file",{projectOwner:g,isSampleFile:"sample.bib"===t.entity.name,linkedFileProvider:null}));const n="fileRef"===t.type?(0,c.D)(t.entity):null;_(n),n&&(t?.entity?.name?.endsWith(".bib")&&(0,d._)("open-bib-file",{projectOwner:g,isSampleFile:!1,linkedFileProvider:t.entity.linkedFileData?.provider}),window.dispatchEvent(new CustomEvent("file-view:file-opened")))}),[S,_,b,g]),R=(0,r.useCallback)((e=>{f.emit("entity:deleted",e),e.entity._id===w&&b(p)}),[f,w,b,p]),X=(0,r.useRef)(!1);(0,r.useEffect)((()=>{p&&S&&O&&!X.current&&(X.current=!0,v(p))}),[S,v,O,p]);const A=(0,r.useMemo)((()=>({selectedEntityCount:k,openEntity:x,handleFileTreeInit:P,handleFileTreeSelect:$,handleFileTreeDelete:R,fileTreeExpanded:E,toggleFileTreeExpanded:j})),[R,P,$,x,k,E,j]);return(0,u.jsx)(m.Provider,{value:A,children:t})},g=()=>{const e=(0,r.useContext)(m);if(!e)throw new Error("useFileTreeOpenContext is only available inside FileTreeOpenProvider");return e}},11485:(e,t,n)=>{"use strict";const r=n(64347).assert,o=n(35078);class i{constructor(e,t){r.integer(e,"bad baseVersion"),r.maybe.instance(t,o,"bad change"),this.baseVersion=e,this.change=t}toRaw(){return{baseVersion:this.baseVersion,change:this.change.toRaw()}}toRawWithoutChange(){return{baseVersion:this.baseVersion}}static fromRaw(e){return r.integer(e.baseVersion,"bad raw.baseVersion"),r.maybe.object(e.change,"bad raw.changes"),new i(e.baseVersion,o.fromRaw(e.change))}getBaseVersion(){return this.baseVersion}getResultVersion(){return this.baseVersion+1}getChange(){return this.change}}e.exports=i},12628:(e,t,n)=>{"use strict";n(97107);const r=n(64347).assert,o=n(97277);e.exports=class{static fromRaw(e){if(Object.prototype.hasOwnProperty.call(e,"hash"))return Object.prototype.hasOwnProperty.call(e,"byteLength")?i.fromRaw(e):Object.prototype.hasOwnProperty.call(e,"stringLength")?c.fromRaw(e):a.fromRaw(e);if(Object.prototype.hasOwnProperty.call(e,"byteLength"))return s.fromRaw(e);if(Object.prototype.hasOwnProperty.call(e,"stringLength"))return l.fromRaw(e);if(Object.prototype.hasOwnProperty.call(e,"content"))return d.fromRaw(e);throw new Error("FileData: bad raw object "+JSON.stringify(e))}static createHollow(e,t){return null==t?new s(e):new l(t)}static createLazyFromBlobs(e,t){r.instance(e,o,"FileData: bad blob");const n=e.getStringLength();return null==n?new i(e.getHash(),e.getByteLength()):new c(e.getHash(),t?.getHash(),n)}toRaw(){throw new Error("FileData: toRaw not implemented")}getHash(){return null}getRangesHash(){return null}getContent(){return null}isEditable(){return null}getByteLength(){return null}getStringLength(){return null}edit(e){throw new Error("edit not implemented for "+JSON.stringify(this))}async toEager(e){throw new Error("toEager not implemented for "+JSON.stringify(this))}async toLazy(e){throw new Error("toLazy not implemented for "+JSON.stringify(this))}async toHollow(e){throw new Error("toHollow not implemented for "+JSON.stringify(this))}async load(e,t){if("eager"===e)return await this.toEager(t);if("lazy"===e)return await this.toLazy(t);if("hollow"===e)return await this.toHollow(t);throw new Error("bad file data load kind: "+e)}async store(e){throw new Error("store not implemented for "+JSON.stringify(this))}getComments(){throw new Error("getComments not implemented for "+JSON.stringify(this))}getTrackedChanges(){throw new Error("getTrackedChanges not implemented for "+JSON.stringify(this))}};const i=n(6203),a=n(59622),s=n(96837),l=n(44285),c=n(82174),d=n(14679)},13376:(e,t,n)=>{n(97107),n(82438),n(12266),n(99819),n(50020);const r=n(2085),o=n(26041),i=n(61210),{InsertOp:a,RemoveOp:s,RetainOp:l}=n(42991);class c{constructor(e){this._trackedChanges=e}static fromRaw(e){return new c(e.map(o.fromRaw))}toRaw(){return this._trackedChanges.map((e=>e.toRaw()))}get length(){return this._trackedChanges.length}asSorted(){return Array.from(this._trackedChanges)}inRange(e){return this._trackedChanges.filter((t=>e.contains(t.range)))}intersectRange(e){const t=[];for(const n of this._trackedChanges){const r=n.intersectRange(e);null!=r&&t.push(r)}return t}propsAtRange(e){return this._trackedChanges.find((t=>t.range.contains(e)))?.tracking}removeInRange(e){this._trackedChanges=this._trackedChanges.filter((t=>!e.contains(t.range)))}add(e){this._trackedChanges.push(e),this._mergeRanges()}_mergeRanges(){if(this._trackedChanges.length<2)return;this._trackedChanges.sort(((e,t)=>e.range.start-t.range.start));const e=[this._trackedChanges[0]];for(let t=1;t<this._trackedChanges.length;t++){const n=e[e.length-1],r=this._trackedChanges[t];if(n.range.overlaps(r.range))throw new Error("Ranges cannot overlap");if(r.range.isEmpty())throw new Error("Tracked changes range cannot be empty");n.canMerge(r)?e[e.length-1]=n.merge(r):e.push(r)}this._trackedChanges=e}applyInsert(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._applyInsert(e,t,n),this._mergeRanges()}_applyInsert(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=[];for(const n of this._trackedChanges)if(n.range.startIsAfter(e)||e===n.range.start)i.push(new o(n.range.moveBy(t.length),n.tracking));else if(e===n.range.end)i.push(n);else if(n.range.containsCursor(e)){const[r,,a]=n.range.insertAt(e,t.length),s=new o(r,n.tracking);s.range.isEmpty()||i.push(s);const l=new o(a,n.tracking);l.range.isEmpty()||i.push(l)}else i.push(n);if(n.tracking){const a=new o(new r(e,t.length),n.tracking);i.push(a)}this._trackedChanges=i}applyDelete(e,t){this._applyDelete(e,t),this._mergeRanges()}_applyDelete(e,t){const n=[];for(const i of this._trackedChanges){const a=new r(e,t);if(!a.contains(i.range))if(a.overlaps(i.range)){const e=i.range.subtract(a);e.isEmpty()||n.push(new o(e,i.tracking))}else i.range.startIsAfter(e)?n.push(new o(i.range.moveBy(-t),i.tracking)):n.push(i)}this._trackedChanges=n}applyRetain(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._applyRetain(e,t,n),this._mergeRanges()}_applyRetain(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!n.tracking)return;const a=[],s=new r(e,t);for(const n of this._trackedChanges)if(s.contains(n.range));else if(s.overlaps(n.range))if(n.range.contains(s)){const[r,i]=n.range.splitAt(e);r.isEmpty()||a.push(new o(r,n.tracking)),!i.isEmpty()&&i.length>t&&a.push(new o(i.moveBy(t).shrinkBy(t),n.tracking))}else if(s.start<=n.range.start){const[,e]=n.range.splitAt(s.end);e.isEmpty()||a.push(new o(e,n.tracking))}else{const[t]=n.range.splitAt(e);t.isEmpty()||a.push(new o(t,n.tracking))}else a.push(n);if(n.tracking instanceof i){const e=new o(s,n.tracking);a.push(e)}this._trackedChanges=a}applyTextOperation(e){let t=0;for(const n of e.ops)n instanceof a?(this._applyInsert(t,n.insertion,{tracking:n.tracking}),t+=n.insertion.length):n instanceof s?this._applyDelete(t,n.length):n instanceof l&&(this._applyRetain(t,n.length,{tracking:n.tracking}),t+=n.length);this._mergeRanges()}}e.exports=c},13653:(e,t,n)=>{"use strict";n.d(t,{Q:()=>i});var r=n(14041),o=n(49791);const i=e=>{const t=(0,o.M)();(0,r.useEffect)((()=>{const n=new AbortController;return t?.addEventListener("message",(t=>{let{data:n}=t;return e(n)}),{signal:n.signal}),()=>n.abort()}),[t,e])}},13665:(e,t,n)=>{"use strict";n.d(t,{I:()=>E});var r=n(71627),o=n(14041),i=n(97434),a=n(63003),s=n(12327),l=n(1705),c=n(7829),d=n(96700),h=n(89327),u=n(28812),m=n(60230),p=n(36712),g=n(31085);const f=e=>{let{rating:t,setRating:n,messages:r,logEntry:a,isFeedbackSent:s,onFeedbackSent:l}=e;const[c,d]=(0,o.useState)(!1),{t:u}=(0,i.Bd)(),f=(0,o.useCallback)((()=>{n(0)}),[n]),O=(0,o.useCallback)((()=>{d(!1),l()}),[d,l]),b=(0,h.A)(O,a,r,t),_=e=>{d(!0),b(e)};return s?(0,g.jsx)(p.A,{className:"ai-error-assistant-feedback-toast",children:(0,g.jsx)(m.t,{type:"info",autoHide:!0,content:(0,g.jsx)("div",{children:u("thank_you_for_your_feedback")}),isDismissible:!0,delay:3500})}):1===t?(0,g.jsx)(v,{isSending:c,onSubmit:_,onHide:f}):-1===t?(0,g.jsx)(w,{isSending:c,onSubmit:_,onHide:f}):null};let O=1;const b=(e,t)=>`${e}-${t}`,v=e=>{let{isSending:t,onSubmit:n,onHide:r}=e;const[l]=(0,o.useState)(String(O++)),{t:d}=(0,i.Bd)();return(0,g.jsxs)(_,{isSending:t,onSubmit:n,onHide:r,children:[(0,g.jsx)("div",{className:"ai-error-assistant-feedback-form-heading",children:(0,g.jsx)("div",{children:d("what_did_you_find_most_helpful")})}),(0,g.jsx)(s.A,{controlId:"aiErrorAssistantFeedbackLatex",children:(0,g.jsx)(c.A,{as:"textarea",name:"notes"})}),(0,g.jsx)(a.A,{name:"consent",id:b("consent",l),label:d("include_the_error_message_and_ai_response")})]})},w=e=>{let{onHide:t,isSending:n,onSubmit:r}=e;const{t:l}=(0,i.Bd)(),[h]=(0,o.useState)(String(O++));return(0,g.jsxs)(_,{isSending:n,onSubmit:r,onHide:t,children:[(0,g.jsx)("div",{className:"ai-error-assistant-feedback-form-heading",children:(0,g.jsx)("div",{children:l("ai_feedback_tell_us_what_was_wrong_so_we_can_improve")})}),(0,g.jsxs)(s.A,{className:"ai-error-assistant-feedback-form-choices",children:[(0,g.jsx)(a.A,{type:"radio",name:"reason",id:b("reason",h),value:"error-not-fixed",label:l("ai_feedback_the_suggestion_didnt_fix_the_error")}),(0,g.jsx)(a.A,{type:"radio",name:"reason",id:b("no-suggested-change",h),value:"no-suggested-change",label:l("ai_feedback_there_was_no_code_fix_suggested")}),(0,g.jsx)(a.A,{type:"radio",name:"reason",id:b("answer-too-long",h),value:"answer-too-long",label:l("ai_feedback_the_answer_was_too_long")}),(0,g.jsx)(a.A,{type:"radio",name:"reason",id:b("answer-not-detailed",h),value:"answer-not-detailed",label:l("ai_feedback_the_answer_wasnt_detailed_enough")}),(0,g.jsx)(a.A,{type:"radio",name:"reason",id:b("answer-not-best-fix",h),value:"answer-not-best-fix",label:l("ai_feedback_the_suggestion_wasnt_the_best_fix_available")}),(0,g.jsx)(a.A,{type:"radio",name:"reason",id:b("other",h),value:"other",label:l("other")})]}),(0,g.jsxs)(s.A,{controlId:"aiErrorAssistantFeedbackNotes",children:[(0,g.jsx)(d.A,{children:l("ai_feedback_please_provide_more_detail")}),(0,g.jsx)(c.A,{as:"textarea",name:"notes"})]}),(0,g.jsx)(a.A,{name:"consent",id:b("consent",h),label:l("include_the_error_message_and_ai_response")})]})},_=e=>{let{isSending:t,onSubmit:n,onHide:o,children:a}=e;const{t:s}=(0,i.Bd)();return(0,g.jsxs)(u.Ay,{show:!0,onHide:o,className:"ai-error-assistant-feedback-modal",children:[(0,g.jsx)(u.IK,{closeButton:!0,children:(0,g.jsx)(u.rA,{children:s("give_feedback")})}),(0,g.jsxs)(l.A,{onSubmit:n,children:[(0,g.jsx)(u.$8,{className:"ai-error-assistant-feedback-modal",children:a}),(0,g.jsxs)(u.E9,{children:[(0,g.jsx)(r.A,{onClick:o,variant:"secondary",disabled:t,isLoading:t,children:s("cancel")}),(0,g.jsx)(r.A,{type:"submit",disabled:t,isLoading:t,children:s("confirm")})]})]})]})};var x=n(96713),y=n(53373),k=n.n(y),C=n(59162),S=n(24639),Q=n(10646);const E=e=>{let{messages:t,finished:n,applied:a=!1,suggestFix:s,logEntry:l,rating:c,setRating:d}=e;const{t:h}=(0,i.Bd)(),[u,m]=(0,o.useState)(!1),p=(0,o.useCallback)((()=>{m(!0)}),[m]),{hasPremiumSuggestion:O}=(0,Q.mi)(),b=(0,o.useCallback)((()=>{O?s&&s():window.dispatchEvent(new CustomEvent("aiAssist:showPaywall",{detail:{origin:"suggest-fix"}}))}),[O,s]);return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("div",{className:"ai-error-assistant-footer",children:[n&&s&&(0,g.jsx)("div",{children:h("ai_can_make_mistakes")}),(0,g.jsxs)("div",{className:"ai-error-assistant-footer-inner",children:[n?(0,g.jsxs)("div",{className:"ai-error-assistant-feedback",children:[(0,g.jsx)(C.A,{id:"ai-error-assistant-feedback-positive-tooltip",description:h("this_was_helpful"),children:(0,g.jsx)(S.A,{accessibilityLabel:h("this_was_helpful"),onClick:()=>d((e=>1!==e?1:0)),disabled:u,className:k()("ai-error-assistant-feedback-button","ai-error-assistant-feedback-positive",{active:1===c}),icon:"thumb_up",unfilled:1!==c})}),(0,g.jsx)(C.A,{id:"ai-error-assistant-feedback-negative-tooltip",description:h("this_wasnt_helpful"),children:(0,g.jsx)(S.A,{accessibilityLabel:h("this_wasnt_helpful"),onClick:()=>d((e=>-1!==e?-1:0)),disabled:u,className:k()("ai-error-assistant-feedback-button","ai-error-assistant-feedback-negative",{active:-1===c}),icon:"thumb_down",unfilled:-1!==c})}),s&&(0,g.jsx)(C.A,{id:"ai-error-assistant-feedback-retry-tooltip",description:h("suggest_a_different_fix"),children:(0,g.jsx)(r.A,{type:"button",variant:"ghost",size:"sm","aria-label":h("suggest_a_different_fix"),onClick:b,className:"ai-error-assistant-feedback-button",children:(0,g.jsx)(x.A,{type:"refresh"})})})]}):(0,g.jsx)("span",{}),a&&(0,g.jsx)("div",{children:h("suggestion_applied")})]})]}),(0,g.jsx)(f,{rating:c,setRating:d,messages:t,logEntry:l,isFeedbackSent:u,onFeedbackSent:p},c)]})}},13877:(e,t,n)=>{"use strict";n.d(t,{Xj:()=>f,yi:()=>O});n(97107),n(82438),n(91020),n(69033),n(68903),n(21018),n(1415),n(4448),n(58871),n(56539);var r=n(14041),o=n(78494),i=n(16896),a=n(55937),s=n(37858),l=n(52036),c=n(6599),d=n(89139),h=n(83096),u=n(58516),m=n(97434),p=n(31085);const g=(0,r.createContext)(void 0),f=e=>{let{children:t}=e;const{t:n}=(0,m.Bd)(),{eventEmitter:f,permissionsLevel:O,projectId:b}=(0,o.yn)(),{socket:v}=(0,i.FX)(),{onlineUsersCount:w}=(0,l.E1)(),_=(0,u.Tg)(),{currentDocument:x}=(0,a.Wq)(),{showGenericMessageModal:y}=(0,h.T)(),[k,C]=(0,r.useState)({}),S=(0,r.useRef)(new Map);(0,r.useEffect)((()=>{const e=e=>{let{detail:[t]}=e;"doc"===t.type&&C((e=>(delete e[t.entity._id],{...e})))};return f.on("entity:deleted",e),()=>{f.off("entity:deleted",e)}}),[f]),(0,r.useEffect)((()=>{window.dispatchEvent(new CustomEvent("project:metadata",{detail:k}))}),[k]);const Q=(0,r.useCallback)((e=>{const{docId:t,meta:n}=e;null!=t&&null!=n&&C((e=>({...e,[t]:n})))}),[]),E=(0,r.useCallback)((()=>{(0,s.hm)(`/project/${b}/metadata`).then((e=>{const{projectMeta:t}=e;t&&C(t)}))}),[b]),T=(0,r.useCallback)((e=>{const t=w>0;(0,s.TB)(`/project/${b}/doc/${e}/metadata`,{body:{broadcast:t}}).then((e=>{!t&&e&&Q(e)}))}),[Q,w,b]),j=(0,r.useCallback)((e=>{if("readOnly"===O)return;const t=S.current.get(e);null!=t&&(window.clearTimeout(t),S.current.delete(e)),S.current.set(e,window.setTimeout((()=>{T(e),S.current.delete(e)}),2e3))}),[T,O]),P=(0,r.useCallback)((e=>{Q(e)}),[Q]);(0,c.A)(v,"broadcastDocMeta",P);const $=(0,r.useCallback)((()=>{x&&j(x.doc_id)}),[x,j]);(0,d.A)("editor:metadata-outdated",$);const R=(0,r.useRef)(_);(0,r.useEffect)((()=>{R.current=_}),[_]),(0,r.useEffect)((()=>{const e=e=>{let{detail:[{project:t}]}=e;t.deletedByExternalDataSource&&y(n("project_renamed_or_deleted"),n("project_renamed_or_deleted_detail")),window.setTimeout((()=>{(R.current.write||R.current.trackedWrite)&&E()}),200)};return f.once("project:joined",e),()=>{f.off("project:joined",e)}}),[f,E,y,n]);const X=(0,r.useMemo)((()=>{const e=Object.values(k);return{commands:e.flatMap((e=>Object.values(e.packages).flat())),labels:new Set(e.flatMap((e=>e.labels))),packageNames:new Set(e.flatMap((e=>e.packageNames)))}}),[k]);return(0,p.jsx)(g.Provider,{value:X,children:t})};function O(){const e=(0,r.useContext)(g);if(!e)throw new Error("useMetadataContext is only available inside MetadataProvider");return e}},14679:(e,t,n)=>{"use strict";const r=n(64347).assert,o=n(12628),i=n(18452),a=n(13376);class s extends o{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];super(),r.string(e),this.content=e,this.comments=i.fromRaw(t),this.trackedChanges=a.fromRaw(n)}static fromRaw(e){return new s(e.content,e.comments||[],e.trackedChanges||[])}toRaw(){const e={content:this.content};return this.comments.length&&(e.comments=this.comments.toRaw()),this.trackedChanges.length&&(e.trackedChanges=this.trackedChanges.toRaw()),e}isEditable(){return!0}getContent(){let e="",t=0;if((arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).filterTrackedDeletes)for(const n of this.trackedChanges.asSorted())"delete"===n.tracking.type&&(t<n.range.start&&(e+=this.content.slice(t,n.range.start)),t=n.range.end);return t<this.content.length&&(e+=this.content.slice(t)),e}getLines(){return this.getContent({filterTrackedDeletes:!0}).split("\n")}getByteLength(){return Buffer.byteLength(this.content)}getStringLength(){return this.content.length}edit(e){e.apply(this)}getComments(){return this.comments}getTrackedChanges(){return this.trackedChanges}async toEager(){return this}async toHollow(){return o.createHollow(this.getByteLength(),this.getStringLength())}async store(e){const t=await e.putString(this.content);if(this.comments.comments.size||this.trackedChanges.length){const n={comments:this.getComments().toRaw(),trackedChanges:this.trackedChanges.toRaw()},r=await e.putObject(n);return{hash:t.getHash(),rangesHash:r.getHash()}}return{hash:t.getHash()}}}e.exports=s},14768:(e,t,n)=>{"use strict";n.d(t,{A:()=>X});var r={};n.r(r),n.d(r,{default:()=>T});var o=n(14041),i=n(46039),a=n(66502),s=n(97536),l=n(17112),c=(n(82438),n(50020),n(7241)),d=n(32912),h=(n(63308),n(53373)),u=n.n(h),m=n(68016),p=n(79953),g=n(97434),f=n(64657),O=n(71627),b=n(10646),v=n(69954),w=n(59722),_=n(96713),x=n(31085);const y=()=>{const{t:e}=(0,g.Bd)();return(0,x.jsxs)("div",{className:"ai-error-assistant-tip",children:[(0,x.jsx)(_.A,{type:"lightbulb",unfilled:!0}),(0,x.jsx)("div",{children:e("start_by_fixing_the_first_error_in_your_document")})]})},k=(0,o.memo)(y),C=e=>{let{index:t,logEntry:n,view:r}=e;const[i,a]=(0,o.useState)(!1),{inactiveTutorials:s}=(0,b.mi)(),{t:l}=(0,g.Bd)(),h=(0,w.XW)(),{messages:_,error:y,errorMessage:C,running:S,finished:Q,heading:E,rating:T,setRating:j,suggestFix:P,replaceContent:$}=(0,f.A)(n,r),R=Boolean(h?.aiErrorAssistant),X=(0,o.useCallback)((async()=>{s.includes(m.A)?(v._("suggest-fix-click",{hasAddOn:R}),await P()):a(!0)}),[s,P,a,R]),A=0===t;return i?(0,x.jsx)(m.f,{suggestFix:async()=>{a(!1),await P()}}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(O.A,{className:"ai-error-assistant-hidden-suggest-fix-button","data-action":"suggest-fix",onClick:X,style:{visibility:"hidden",width:"0",height:"0"}}),(0,x.jsxs)("div",{className:u()("ai-error-assistant",{"ai-error-assistant-first":A,"ai-error-assistant-running":S,"ai-error-assistant-finished":Q}),children:[(0,x.jsxs)("div",{className:"ai-error-assistant-header",children:[(0,x.jsx)("div",{}),E&&(0,x.jsx)("div",{className:"ai-error-assistant-meta",children:(0,x.jsx)("div",{className:"ai-error-assistant-heading",children:E})})]}),(S||Q)&&!A&&(0,x.jsx)(k,{}),(y||_.length>0)&&(0,x.jsxs)("div",{className:"ai-error-assistant-messages",children:[y&&(0,x.jsx)(p.A,{type:"error",content:"unhandled"===y?l("sorry_it_looks_like_that_didnt_work_this_time"):C}),_.map(((e,t)=>"assistant"===e.role&&(0,x.jsx)(c.K,{view:r,message:e,level:n.level,replaceContent:$},t))),S&&(0,x.jsx)("span",{className:"ai-error-assistant-cursor"})]}),(S||Q)&&(0,x.jsx)(d.I,{messages:_,logEntry:n,finished:Q,suggestFix:P,rating:T,setRating:j})]})]})},S=(0,o.memo)(C),Q=(0,o.lazy)((()=>n.e(5994).then(n.bind(n,95722)))),E=e=>{let{index:t,logEntry:n}=e;const{view:r}=(0,i.xl)(),c=(0,a.A)(n),d=(0,s.G)(),h=(0,l.u)("new-editor-error-logs-redesign");return r&&c?(0,x.jsx)(o.Suspense,{fallback:null,children:d&&h?(0,x.jsx)(S,{index:t,logEntry:n,view:r}):(0,x.jsx)(Q,{index:t,logEntry:n,view:r})}):null},T=(0,o.memo)(E);var j=n(68273),P=n(89135);function $(e){let{rawContent:t,collapsedSize:n=0,alwaysExpanded:r=!1}=e;const[i,a]=(0,o.useState)(r),[s,l]=(0,o.useState)(!r),{elementRef:c}=(0,j.w)((0,o.useCallback)((e=>{0!==e.scrollHeight&&l(!r&&e.scrollHeight>n)}),[n,r])),{t:d}=(0,g.Bd)();return(0,x.jsxs)("div",{className:"log-entry-content-raw-container",children:[(0,x.jsx)("div",{className:"expand-collapse-container",style:{height:i||!s?"auto":n},children:(0,x.jsx)("pre",{className:"log-entry-content-raw",ref:c,translate:"no",children:t.trim()})}),s&&(0,x.jsx)("div",{className:u()("log-entry-content-button-container",{"log-entry-content-button-container-collapsed":!i}),children:(0,x.jsx)(O.A,{variant:"secondary",size:"sm",onClick:()=>a((e=>!e)),children:i?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(P.A,{type:"angle-up"})," ",d("collapse")]}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(P.A,{type:"angle-down"})," ",d("expand")]})})})]})}const R=[{import:r,path:"/overleaf/services/web/modules/ai/frontend/js/components/ai-error-assistant"}];function X(e){let{rawContent:t,formattedContent:n,extraInfoURL:r,index:o,logEntry:i,alwaysExpandRawContent:a=!1,className:s}=e;const{t:l}=(0,g.Bd)();return(0,x.jsxs)("div",{className:u()("log-entry-content",s),children:[n&&(0,x.jsx)("div",{className:"log-entry-formatted-content",children:n}),r&&(0,x.jsx)("div",{className:"log-entry-content-link",children:(0,x.jsx)("a",{href:r,target:"_blank",rel:"noopener",children:l("log_hint_extra_info")})}),i&&R.map((e=>{let{import:{default:t},path:n}=e;return(0,x.jsx)(t,{index:o,logEntry:i},n)})),t&&(0,x.jsx)($,{rawContent:t,collapsedSize:150,alwaysExpanded:a})]})}},14791:(e,t,n)=>{"use strict";n.d(t,{$m:()=>a,Br:()=>l,D5:()=>d,ct:()=>g,eQ:()=>f,si:()=>u,v2:()=>h,vU:()=>s,xS:()=>c});n(82438),n(50020),n(34840);var r=n(57195),o=n(83173),i=n(45197);const a=(e,t)=>e.ranges.some((e=>t.from<=e.from&&t.to>=e.from||t.from<=e.to&&t.to>=e.to)),s=(e,t)=>{const n=e.lineBlockAtHeight(t.pageY-e.documentTop),i=r.OF.cursor(n.to);return{selection:t.ctrlKey?e.state.selection.addRange(i):i,effects:o.Lz.scrollIntoView(n.to)}},l=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY,{number:r,from:o}=t;for(let t=r-1;t>0&&r-t<=n;t--){const n=e.line(t);if(n.text.trim().length>0)break;o=n.from}return o},c=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY,{number:r,to:o}=t;for(let t=r+1;t<=e.lines&&t-r<=n;t++){const n=e.line(t);if(n.text.trim().length>0)break;o=n.to}return o},d=r.Pe.define(),h=(0,i.u)(d),u=(0,i.v)(d),m=o.Lz.domEventHandlers({mousedown:(e,t)=>{t.dispatch({effects:d.of(!0)})},mouseup:(e,t)=>{window.setTimeout((()=>{t.dispatch({effects:d.of(!1)})}))},contextmenu:(e,t)=>{window.setTimeout((()=>{t.dispatch({effects:d.of(!1)})}))},drop:(e,t)=>{window.setTimeout((()=>{t.dispatch({effects:d.of(!1)})}))}}),p=r.sU.define({create(){},update(e,t){e&&t.docChanged&&(e=e.map(t.changes));for(const n of t.effects)n.is(d)&&(e=n.value?t.startState.selection:void 0);return e}}),g=e=>e.field(p),f=[m,p]},14875:(e,t,n)=>{"use strict";n.r(t),n.d(t,{SynctexFileErrorToast:()=>a,default:()=>s,showFileErrorToast:()=>l});var r=n(97434),o=n(71627),i=n(31085);const a=()=>{const{t:e}=(0,r.Bd)();return(0,i.jsxs)("div",{className:"synctex-error-toast-content",children:[(0,i.jsx)("span",{children:e("synctex_failed")}),(0,i.jsx)(o.A,{href:"/learn/how-to/SyncTeX_Errors",target:"_blank",variant:"secondary",size:"sm",children:e("more_info")})]})},s=[{key:"synctex:file-error",generator:()=>({content:(0,i.jsx)(a,{}),type:"warning",autoHide:!0,delay:4e3,isDismissible:!0})}],l=()=>{window.dispatchEvent(new CustomEvent("ide:show-toast",{detail:{key:"synctex:file-error"}}))}},14901:(e,t,n)=>{"use strict";n.d(t,{Y:()=>s,u:()=>a});var r=n(69954),o=n(37858),i=n(60961);function a(e,t){(0,r._)("setting-changed",{changedSetting:e,changedSettingVal:t}),(0,o.TB)("/user/settings",{body:{[e]:t}}).catch(i.$.error)}const s=async(e,t)=>{await(0,o.TB)(`/project/${e}/settings`,{body:{...t}})}},15133:(e,t,n)=>{"use strict";n.d(t,{DQ:()=>p,rn:()=>o.rn,Bw:()=>o.Bw,b3:()=>g,ee:()=>r.ee,ob:()=>r.ob,wS:()=>o.wS,Rb:()=>f,G8:()=>o.G8,fz:()=>O,iz:()=>d,dq:()=>h.dq,Rl:()=>h.Rl});n(60347),n(97900);var r=n(21947),o=n(16851),i=(n(82438),n(34840),n(29587)),a=n(37603),s=n.n(a),l=n(84452);class c{constructor(e){const{from:t,to:n,lineNumber:r,text:o,node:i}=e;if(null==o||null==t||null==n||null==r||null==i)throw new(s())("TreeQuery: invalid NormalTextSpan").withInfo({options:e});this.from=t,this.to=n,this.text=o,this.node=i,this.lineNumber=r}}const d=(e,t)=>{const n=t.number,r=t.from,o=t.to,a=(0,i.mv)(e.state),s=[];return a?.iterate({from:r,to:o,enter:t=>!t.type.prop(l.p)?.some((e=>t.matchContext(e)))&&("Normal"!==t.type.name||(s.push(new c({from:t.from,to:t.to,text:e.state.doc.sliceString(t.from,t.to),lineNumber:n,node:t})),!1))}),s};var h=n(48130),u=(n(12266),n(5383));const m=Object.keys(u),p={ctrlSeq:m.filter((e=>e.match(/^(Begin|End|.*CtrlSeq)$/))),ctrlSym:m.filter((e=>e.match(/^.*CtrlSym$/))),envName:m.filter((e=>e.match(/^.*EnvName$/)))},g=(e,t)=>!!t.doc.sliceString(e.from,e.to).match(/%\s*\{\s*/),f=(e,t)=>{const n=e.to+1,r=Math.min(n+6e3,t.doc.length),o=(0,i.a_)(t,r,100);if(!o)return;let a,s=0;return o.iterate({from:n,to:r,enter:e=>{if(a)return!1;if(e.node.type.is("Comment"))if(g(e.node,t))s++;else if(((e,t)=>!!t.doc.sliceString(e.from,e.to).match(/%\s*\}\s*/))(e.node,t)){if(!(s>0))return a=e.node,!1;s--}}}),a},O=(e,t,n)=>{const r=n.doc.sliceString(e.from,e.to),o=n.doc.sliceString(t.from,t.to),i=r.indexOf("{"),a=o.indexOf("}");return i<0||a<0?null:{from:e.from+i+1,to:t.from+a}}},15947:(e,t,n)=>{"use strict";n.d(t,{By:()=>l,QV:()=>c,zP:()=>a});n(82438),n(12266);var r=n(57195);const o=r.Pe.define(),i=r.Pe.define(),a=()=>[s],s=r.sU.define({create:()=>[],update(e,t){for(const n of t.effects){n.is(o)&&e.push(n.value),n.is(i)&&(e=e.filter((e=>!(e.effect===n.value.effect&&e.callback===n.value.callback))));for(let t=0;t<e.length;++t){const r=e[t];n.is(r.effect)&&(setTimeout((()=>r.callback(n.value))),r.options?.once&&(e.splice(t,1),--t))}}return e}}),l=(e,t,n,r)=>{e.dispatch({effects:o.of({effect:t,callback:n,options:r})})},c=(e,t,n)=>{e.dispatch({effects:i.of({effect:t,callback:n})})}},16851:(e,t,n)=>{"use strict";n.d(t,{Bw:()=>l,G8:()=>h,TK:()=>u,Yv:()=>m,j1:()=>p,nQ:()=>f,rn:()=>a,u0:()=>O,vL:()=>c,vw:()=>i,wS:()=>d});var r=n(29587),o=n(5383);const i=(e,t,n)=>{if(t.empty)return null;const r=a(e,t.from,n,1);return r&&r.from===t.from&&r.to===t.to?r:null},a=function(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const i=(0,r.mv)(e).resolveInner(t,o);return l(i,n)};function*s(e,t){for(let n=e;n;n=n.parent)n.type.is(t)&&(yield n)}const l=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(let t=e;t;t=t.parent)for(const e of n)if(t.type.is(e))return t;return null},c=(e,t)=>{let n=null;for(let r=e;r&&r.to===t;r=r.parent)n=r;return n},d=(e,t,n)=>{const r=[];return e.cursor().iterate((o=>{if(o.type.is(t)&&r.push(o.node),n&&o.type.is(n)&&o.node!==e)return!1})),r},h=(e,t)=>a(e,t,"BibKeyArgument",-1)??a(e,t,"BibKeyArgument");const u=(e,t)=>{for(let n=e;n;n=n.parent)if(t(n))return n;return null},m=(e,t)=>{const n=function*(e,t,n){for(const r of t.ranges){const t=e.resolveInner(r.anchor);for(const e of s(t,n))e&&(yield e)}}((0,r.mv)(e),e.selection,t);return n.next().value},p=(e,t)=>{let n=e,r=t;for(;n&&r;){if(n===r)return n;n.from<r.from?r=r.parent:n=n.parent}return null},g=e=>{let t=0;for(const n of s(e,o.ListEnvironment))n&&t++;return t},f=e=>{const t=[];for(const n of e.selection.ranges){const o=(0,r.mv)(e).resolveInner(n.anchor);t.push(g(o))}return Math.min(...t)},O=(e,t)=>{const n=e?.parent?.parent?.parent;return t===n}},16896:(e,t,n)=>{"use strict";n.d(t,{Sg:()=>v,FX:()=>w});n(97107);var r=n(14041),o=(n(27534),n(61412),n(91883),n(70286),n(23479)),i=n(64932),a=n(60961),s=n(58528);const l=36e5,c=864e5,d=(0,i.A)("ol-maxReconnectGracefullyIntervalMs"),h=(0,s.g9)("external-socket-heartbeat"),u={readyState:WebSocket.CLOSED,forceDisconnected:!1,inactiveDisconnect:!1,lastConnectionAttempt:0,reconnectAt:null,forcedDisconnectDelay:0,error:""};class m extends CustomEvent{}class p extends EventTarget{state=(()=>u)();connectionAttempt=null;gracefullyReconnectUntil=0;protocolVersion=-1;reconnectCountdownInterval=0;websocketFailureCount=0;userIsLeavingPage=!1;externalHeartbeat={currentStart:0,lastSuccess:0,lastLatency:0};constructor(){super(),this.lastUserActivity=performance.now(),this.idleDisconnectInterval=window.setInterval((()=>{this.disconnectIfIdleSince(c)}),l),window.addEventListener("online",(()=>this.onOnline())),window.addEventListener("beforeunload",(()=>{this.userIsLeavingPage=!0,"xhr-polling"===this.socket.socket.transport?.name&&this.socket.socket.disconnect()}));const e=new URL((0,i.A)("ol-wsUrl")||"/socket.io",window.origin),t=new URLSearchParams({projectId:(0,i.A)("ol-project_id")});h&&(t.set("esh","1"),t.set("ssp","1"));const n=o.h.connect(e.origin,{resource:e.pathname.slice(1),"auto connect":!1,"connect timeout":3e4,"force new connection":!0,query:t.toString(),reconnect:!1});if(this.socket=n,"object"!=typeof window.io)return this.switchToWsFallbackIfPossible(),a.$.error("Socket.io javascript not loaded. Please check that the real-time service is running and accessible."),void this.changeState({...this.state,error:"io-not-loaded"});n.on("connect",(()=>this.onConnect())),n.on("disconnect",(()=>this.onDisconnect())),n.on("error",(e=>this.onConnectError(e))),n.on("connect_failed",(e=>this.onConnectError(e))),n.on("joinProjectResponse",(e=>this.onJoinProjectResponse(e))),n.on("connectionRejected",(e=>this.onConnectionRejected(e))),n.on("reconnectGracefully",(()=>this.onReconnectGracefully())),n.on("forceDisconnect",((e,t)=>this.onForceDisconnect(t))),n.on("serverPing",((e,t,n,r)=>this.sendPingResponse(e,t,n,r))),this.tryReconnect()}close(e){this.onForceDisconnect(0,e)}tryReconnectNow(){this.tryReconnectWithBackoff(1e3)}registerUserActivity(){this.lastUserActivity=performance.now(),this.userIsLeavingPage=!1,this.ensureIsConnected()}getSocketDebuggingInfo(){return{client_id:this.socket.socket?.sessionid,transport:this.socket.socket?.transport?.name,publicId:this.socket.publicId,lastUserActivity:this.lastUserActivity,connectionState:this.state,externalHeartbeat:this.externalHeartbeat}}changeState(e){const t=this.state;this.state=e,a.$.log("[ConnectionManager] changed state",{previousState:t,state:e}),this.dispatchEvent(new m("statechange",{detail:{state:e,previousState:t}}))}switchToWsFallbackIfPossible(){const e=new URLSearchParams(window.location.search);return!(!(0,i.A)("ol-wsUrl")||"fallback"===e.get("ws"))&&(e.set("ws","fallback"),window.location.search=e.toString(),!0)}onOnline(){this.state.inactiveDisconnect||this.ensureIsConnected()}onConnectionRejected(e){switch(e?.message){case"retry":this.startAutoReconnectCountdown(0);break;case"rate-limit hit when joining project":this.changeState({...this.state,error:"rate-limited"});break;case"not authorized":case"invalid session":this.changeState({...this.state,error:"not-logged-in",forceDisconnected:!0});break;case"project not found":this.changeState({...this.state,error:"project-deleted",forceDisconnected:!0});break;default:this.changeState({...this.state,error:"unable-to-join"})}}onConnectError(e){"websocket"===this.socket.socket.transport?.name&&e instanceof Event&&e.target instanceof WebSocket&&this.websocketFailureCount++,null!==this.connectionAttempt&&(this.connectionAttempt++<5?setTimeout((()=>{this.canReconnect()&&this.socket.socket.connect()}),(navigator.onLine?0:5e3)+this.connectionAttempt*(1+Math.random())*1e3):this.switchToWsFallbackIfPossible()||(this.disconnect(),this.changeState({...this.state,error:"unable-to-connect"})))}onConnect(){h&&(this.externalHeartbeatInterval&&window.clearInterval(this.externalHeartbeatInterval),"websocket"===this.socket.socket.transport?.name&&(this.externalHeartbeatInterval=window.setInterval((()=>this.sendExternalHeartbeat()),15e3))),this.websocketFailureCount=0}onDisconnect(){this.connectionAttempt=null,this.externalHeartbeatInterval&&window.clearInterval(this.externalHeartbeatInterval),this.externalHeartbeat.currentStart=0,this.changeState({...this.state,readyState:WebSocket.CLOSED}),this.disconnectIfIdleSince(c)||("rate-limited"===this.state.error?this.tryReconnectWithBackoff(15e3):this.startAutoReconnectCountdown(0))}onForceDisconnect(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"maintenance";clearInterval(this.idleDisconnectInterval),clearTimeout(this.reconnectCountdownInterval),window.removeEventListener("online",this.onOnline),window.setTimeout((()=>this.disconnect()),1e3*e),this.changeState({...this.state,forceDisconnected:!0,forcedDisconnectDelay:e,error:t})}onJoinProjectResponse(e){let{protocolVersion:t,publicId:n}=e;-1===this.protocolVersion||this.protocolVersion===t?(this.protocolVersion=t,this.socket.publicId=n,this.connectionAttempt=null,this.changeState({...this.state,readyState:WebSocket.OPEN,error:"",reconnectAt:null})):this.onForceDisconnect(0,"protocol-changed")}onReconnectGracefully(){this.disconnectIfIdleSince(648e5)||this.gracefullyReconnectUntil||(this.gracefullyReconnectUntil=performance.now()+d,this.tryReconnectGracefully())}canReconnect(){return this.state.readyState!==WebSocket.OPEN&&!this.state.forceDisconnected}isReconnectingSoon(e){return!!this.state.reconnectAt&&this.state.reconnectAt-performance.now()<=e}hasReconnectedRecently(e){return performance.now()-this.state.lastConnectionAttempt<e}isUserInactiveSince(e){return performance.now()-this.lastUserActivity>e}disconnectIfIdleSince(e){if(!this.isUserInactiveSince(e))return!1;const t=this.state.readyState===WebSocket.CLOSED;return this.changeState({...this.state,readyState:WebSocket.CLOSED,inactiveDisconnect:!0}),t||this.socket.disconnect(),!0}disconnect(){this.changeState({...this.state,readyState:WebSocket.CLOSED}),this.socket.disconnect()}ensureIsConnected(){this.state.readyState!==WebSocket.OPEN&&this.tryReconnectWithBackoff("rate-limited"===this.state.error?15e3:5e3)}startAutoReconnectCountdown(e){if(this.userIsLeavingPage)return;if(!this.canReconnect())return;let t;t=this.isUserInactiveSince(12e4)?60+Math.floor(2*Math.random()*60):3+Math.floor(7*Math.random());const n=e+1e3*t;this.isReconnectingSoon(n)||(this.changeState({...this.state,reconnectAt:performance.now()+n}),clearTimeout(this.reconnectCountdownInterval),this.reconnectCountdownInterval=window.setTimeout((()=>{this.isReconnectingSoon(0)&&this.tryReconnect()}),n))}tryReconnect(){this.gracefullyReconnectUntil=0,this.changeState({...this.state,reconnectAt:null}),this.canReconnect()&&(this.connectionAttempt=0,this.changeState({...this.state,readyState:WebSocket.CONNECTING,error:"",inactiveDisconnect:!1,lastConnectionAttempt:performance.now()}),this.addReconnectListeners(),this.socket.socket.transports=["xhr-polling"],this.websocketFailureCount<3&&this.socket.socket.transports.unshift("websocket"),(this.socket.socket.connecting||this.socket.socket.connected)&&this.socket.forceDisconnectWithoutEvent(),this.socket.socket.connect())}addReconnectListeners(){const e=()=>{n(),this.startAutoReconnectCountdown(navigator.onLine?0:5e3)},t=()=>{n()},n=()=>{this.socket.removeListener("error",e),this.socket.removeListener("connect",t)};this.socket.on("error",e),this.socket.on("connect",t)}tryReconnectGracefully(){this.state.readyState!==WebSocket.CLOSED&&this.gracefullyReconnectUntil&&(this.gracefullyReconnectUntil<performance.now()||this.isUserInactiveSince(5e3)?(this.disconnect(),this.tryReconnect()):setTimeout((()=>{this.tryReconnectGracefully()}),5e3))}tryReconnectWithBackoff(e){this.hasReconnectedRecently(e)?this.startAutoReconnectCountdown(e):this.tryReconnect()}sendExternalHeartbeat(){const e=performance.now();this.socket.emit("debug.getHostname",(()=>{if(this.externalHeartbeat.currentStart!==e)return;const t=performance.now();this.externalHeartbeat={currentStart:0,lastSuccess:t,lastLatency:t-e}})),this.externalHeartbeat.currentStart=e}sendPingResponse(e,t,n,r){const o=this.socket.socket.transport?.name,i=this.socket.socket.sessionid;this.socket.emit("clientPong",e,t,n,r,o,i)}}var g=n(3218),f=n(89753),O=n(31085);const b=(0,r.createContext)(void 0),v=e=>{let{children:t}=e;const n=(0,f.z)(),[o]=(0,r.useState)((()=>new p)),[i,a]=(0,r.useState)(o.state);(0,r.useEffect)((()=>{const e=e=>{a(e.detail.state)};return o.addEventListener("statechange",e),()=>{o.removeEventListener("statechange",e)}}),[o]);const s=i.readyState===WebSocket.OPEN,l=i.readyState===WebSocket.CONNECTING&&performance.now()-i.lastConnectionAttempt>1e3,c=(0,r.useCallback)((()=>(0,g.C)(i.reconnectAt)),[i.reconnectAt]),d=(0,r.useCallback)((()=>o.tryReconnectNow()),[o]),h=(0,r.useCallback)((()=>o.registerUserActivity()),[o]),u=(0,r.useCallback)((e=>o.close(e)),[o]),m=(0,r.useCallback)((()=>o.getSocketDebuggingInfo()),[o]);(0,r.useEffect)((()=>{if(i.forceDisconnected&&"out-of-sync"!==i.error){const e=window.setTimeout((()=>n.reload()),1e3*i.forcedDisconnectDelay);return()=>{window.clearTimeout(e)}}}),[i.forceDisconnected,i.forcedDisconnectDelay,i.error,n]);const v=(0,r.useMemo)((()=>({socket:o.socket,connectionState:i,isConnected:s,isStillReconnecting:l,secondsUntilReconnect:c,tryReconnectNow:d,registerUserActivity:h,closeConnection:u,getSocketDebuggingInfo:m})),[o.socket,i,s,l,h,c,d,u,m]);return(0,O.jsx)(b.Provider,{value:v,children:t})};function w(){const e=(0,r.useContext)(b);if(!e)throw new Error("useConnectionContext is only available inside ConnectionProvider");return e}},18452:(e,t,n)=>{n(82438),n(12266),n(50020),n(34840);const r=n(43921);class o{constructor(e){this.comments=new Map(e.map((e=>[e.id,e])))}[Symbol.iterator](){return this.comments.values()}toArray(){return Array.from(this)}get length(){return this.comments.size}toRaw(){const e=[];for(const t of this.comments.values())e.push(t.toRaw());return e}getComment(e){return this.comments.get(e)}add(e){this.comments.set(e.id,e)}delete(e){return this.comments.delete(e)}static fromRaw(e){return new o(e.map(r.fromRaw))}applyInsert(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{commentIds:[]};t.commentIds||(t.commentIds=[]);for(const[n,r]of this.comments){const o=r.applyInsert(e.pos,e.length,t.commentIds.includes(n));this.comments.set(n,o)}}applyDelete(e){for(const[t,n]of this.comments){const r=n.applyDelete(e);this.comments.set(t,r)}}idsCoveringRange(e){return Array.from(this.comments.entries()).filter((t=>{let[,n]=t;return n.ranges.some((t=>t.contains(e)))})).map((e=>{let[t]=e;return t}))}}e.exports=o},18860:(e,t,n)=>{"use strict";n.d(t,{A:()=>u,J:()=>h});var r=n(5804),o=n(60961),i=n(64932),a=n(37858);e=n.hmd(e);var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}const{Doc:h}=(()=>{var e,t,n,h=void 0;window.sharejs=h={};var u=h.types={};h._bt=t=function(e,t,n,r){var o=void 0;return e.transformX=e.transformX=o=function(e,i){n(e),n(i);var a,s,l,d=[],h=!0,u=!1,m=void 0;try{for(var p,g=Array.from(i)[Symbol.iterator]();!(h=(p=g.next()).done);h=!0){for(var f=p.value,O=[],b=0;b<e.length;){var v,w=[];if(a=e[b],l=w,t(O,a,s=f,"left"),t(l,s,a,"right"),b++,1!==w.length){if(0===w.length){var _=!0,x=!1,y=void 0;try{for(var k,C=Array.from(e.slice(b))[Symbol.iterator]();!(_=(k=C.next()).done);_=!0)v=k.value,r(O,v)}catch(e){x=!0,y=e}finally{try{!_&&C.return&&C.return()}finally{if(x)throw y}}f=null;break}var S=Array.from(o(e.slice(b),w)),Q=c(S,2),E=Q[0],T=Q[1],j=!0,P=!1,$=void 0;try{for(var R,X=Array.from(E)[Symbol.iterator]();!(j=(R=X.next()).done);j=!0)v=R.value,r(O,v)}catch(e){P=!0,$=e}finally{try{!j&&X.return&&X.return()}finally{if(P)throw $}}var A=!0,q=!1,L=void 0;try{for(var I,N=Array.from(T)[Symbol.iterator]();!(A=(I=N.next()).done);A=!0){var D=I.value;r(d,D)}}catch(e){q=!0,L=e}finally{try{!A&&N.return&&N.return()}finally{if(q)throw L}}f=null;break}f=w[0]}null!=f&&r(d,f),e=O}}catch(e){u=!0,m=e}finally{try{!h&&g.return&&g.return()}finally{if(u)throw m}}return[e,d]},e.transform=e.transform=function(e,n,r){if("left"!==r&&"right"!==r)throw new Error("type must be 'left' or 'right'");if(0===n.length)return e;if(1===e.length&&1===n.length)return t([],e[0],n[0],r);if("left"===r){var i,a=Array.from(o(e,n)),s=c(a,2);return i=s[0],s[1],i}var l=Array.from(o(n,e)),d=c(l,2);return d[0],d[1]}};var m={name:"text",create:function(){return""}},p=function(e,t,n){return e.slice(0,t)+n+e.slice(t)},g=function(e){if("number"!=typeof e.p)throw new Error("component missing position field");if(!("string"===l(e.i)^"string"===l(e.d)^"string"===l(e.c)))throw new Error("component needs an i, d or c field");if(!(e.p>=0))throw new Error("position cannot be negative")},f=function(e){var t=!0,n=!1,r=void 0;try{for(var o,i=Array.from(e)[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;g(a)}}catch(e){n=!0,r=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw r}}return!0};m.apply=function(e,t){f(t);var n=!0,r=!1,o=void 0;try{for(var i,a=Array.from(t)[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value;if(null!=s.i)e=p(e,s.p,s.i);else if(null!=s.d){var l=e.slice(s.p,s.p+s.d.length);if(s.d!==l)throw new Error("Delete component '"+s.d+"' does not match deleted text '"+l+"'");e=e.slice(0,s.p)+e.slice(s.p+s.d.length)}else{if(null==s.c)throw new Error("Unknown op type");var c=e.slice(s.p,s.p+s.c.length);if(s.c!==c)throw new Error("Comment component '"+s.c+"' does not match commented text '"+c+"'")}}}catch(e){r=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}return e};var O=function(e,t){var n=void 0,r={};for(var o in e)n=e[o],r[o]=n;for(o in t)n=t[o],r[o]=n;return r};m._append=e=function(e,t){if(""!==t.i&&""!==t.d){if(0===e.length)return e.push(t);var n=e[e.length-1];return null!=n.i&&null!=t.i&&n.p<=t.p&&t.p<=n.p+n.i.length&&n.u===t.u?e[e.length-1]=O(n,{i:p(n.i,t.p-n.p,t.i)}):null!=n.d&&null!=t.d&&t.p<=n.p&&n.p<=t.p+t.d.length&&n.u===t.u?e[e.length-1]=O(n,{d:p(t.d,n.p-t.p,n.d),p:t.p}):e.push(t)}},m.compose=function(t,n){f(t),f(n);var r=t.slice(),o=!0,i=!1,a=void 0;try{for(var s,l=Array.from(n)[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var c=s.value;e(r,c)}}catch(e){i=!0,a=e}finally{try{!o&&l.return&&l.return()}finally{if(i)throw a}}return r},m.compress=function(e){return m.compose([],e)},m.normalize=function(t){var n=[];null==t.i&&null==t.p||(t=[t]);var r=!0,o=!1,i=void 0;try{for(var a,s=Array.from(t)[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value;null==l.p&&(l.p=0),e(n,l)}}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n};var b=function(e,t,n){if(null!=t.i)return t.p<e||t.p===e&&n?e+t.i.length:e;if(null!=t.d)return e<=t.p?e:e<=t.p+t.d.length?t.p:e-t.d.length;if(null!=t.c)return e;throw new Error("unknown op type")};m.transformCursor=function(e,t,n){var r="right"===n,o=!0,i=!1,a=void 0;try{for(var s,l=Array.from(t)[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var c=s.value;e=b(e,c,r)}}catch(e){i=!0,a=e}finally{try{!o&&l.return&&l.return()}finally{if(i)throw a}}return e},m._tc=n=function(t,n,r,o){var i=void 0,a=void 0,s=void 0;if(f([n]),f([r]),null!=n.i)e(t,O(n,{p:b(n.p,r,"right"===o)}));else if(null!=n.d)if(null!=r.i){var l=n.d;n.p<r.p&&(e(t,O(n,{d:l.slice(0,r.p-n.p)})),l=l.slice(r.p-n.p)),""!==l&&e(t,O(n,{d:l,p:n.p+r.i.length}))}else if(null!=r.d)if(n.p>=r.p+r.d.length)e(t,O(n,{p:n.p-r.d.length}));else if(n.p+n.d.length<=r.p)e(t,n);else{if(s=O(n,{d:""}),n.p<r.p&&(s.d=n.d.slice(0,r.p-n.p)),n.p+n.d.length>r.p+r.d.length&&(s.d+=n.d.slice(r.p+r.d.length-n.p)),a=Math.max(n.p,r.p),i=Math.min(n.p+n.d.length,r.p+r.d.length),n.d.slice(a-n.p,i-n.p)!==r.d.slice(a-r.p,i-r.p))throw new Error("Delete ops delete different text in the same region of the document");""!==s.d&&(s.p=b(s.p,r),e(t,s))}else{if(null==r.c)throw new Error("unknown op type");e(t,n)}else if(null!=n.c)if(null!=r.i)if(n.p<r.p&&r.p<n.p+n.c.length){var c=r.p-n.p,d=n.c.slice(0,+(c-1)+1||void 0)+r.i+n.c.slice(c);e(t,O(n,{c:d}))}else e(t,O(n,{p:b(n.p,r,!0)}));else if(null!=r.d)if(n.p>=r.p+r.d.length)e(t,O(n,{p:n.p-r.d.length}));else if(n.p+n.c.length<=r.p)e(t,n);else{if(s=O(n,{c:""}),n.p<r.p&&(s.c=n.c.slice(0,r.p-n.p)),n.p+n.c.length>r.p+r.d.length&&(s.c+=n.c.slice(r.p+r.d.length-n.p)),a=Math.max(n.p,r.p),i=Math.min(n.p+n.c.length,r.p+r.d.length),n.c.slice(a-n.p,i-n.p)!==r.d.slice(a-r.p,i-r.p))throw new Error("Delete ops delete different text in the same region of the document");s.p=b(s.p,r),e(t,s)}else{if(null==r.c)throw new Error("unknown op type");e(t,n)}return t};m.invert=function(e){return Array.from(e.slice().reverse()).map((function(e){return function(e){return null!=e.i?{d:e.i,p:e.p}:{i:e.d,p:e.p}}(e)}))},h.types||(h.types={}),t(m,n,f,e),h.types.text=m,m.api={otType:"sharejs-text-ot",provides:{text:!0},getLength:function(){return this.snapshot.length},getText:function(){return this.snapshot},insert:function(e,t,n,r){var o={p:e,i:t};return n&&(o.u=!0),o=[o],this.submitOp(o,r),o},del:function(e,t,n,r){var o={p:e,d:this.snapshot.slice(e,e+t)};return n&&(o.u=!0),o=[o],this.submitOp(o,r),o},_register:function(){return this.on("remoteop",(function(e){var t=this;return function(){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=Array.from(e)[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value;void 0!==l.i?n.push(t.emit("insert",l.p,l.i)):void 0!==l.d?n.push(t.emit("delete",l.p,l.d)):n.push(void 0)}}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}()}))}};var v=function(e){return setTimeout(e,0)},w=function(){function e(){d(this,e)}return s(e,[{key:"on",value:function(e,t){return this._events||(this._events={}),this._events[e]||(this._events[e]=[]),this._events[e].push(t),this}},{key:"removeListener",value:function(e,t){var n=this;this._events||(this._events={});for(var r=this._events[e]||(this._events[e]=[]),o=0;o<r.length;)r[o]===t&&(r[o]=void 0),o++;return v((function(){return n._events[e]=Array.from(n._events[e]).filter((function(e){return e}))})),this}},{key:"emit",value:function(e){if(!(null!=this._events?this._events[e]:void 0))return this;for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=!0,i=!1,a=void 0;try{for(var s,l=Array.from(this._events[e])[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var c=s.value;c&&c.apply(this,n)}}catch(e){i=!0,a=e}finally{try{!o&&l.return&&l.return()}finally{if(i)throw a}}return this}}]),e}();w.mixin=function(e){var t=e.prototype||e;return t.on=w.prototype.on,t.removeListener=w.prototype.removeListener,t.emit=w.prototype.emit,e},h.extendDoc=function(e,t){return _.prototype[e]=t};var _=function(){function e(t,n,r){d(this,e),this.flush=this.flush.bind(this),this.setFlushDelay=this.setFlushDelay.bind(this),this.shout=this.shout.bind(this),this.connection=t,this.name=n,r||(r={}),this.version=r.v,this.lastServerActivity=performance.now(),this.snapshot=r.snaphot,r.type&&this._setType(r.type),this.state="closed",this.autoOpen=!1,this._create=r.create,this.inflightOp=null,this.inflightCallbacks=[],this.inflightSubmittedIds=[],this.pendingOp=null,this.pendingCallbacks=[]}return s(e,[{key:"_xf",value:function(e,t){return this.type.transformX?this.type.transformX(e,t):[this.type.transform(e,t,"left"),this.type.transform(t,e,"right")]}},{key:"_otApply",value:function(e,t,n){var r=this.snapshot;if(this.snapshot=this.type.apply(this.snapshot,e),this.emit("change",e,r,n,t),t)return this.emit("remoteop",e,r,n)}},{key:"_connectionStateChanged",value:function(e,t){switch(e){case"disconnected":this.state="closed",this.inflightOp&&this.inflightSubmittedIds.push(this.connection.id),this.emit("closed");break;case"ok":this.autoOpen&&this.open();break;case"stopped":"function"==typeof this._openCallback&&this._openCallback(t)}return this.emit(e,t)}},{key:"_setType",value:function(e){if("string"==typeof e&&(e=u[e]),!e||!e.compose)throw new Error("Support for types without compose() is not implemented");if(this.type=e,e.api){for(var t in e.api){var n=e.api[t];this[t]=n}return"function"==typeof this._register?this._register():void 0}return this.provides={}}},{key:"_onMessage",value:function(e){if(!0===e.open){if(this.state="open",this._create=!1,null==this.created&&(this.created=!!e.create),e.type&&this._setType(e.type),e.create?(this.created=!0,this.snapshot=this.type.create()):(!0!==this.created&&(this.created=!1),void 0!==e.snapshot&&(this.snapshot=e.snapshot)),null!=e.v&&(this.version=e.v),this.inflightOp){var t={doc:this.name,op:this.inflightOp,v:this.version};this.inflightSubmittedIds.length&&(t.dupIfSource=this.inflightSubmittedIds),this.connection.send(t)}else this.flush();return this.emit("open"),"function"==typeof this._openCallback?this._openCallback(null):void 0}if(!1===e.open)return e.error&&(o.$.error("Could not open document: "+e.error),this.emit("error",e.error),"function"==typeof this._openCallback&&this._openCallback(e.error)),this.state="closed",this.emit("closed"),"function"==typeof this._closeCallback&&this._closeCallback(),this._closeCallback=null;if(null!==e.op||"Op already submitted"!==r){if(void 0===e.op&&void 0!==e.v||e.op&&Array.from(this.inflightSubmittedIds).includes(e.meta.source)){if(!e.error)if(void 0===e.op&&void 0!==e.v){if(e.v<this.version)return void o.$.warn("Received an ack for an op with an outdated version.")}else e.v<this.version&&(0,a.TB)("/error/client",{body:{error:{message:"out-of-order-self-op-ignored"},meta:{msg:{v:e.v},version:this.version}}});var n=this.inflightOp;this.inflightOp=null,this.inflightSubmittedIds.length=0,null===this.pendingOp&&this.emit("saved");var r=e.error;if(r){if(this.type.invert){var i=this.type.invert(n);if(this.pendingOp){var s=Array.from(this._xf(this.pendingOp,i)),l=c(s,2);this.pendingOp=l[0],i=l[1]}this._otApply(i,!0,e)}else this.emit("error","Op apply failed ("+r+") and the op could not be reverted");var d=!0,h=!1,u=void 0;try{for(var m,p=Array.from(this.inflightCallbacks)[Symbol.iterator]();!(d=(m=p.next()).done);d=!0)(0,m.value)(r)}catch(e){h=!0,u=e}finally{try{!d&&p.return&&p.return()}finally{if(h)throw u}}}else{if(e.v<this.version)return;if(e.v!==this.version)throw new Error("Invalid version from server");this.version++,this.lastServerActivity=performance.now(),this.emit("acknowledge",n);var g=!0,f=!1,O=void 0;try{for(var b,v=Array.from(this.inflightCallbacks)[Symbol.iterator]();!(g=(b=v.next()).done);g=!0)(0,b.value)(null,n)}catch(e){f=!0,O=e}finally{try{!g&&v.return&&v.return()}finally{if(f)throw O}}}return this.delayedFlush()}if(e.op){if(e.v<this.version)return;if(e.doc!==this.name)return this.emit("error","Expected docName '"+this.name+"' but got "+e.doc);if(e.v!==this.version)return this.emit("error","Expected version "+this.version+" but got "+e.v);var w=e.op;if(null!==this.inflightOp){var _=Array.from(this._xf(this.inflightOp,w)),x=c(_,2);this.inflightOp=x[0],w=x[1]}if(null!==this.pendingOp){var y=Array.from(this._xf(this.pendingOp,w)),k=c(y,2);this.pendingOp=k[0],w=k[1]}return this.version++,this.lastServerActivity=performance.now(),this._otApply(w,!0,e)}if(e.meta){var C=e.meta,S=C.path,Q=C.value;return"shout"===(null!=S?S[0]:void 0)?this.emit("shout",Q):o.$.warn("Unhandled meta op:",e)}return o.$.warn("Unhandled document message:",e)}}},{key:"flush",value:function(){if(this.flushTimeout=null,"ok"===this.connection.state&&null===this.inflightOp&&null!==this.pendingOp){if(this.inflightOp=this.pendingOp,this.inflightCallbacks=this.pendingCallbacks,this.pendingOp=null,this.pendingCallbacks=[],this.emit("flipped_pending_to_inflight"),(0,i.A)("ol-useShareJsHash")||o.v){var e=Date.now(),t=this.__lastSubmitTimestamp&&e-this.__lastSubmitTimestamp;if(!this.__lastSubmitTimestamp||t>5e3||t<0||o.v){const t=this.getText();var n=(0,r.V)("blob "+t.length+"\0"+t);this.__lastSubmitTimestamp=e}}var a=this.__lastVersion;return this.__lastVersion=this.version,this.connection.send({doc:this.name,op:this.inflightOp,v:this.version,lastV:a,hash:n})}}},{key:"submitOp",value:function(e,t){null!=this.type.normalize&&(e=this.type.normalize(e));var n=this.snapshot;return this.snapshot=this.type.apply(this.snapshot,e),null!==this.pendingOp?this.pendingOp=this.type.compose(this.pendingOp,e):this.pendingOp=e,t&&this.pendingCallbacks.push(t),this.emit("change",e,n),this.delayedFlush()}},{key:"delayedFlush",value:function(){if(null==this.flushTimeout)return this.flushTimeout=setTimeout(this.flush,this._flushDelay||0)}},{key:"setFlushDelay",value:function(e){return this._flushDelay=e}},{key:"shout",value:function(e){return this.connection.send({doc:this.name,meta:{path:["shout"],value:e}})}},{key:"open",value:function(e){var t=this;if(this.autoOpen=!0,"closed"===this.state){var n={doc:this.name,open:!0};return void 0===this.snapshot&&(n.snapshot=null),this.type&&(n.type=this.type.name),null!=this.version&&(n.v=this.version),this._create&&(n.create=!0),this.connection.send(n),this.state="opening",this._openCallback=function(n){return t._openCallback=null,"function"==typeof e?e(n):void 0}}}},{key:"close",value:function(e){return this.autoOpen=!1,"closed"===this.state?"function"==typeof e?e():void 0:(this.connection.send({doc:this.name,open:!1}),this.state="closed",this.emit("closing"),this._closeCallback=e)}}]),e}();return w.mixin(_),h.Doc=_,h})(),u=window.sharejs},20593:(e,t,n)=>{const r=n(37603);class UnprocessableError extends r{}e.exports={UnprocessableError,ApplyError:class ApplyError extends UnprocessableError{constructor(e,t,n){super(e),this.operation=t,this.operand=n}},InvalidInsertionError:class InvalidInsertionError extends UnprocessableError{constructor(e,t){super("inserted text contains non BMP characters"),this.str=e,this.operation=t}},TooLongError:class TooLongError extends UnprocessableError{constructor(e,t){super("resulting string would be too long",{resultLength:t}),this.operation=e,this.resultLength=t}}}},21283:(e,t,n)=>{"use strict";n.r(t),n.d(t,{extension:()=>i,highlightFixEffect:()=>a});n(82438),n(91020);var r=n(57195),o=n(83173);const i=()=>[l,c],a=r.Pe.define(),s=o.NZ.line({class:"ol-cm-highlight-fix"}),l=r.sU.define({create:()=>o.NZ.none,update(e,t){for(const n of t.effects)n.is(a)&&(e=n.value?o.NZ.set(n.value.ranges.flatMap((e=>{const n=t.state.doc.lineAt(e.from),r=t.state.doc.lineAt(Math.max(e.to-1,0)),o=[];for(let e=n.number;e<=r.number;e++)o.push(s.range(t.state.doc.line(e).from));return o}))):o.NZ.none);return e},provide:e=>o.Lz.decorations.from(e)}),c=o.Lz.theme({".ol-cm-highlight-fix":{background:"rgba(255, 255, 155, 0.5) !important",transition:"background 2s","& @starting-style":{background:"transparent"}}})},21947:(e,t,n)=>{"use strict";n.d(t,{$2:()=>c,E9:()=>h,ee:()=>s,hN:()=>d,l_:()=>a,ob:()=>l,qI:()=>u});var r=n(29587),o=n(97900),i=(n(47200),n(83290));const a=(e,t,n,r)=>{if(t.type.is("EnvNameGroup")){if(!r(t.node))return!1;if(!t.node.prevSibling?.type.is("Begin"))return!1;const o=t.node.getChild("OpenBrace");if(!o)return!1;const i=o.node.nextSibling;if(!i)return!1;const a=e.doc.sliceString(i.from,i.to);if(a.length<1)return!1;const s={title:a,from:i.from,to:i.to,line:e.doc.lineAt(i.from).number,type:"usage",raw:e.sliceDoc(t.from,t.to)};n.push(s)}else if(t.type.is("NewEnvironment")||t.type.is("RenewEnvironment")){if(!r(t.node))return!1;const o=t.node.getChild("LiteralArgContent");if(!o)return;const i=e.doc.sliceString(o.from,o.to);if(!i)return;const a={title:i,from:o.from,to:o.to,line:e.doc.lineAt(o.from).number,type:"definition",raw:e.sliceDoc(t.from,t.to)};n.push(a)}},s=(e,t)=>{const n=(0,r.a_)(e,t,100);if(!n)return;let i=n.resolve(t);if(i){if(i.type.is("EnvNameGroup")&&(0,o.I8)(e,t,"Begin"))return!0;if(i.type.is("$Environment")||i.type.is("LaTeX")&&t===e.doc.length){if(i=n.resolve(t,-1),!i)return;if(i.type.is("OpenBrace")||i.type.is("$EnvName"))return!0}}},l=(e,t)=>{const n=(0,r.a_)(e,t,100);if(!n)return;let i=n.resolve(t);if(i){if(i.type.is("EnvNameGroup")&&(0,o.I8)(e,t,"End"))return!0;if(i.type.is("$Environment")||i.type.is("Content")){if(i=n.resolve(t,-1),!i)return;if(i.type.is("OpenBrace")||i.type.is("EnvName"))return!0}}};function c(e,t){if(e?.type.is("$Environment")&&(e=e.getChild("BeginEnv")),!e?.type.is("BeginEnv")&&!e?.type.is("EndEnv"))return null;const n=e?.getChild("EnvNameGroup")?.getChild("OpenBrace")?.nextSibling;return n?n.type.is("CloseBrace")?null:t.sliceDoc(n.from,n.to):null}const d=(e,t)=>c(e,t)?.replace(/\*$/,"");function h(e){return e.getChild("BeginEnv")?.getChildren("TextArgument")}function u(e,t){let n,r,o,a,s=null,l=null,c=null;const d=e.from,h=e.to;let u=!1;return e.cursor().iterate((e=>{if(u)return!1;if(e.type.is("Caption")){if(s)return u=!0,!1;s={from:e.from,to:e.to}}if(e.type.is("Label")){if(l)return u=!0,!1;l={from:e.from,to:e.to}}if(e.type.is("IncludeGraphics")){if(n)return u=!0,!1;a={from:e.from,to:e.to};const i=e.node.getChild("IncludeGraphicsArgument")?.getChild("FilePathArgument")?.getChild("LiteralArgContent");if(!i)return u=!0,!1;n={from:i.from,to:i.to,path:t.sliceDoc(i.from,i.to)};const s=e.node.getChild("OptionalArgument")?.getChild("ShortOptionalArg");if(!s)return r=void 0,!1;c={from:s.from,to:s.to};const l=t.sliceDoc(s.from,s.to),d=l.match(/^width=([0-9]|(?:[0-9]*\.[0-9]+)|(?:[0-9]+\.))\\(linewidth|pagewidth|textwidth|hsize|columnwidth)$/);d?(r=parseFloat(d[1]),"linewidth"!==d[2]&&(o=l)):o=l}})),u||void 0===a||void 0===n?null:new i.Nw({caption:s,label:l,file:n,from:d,to:h,width:r,unknownGraphicsArguments:o,graphicsCommand:a,graphicsCommandArguments:c})}},22246:(e,t,n)=>{"use strict";n(82438),n(50020);const r=n(99942),o=/[/*\u0000-\u001F\u007F\u0080-\u009F\uD800-\uDFFF]/g,i=/(^\.$)|(^\.\.$)|(^\s+)|(\s+$)/g,a=/^(prototype|constructor|toString|toLocaleString|valueOf|hasOwnProperty|isPrototypeOf|propertyIsEnumerable|__defineGetter__|__lookupGetter__|__defineSetter__|__lookupSetter__|__proto__)$/;function s(e){return e=(e=e.replace(o,"_")).replace(i,(function(e){return new Array(e.length+1).join("_")}))}t.clean=function(e){return t.cleanDebug(e)[0]},t.cleanDebug=function(e){let t=e,n="";function o(r){e!==t&&(n&&(n+=","),n+=r,t=e)}return e=r.normalize(e),o("normalize"),e=e.replace(/\\/g,"/"),o("workaround for IE"),e=e.replace(/\/+/g,"/"),o("no multiple slashes"),e=e.replace(/^(\/.*)$/,"_$1"),o("no leading /"),e=e.replace(/^(.+)\/$/,"$1"),o("no trailing /"),e=e.replace(/^ *(.*)$/,"$1"),o("no leading spaces"),e=e.replace(/^(.*[^ ]) *$/,"$1"),o("no trailing spaces"),0===e.length&&(e="_"),o("empty"),e=e.split("/").map(s).join("/"),o("cleanPart"),e=e.replace(a,"@$1"),o("BLOCKED_FILE_RX"),[e,n]},t.isClean=function(e){return t.isCleanDebug(e)[0]},t.isCleanDebug=function(e){if(e.length>1024)return[!1,"MAX_PATH"];if(0===e.length)return[!1,"empty"];const[n,r]=t.cleanDebug(e);return n!==e?[!1,r]:[!0,""]}},22440:(e,t,n)=>{"use strict";n.d(t,{T:()=>o});var r=n(69954);const o=(e,t)=>{(0,r._)(e,t)}},22743:(e,t,n)=>{"use strict";n.r(t),n.d(t,{SnapshotUpdater:()=>v,buildFileTree:()=>p,createFolder:()=>u,populateSnapshot:()=>O});n(97107),n(82438),n(99819),n(50020),n(69033),n(68903),n(21018),n(1415),n(4448),n(58871),n(56539);var r=n(58756),o=n(37603),i=n.n(o),a=n(60961),s=n(37858),l=n(64932),c=n(90165),d=n.n(c);const h=10;function u(e,t){return{_id:e,name:t,folders:[],docs:[],fileRefs:[]}}function m(e){const t=e.lastIndexOf("/");return-1===t?["",e]:[e.slice(0,t),e.slice(t+1)]}function p(e){const t=e.getFileMap(),n=u("","");let r="",o=n;const i=e=>{if(""===e)return n;if(r===e&&o)return o;const[t,a]=m(e),s=i(t);let l=s.folders.find((e=>e.name===a));return l||(l=u(e,a),s.folders.push(l)),o=l,r=e,l},a=new Map;for(const[t,{pathname:n}]of Object.entries(e.getV2DocVersions()?.data||{}))a.set(n,t);for(const e of t.getPathnames().sort()){const n=t.getFile(e),[r,o]=m(e),s=i(r),l=n.getMetadata();n.isEditable()&&0===Object.keys(l).length?s.docs.push({_id:a.get(e)||e,name:o}):s.fileRefs.push({_id:e,created:l.importedAt,name:o,hash:n.getHash(),linkedFileData:l})}return n}async function g(e){if((0,l.A)("ol-ro-mirror-on-client-no-local-storage"))throw new Error("indexedDB persistence is disabled");try{await window.navigator.storage.persist()}catch{}return await new Promise(((t,n)=>{const r=window.indexedDB.open(`snapshot-data:${e}`,2);r.onerror=e=>{n(new(i())("failed to open IndexDB",{event:e}))},r.onsuccess=()=>t(r.result),r.onupgradeneeded=()=>{r.result.createObjectStore("blobs")}}))}class NotFoundError extends(i()){}class f{constructor(e,t,n){this.projectId=e,this.db=t,this.signal=n,this.prefetchedBlobs=new Map}async prefetchBlobs(e){const t=d()(h);await Promise.all(Array.from(e).map((e=>t((async()=>{this.prefetchedBlobs.set(e,await this.getString(e))})))))}async getString(e){if(this.prefetchedBlobs.has(e))return this.prefetchedBlobs.get(e);if(this.db)try{return await new Promise(((t,n)=>{const r=this.db.transaction("blobs","readonly").objectStore("blobs").get(e);r.onsuccess=()=>{"string"!=typeof r.result?n(new NotFoundError("blob not cached")):t(r.result)},r.onerror=e=>{n(new(i())("failed to read IndexDB",{event:e}))}}))}catch(e){e instanceof NotFoundError||a.$.error(e)}const t=`/project/${this.projectId}/blob/${e}`,n=await fetch(t,{signal:this.signal,cache:this.db||(0,l.A)("ol-ro-mirror-on-client-no-local-storage")?"no-store":"force-cache"});if(!n.ok)throw new s.fk(n.statusText,t,void 0,n);const r=await n.text();if(this.db)try{await new Promise(((t,n)=>{const o=this.db.transaction("blobs","readwrite").objectStore("blobs").put(r,e);o.onsuccess=()=>t(),o.onerror=e=>{n(new(i())("failed to write IndexDB",{event:e}))}}))}catch(e){a.$.error(e)}return r}async getObject(e){return JSON.parse(await this.getString(e))}}async function O(e){const t=(0,l.A)("ol-project_id");let n;try{n=await g(t)}catch(e){a.$.error(e)}const r="function"==typeof AbortSignal.timeout?AbortSignal.timeout(6e5):void 0;try{const o=new f(t,n,r);await o.prefetchBlobs(b(e)),await e.getFileMap().mapAsync((e=>{if(e&&e.isEditable())return e.load("eager",o)}),h)}finally{n&&n.close()}}function b(e){const t=new Set;return e.getFileMap().map((e=>{if(!e||!e.isEditable())return;const n=e.data;n instanceof r.LazyStringFileData&&(t.add(n.hash),n.rangesHash&&t.add(n.rangesHash))})),t}class v{constructor(e){this.projectId=e,this.ac=new AbortController}async tryFlush(e){try{await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};await(0,s.TB)(`/project/${e}/flush`,{signal:t.signal})}(this.projectId,{signal:e})}catch(e){(0,s.Jz)(e)||a.$.error(i().tag(e,"flush history"))}}abort(){this.ac.abort()}resetTimeout(){this.abort(),this.ac=new AbortController;const e=setTimeout((()=>this.ac.abort()),3e4),t=this.ac.signal;return t.addEventListener("abort",(()=>clearTimeout(e))),t}async refresh(){const e=this.resetTimeout();try{return await this.doRefresh(e)}finally{this.abort()}}async doRefresh(e){if(await this.tryFlush(e),this.chunk)for(;;){const{changes:t,latestStartVersion:n}=await(0,s.hm)(`/project/${this.projectId}/changes-in-chunk?since=${this.chunk.getEndVersion()}`,{signal:e});for(const e of t){const t=r.Change.fromRaw(e);t.applyTo(this.chunk.getSnapshot(),{strict:!0}),this.chunk.pushChanges([t])}if(!(n>this.chunk.getStartVersion()))break;this.chunk=new r.Chunk(new r.History(this.chunk.getSnapshot(),[]),this.chunk.getEndVersion())}else{this.chunk=await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=await(0,s.hm)(`/project/${e}/latest/history`,{signal:t.signal});return r.Chunk.fromRaw(n.chunk)}(this.projectId,{signal:e}),this.chunk.getSnapshot().applyAll(this.chunk.getChanges(),{strict:!0});try{await async function(e){const t=(0,l.A)("ol-project_id"),n=await g(t),r=await new Promise(((e,t)=>{const r=n.transaction("blobs","readonly").objectStore("blobs").getAllKeys();r.onsuccess=()=>e(r.result),r.onerror=e=>t(new(i())("list IndexDB",{event:e}))})),o=b(e),a=[];for(const e of r)o.has(e)||a.push(e);await new Promise(((e,t)=>{const r=n.transaction("blobs","readwrite");for(const e of a)r.objectStore("blobs").delete(e);r.oncomplete=()=>e(),r.onerror=e=>t(new(i())("remove from IndexDB",{event:e}))}))}(this.chunk.getSnapshot())}catch(e){a.$.error(i().tag(e,"purge unused blobs"))}}return{snapshot:this.chunk.getSnapshot(),snapshotVersion:this.chunk.getEndVersion()}}}},23442:(e,t,n)=>{"use strict";n.r(t),n.d(t,{extension:()=>a,previousFixEffect:()=>o,previousFixState:()=>i});var r=n(57195);const o=r.Pe.define(),i=r.sU.define({create:()=>null,update(e,t){for(const n of t.effects)n.is(o)&&(e=n.value);return e}}),a=()=>[i]},23479:(e,t,n)=>{"use strict";n.d(t,{h:()=>d});n(82438),n(57327);var r=n(60961);n(44199);class o{static connect(e,t){return new o}constructor(e){this._socket=e}forceDisconnectWithoutEvent(){}}const i=["connect","disconnect","emit","on","removeListener"];for(const e of i)o.prototype[e]=function(){this._socket[e].apply(this._socket,arguments)};class a extends o{static connect(){return new a}constructor(e){super(e),this.socket={get connected(){return!1},get sessionid(){},get transport(){return{}},connect(){},disconnect(e){}}}connect(){}disconnect(e){}emit(){}on(){}removeListener(){}}class s extends o{static connect(e,t){return new s(io.connect(e,t))}constructor(e){super(e),this.socket=this._socket.socket;const t=this;Object.defineProperty(this.socket,"transport",{get:()=>t._transport,set(e){t.forceDisconnectWithoutEvent(),t._transport=e}})}forceDisconnectWithoutEvent(){clearTimeout(this.socket.heartbeatTimeoutTimer),this._transport&&this.forceCloseTransport(this._transport)}forceCloseTransport(e){if(e.clearTimeouts(),e instanceof io.Transport.websocket){e.websocket.onopen=e.websocket.onmessage=()=>e.websocket.close(),e.websocket.onclose=e.websocket.onerror=()=>{};try{e.websocket.close()}catch{}}else if(e instanceof io.Transport["xhr-polling"]){e.onData=e.onClose=e.get=()=>{};for(const t of[e.xhr,e.sendXHR])if(t){t.onreadystatechange=t.onload=t.onerror=()=>{};try{t.abort()}catch{}}e.xhr=e.sendXHR=null,fetch(e.prepareUrl()+"/?disconnect=1",{keepalive:!0}).then((e=>e.text())).catch((()=>{}))}else{try{e.close()}catch{}r.$.warn("unexpected socket.io transport",e)}}}class l extends o{static connect(e,t){return t.forceNew=t["force new connection"],t.path="/"+t.resource,t.reconnection=t.reconnect,t.timeout=t["connect timeout"],new l(e,t)}static get EVENT_MAP(){const e=["connect_error","connect_timeout","error"];return new Map([["connect_failed",e],["error",e]])}_on(e,t){this._events.has(e)?this._events.get(e).push(t):this._events.set(e,[t]),this._socket.on(e,t)}on(e,t){if(l.EVENT_MAP.has(e))for(const n of l.EVENT_MAP.get(e))this._on(n,t);else this._on(e,t)}_removeListener(e,t){if(this._events.has(e)){const n=this._events.get(e),r=n.indexOf(t);-1!==r&&n.splice(r,1)}this._socket.removeListener(e,t)}removeListener(e,t){if(l.EVENT_MAP.has(e))for(const n of l.EVENT_MAP.get(e))this._removeListener(n,t);else this._removeListener(e,t)}static createNewSocket(e,t){return io.Manager(e,t).socket("/",t)}_replaceSocketWithNewInstance(){const e=this._socket,t=l.createNewSocket(this._url,this._options);this._events.forEach(((n,r)=>{for(const o of n)e.removeListener(r,o),t.on(r,o)})),e.connected&&e.disconnect(),this._socket=t}connect(){this._replaceSocketWithNewInstance()}constructor(e,t){super(l.createNewSocket(e,t)),this._url=e,this._options=t,this._events=new Map;const n=this;function r(){return n._socket.io&&n._socket.io.engine||{}}this.socket={get connected(){return n._socket.connected},get sessionid(){return n._socket.id?n._socket.id:r().id},get transport(){return r().transport},connect(){n._replaceSocketWithNewInstance()},disconnect:e=>n._socket.disconnect(e)}}}let c;"undefined"!=typeof io&&io?"string"==typeof io.version&&"0"===io.version.slice(0,1)?(r.$.log("[socket.io] Shim: detected v0"),c=s):(r.$.log("[socket.io] Shim: detected v2"),c=l):(r.$.log("[socket.io] Shim: socket.io is not loaded, returning noop"),c=a);const d={SocketShimNoop:a,SocketShimV0:s,SocketShimV2:l,current:c,connect:c.connect,stub:()=>new a}},23531:(e,t,n)=>{"use strict";n(97107),n(82438),n(99819),n(57327);const r=n(45250),o=n(11485),i=n(10048),a=n(33101),s=n(8010);e.exports=class{constructor(e,t,n,l){let c=null,d=0;const h=[];let u=null,m=[],p=[];const g=[];function f(){const e=new i(c,m);l.emit("change",e.toRaw()),d=3}function O(){if(null!==u&&c===u)return c+=1,u=null,function(){if(0===m.length)throw new Error("ack complete without outstanding change");if(3!==d)throw new Error("ack complete in state "+d);t.handleChangeAcknowledged(),function(){for(const e in g)Object.prototype.hasOwnProperty.call(g,e)&&(e>c||(g[e].forEach((function(e){e()})),delete g[e]))}(),p.length>0?(m=p,p=[],f()):(m=[],d=2)}(),void O();const e=r.remove(h,(function(e){return e.getBaseVersion()===c}));if(1===e.length)return function(e){if(p.length>0&&0===m.length)throw new Error("pending change without outstanding change");s.transformMultiple(m,e.getOperations()),s.transformMultiple(p,e.getOperations()),t.applyRemoteChange(e)}(e[0].getChange()),c+=1,void O();if(0!==e.length)throw new Error("multiple remote changes in client version "+c)}this.connect=function(){if(0!==d)throw new Error("connect in state "+d);d=1,l.emit("authenticate",{projectId:e,token:"letmein"})},this.getVersion=function(){return c},l.on("load",(function(e){switch(d){case 1:{const n=a.fromRaw(e),r=n.getSnapshot();r.applyAll(n.getChanges(),{strict:!0}),c=n.getEndVersion(),t.load(r).then((function(){d=2}));break}default:throw new Error("loaded in state "+d)}})),this.handleLocalOperation=function(e){switch(d){case 2:!function(e){m.push(e),f()}(e);break;case 3:!function(e){p.push(e)}(e);break;default:throw new Error("local operation in state "+d)}},this.waitForVersion=function(e){return g[e]||(g[e]=[]),new Promise((function(t,n){g[e].push(t)}))},l.on("ack",(function(e){switch(d){case 3:{const t=o.fromRaw(e);u=t.getBaseVersion(),O();break}default:throw new Error("ack in state "+d)}})),l.on("change",(function(e){switch(d){case 2:case 3:!function(e){const t=e.getBaseVersion();if(r.find(h,"baseVersion",t))throw new Error("multiple changes in version "+t);if(t===u)throw new Error("received change that was acked in "+u);h.push(e)}(o.fromRaw(e)),O();break;default:throw new Error("remote change in state "+d)}})),l.on("disconnect",(function(){d=0,console.log("disconnected")}))}}},24731:(e,t,n)=>{"use strict";n.d(t,{R:()=>o});var r=n(64932);function o(){const e=(0,r.A)("ol-brandVariation"),{ieeeBrandId:t}=(0,r.A)("ol-ExposedSettings");return e?.brand_id===t}},25133:(e,t,n)=>{"use strict";n.d(t,{K:()=>o});var r=n(64932);const o=e=>new RegExp(`\\.(${(0,r.A)("ol-ExposedSettings").validRootDocExtensions.join("|")})$`,"i").test(e)},26041:(e,t,n)=>{n(97107);const r=n(2085),o=n(61210);class i{constructor(e,t){this.range=e,this.tracking=t}static fromRaw(e){return new i(r.fromRaw(e.range),o.fromRaw(e.tracking))}toRaw(){return{range:this.range.toRaw(),tracking:this.tracking.toRaw()}}canMerge(e){return e instanceof i&&(this.tracking.type===e.tracking.type&&this.tracking.userId===e.tracking.userId&&this.range.touches(e.range)&&this.range.canMerge(e.range))}merge(e){if(!this.canMerge(e))throw new Error("Cannot merge tracked changes");return new i(this.range.merge(e.range),new o(this.tracking.type,this.tracking.userId,this.tracking.ts.getTime()>e.tracking.ts.getTime()?this.tracking.ts:e.tracking.ts))}intersectRange(e){const t=this.range.intersect(e);return null==t?null:new i(t,this.tracking)}}e.exports=i},27673:(e,t,n)=>{"use strict";const r=n(8010);e.exports=class extends r{isNoOp(){return!0}}},28699:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(14041);function o(e){const t=(0,r.useRef)();return(0,r.useEffect)((()=>{t.current=e})),t.current}},29349:(e,t,n)=>{"use strict";n.d(t,{$:()=>o});var r=n(64932);const o=e=>{const t=(0,r.A)("ol-labsExperiments");return Boolean(t?.includes(e))}},29450:(e,t,n)=>{"use strict";n.d(t,{CK:()=>s,Vs:()=>i,ng:()=>a});var r=n(69954),o=n(11235);function i(e,t,n,i){const a=(0,o.ZS)(e)?"visual":"source";(0,r._)(t,{command:n,mode:a,...i})}function a(e,t){i(e,"codemirror-toolbar-event",t)}function s(e,t,n){i(e,"codemirror-shortcut-event",t,n)}},30280:(e,t,n)=>{"use strict";n.d(t,{l:()=>p});n(82438),n(50020);var r=n(14041),o=n(53373),i=n.n(o),a=n(9777),s=n(97434),l=n(32859),c=n(82151),d=n(88639),h=n(96713),u=n(61160),m=n(31085);const p=e=>{let{items:t,itemToString:n=e=>null===e?"":String(e),label:o,name:p,defaultText:g="Items",defaultItem:f,itemToSubtitle:O,itemToKey:b,onSelectedItemChanged:v,selected:w,disabled:_=!1,itemToDisabled:x,optionalLabel:y=!1,loading:k=!1,selectedIcon:C=!1,dataTestId:S}=e;const[Q,E]=(0,r.useState)(f),{t:T}=(0,s.Bd)(),{isOpen:j,getToggleButtonProps:P,getLabelProps:$,getMenuProps:R,getItemProps:X,highlightedIndex:A,openMenu:q,closeMenu:L}=(0,a.WM)({items:t??[],itemToString:n,isItemDisabled:e=>x?.(e)||!1,selectedItem:w||f,onSelectedItemChange:e=>{v&&v(e.selectedItem),E(e.selectedItem)}});(0,r.useEffect)((()=>{E(w)}),[w]);const I=(0,r.useRef)(null);(0,r.useEffect)((()=>{if(!p||!I.current)return;const e=I.current?.closest("form");if(e)return e.addEventListener("formdata",t),()=>{e.removeEventListener("formdata",t)};function t(e){const t=e.formData,r=p;(Q||f)&&t.append(r,n(Q||f))}}),[p,n,Q,f]);const N=(0,r.useCallback)((e=>{"Enter"!==e.key&&" "!==e.key||j?"Escape"===e.key&&j&&(e.stopPropagation(),L()):(e.preventDefault(),e.nativeEvent.preventDownshiftDefault=!0,q())}),[L,j,q]);let D;return D=Q||f?n(Q||f):g,(0,m.jsxs)("div",{className:"select-wrapper",ref:I,children:[o?(0,m.jsxs)(l.A.Label,{...$(),children:[o," ",y&&(0,m.jsxs)("span",{className:"fw-normal",children:["(",T("optional"),")"]})," ",k&&(0,m.jsx)("span",{"data-testid":"spinner",children:(0,m.jsx)(c.A,{animation:"border","aria-hidden":"true",as:"span",role:"status",size:"sm"})})]}):null,(0,m.jsx)(d.A,{"data-testid":S,...P({disabled:_,onKeyDown:N,className:"select-trigger"}),value:D,readOnly:!0,append:(0,m.jsx)(h.A,{type:j?"keyboard_arrow_up":"keyboard_arrow_down",className:"align-text-bottom"})}),(0,m.jsx)("ul",{...R({disabled:_}),className:i()("dropdown-menu w-100",{show:j}),children:j&&t?.map(((e,t)=>{const{"aria-disabled":r,...o}=X({item:e,index:t});return(0,m.jsx)("li",{role:"none",children:(0,m.jsx)(u.tJ,{as:"button",type:"button",className:i()({"select-highlighted":A===t}),active:Q===e,trailingIcon:C&&Q===e?"check":void 0,description:O?O(e):void 0,...o,disabled:r,children:n(e)})},b(e))}))})]})}},30741:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var r=n(14041);let o,i=!1,a="";function s(e){document.hasFocus()||i||(a=window.document.title,window.document.title=e,i=!0,o=setInterval((function(){window.document.title===a?window.document.title=e:window.document.title=a}),800))}function l(){i&&(clearInterval(o),window.document.title=a,a="",i=!1)}function c(e){i?a=e:window.document.title=e}const d=function(){const[e,t]=(0,r.useState)((()=>document.hasFocus()));return(0,r.useEffect)((()=>{function e(){t(!0)}function n(){t(!1)}return window.addEventListener("focus",e),window.addEventListener("blur",n),()=>{window.removeEventListener("focus",e),window.removeEventListener("blur",n)}}),[]),{hasFocus:e,flashTitle:s,stopFlashingTitle:l,setTitle:c}}},30789:(e,t,n)=>{"use strict";n.d(t,{e:()=>o});var r=n(29587);const o=[r.t$.of({name:"latex",extensions:["tex","sty","cls","clo","bst","bbl","pdf_tex","pdf_t","map","fd","enc","def","mf","pgf","tikz","bbx","cbx","dbx","lbx","lco","ldf","xmpdata","Rnw","rnw","lyx","inc","dtx","hak","eps_tex","brf","ins","hva","Rtex","rtex","pstex","pstex_t","gin","fontspec","pygstyle","pygtex","ps_tex","ltx"],load:()=>Promise.all([n.e(5982),n.e(3015),n.e(3655)]).then(n.bind(n,63655)).then((e=>e.latex()))}),r.t$.of({name:"bibtex",extensions:["bib"],load:()=>Promise.all([n.e(5982),n.e(9065)]).then(n.bind(n,9065)).then((e=>e.bibtex()))}),r.t$.of({name:"markdown",extensions:["md","markdown"],load:()=>Promise.all([n.e(669),n.e(4075)]).then(n.bind(n,14075)).then((e=>e.markdown()))})]},31410:(e,t,n)=>{"use strict";n.d(t,{V:()=>r});const r=e=>e.replace(/\$(\d+)/g,"#{$1}")+"${}"},32424:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(14041),o=n(56155),i=n(31085);const a=(0,r.forwardRef)(((e,t)=>{const{title:n,children:r,...a}=e;return(0,i.jsxs)(o.A,{...a,ref:t,children:[n&&(0,i.jsx)(o.A.Header,{children:n}),(0,i.jsx)(o.A.Body,{children:r})]})}));a.displayName="OLPopover";const s=a},32487:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(14041),o=n(43144);function i(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const[t,n]=(0,r.useState)(e),i=(0,r.useRef)(null),a=(0,r.useCallback)((e=>{e&&(i.current=(0,o.findDOMNode)(e))}),[i]),s=(0,r.useCallback)((e=>{e.stopPropagation()}),[]),l=(0,r.useCallback)((e=>{n(Boolean(e))}),[]),c=(0,r.useCallback)((e=>{i.current&&!i.current.contains(e.target)&&n(!1)}),[i]);return(0,r.useEffect)((()=>(t&&document.addEventListener("mousedown",c),()=>{document.removeEventListener("mousedown",c)})),[t,c]),{ref:a,onClick:s,onToggle:l,open:t}}},32629:(e,t,n)=>{"use strict";n.d(t,{CU:()=>l,L1:()=>u,_r:()=>p,eT:()=>b,iB:()=>m,iq:()=>v,kT:()=>f,kW:()=>O,wY:()=>g});n(82438),n(50020);var r=n(57195),o=n(29587),i=n(16851),a=n(21947),s=n(5383);const l=e=>{const t=(0,i.Yv)(e,s.ListEnvironment);return t?(0,a.$2)(t,e):null},c=function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";const a=new o.KB(e).lineIndent(t.from),s=(0,o.tp)(e),l=(0,o.EI)(e,a),c=(0,o.EI)(e,a+s),d=e.doc.lineAt(t.from),h=e.doc.lineAt(t.to),u=[`${l}\\begin{${n}}`];for(const t of e.doc.iterLines(d.number,h.number+1)){let e=t.trim();e.endsWith("\\item")&&(e+=" "),u.push(`${c}${i}${e}`)}1===u.length&&u.push(`${c}${i}`);const m=[{from:d.from,to:h.to,insert:u.join("\n")}];return t=r.OF.cursor(t.to,-1).map(e.changes(m),1),m.push({from:h.to,to:h.to,insert:`\n${l}\\end{${n}}`}),{range:t,changes:m}},d=e=>t=>(t.dispatch(t.state.changeByRange((n=>c(t.state,n,e))),{scrollIntoView:!0}),!0),h=e=>t=>(t.dispatch(t.state.changeByRange((n=>((e,t,n)=>{const r=(0,o.mv)(e).resolveInner(t.from),a=(0,i.Bw)(r,s.ListEnvironment);if(!a)return{range:t};const l=e.doc.lineAt(t.from),c=e.doc.lineAt(t.to),d=e.doc.lineAt(a.from),h=e.doc.lineAt(a.to),u=new o.KB(e).lineIndent(t.from),m=(0,o.tp)(e),p=(0,o.EI)(e,u-m),g=[];d.number===l.number-1?g.push({from:d.from,to:d.to+1,insert:""}):g.push({from:l.from,insert:`${p}\\end{${n}}\n`});const f=(e,t,n)=>/^\s*$/.test(e.doc.sliceString(t,n));for(let t=l.number;t<=c.number;t++){const n=e.doc.line(t),r=n.from+m;r<=n.to&&f(e,n.from,r)&&g.push({from:n.from,to:r,insert:""})}return h.number===c.number+1?g.push({from:h.from,to:h.to+1,insert:""}):g.push({from:c.to,insert:`\n${p}\\begin{${n}}`}),{range:t=t.map(e.changes(g),-1),changes:g}})(t.state,n,e))),{scrollIntoView:!0}),!0),u=e=>{const t=[];return e.cursor().iterate((n=>{if(n.type.is("Item")&&t.push(n.node),n.type.is("ListEnvironment")&&n.node!==e)return!1})),t},m=e=>t=>{t.dispatch(t.state.changeByRange((n=>((e,t,n)=>{const r=(0,i.rn)(e.state,t.head,s.ListEnvironment)??(0,i.vw)(e.state,t,s.ListEnvironment);if(!r)return c(e.state,t,n,"\\item ");{const a=r.getChild("BeginEnv"),l=r.getChild("EndEnv");if(a&&l){const c=a?.getChild("EnvNameGroup")?.getChild("ListEnvName"),d=l?.getChild("EnvNameGroup")?.getChild("ListEnvName");if(c&&d){if(e.state.sliceDoc(c.from,c.to).trim()===n){const n=e.state.doc.lineAt(a.from),c=e.state.doc.lineAt(l.from),d=/^\s*\\begin\{[^}]*}\s*$/.test(n.text),h=/^\s*\\end\{[^}]*}\s*$/.test(c.text),u=[{from:d?n.from:a.from,to:d?Math.min(n.to+1,e.state.doc.length):a.to,insert:""},{from:h?Math.max(c.from-1,0):l.from,to:h?c.to:l.to,insert:""}],m=(0,i.wS)(r,"Item",s.ListEnvironment);if(m.length>0){const t=(0,o.tp)(e.state);for(const n of m){const r={from:n.from,to:n.to,insert:""},i=e.state.doc.lineAt(n.from);if(0===e.state.sliceDoc(i.from,n.from).trim().length){const i=new o.KB(e.state).lineIndent(n.from);r.from-=Math.min(i??0,t)}u.push(r)}}const p=e.state.changes(u);return{range:t.map(p),changes:p}}{const r=[{from:c.from,to:c.to,insert:n},{from:d.from,to:d.to,insert:n}],o=e.state.changes(r);return{range:t.map(o),changes:o}}}}}return{range:t}})(t,n,e))),{scrollIntoView:!0})},p=d("itemize"),g=d("enumerate"),f=d("description"),O=h("itemize"),b=h("enumerate"),v=h("description")},32632:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});n(61412),n(91883),n(70286);var r=n(97434),o=n(14041),i=n(71627),a=n(92956),s=n(8164),l=n(41026),c=n(64932),d=n(31085);function PdfPreviewError(e){let{error:t,includeWarnings:n=!0,includeErrors:o=!0}=e;const{t:l}=(0,r.Bd)(),{startCompile:h}=(0,s.Rf)();switch(t){case"rendering-error-expected":return n&&(0,d.jsx)(a.A,{headerTitle:l("pdf_rendering_error"),formattedContent:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(r.x6,{i18nKey:"something_went_wrong_rendering_pdf_expected",components:[(0,d.jsx)(i.A,{variant:"primary",size:"sm",onClick:()=>h()})]}),(0,d.jsx)("br",{}),(0,d.jsx)("br",{}),(0,d.jsx)(r.x6,{i18nKey:"last_resort_trouble_shooting_guide",components:[(0,d.jsx)("a",{href:"/learn/how-to/Resolving_access%2C_loading%2C_and_display_problems",target:"_blank"},"troubleshooting-link")]})]}),level:"warning"});case"rendering-error":return o&&(0,d.jsxs)(u,{title:l("pdf_rendering_error"),children:[l("something_went_wrong_rendering_pdf")," ",(0,d.jsx)(r.x6,{i18nKey:"try_recompile_project_or_troubleshoot",components:[(0,d.jsx)("a",{href:"/learn/how-to/Resolving_access%2C_loading%2C_and_display_problems",target:"_blank"},"troubleshooting-link")]}),(0,c.A)("ol-compilesUserContentDomain")&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("br",{}),(0,d.jsx)("br",{}),(0,d.jsx)(r.x6,{i18nKey:"new_compile_domain_notice",values:{compilesUserContentDomain:new URL((0,c.A)("ol-compilesUserContentDomain")).hostname},shouldUnescape:!0,tOptions:{interpolation:{escapeValue:!0}},components:[(0,d.jsx)("code",{},"domain"),(0,d.jsx)("a",{href:"/learn/how-to/Resolving_access%2C_loading%2C_and_display_problems",target:"_blank"},"troubleshooting-link")]})]})]});case"clsi-maintenance":return o&&(0,d.jsx)(u,{title:l("server_error"),children:l("clsi_maintenance")});case"clsi-unavailable":return o&&(0,d.jsx)(u,{title:l("server_error"),children:l("clsi_unavailable")});case"too-recently-compiled":return o&&(0,d.jsx)(u,{title:l("server_error"),children:l("too_recently_compiled")});case"terminated":return o&&(0,d.jsx)(u,{title:l("terminated"),children:l("compile_terminated_by_user")});case"rate-limited":return o&&(0,d.jsx)(u,{title:l("pdf_compile_rate_limit_hit"),children:l("project_flagged_too_many_compiles")});case"compile-in-progress":return o&&(0,d.jsx)(u,{title:l("pdf_compile_in_progress_error"),children:l("pdf_compile_try_again")});case"autocompile-disabled":return o&&(0,d.jsx)(u,{title:l("autocompile_disabled"),children:l("autocompile_disabled_reason")});case"project-too-large":return o&&(0,d.jsx)(u,{title:l("project_too_large"),children:l("project_too_much_editable_text")});case"timedout":return o&&(0,d.jsx)(m,{});case"failure":return o&&(0,d.jsxs)(u,{title:l("no_pdf_error_title"),children:[l("no_pdf_error_explanation"),(0,d.jsxs)("ul",{className:"my-1 ps-3",children:[(0,d.jsx)("li",{children:l("no_pdf_error_reason_unrecoverable_error")}),(0,d.jsx)("li",{children:(0,d.jsx)(r.x6,{i18nKey:"no_pdf_error_reason_no_content",components:{code:(0,d.jsx)("code",{})}})}),(0,d.jsx)("li",{children:(0,d.jsx)(r.x6,{i18nKey:"no_pdf_error_reason_output_pdf_already_exists",components:{code:(0,d.jsx)("code",{})}})})]})]});case"clear-cache":case"error":default:return o&&(0,d.jsx)(u,{title:l("server_error"),children:l("somthing_went_wrong_compiling")});case"pdf-viewer-loading-error":return o&&(0,d.jsx)(u,{title:l("pdf_rendering_error"),children:(0,d.jsx)(r.x6,{i18nKey:"something_went_wrong_loading_pdf_viewer",components:[(0,d.jsx)("strong",{},"strong-"),(0,d.jsx)("a",{href:"/learn/how-to/Resolving_access%2C_loading%2C_and_display_problems",target:"_blank"},"troubleshooting-link"),(0,d.jsx)("a",{target:"_blank",href:"/contact"},"contact-link")]})});case"validation-problems":return null}}const h=(0,o.memo)(PdfPreviewError);function u(e){let{title:t,headerIcon:n,children:o}=e;const{t:i}=(0,r.Bd)();return(0,d.jsx)(a.A,{headerTitle:t,headerIcon:n,formattedContent:o,entryAriaLabel:i("compile_error_entry_description"),level:"error"})}function m(){const{t:e}=(0,r.Bd)(),{enableStopOnFirstError:t}=(0,l.V)({eventSource:"timeout"}),{startCompile:n,lastCompileOptions:a,setAnimateCompileDropdownArrow:c}=(0,s.Rf)(),h=(0,o.useCallback)((()=>{t(),n({stopOnFirstError:!0}),c(!0)}),[t,n,c]);return(0,d.jsxs)(u,{title:e("timedout"),children:[(0,d.jsx)("p",{children:e("project_timed_out_intro")}),(0,d.jsxs)("ul",{children:[(0,d.jsx)("li",{children:(0,d.jsx)(r.x6,{i18nKey:"project_timed_out_optimize_images",components:[(0,d.jsx)("a",{href:"https://www.overleaf.com/learn/how-to/Optimising_very_large_image_files"})]})}),(0,d.jsxs)("li",{children:[(0,d.jsx)(r.x6,{i18nKey:"project_timed_out_fatal_error",components:[(0,d.jsx)("a",{href:"https://www.overleaf.com/learn/how-to/Why_do_I_keep_getting_the_compile_timeout_error_message%3F#Fatal_compile_errors_blocking_the_compilation"})]}),!a.stopOnFirstError&&(0,d.jsxs)(d.Fragment,{children:[" ",(0,d.jsx)(r.x6,{i18nKey:"project_timed_out_enable_stop_on_first_error",components:[(0,d.jsx)(i.A,{variant:"primary",size:"sm",onClick:h})]})," "]})]})]}),(0,d.jsx)("p",{children:(0,d.jsx)(r.x6,{i18nKey:"project_timed_out_learn_more",components:[(0,d.jsx)("a",{href:"https://www.overleaf.com/learn/how-to/Why_do_I_keep_getting_the_compile_timeout_error_message%3F"})]})})]})}},32912:(e,t,n)=>{"use strict";n.d(t,{I:()=>S});var r=n(71627),o=n(14041),i=n(96713),a=n(97434),s=n(63003),l=n(12327),c=n(1705),d=n(7829),h=n(96700),u=n(89327),m=n(31085);const p=e=>{let{rating:t,setRating:n,messages:r,logEntry:i}=e;const[a,s]=(0,o.useState)(!1),[l,c]=(0,o.useState)(!1);return 1===t?(0,m.jsx)(O,{messages:r,rating:t,logEntry:i,clearRating:()=>n(0),isSending:a,setIsSending:s,isSent:l,setIsSent:c}):-1===t?(0,m.jsx)(b,{messages:r,rating:t,logEntry:i,clearRating:()=>n(0),isSending:a,setIsSending:s,isSent:l,setIsSent:c}):null};let g=1;const f=(e,t)=>`${e}-${t}`,O=e=>{let{rating:t,logEntry:n,messages:h,clearRating:p,isSending:O,setIsSending:b,isSent:w,setIsSent:_}=e;const[x]=(0,o.useState)(String(g++)),{t:y}=(0,a.Bd)(),k=(0,o.useCallback)((()=>{b(!1),_(!0)}),[b,_]),C=(0,u.A)(k,n,h,t);return w?(0,m.jsx)(v,{clearRating:p}):(0,m.jsxs)(c.A,{onSubmit:e=>{b(!0),C(e)},className:"ai-error-assistant-feedback-form",children:[(0,m.jsxs)("div",{className:"ai-error-assistant-feedback-form-heading",children:[(0,m.jsx)("div",{children:y("what_did_you_find_most_helpful")}),(0,m.jsx)("button",{"aria-label":"Close",onClick:p,children:(0,m.jsx)(i.A,{type:"close"})})]}),(0,m.jsx)(l.A,{controlId:"aiErrorAssistantFeedbackLatex",children:(0,m.jsx)(d.A,{as:"textarea",name:"notes"})}),(0,m.jsx)(s.A,{name:"consent",id:f("consent",x),label:y("include_the_error_message_and_ai_response")}),(0,m.jsx)("div",{className:"ai-error-assistant-feedback-form-footer",children:(0,m.jsx)(r.A,{variant:"secondary",type:"submit",disabled:O,isLoading:O,children:y("submit_title")})})]})},b=e=>{let{rating:t,logEntry:n,messages:p,clearRating:O,isSending:b,setIsSending:w,isSent:_,setIsSent:x}=e;const{t:y}=(0,a.Bd)(),[k]=(0,o.useState)(String(g++)),C=(0,o.useCallback)((()=>{w(!1),x(!0)}),[w,x]),S=(0,u.A)(C,n,p,t);return _?(0,m.jsx)(v,{clearRating:O}):(0,m.jsxs)(c.A,{onSubmit:e=>{w(!0),S(e)},className:"ai-error-assistant-feedback-form",children:[(0,m.jsxs)("div",{className:"ai-error-assistant-feedback-form-heading",children:[(0,m.jsx)("div",{children:y("ai_feedback_tell_us_what_was_wrong_so_we_can_improve")}),(0,m.jsx)("button",{"aria-label":"Close",onClick:O,children:(0,m.jsx)(i.A,{type:"close"})})]}),(0,m.jsxs)(l.A,{className:"ai-error-assistant-feedback-form-choices",children:[(0,m.jsx)(s.A,{className:"form-check-inline",type:"radio",name:"reason",id:f("reason",k),value:"error-not-fixed",label:y("ai_feedback_the_suggestion_didnt_fix_the_error")}),(0,m.jsx)(s.A,{className:"form-check-inline",type:"radio",name:"reason",id:f("no-suggested-change",k),value:"no-suggested-change",label:y("ai_feedback_there_was_no_code_fix_suggested")}),(0,m.jsx)(s.A,{className:"form-check-inline",type:"radio",name:"reason",id:f("answer-too-long",k),value:"answer-too-long",label:y("ai_feedback_the_answer_was_too_long")}),(0,m.jsx)(s.A,{className:"form-check-inline",type:"radio",name:"reason",id:f("answer-not-detailed",k),value:"answer-not-detailed",label:y("ai_feedback_the_answer_wasnt_detailed_enough")}),(0,m.jsx)(s.A,{className:"form-check-inline",type:"radio",name:"reason",id:f("answer-not-best-fix",k),value:"answer-not-best-fix",label:y("ai_feedback_the_suggestion_wasnt_the_best_fix_available")}),(0,m.jsx)(s.A,{className:"form-check-inline",type:"radio",name:"reason",id:f("other",k),value:"other",label:y("other")})]}),(0,m.jsxs)(l.A,{controlId:"aiErrorAssistantFeedbackNotes",children:[(0,m.jsx)(h.A,{children:y("ai_feedback_please_provide_more_detail")}),(0,m.jsx)(d.A,{as:"textarea",name:"notes"})]}),(0,m.jsx)(s.A,{name:"consent",id:f("consent",k),label:y("include_the_error_message_and_ai_response")}),(0,m.jsx)("div",{className:"ai-error-assistant-feedback-form-footer",children:(0,m.jsx)(r.A,{type:"submit",disabled:b,variant:"secondary",isLoading:b,children:y("submit_title")})})]})},v=e=>{let{clearRating:t}=e;const{t:n}=(0,a.Bd)();return(0,m.jsx)("div",{className:"ai-error-assistant-feedback-form",children:(0,m.jsxs)("div",{className:"ai-error-assistant-feedback-form-heading",children:[(0,m.jsx)("div",{children:n("thank_you_for_your_feedback")}),(0,m.jsx)("button",{"aria-label":n("close"),onClick:t,children:(0,m.jsx)(i.A,{type:"close"})})]})})};var w=n(53373),_=n.n(w),x=n(59162),y=n(97536),k=n(17112),C=n(13665);const S=e=>{let{messages:t,finished:n,applied:o=!1,suggestFix:s,logEntry:l,rating:c,setRating:d}=e;const{t:h}=(0,a.Bd)(),u=(0,y.G)(),g=(0,k.u)("new-editor-error-logs-redesign");return u&&g?(0,m.jsx)(C.I,{messages:t,logEntry:l,finished:n,applied:o,suggestFix:s,rating:c,setRating:d}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:"ai-error-assistant-footer",children:[n?(0,m.jsxs)("div",{className:"ai-error-assistant-feedback",children:[(0,m.jsx)(x.A,{id:"ai-error-assistant-feedback-positive-tooltip",description:h("this_was_helpful"),children:(0,m.jsx)(r.A,{type:"button",variant:"ghost",size:"sm","aria-label":h("this_was_helpful"),onClick:()=>d((e=>1!==e?1:0)),className:_()("ai-error-assistant-feedback-button","ai-error-assistant-feedback-positive",{active:1===c}),children:(0,m.jsx)(i.A,{type:"thumb_up"})})}),(0,m.jsx)(x.A,{id:"ai-error-assistant-feedback-negative-tooltip",description:h("this_wasnt_helpful"),children:(0,m.jsx)(r.A,{type:"button",variant:"ghost",size:"sm","aria-label":h("this_wasnt_helpful"),onClick:()=>d((e=>-1!==e?-1:0)),className:_()("ai-error-assistant-feedback-button","ai-error-assistant-feedback-negative",{active:-1===c}),children:(0,m.jsx)(i.A,{type:"thumb_down"})})}),s&&(0,m.jsx)(x.A,{id:"ai-error-assistant-feedback-retry-tooltip",description:h("suggest_a_different_fix"),children:(0,m.jsx)(r.A,{type:"button",variant:"ghost",size:"sm","aria-label":h("suggest_a_different_fix"),onClick:s,className:"ai-error-assistant-feedback-button",children:(0,m.jsx)(i.A,{type:"refresh"})})})]}):(0,m.jsx)("span",{}),o&&(0,m.jsx)("div",{children:h("suggestion_applied")}),s&&(0,m.jsx)("div",{children:h("ai_can_make_mistakes")})]}),(0,m.jsx)(p,{rating:c,setRating:d,messages:t,logEntry:l},c),(0,m.jsx)("div",{className:"ai-error-assistant-survey",children:(0,m.jsxs)("div",{children:[h("this_is_a_new_feature")," -"," ",(0,m.jsxs)("a",{href:"https://forms.gle/j6wuXQwsqeqngSCS7",target:"_blank",rel:"noopener noreferrer",children:[h("give_your_feedback"),"."]})]})})]})}},33101:(e,t,n)=>{"use strict";const r=n(64347).assert,o=n(37603),i=n(97348);class a extends o{constructor(e,t){super("client sent updates with end_version "+e+" but latest chunk has end_version "+t,{clientEndVersion:e,latestEndVersion:t}),this.clientEndVersion=e,this.latestEndVersion=t}}class NotFoundError extends o{constructor(e,t,n){super(t||`no chunks for project ${e}`,n||{projectId:e}),this.projectId=e}}class VersionNotFoundError extends NotFoundError{constructor(e,t){super(e,`chunk for ${e} v ${t} not found`,{projectId:e,version:t}),this.projectId=e,this.version=t}}class BeforeTimestampNotFoundError extends NotFoundError{constructor(e,t){super(e,`chunk for ${e} timestamp ${t} not found`),this.projectId=e,this.timestamp=t}}class NotPersistedError extends NotFoundError{constructor(e){super(e,`chunk for ${e} not persisted yet`),this.projectId=e}}class s{static ConflictingEndVersion=(()=>a)();static NotFoundError=(()=>NotFoundError)();static VersionNotFoundError=(()=>VersionNotFoundError)();static BeforeTimestampNotFoundError=(()=>BeforeTimestampNotFoundError)();static NotPersistedError=(()=>NotPersistedError)();constructor(e,t){r.instance(e,i,"bad history"),r.integer(t,"bad startVersion"),this.history=e,this.startVersion=t}static fromRaw(e){return new s(i.fromRaw(e.history),e.startVersion)}toRaw(){return{history:this.history.toRaw(),startVersion:this.startVersion}}getHistory(){return this.history}getSnapshot(){return this.history.getSnapshot()}getChanges(){return this.history.getChanges()}pushChanges(e){this.history.pushChanges(e)}getEndVersion(){return this.startVersion+this.history.countChanges()}getEndTimestamp(){return this.history.countChanges()?this.history.getChanges().slice(-1)[0].getTimestamp():null}getStartVersion(){return this.startVersion}async loadFiles(e,t){await this.history.loadFiles(e,t)}}e.exports=s},33288:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(14041);const o=function(e,t,n){const o=(0,r.useRef)(),i=(0,r.useCallback)((()=>{o.current=new ResizeObserver((function(e){n(e[0])}))}),[n]);(0,r.useLayoutEffect)((()=>{if("ResizeObserver"in window){const t=e&&e.current;return t&&i(),o.current&&t&&o.current.observe(t),()=>{t&&function(e){o.current&&o.current.unobserve(e)}(t)}}}),[e,t,i])}},33478:(e,t,n)=>{"use strict";n.d(t,{Hs:()=>u,Ly:()=>l,bu:()=>c,ez:()=>d,lW:()=>h,vp:()=>m});n(82438),n(34840);var r=n(64932),o=n(60961);const i="undefined"!=typeof TextEncoder;i||o.$.warn("TextEncoder is not available. Disabling pdf-caching.");const a=Array.isArray(navigator.userAgentData?.brands)&&navigator.userAgentData.brands.some((e=>"Opera"===e.brand));function s(e){return!!i&&(!a&&"enabled"===(0,r.A)("ol-splitTestVariants")?.[e])}a&&o.$.warn("Browser cache is limited in Opera. Disabling pdf-caching.");const l=s("pdf-caching-cached-url-lookup"),c=s("pdf-caching-prefetching"),d=s("pdf-caching-prefetch-large"),h=s("pdf-caching-mode"),u=s("track-pdf-download"),m=(0,r.A)("ol-projectOwnerHasPremiumOnPageLoad")&&s("populate-clsi-cache")},33755:(e,t,n)=>{"use strict";const r=n(64347).assert,o=n(64331);class i extends o{constructor(e,t,n){r.integer(e,"RestoreFileOrigin: bad version"),r.string(t,"RestoreFileOrigin: bad path"),r.date(n,"RestoreFileOrigin: bad timestamp"),super(i.KIND),this.version=e,this.path=t,this.timestamp=n}static fromRaw(e){return new i(e.version,e.path,new Date(e.timestamp))}toRaw(){return{kind:i.KIND,version:this.version,path:this.path,timestamp:this.timestamp.toISOString()}}getVersion(){return this.version}getPath(){return this.path}getTimestamp(){return this.timestamp}}i.KIND="file-restore",e.exports=i},35078:(e,t,n)=>{"use strict";var r;function o(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(97107),n(82438),n(50020);const i=n(45250),a=n(64347).assert,s=n(90953),l=n(99568),c=n(8010),d=n(64331),h=n(44838),u=n(62293),m=n(65591);class p{constructor(e,t,n,r,o,i,a){this.setOperations(e),this.setTimestamp(t),this.setAuthors(n||[]),this.setOrigin(r),this.setV2Authors(o||[]),this.setProjectVersion(i),this.setV2DocVersions(a)}toRaw(){const e={operations:this.operations.map((function(e){return e.toRaw()})),timestamp:this.timestamp.toISOString(),authors:this.authors};return this.v2Authors&&(e.v2Authors=this.v2Authors),this.origin&&(e.origin=this.origin.toRaw()),this.projectVersion&&(e.projectVersion=this.projectVersion),this.v2DocVersions&&(e.v2DocVersions=this.v2DocVersions.toRaw()),e}static fromRaw(e){if(!e)return null;let t;return a.array.of.object(e.operations,"bad raw.operations"),a.nonEmptyString(e.timestamp,"bad raw.timestamp"),e.authors&&(t=e.authors.map((e=>0===e?null:e))),new p(e.operations.map(c.fromRaw),new Date(e.timestamp),t,e.origin&&d.fromRaw(e.origin),e.v2Authors,e.projectVersion,e.v2DocVersions&&m.fromRaw(e.v2DocVersions))}getOperations(){return this.operations}setOperations(e){a.array.of.object(e,"Change: bad operations"),this.operations=e}getTimestamp(){return this.timestamp}setTimestamp(e){a.date(e,"Change: bad timestamp"),this.timestamp=e}getAuthors(){return this.authors}setAuthors(e){a.array(e,"Change: bad author ids array"),e.length>1&&a.maybe.emptyArray(this.v2Authors,"Change: cannot set v1 authors if v2 authors is set"),l.assertV1(e,"Change: bad author ids"),this.authors=e}getV2Authors(){return this.v2Authors}setV2Authors(e){a.array(e,"Change: bad v2 author ids array"),e.length>1&&a.maybe.emptyArray(this.authors,"Change: cannot set v2 authors if v1 authors is set"),l.assertV2(e,"Change: not a v2 author id"),this.v2Authors=e}getOrigin(){return this.origin}setOrigin(e){a.maybe.instance(e,d,"Change: bad origin"),this.origin=e}getProjectVersion(){return this.projectVersion}setProjectVersion(e){a.maybe.match(e,p.PROJECT_VERSION_RX,"Change: bad projectVersion"),this.projectVersion=e}getV2DocVersions(){return this.v2DocVersions}setV2DocVersions(e){a.maybe.instance(e,m,"Change: bad v2DocVersions"),this.v2DocVersions=e}findBlobHashes(e){for(const t of this.operations)t.findBlobHashes(e)}async loadFiles(e,t){for(const n of this.operations)await n.loadFiles(e,t)}pushOperation(e){return this.getOperations().push(e),this}applyTo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(const n of this.iterativelyApplyTo(e,t));}iterativelyApplyTo(e){var t=this;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){a.object(e,"bad snapshot");for(const r of t.operations){try{r.applyTo(e,n)}catch(e){if(!(e instanceof h.EditMissingFileError||e instanceof u.FileNotFoundError)||n.strict)throw e}yield r}t.projectVersion&&e.setProjectVersion(t.projectVersion),t.v2DocVersions&&e.updateV2DocVersions(t.v2DocVersions)}()}transformAfter(e){a.object(e,"bad other");const t=this.getOperations(),n=e.getOperations();for(let e=0;e<n.length;++e)for(let r=0;r<t.length;++r)t[r]=c.transform(t[r],n[e])[0]}clone(){return p.fromRaw(this.toRaw())}async store(e,t){a.maybe.number(t,"bad concurrency");const n=this.toRaw();n.authors=i.uniq(n.authors);const r=await s(this.operations,(t=>t.store(e)),{concurrency:t||1});return n.operations=r,n}canBeComposedWith(e){const t=this.getOperations(),n=e.getOperations();return!(t.length>1||n.length>1)&&t[0].canBeComposedWith(n[0])}}r=p,o(p,"PROJECT_VERSION_RX_STRING","^[0-9]+\\.[0-9]+$"),o(r,"PROJECT_VERSION_RX",new RegExp(r.PROJECT_VERSION_RX_STRING)),e.exports=p},35287:(e,t,n)=>{"use strict";n.d(t,{$X:()=>i,Xk:()=>a,bJ:()=>s,pD:()=>l});n(82438),n(99819),n(50020);var r=n(93852);function o(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const r=e.docs.find((e=>e._id===t))||e.fileRefs.find((e=>e._id===t));if(r)return n.concat([r]);for(const r of e.folders){if(r._id===t)return n.concat([r]);{const e=o(r,t,n.concat([r]));if(null!==e)return e}}return null}function i(e,t){return o(e,t)?.map((e=>e.name)).join("/")||null}function a(e,t){if(""===t)return{entity:e,type:"folder"};const n=t.split("/"),r=n.shift(),o=n.join("/");if("."===r)return a(e,o);const i=e.docs.find((e=>e.name===r));if(i)return{entity:i,type:"doc"};const s=e.fileRefs.find((e=>e.name===r));if(s)return{entity:s,type:"fileRef"};for(const t of e.folders)if(t.name===r)return""===o?{entity:t,type:"folder"}:a(t,o);return null}function s(e,t,n){for(const o of["",".png",".jpg",".jpeg",".pdf",".PNG",".JPG",".JPEG",".PDF"]){const i=a(e,n+o);if("fileRef"===i?.type){const{name:e,_id:n,hash:o}=i.entity;return{url:(0,r.i)(t,n,o),extension:e.slice(e.lastIndexOf(".")+1)}}}return null}function l(e,t){const n=i(e,t);return n?.split("/").slice(0,-1).join("/")||null}},35447:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(14041),o=n(69954),i=n(37858),a=n(60961),s=n(10646);const l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const[n,l]=(0,r.useState)(!1),{deactivateTutorial:c,currentPopup:d,setCurrentPopup:h}=(0,s.mi)(),u=(0,r.useCallback)((async n=>{let{event:r="promo-click",action:s="complete",...d}=n;o._(r,{...t,...d});try{await(0,i.TB)(`/tutorial/${e}/${s}`)}catch(e){a.$.error(e)}l(!1),c(e)}),[c,t,e]),m=(0,r.useCallback)((async()=>{await u({event:"promo-dismiss",action:"complete"})}),[u]),p=(0,r.useCallback)((async()=>{await u({event:"promo-click",action:"postpone",button:"maybe-later"})}),[u]),g=(0,r.useCallback)((function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"promo-prompt";return null===d&&(h(e),l(!0),o._(n,t),!0)}),[d,h,e,t]),f=(0,r.useCallback)((()=>{d===e&&(h(null),l(!1))}),[h,l,d,e]),O=(0,r.useCallback)((function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"promo-prompt";h(e),l(!0),o._(n,t)}),[h,l,e,t]),b=(0,r.useCallback)((()=>{f(),c(e)}),[f,c,e]);return{completeTutorial:u,dismissTutorial:m,maybeLater:p,tryShowingPopup:g,clearPopup:f,clearAndShow:O,showPopup:n,hideUntilReload:b}}},35722:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(83681),o=n(31085);const i=function(e){let{bg:t,text:n,...i}=e;return"warning"===t&&(t="warning-light-bg",n="warning"),(0,o.jsx)(r.A,{bg:t,text:n,...i})}},36155:(e,t,n)=>{"use strict";e.exports=n.p+"images/ai-sparkle-text-d69a19818fd041805f64.svg"},36712:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(95322),o=n(31085);const i=e=>{let{children:t,className:n,style:i}=e;return(0,o.jsx)(r.A,{className:n,style:i,children:t})}},37766:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(14041),o=n(67353);function i(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const{scopeEventEmitter:n}=(0,o.nK)();return(0,r.useCallback)((function(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];n.emit(e,t,...o)}),[n,e,t])}},37939:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(14041),o=n(93588),i=n(64932),a=n(60961);const s=(0,i.A)("ol-debugPdfDetach");function l(e,t,n,i){const[l,c]=(0,r.useState)(t),{role:d,broadcastEvent:h,lastDetachedConnectedAt:u,addEventHandler:m,deleteEventHandler:p}=(0,o.Q2)(),g=`state-${e}`;(0,r.useEffect)((()=>{d===n&&h(g,{value:l})}),[d,n,g,l,h,u]);const f=(0,r.useCallback)((e=>{e.event===g&&d===i&&(s&&a.$.warn(`Set ${e.data.value} for ${g}`),c(e.data.value))}),[d,i,g,c]);return(0,r.useEffect)((()=>(m(f),()=>p(f))),[m,p,f]),[l,c]}},38188:(e,t,n)=>{"use strict";n.d(t,{B8:()=>c,BH:()=>m,HT:()=>h,TY:()=>f,Tm:()=>l,_X:()=>b,jC:()=>v,kq:()=>O,xC:()=>g});var r=n(57195),o=n(30789),i=n(83173),a=n(29587),s=n(45197);const l=r.Pe.define(),c=(0,s.v)(l),d=new r.xx,h=r.sU.define({create:()=>{},update:(e,t)=>{for(const e of t.effects)if(e.is(f))return e.value;return e}}),u=new r.xx,m=(e,t,n)=>{let{syntaxValidation:r}=n;return u.of(p(e,t,r))},p=(e,t,n)=>{const r=a.t$.matchFilename(o.e,e);return r?[d.of(a.Xt.of("    ")),h,i.Z9.define((e=>(r.load().then((r=>{e.dispatch({effects:[d.reconfigure(r),l.of(null)]}),e.dispatch({effects:[f.of(t),b.of(n)]})})),{}))),h]:[]},g=(e,t,n)=>({effects:u.reconfigure(p(e,t,n))}),f=r.Pe.define(),O=e=>({effects:f.of(e)}),b=r.Pe.define(),v=e=>({effects:b.of(e)})},39314:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var r=n(59162),o=n(96713),i=n(35722),a=n(31085);const s=e=>{let{phase:t="beta"}=e;const n=function(e){switch(e){case"release":return"info-badge";case"alpha":return"alpha-badge";default:return"beta-badge"}}(t);return"info-badge"===n?(0,a.jsx)(o.A,{type:"info",className:"align-middle info-badge"}):"alpha-badge"===n?(0,a.jsx)(i.A,{bg:"primary",className:"alpha-badge",children:"α"}):(0,a.jsx)(i.A,{bg:"warning",children:"β"})},l="/beta/participate",c=e=>{let{tooltip:t,link:n={href:l},description:o,phase:i="beta"}=e;const{href:c,...d}=n,h=(0,a.jsxs)("a",{target:"_blank",rel:"noopener noreferrer",href:c||l,...d,children:[(0,a.jsx)("span",{className:"visually-hidden",children:o||t?.text}),(0,a.jsx)(s,{phase:i})]});return t?(0,a.jsx)(r.A,{id:t.id,description:t.text,tooltipProps:{className:t.className},overlayProps:{placement:t.placement||"bottom",delay:100},children:h}):h}},39891:(e,t,n)=>{"use strict";function r(e){const t=e.linkedFileData?.importedAt??e.created;return{_id:e._id,name:e.name,id:e._id,type:"file",selected:!0,linkedFileData:e.linkedFileData,created:t?new Date(t):new Date,hash:e.hash}}function o(e){const t=r(e);return{...t,created:t.created.toISOString()}}n.d(t,{D:()=>r,g:()=>o})},41026:(e,t,n)=>{"use strict";n.d(t,{V:()=>useStopOnFirstError});var r=n(14041),o=n(8164),i=n(86316),a=n(69954);function useStopOnFirstError(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{eventSource:t}=e,{stopOnFirstError:n,setStopOnFirstError:s}=(0,o.Rf)(),{projectId:l}=(0,i.Om)(),c=(0,r.useCallback)((()=>{if(!n){const e={projectId:l};t&&(e.source=t),a._("stop-on-first-error-enabled",e)}s(!0)}),[t,l,n,s]),d=(0,r.useCallback)((()=>{const e={projectId:l};t&&(e.source=t),n&&a._("stop-on-first-error-disabled",e),s(!1)}),[t,l,n,s]);return{enableStopOnFirstError:c,disableStopOnFirstError:d}}},41235:(e,t,n)=>{"use strict";n.d(t,{B:()=>d,X:()=>u});var r=n(83173),o=n(45250),i=n(37664),a=n(57195),s=n(11235),l=n(60961);const c=e=>`doc.position.${e}`,d=(e,t)=>{let n,{currentDoc:{doc_id:i}}=e,{visual:a}=t;const l=(0,o.throttle)(((e,t)=>{e.target===t.scrollDOM&&(n=m(t),p(n,t))}),120,{trailing:!0});return[r.Z9.define((e=>{const t=()=>{n&&g(n,e,i)};return window.addEventListener("unload",t),{update:t=>{for(const r of t.transactions)for(const t of r.effects)t.is(s.EZ)?n&&g(n,e,i):t.is(h)&&window.setTimeout((()=>{e.dispatch(f(r.state.doc,i)),window.dispatchEvent(new Event("editor:scroll-position-restored"))}))},destroy:()=>{l.cancel(),window.removeEventListener("unload",t),t()}}}),{eventHandlers:{scroll:l}}),(0,s.KF)(a,r.Lz.updateListener.of((e=>{for(const t of e.transactions)for(const n of t.effects)n.is(s.EZ)&&(n.value||window.setTimeout((()=>{e.view.dispatch(u()),e.view.focus()})))})))]},h=a.Pe.define(),u=()=>({effects:h.of(null)}),m=e=>{const{top:t,height:n}=e.scrollDOM.getBoundingClientRect(),r=t-e.documentTop;return{first:e.lineBlockAtHeight(r),middle:e.lineBlockAtHeight(r+n/2)}},p=(e,t)=>{const n=t.state.doc.lineAt(e.middle.from).number;window.dispatchEvent(new CustomEvent("scroll:editor:update",{detail:n}))},g=(e,t,n)=>{const r=c(n),o=i.A.getItem(r),a=t.state.doc.lineAt(e.first.from).number;i.A.setItem(r,{...o,firstVisibleLine:a})},f=(e,t)=>{try{const n=c(t),o=i.A.getItem(n),s=Math.min(o?.firstVisibleLine??1,e.lines),l=e.line(s),d=a.OF.cursor(l.from);return{effects:r.Lz.scrollIntoView(d,{y:"start",yMargin:0})}}catch(e){return l.$.error(e),{}}}},41416:(e,t,n)=>{"use strict";n.d(t,{Gn:()=>v,l$:()=>w});n(97107);var r=n(14041),o=n(78494),i=n(86316),a=n(14901);function s(){const{projectId:e,project:t,updateProject:n}=(0,i.Om)();return async(r,o)=>{if(t){t[r]!==o&&(await(0,a.Y)(e,{[r]:o}),n({[r]:o}))}}}var l=n(60961);function c(){const{project:e}=(0,i.Om)(),t=s(),n=(0,r.useCallback)((e=>{t("compiler",e).catch(l.$.error)}),[t]),c=(0,r.useCallback)((e=>{t("imageName",e).catch(l.$.error)}),[t]),{setRootDocId:d,rootDocId:h}=function(){const{project:e}=(0,i.Om)(),t=e?.rootDocId,{permissionsLevel:n}=(0,o.yn)(),a=s(),l=(0,r.useCallback)((async e=>{if(void 0!==t&&"readOnly"!==n)try{await a("rootDocId",e)}catch(e){}}),[n,t,a]);return{rootDocId:t,setRootDocId:l}}(),u=function(){const{project:e}=(0,i.Om)(),t=e?.spellCheckLanguage,n=s();return(0,r.useCallback)((e=>{null!=t&&e!==t&&(n("spellCheckLanguage",e),(0,a.u)("spellCheckLanguage",e))}),[t,n])}();return{compiler:e?.compiler,setCompiler:n,imageName:e?.imageName,setImageName:c,rootDocId:h,setRootDocId:d,spellCheckLanguage:e?.spellCheckLanguage,setSpellCheckLanguage:u}}var d=n(66020),h=(n(82438),n(99819),n(45250)),u=n.n(h),m=n(64932),p=n(57220);function g(){const e=function(){const{userSettings:e,setUserSettings:t}=(0,d.dk)();return(n,r)=>{e[n]!==r&&(t({...e,[n]:r}),(0,a.u)(n,r))}}(),{userSettings:t}=(0,d.dk)(),{overallTheme:n,autoComplete:o,autoPairDelimiters:i,syntaxValidation:s,editorTheme:l,mode:c,fontSize:h,fontFamily:g,lineHeight:f,pdfViewer:O,mathPreview:b,breadcrumbs:v}=t,w=function(){const{userSettings:e,setUserSettings:t}=(0,d.dk)(),{overallTheme:n}=e,o=(0,r.useCallback)((e=>{t((t=>({...t,overallTheme:e})))}),[t]),i=(0,p.y)();return(0,r.useEffect)((()=>{document.body.dataset.theme="dark"===i?"default":"light"}),[i]),(0,r.useCallback)((e=>{n!==e&&u().find((0,m.A)("ol-overallThemes"),(t=>t.val===e))&&(o(e),(0,a.u)("overallTheme",e))}),[n,o])}(),_=(0,r.useCallback)((t=>{e("autoComplete",t)}),[e]),x=(0,r.useCallback)((t=>{e("autoPairDelimiters",t)}),[e]),y=(0,r.useCallback)((t=>{e("syntaxValidation",t)}),[e]),k=(0,r.useCallback)((t=>{e("editorTheme",t)}),[e]),C=(0,r.useCallback)((t=>{e("mode",t)}),[e]),S=(0,r.useCallback)((t=>{e("fontSize",t)}),[e]),Q=(0,r.useCallback)((t=>{e("fontFamily",t)}),[e]),E=(0,r.useCallback)((t=>{e("lineHeight",t)}),[e]),T=(0,r.useCallback)((t=>{e("pdfViewer",t)}),[e]),j=(0,r.useCallback)((t=>{e("mathPreview",t)}),[e]),P=(0,r.useCallback)((t=>{e("breadcrumbs",t)}),[e]);return{autoComplete:o,setAutoComplete:_,autoPairDelimiters:i,setAutoPairDelimiters:x,syntaxValidation:s,setSyntaxValidation:y,editorTheme:l,setEditorTheme:k,overallTheme:n,setOverallTheme:w,mode:c,setMode:C,fontSize:h,setFontSize:S,fontFamily:g,setFontFamily:Q,lineHeight:f,setLineHeight:E,pdfViewer:O,setPdfViewer:T,mathPreview:b,setMathPreview:j,breadcrumbs:v,setBreadcrumbs:P}}var f=n(67353);var O=n(31085);const b=(0,r.createContext)(void 0),v=e=>{let{children:t}=e;const{compiler:n,setCompiler:o,imageName:a,setImageName:s,rootDocId:l,setRootDocId:d,spellCheckLanguage:h,setSpellCheckLanguage:u}=c(),{autoComplete:m,setAutoComplete:p,autoPairDelimiters:v,setAutoPairDelimiters:w,syntaxValidation:_,setSyntaxValidation:x,editorTheme:y,setEditorTheme:k,overallTheme:C,setOverallTheme:S,mode:Q,setMode:E,fontSize:T,setFontSize:j,fontFamily:P,setFontFamily:$,lineHeight:R,setLineHeight:X,pdfViewer:A,setPdfViewer:q,mathPreview:L,setMathPreview:I,breadcrumbs:N,setBreadcrumbs:D}=g();!function(){const{socket:e}=(0,f.nK)(),{project:t,updateProject:n}=(0,i.Om)(),o=(0,r.useCallback)((e=>{t&&n({compiler:e})}),[t,n]),a=(0,r.useCallback)((e=>{t&&n({imageName:e})}),[t,n]),s=(0,r.useCallback)((e=>{t&&n({spellCheckLanguage:e})}),[t,n]);(0,r.useEffect)((()=>{if(t&&e)return e.on("compilerUpdated",o),e.on("imageNameUpdated",a),e.on("spellCheckLanguageUpdated",s),()=>{e.removeListener("compilerUpdated",o),e.removeListener("imageNameUpdated",a),e.removeListener("spellCheckLanguageUpdated",s)}}),[e,t,o,a,s])}();const W=(0,r.useMemo)((()=>({compiler:n,setCompiler:o,imageName:a,setImageName:s,rootDocId:l,setRootDocId:d,spellCheckLanguage:h,setSpellCheckLanguage:u,autoComplete:m,setAutoComplete:p,autoPairDelimiters:v,setAutoPairDelimiters:w,syntaxValidation:_,setSyntaxValidation:x,editorTheme:y,setEditorTheme:k,overallTheme:C,setOverallTheme:S,mode:Q,setMode:E,fontSize:T,setFontSize:j,fontFamily:P,setFontFamily:$,lineHeight:R,setLineHeight:X,pdfViewer:A,setPdfViewer:q,mathPreview:L,setMathPreview:I,breadcrumbs:N,setBreadcrumbs:D})),[n,o,a,s,l,d,h,u,m,p,v,w,_,x,y,k,C,S,Q,E,T,j,P,$,R,X,A,q,L,I,N,D]);return(0,O.jsx)(b.Provider,{value:W,children:t})};function w(){const e=(0,r.useContext)(b);if(!e)throw new Error("useProjectSettingsContext is only available inside ProjectSettingsProvider");return e}},41479:(e,t,n)=>{"use strict";n.d(t,{i:()=>i,p:()=>o});var r=n(6896);function o(e,t){const n=(0,r.lE)(e,t);return n&&"doc"===n.type?n.entity:null}function i(e,t){const n=(0,r.lE)(e,t);return n&&"fileRef"===n.type?n.entity:null}},41546:(e,t,n)=>{"use strict";const r=n(64347).assert,o=n(64331);class i extends o{constructor(e,t){r.integer(e,"RestoreOrigin: bad version"),r.date(t,"RestoreOrigin: bad timestamp"),super(i.KIND),this.version=e,this.timestamp=t}static fromRaw(e){return new i(e.version,new Date(e.timestamp))}toRaw(){return{kind:i.KIND,version:this.version,timestamp:this.timestamp.toISOString()}}getVersion(){return this.version}getTimestamp(){return this.timestamp}}i.KIND="restore",e.exports=i},42991:(e,t,n)=>{n(97107),n(82438),n(2989);const{containsNonBmpChars:r}=n(2058),{ApplyError:o,InvalidInsertionError:i,UnprocessableError:a}=n(20593),s=n(93516),l=n(61210);class c{constructor(){if(this.constructor===c)throw new Error("Cannot instantiate abstract class")}applyToLength(e){throw new Error("abstract method")}toJSON(){throw new Error("abstract method")}static fromJSON(e){if(m(e))return h.fromJSON(e);if(p(e))return d.fromJSON(e);if(g(e))return u.fromJSON(e);throw new a(`Invalid ScanOp ${JSON.stringify(e)}`)}equals(e){return!1}canMergeWith(e){return!1}mergeWith(e){throw new Error("abstract method")}toString(){}}class d extends c{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if(super(),"string"!=typeof e)throw new i("insertion must be a string");if(r(e))throw new i("insertion contains non-BMP characters");this.insertion=e,this.tracking=t,this.commentIds=n}static fromJSON(e){if("string"==typeof e)return new d(e);if("string"!=typeof e.i)throw new i("insert operation must have a string property");return new d(e.i,e.tracking&&l.fromRaw(e.tracking),e.commentIds)}applyToLength(e){return e.length+=this.insertion.length,e}equals(e){if(!(e instanceof d))return!1;if(this.insertion!==e.insertion)return!1;if(this.tracking){if(!this.tracking.equals(e.tracking))return!1}else if(e.tracking)return!1;return this.commentIds?this.commentIds.length===e.commentIds?.length&&this.commentIds.every((t=>e.commentIds?.includes(t))):!e.commentIds}canMergeWith(e){if(!(e instanceof d))return!1;if(this.tracking){if(!e.tracking||!this.tracking.canMergeWith(e.tracking))return!1}else if(e.tracking)return!1;return this.commentIds?this.commentIds.length===e.commentIds?.length&&this.commentIds.every((t=>e.commentIds?.includes(t))):!e.commentIds}mergeWith(e){if(!this.canMergeWith(e))throw new Error("Cannot merge with incompatible operation");this.insertion+=e.insertion,null!=this.tracking&&null!=e.tracking&&(this.tracking=this.tracking.mergeWith(e.tracking))}toJSON(){if(!this.tracking&&!this.commentIds)return this.insertion;const e={i:this.insertion};return this.tracking&&(e.tracking=this.tracking.toRaw()),this.commentIds&&(e.commentIds=this.commentIds),e}toString(){return`insert '${this.insertion}'`}}class h extends c{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(super(),e<0)throw new Error("length must be non-negative");this.length=e,this.tracking=t}applyToLength(e){if(e.inputCursor+this.length>e.inputLength)throw new o("Operation can't retain more chars than are left in the string.",this.toJSON(),e.inputLength);return e.length+=this.length,e.inputCursor+=this.length,e}static fromJSON(e){if("number"==typeof e)return new h(e);if("number"!=typeof e.r)throw new Error("retain operation must have a number property");if(e.tracking){const t="none"===e.tracking.type?new s:l.fromRaw(e.tracking);return new h(e.r,t)}return new h(e.r)}equals(e){return e instanceof h&&(this.length===e.length&&(this.tracking?this.tracking.equals(e.tracking):!e.tracking))}canMergeWith(e){if(!(e instanceof h))return!1;if(this.tracking){if(!e.tracking||!this.tracking.canMergeWith(e.tracking))return!1}else if(e.tracking)return!1;return!0}mergeWith(e){if(!this.canMergeWith(e))throw new Error("Cannot merge with incompatible operation");this.length+=e.length,null!=this.tracking&&null!=e.tracking&&(this.tracking=this.tracking.mergeWith(e.tracking))}toJSON(){return this.tracking?{r:this.length,tracking:this.tracking.toRaw()}:this.length}toString(){return`retain ${this.length}`}}class u extends c{constructor(e){if(super(),e<0)throw new Error("length must be non-negative");this.length=e}applyToLength(e){return e.inputCursor+=this.length,e}static fromJSON(e){if("number"!=typeof e||e>0)throw new Error("delete operation must be a negative number");return new u(-e)}equals(e){return e instanceof u&&this.length===e.length}canMergeWith(e){return e instanceof u}mergeWith(e){if(!this.canMergeWith(e))throw new Error("Cannot merge with incompatible operation");this.length+=e.length}toJSON(){return-this.length}toString(){return`remove ${this.length}`}}function m(e){return"number"==typeof e&&e>0||"object"==typeof e&&"r"in e&&"number"==typeof e.r&&e.r>0}function p(e){return"string"==typeof e||"object"==typeof e&&"i"in e&&"string"==typeof e.i}function g(e){return"number"==typeof e&&e<0}e.exports={ScanOp:c,InsertOp:d,RetainOp:h,RemoveOp:u,isRetain:m,isInsert:p,isRemove:g}},43921:(e,t,n)=>{n(97107),n(82438),n(50020);const{RetainOp:r,InsertOp:o,RemoveOp:i}=n(42991),a=n(2085);class s{ranges=[];resolved=!1;constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.id=e,this.resolved=n,this.ranges=this.mergeRanges(t)}applyInsert(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=!1;const o=[];for(const i of this.ranges)if(e===i.end)n?(o.push(i.extendBy(t)),r=!0):o.push(i);else if(e===i.start)n?(o.push(i.extendBy(t)),r=!0):o.push(i.moveBy(t));else if(i.startIsAfter(e))o.push(i.moveBy(t));else if(i.containsCursor(e))if(n)o.push(i.extendBy(t)),r=!0;else{const[n,,r]=i.insertAt(e,t);o.push(new a(i.pos,n.length)),o.push(r)}else o.push(i);return n&&!r&&o.push(new a(e,t)),new s(this.id,o,this.resolved)}applyDelete(e){const t=[];for(const n of this.ranges)n.overlaps(e)?t.push(n.subtract(e)):n.startsAfter(e)?t.push(n.moveBy(-e.length)):t.push(n);return new s(this.id,t,this.resolved)}applyTextOperation(e,t){let n=this,s=0;for(const l of e.ops)l instanceof r?s+=l.length:l instanceof o?(n=n.applyInsert(s,l.insertion.length,l.commentIds?.includes(t)),s+=l.insertion.length):l instanceof i&&(n=n.applyDelete(new a(s,l.length)));return n}isEmpty(){return 0===this.ranges.length}toRaw(){const e={id:this.id,ranges:this.ranges.map((e=>e.toRaw()))};return this.resolved&&(e.resolved=!0),e}mergeRanges(e){const t=[],n=[...e].sort(((e,t)=>e.start-t.start));for(const e of n){if(e.isEmpty())continue;const n=t[t.length-1];if(n?.overlaps(e))throw new Error("Ranges cannot overlap");if(e.isEmpty())throw new Error("Comment range cannot be empty");n?.canMerge(e)?t[t.length-1]=n.merge(e):t.push(e)}return t}static fromRaw(e){return new s(e.id,e.ranges.map((e=>a.fromRaw(e))),e.resolved)}}e.exports=s},44015:(e,t,n)=>{"use strict";n.d(t,{$j:()=>v,$k:()=>p,Ur:()=>u,sA:()=>f});n(82438),n(50020),n(34840);var r=n(83173),o=n(57195),i=n(15133),a=n(29587),s=n(5383),l=n(77213);const c=(e,t,n,r,i,a)=>{if(!i)return null;const{from:s,to:l}=r;return n&&s===n.range.from&&l===n.range.to?{...n,tooltip:{...n.tooltip,pos:t}}:{command:e,range:o.OF.range(s,l),tooltip:{create:()=>(e=>{const t=document.createElement("div");return t.role="menu",t.classList.add("ol-cm-command-tooltip"),{dom:t,update:e}})(a),arrow:!0,pos:t}}},d=(e,t)=>{const{main:n}=e.selection,r=n.head,o=(0,a.mv)(e).resolveInner(r,0),l=(0,i.Bw)(o,"$CommandTooltipCommand");if(!l)return null;if(n.from<l.from||n.to>l.to)return null;const d=l.name;switch(d){case"HrefCommand":{const n=l.getChild(s.UrlArgument)?.getChild(s.LiteralArgContent);if(n&&e.sliceDoc(n.from,n.to).includes("\n"))return null;const o=e=>{const t=f(e.state),n=t&&O(e.view,t);if(n&&document.activeElement!==n){const t=u(e.state),r=t?.getChild(s.UrlArgument)?.getChild(s.LiteralArgContent);if(r){const t=e.state.sliceDoc(r.from,r.to);t!==n.value&&n.dispatchEvent(new CustomEvent("value-update",{detail:t}))}}};return c(d,r,t,l,n,o)}case"UrlCommand":{const n=l.getChild(s.UrlArgument)?.getChild(s.LiteralArgContent);if(n){const t=e.sliceDoc(n.from,n.to).trim();if(!t||t.includes("\n")||!/^https?:\/\/\w+/.test(t))return null}return c(d,r,t,l,n)}case"Ref":{const e=l.getChild(s.RefArgument)?.getChild(s.ShortTextArgument)?.getChild(s.ShortArg);return c(d,r,t,l,e)}case"Include":{const e=l.getChild("IncludeArgument")?.getChild(s.FilePathArgument)?.getChild(s.LiteralArgContent);return c(d,r,t,l,e)}case"Input":{const e=l.getChild("InputArgument")?.getChild(s.FilePathArgument)?.getChild(s.LiteralArgContent);return c(d,r,t,l,e)}}return null},h=r.Lz.baseTheme({"&light .cm-tooltip.ol-cm-command-tooltip":{border:"1px lightgray solid",background:"#fefefe",color:"#111",boxShadow:"2px 3px 5px rgb(0 0 0 / 20%)"},"&dark .cm-tooltip.ol-cm-command-tooltip":{border:"1px #484747 solid",background:"#25282c",color:"#c1c1c1",boxShadow:"2px 3px 5px rgba(0, 0, 0, 0.51)"},".ol-cm-command-tooltip-content":{padding:"8px 0",display:"flex",flexDirection:"column"},".btn-link.ol-cm-command-tooltip-link":{display:"flex",alignItems:"center",gap:"8px",padding:"4px 12px",textDecoration:"none",color:"inherit"},".ol-cm-command-tooltip-form":{padding:"0 8px"}}),u=e=>{const t=f(e);if(t){const n=t.range.from,r=(0,a.a_)(e,n);if(r)return r.resolveInner(n,1).parent}},m=o.Pe.define(),p=()=>({effects:m.of(null)}),g=o.sU.define({create:e=>d(e,null),update:(e,t)=>(t.effects.some((e=>e.is(m)))||(0,l.gC)(t.state)?e=null:(e&&(e.range=e.range.map(t.changes)),(t.docChanged||t.selection)&&(e=d(t.state,e))),e),provide:e=>[r.DK.from(e,(e=>e?e.tooltip:null)),r.Lz.decorations.from(e,(e=>e?r.NZ.set(r.NZ.mark({attributes:{"aria-haspopup":"menu"}}).range(e.range.from,e.range.to)):r.NZ.none))]}),f=e=>e.field(g,!1),O=(e,t)=>(0,r.Eg)(e,t.tooltip)?.dom.querySelector("input, button"),b=o.Nb.highest(r.w4.of([{key:"Tab",run(e){const t=f(e.state);if(t){const n=O(e,t);if(n)return("url"!==n.type||!n.value||!(0,l.$l)(e.state))&&(n.focus(),!0)}return!1}},{key:"Escape",run:e=>(f(e.state)&&e.dispatch(p()),!1)}])),v=[g,b,h]},44167:(e,t,n)=>{"use strict";n.d(t,{Xq:()=>q,Yu:()=>I,c9:()=>L});var r=n(56447),o=n(53373),i=n.n(o),a=n(14041),s=n(8164),l=n(97434),c=n(69954),d=n(59162),h=n(71627),u=n(96713),m=n(82151),p=(n(61412),n(91883),n(70286),n(86316)),g=n(37858),f=n(69475),O=n(52155),b=n(37939),v=n(94234),w=n(37664),_=n(60440),x=n(91542),y=n(60961),k=n(89997),C=n(68543),S=n(55937),Q=n(89139),E=n(25133),T=n(14875);var j=n(17112),P=n(31085);const $=(0,a.memo)((function(e){let{syncToCode:t,syncToCodeInFlight:n,isDetachLayout:r}=e;const{t:o}=(0,l.Bd)(),s=i()("synctex-control",{"detach-synctex-control":!!r});let p=null;n?p=(0,P.jsx)(m.A,{animation:"border","aria-hidden":"true",size:"sm",role:"status"}):r||(p=(0,P.jsx)(u.A,{type:"arrow_left_alt",className:"synctex-control-icon"}));const g=(0,a.useCallback)((()=>{c._("jump-to-location",{direction:"pdf-location-in-code",method:"arrow"}),t({visualOffset:72})}),[t]),f=(0,a.useMemo)((()=>({placement:r?"bottom":"right"})),[r]);return(0,P.jsx)(d.A,{id:"sync-to-code",description:o("go_to_pdf_location_in_code"),overlayProps:f,children:(0,P.jsx)("span",{children:(0,P.jsxs)(h.A,{variant:"secondary",size:"sm",onClick:g,disabled:n,className:s,"aria-label":o("go_to_pdf_location_in_code"),children:[p,r?(0,P.jsxs)("span",{children:[" ",o("show_in_code")]}):""]})})})})),R=(0,a.memo)((function(e){let{syncToPdf:t,syncToPdfInFlight:n,isDetachLayout:r,canSyncToPdf:o}=e;const{t:a}=(0,l.Bd)(),s=r?"bottom":"right",c=i()("synctex-control",{"detach-synctex-control":!!r});let p=null;return n?p=(0,P.jsx)(m.A,{animation:"border","aria-hidden":"true",size:"sm",role:"status"}):r||(p=(0,P.jsx)(u.A,{type:"arrow_right_alt",className:"synctex-control-icon"})),(0,P.jsx)(d.A,{id:"sync-to-pdf",description:a("go_to_code_location_in_pdf"),overlayProps:{placement:s},children:(0,P.jsx)("span",{children:(0,P.jsxs)(h.A,{variant:"secondary",size:"sm",onClick:t,disabled:n||!o,className:c,"aria-label":a("go_to_code_location_in_pdf"),children:[p,r?(0,P.jsxs)("span",{children:[" ",a("show_in_pdf")]}):""]})})})}));function X(){const{detachRole:e}=(0,r.LV)(),{pdfUrl:t,pdfViewer:n,position:o}=(0,s.Rf)(),{syncToCode:i,syncToPdf:l,syncToCodeInFlight:d,syncToPdfInFlight:h,canSyncToPdf:u}=function(){const{projectId:e,project:t}=(0,p.Om)(),n=t?.rootDocId,{clsiServerId:r,pdfFile:o,position:i,setShowLogs:l,setHighlights:d}=(0,s.Rf)(),{selectedEntities:h}=(0,_.Q)(),{findEntityByPath:u,dirname:m,pathInFolder:j}=(0,k.m8)(),{openDocName:P}=(0,S.Wq)(),{getCurrentDocumentId:$,openDocWithId:R}=(0,C.TS)(),[X,A]=(0,a.useState)((()=>{const e=w.A.getItem(`doc.position.${$()}`);return e?e.cursorPosition:null})),q=(0,f.A)(),{signal:L}=(0,O.A)();(0,Q.A)("cursor:editor:update",(0,a.useCallback)((e=>A(e.detail)),[]));const[I,N]=(0,a.useState)(!1),[D,W]=(0,b.A)("sync-to-code-inflight",!1,"detacher","detached"),M=(0,a.useCallback)((()=>{const e=$();if(!e||!n)return null;let t=j(e);if(!t)return null;const r=m(n);return r&&(t=t.replace(RegExp(`^${r}`),`${r}/.`)),t}),[m,$,j,n]),U=(0,a.useCallback)(((e,t)=>{if(e){const n=u(e)?.entity;if(n)return void R(n._id,{gotoLine:t})}(0,T.showFileErrorToast)()}),[u,R]),F=(0,a.useCallback)((t=>{N(!0),r&&(t+=`&clsiserverid=${r}`),o?.editorId&&(t+=`&editorId=${o.editorId}`),o?.build&&(t+=`&buildId=${o.build}`),(0,g.hm)(`/project/${e}/sync/code?${t}`,{signal:L}).then((t=>{l(!1),d(t.pdf),t.downloadedFromCache&&(0,c._)("synctex-downloaded-from-cache",{projectId:e,method:"code"})})).catch(y.$.error).finally((()=>{q.current&&N(!1)}))}),[o,r,q,e,l,d,N,L]),V=(0,a.useRef)(X);(0,a.useEffect)((()=>{V.current=X}),[X]);const G=(0,a.useCallback)((()=>{const e=M();if(V.current){const{row:t,column:n}=V.current,r=new URLSearchParams({file:e??"",line:String(t+1),column:String(n)}).toString();c._("jump-to-location",{direction:"code-location-in-pdf",method:"arrow"}),F(r)}}),[M,F]);(0,x.A)("cursor:editor:syncToPdf",(0,a.useCallback)((()=>{G()}),[G]));const Z=(0,a.useRef)(i);(0,a.useEffect)((()=>{Z.current=i}),[i]);const B=(0,a.useCallback)((t=>{let{position:n=Z.current,visualOffset:i=0}=t;if(!n)return;W(!0);const a=n.offset.left;let s=0;n.pageSize?.height?s+=n.pageSize.height-n.offset.top:s+=n.offset.top,s+=i;const l=new URLSearchParams({page:n.page+1,h:a.toFixed(2),v:s.toFixed(2)});r&&l.set("clsiserverid",r),o?.editorId&&l.set("editorId",o.editorId),o?.build&&l.set("buildId",o.build),(0,g.hm)(`/project/${e}/sync/pdf?${l}`,{signal:L}).then((t=>{const[{file:n,line:r}]=t.code;U(n,r),t.downloadedFromCache&&(0,c._)("synctex-downloaded-from-cache",{projectId:e,method:"pdf"})})).catch(y.$.error).finally((()=>{q.current&&W(!1)}))}),[o,r,e,L,q,W,U]),z=(0,v.A)("sync-to-code",B,"detached","detacher");(0,Q.A)("synctex:sync-to-position",(0,a.useCallback)((e=>z({position:e.detail})),[z]));const[Y,H]=(0,b.A)("has-single-selected-doc",!1,"detacher","detached");(0,a.useEffect)((()=>{1===h.length&&"doc"===h[0].type?H(!0):H(!1)}),[h,H]);const K=Y&&X&&P&&(0,E.K)(P);return{syncToCode:z,syncToPdf:G,syncToPdfInFlight:I,syncToCodeInFlight:D,canSyncToPdf:K}}();return(0,j.u)("visual-preview")?null:o&&t&&"native"!==n?"detacher"===e?(0,P.jsx)(R,{syncToPdf:l,syncToPdfInFlight:h,isDetachLayout:!0,canSyncToPdf:u}):"detached"===e?(0,P.jsx)($,{syncToCode:i,syncToCodeInFlight:d,isDetachLayout:!0}):(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(R,{syncToPdf:l,syncToPdfInFlight:h,canSyncToPdf:u}),(0,P.jsx)($,{syncToCode:i,syncToCodeInFlight:d})]}):null}const A=(0,a.memo)(X);function q(){const{detachRole:e}=(0,r.LV)();return e?null:(0,P.jsx)(A,{})}function L(){const{detachRole:e,detachIsLinked:t}=(0,r.LV)();return"detacher"===e&&t?(0,P.jsx)(A,{}):null}function I(){const{detachRole:e,detachIsLinked:t}=(0,r.LV)();return"detached"===e&&t?(0,P.jsx)(A,{}):null}},44199:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});n(82438),n(12266),n(57327);class r{constructor(){this.events={}}on(e,t){let n;this.events||(this.events={}),[e,n]=Array.from(e.split(".")),this.events[e]||(this.events[e]=[]),this.events[e].push({callback:t,namespace:n})}off(e,t){if(this.events||(this.events={}),e){let n;[e,n]=e.split("."),this.events[e]||(this.events[e]=[]),t?this.events[e]=this.events[e].filter((e=>e.callback!==t)):n?this.events[e]=this.events[e].filter((e=>e.namespace!==n)):delete this.events[e]}else this.events={}}trigger(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.events||(this.events={}),this.events[e]&&this.events[e].forEach((e=>e.callback(...n)))}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.trigger(e,...n)}}},44285:(e,t,n)=>{"use strict";const r=n(64347).assert,o=n(12628);class i extends o{constructor(e){super(),r.integer(e,"HollowStringFileData: bad stringLength"),r.greaterOrEqual(e,0,"HollowStringFileData: low stringLength"),this.stringLength=e}static fromRaw(e){return new i(e.stringLength)}toRaw(){return{stringLength:this.stringLength}}getStringLength(){return this.stringLength}isEditable(){return!0}async toHollow(){return this}edit(e){this.stringLength=e.applyToLength(this.stringLength)}}e.exports=i},44838:(e,t,n)=>{"use strict";var r;function o(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(97107),n(82438),n(50020);const i=n(64347).assert,a=n(37603),s=n(62293),l=n(65591);class EditMissingFileError extends a{}class c{static fromRaw(e){return i.object(e.files,"bad raw.files"),new c(s.fromRaw(e.files),e.projectVersion,l.fromRaw(e.v2DocVersions))}toRaw(){const e={files:this.fileMap.toRaw()};return this.projectVersion&&(e.projectVersion=this.projectVersion),this.v2DocVersions&&(e.v2DocVersions=this.v2DocVersions.toRaw()),e}constructor(e,t,n){i.maybe.instance(e,s,"bad fileMap"),this.fileMap=e||new s({}),this.projectVersion=t,this.v2DocVersions=n}getProjectVersion(){return this.projectVersion}setProjectVersion(e){i.maybe.match(e,c.PROJECT_VERSION_RX,"Snapshot: bad projectVersion"),this.projectVersion=e}getV2DocVersions(){return this.v2DocVersions}setV2DocVersions(e){i.maybe.instance(e,l,"Snapshot: bad v2DocVersions"),this.v2DocVersions=e}updateV2DocVersions(e){e.applyTo(this)}getFileMap(){return this.fileMap}getFilePathnames(){return this.fileMap.getPathnames()}getFile(e){return this.fileMap.getFile(e)}addFile(e,t){this.fileMap.addFile(e,t)}moveFile(e,t){this.fileMap.moveFile(e,t),this.v2DocVersions&&this.v2DocVersions.moveFile(e,t)}countFiles(){return this.fileMap.countFiles()}editFile(e,t){const n=this.fileMap.getFile(e);if(!n)throw new c.EditMissingFileError(`can't find file for editing: ${e}`);n.edit(t)}applyAll(e,t){for(const n of e)n.applyTo(this,t)}findBlobHashes(e){this.fileMap.map((function(t){const n=t.getHash(),r=t.getRangesHash();n&&e.add(n),r&&e.add(r)}))}async loadFiles(e,t){return await this.fileMap.mapAsync((function(n){return n.load(e,t)}),50)}async store(e,t){i.maybe.number(t,"bad concurrency");const n=this.projectVersion,r=this.v2DocVersions?this.v2DocVersions.toRaw():void 0;return{files:await this.fileMap.mapAsync((function(t){return t.store(e)}),t),projectVersion:n,v2DocVersions:r}}clone(){return c.fromRaw(this.toRaw())}}r=c,o(c,"PROJECT_VERSION_RX_STRING","^[0-9]+\\.[0-9]+$"),o(r,"PROJECT_VERSION_RX",new RegExp(r.PROJECT_VERSION_RX_STRING)),o(r,"EditMissingFileError",EditMissingFileError),e.exports=c},45197:(e,t,n)=>{"use strict";n.d(t,{u:()=>r,v:()=>o});n(82438),n(34840);const r=e=>t=>t.effects.some((t=>t.is(e))),o=e=>t=>t.transactions.some((t=>t.effects.some((t=>t.is(e)))))},45317:(e,t,n)=>{"use strict";n(97107),n(82438),n(50020),n(74786),n(69033),n(68903),n(21018),n(1415),n(4448),n(58871),n(56539);const r=n(2058).containsNonBmpChars,o=n(91810),{RetainOp:i,InsertOp:a,RemoveOp:s,isRetain:l,isInsert:c,isRemove:d}=n(42991),{UnprocessableError:h,ApplyError:u,InvalidInsertionError:m,TooLongError:p}=n(20593),g=n(2085),f=n(93516),O=n(61210);class b extends o{static MAX_STRING_LENGTH=(()=>2*Math.pow(1024,2))();static UnprocessableError=(()=>h)();static ApplyError=(()=>u)();static InvalidInsertionError=(()=>m)();static TooLongError=(()=>p)();constructor(){super(),this.ops=[],this.baseLength=0,this.targetLength=0,this.contentHash=null}equals(e){if(this.baseLength!==e.baseLength)return!1;if(this.targetLength!==e.targetLength)return!1;if(this.ops.length!==e.ops.length)return!1;for(let t=0;t<this.ops.length;t++)if(!this.ops[t].equals(e.ops[t]))return!1;return!0}retain(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(0===e)return this;if(!l(e))throw new Error("retain expects an integer or a retain object");const n=i.fromJSON(e);if(n.tracking=t.tracking,0===n.length)return this;this.baseLength+=n.length,this.targetLength+=n.length;const r=this.ops[this.ops.length-1];return r?.canMergeWith(n)?r.mergeWith(n):this.ops.push(n),this}insert(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!c(e))throw new Error("insert expects a string or an insert object");const n=a.fromJSON(e);if(n.tracking=t.tracking,n.commentIds=t.commentIds,""===n.insertion)return this;this.targetLength+=n.insertion.length;const r=this.ops,o=this.ops[this.ops.length-1];if(o?.canMergeWith(n))o.mergeWith(n);else if(o instanceof s){const e=r[r.length-2];e?.canMergeWith(n)?e.mergeWith(n):(r[r.length]=r[r.length-1],r[r.length-2]=n)}else r.push(n);return this}remove(e){if("string"==typeof e&&(e=e.length),"number"!=typeof e)throw new Error("remove expects an integer or a string");if(0===e)return this;e>0&&(e=-e);const t=s.fromJSON(e);this.baseLength-=e;const n=this.ops[this.ops.length-1];return n?.canMergeWith(t)?n.mergeWith(t):this.ops.push(t),this}isNoop(){return 0===this.ops.length||1===this.ops.length&&this.ops[0]instanceof i}toString(){return this.ops.map((e=>e.toString())).join(", ")}toJSON(){const e={textOperation:this.ops.map((e=>e.toJSON()))};return null!=this.contentHash&&(e.contentHash=this.contentHash),e}static fromJSON=function(e){let{textOperation:t,contentHash:n}=e;const r=new b;for(const e of t)if(l(e)){const t=i.fromJSON(e);r.retain(t.length,{tracking:t.tracking})}else if(c(e)){const t=a.fromJSON(e);r.insert(t.insertion,{commentIds:t.commentIds,tracking:t.tracking})}else{if(!d(e))throw new h("unknown operation: "+JSON.stringify(e));{const t=s.fromJSON(e);r.remove(-t.length)}}return null!=n&&(r.contentHash=n),r};apply(e){const t=e.getContent(),n=this;if(r(t))throw new b.ApplyError("The string contains non BMP characters.",n,t);if(t.length!==n.baseLength)throw new b.ApplyError("The operation's base length must be equal to the string's length.",n,t);const o=this.ops;let l=0,c="";for(const n of o)if(n instanceof i){if(l+n.length>t.length)throw new u("Operation can't retain more chars than are left in the string.",n.toJSON(),t);c+=t.slice(l,l+n.length),l+=n.length}else if(n instanceof a){if(r(n.insertion))throw new m(t,n.toJSON());e.comments.applyInsert(new g(c.length,n.insertion.length),{commentIds:n.commentIds}),c+=n.insertion}else{if(!(n instanceof s))throw new h("Unknown ScanOp type during apply");e.comments.applyDelete(new g(c.length,n.length)),l+=n.length}if(l!==t.length)throw new b.ApplyError("The operation didn't operate on the whole string.",n,t);if(c.length>b.MAX_STRING_LENGTH)throw new b.TooLongError(n,c.length);e.trackedChanges.applyTextOperation(this),e.content=c}applyToLength(e){const t=this;if(e!==t.baseLength)throw new b.ApplyError("The operation's base length must be equal to the string's length.",t,e);const{length:n,inputCursor:r}=this.ops.reduce(((e,t)=>t.applyToLength(e)),{length:0,inputCursor:0,inputLength:e});if(r!==e)throw new b.ApplyError("The operation didn't operate on the whole string.",t,e);if(n>b.MAX_STRING_LENGTH)throw new b.TooLongError(t,n);return n}invert(e){const t=e.getContent();let n=0;const r=new b,o=this.ops;for(let l=0,c=o.length;l<c;l++){const c=o[l];if(c instanceof i)if(c.tracking){const t=n+c.length,o=e.trackedChanges.intersectRange(new g(n,c.length));for(const e of o)n<e.range.start&&(r.retain(e.range.start-n,{tracking:new f}),n=e.range.start),r.retain(e.range.length,{tracking:e.tracking}),n+=e.range.length;n<t&&(r.retain(t-n,{tracking:new f}),n=t)}else r.retain(c.length),n+=c.length;else if(c instanceof a)r.remove(c.insertion.length);else{if(!(c instanceof s))throw new h("unknown scanop during inversion");{const o=_(n,c.length,e.comments,e.trackedChanges);for(const e of o)r.insert(t.slice(n,n+e.length),{tracking:e.tracking,commentIds:e.commentIds}),n+=e.length}}}return r}canBeComposedWithForUndo(e){if(!(e instanceof b))return!1;if(this.isNoop()||e.isNoop())return!0;const t=w(this),n=w(e),r=v(this),o=v(e);return!(!r||!o)&&(r instanceof a&&o instanceof a?t+r.insertion.length===n:r instanceof s&&o instanceof s&&(n+o.length===t||t===n))}canBeComposedWith(e){return e instanceof b&&this.targetLength===e.baseLength}compose(e){if(!(e instanceof b))throw new Error(`Trying to compose TextOperation with ${e?.constructor?.name}.`);if(this.targetLength!==e.baseLength)throw new Error("The base length of the second operation has to be the target length of the first operation");const t=new b,n=this.ops,r=e.ops;let o=0,l=0,c=n[o++],d=r[l++];for(;void 0!==c||void 0!==d;)if(c instanceof s)t.remove(-c.length),c=n[o++];else if(d instanceof a)t.insert(d.insertion,{tracking:d.tracking,commentIds:d.commentIds}),d=r[l++];else{if(void 0===c)throw new Error("Cannot compose operations: first operation is too short.");if(void 0===d)throw new Error("Cannot compose operations: first operation is too long.");if(c instanceof i&&d instanceof i){const e=d.tracking??c.tracking;c.length>d.length?(t.retain(d.length,{tracking:e}),c=new i(c.length-d.length,c.tracking),d=r[l++]):c.length===d.length?(t.retain(c.length,{tracking:e}),c=n[o++],d=r[l++]):(t.retain(c.length,{tracking:e}),d=new i(d.length-c.length,d.tracking),c=n[o++])}else if(c instanceof a&&d instanceof s)c.insertion.length>d.length?(c=new a(c.insertion.slice(d.length),c.tracking,c.commentIds),d=r[l++]):c.insertion.length===d.length?(c=n[o++],d=r[l++]):(d=s.fromJSON(c.insertion.length-d.length),c=n[o++]);else if(c instanceof a&&d instanceof i){const e={commentIds:c.commentIds};d.tracking instanceof O?e.tracking=d.tracking:d.tracking instanceof f||(e.tracking=c.tracking),c.insertion.length>d.length?(t.insert(c.insertion.slice(0,d.length),e),c=new a(c.insertion.slice(d.length),c.tracking,c.commentIds),d=r[l++]):c.insertion.length===d.length?(t.insert(c.insertion,e),c=n[o++],d=r[l++]):(t.insert(c.insertion,e),d=new i(d.length-c.insertion.length,d.tracking),c=n[o++])}else{if(!(c instanceof i&&d instanceof s))throw new Error("This shouldn't happen: op1: "+JSON.stringify(c)+", op2: "+JSON.stringify(d));c.length>d.length?(t.remove(-d.length),c=new i(c.length-d.length,c.tracking),d=r[l++]):c.length===d.length?(t.remove(-d.length),c=n[o++],d=r[l++]):(t.remove(c.length),d=s.fromJSON(c.length-d.length),c=n[o++])}}return t}static transform(e,t){if(e.baseLength!==t.baseLength)throw new Error("Both operations have to have the same base length");const n=new b,r=new b,o=e.ops,l=t.ops;let c=0,d=0,h=o[c++],u=l[d++];for(;void 0!==h||void 0!==u;){if(h instanceof a){n.insert(h.insertion,{tracking:h.tracking,commentIds:h.commentIds}),r.retain(h.insertion.length),h=o[c++];continue}if(u instanceof a){n.retain(u.insertion.length),r.insert(u.insertion,{tracking:u.tracking,commentIds:u.commentIds}),u=l[d++];continue}if(void 0===h)throw new Error("Cannot compose operations: first operation is too short.");if(void 0===u)throw new Error("Cannot compose operations: first operation is too long.");let e;if(h instanceof i&&u instanceof i){let t,a;h.tracking?t=h.tracking:a=u.tracking,h.length>u.length?(e=u.length,h=new i(h.length-u.length,h.tracking),u=l[d++]):h.length===u.length?(e=u.length,h=o[c++],u=l[d++]):(e=h.length,u=new i(u.length-h.length,u.tracking),h=o[c++]),n.retain(e,{tracking:t}),r.retain(e,{tracking:a})}else if(h instanceof s&&u instanceof s)h.length>u.length?(h=s.fromJSON(u.length-h.length),u=l[d++]):h.length===u.length?(h=o[c++],u=l[d++]):(u=s.fromJSON(h.length-u.length),h=o[c++]);else if(h instanceof s&&u instanceof i)h.length>u.length?(e=u.length,h=s.fromJSON(u.length-h.length),u=l[d++]):h.length===u.length?(e=u.length,h=o[c++],u=l[d++]):(e=h.length,u=new i(u.length-h.length,u.tracking),h=o[c++]),n.remove(e);else{if(!(h instanceof i&&u instanceof s))throw new Error("The two operations aren't compatible");h.length>u.length?(e=u.length,h=new i(h.length-u.length,h.tracking),u=l[d++]):h.length===u.length?(e=h.length,h=o[c++],u=l[d++]):(e=h.length,u=s.fromJSON(h.length-u.length),h=o[c++]),r.remove(e)}}return[n,r]}}function v(e){const t=e.ops;switch(t.length){case 1:return t[0];case 2:return t[0]instanceof i?t[1]:t[1]instanceof i?t[0]:null;case 3:if(t[0]instanceof i&&t[2]instanceof i)return t[1]}return null}function w(e){return e.ops[0]instanceof i?e.ops[0].length:0}function _(e,t,n,r){const o=new Set,i=e,a=e+t;function s(e){e<i||e>a||o.add(e)}for(const e of n.comments.values())for(const t of e.ranges)s(t.end),s(t.start);for(const e of r.asSorted())s(e.range.start),s(e.range.end);s(i),s(a);const l=Array.from(o).sort(((e,t)=>e-t)),c=[];for(let e=1;e<l.length;e++){const t=l[e-1],o=l[e],i=new g(t,o-t),a=n.idsCoveringRange(i),s=r.propsAtRange(i);c.push({length:i.length,commentIds:a.length>0?a:void 0,tracking:s})}return c}e.exports=b},45330:(e,t,n)=>{"use strict";n.d(t,{j:()=>a});var r=n(29295),o=n(22046),i=n(31085);const a=e=>{let{children:t,modal:n}=e;return(0,i.jsxs)("div",{className:"error-boundary-alert",children:[(0,i.jsx)(o.A,{type:"error",content:t||(0,i.jsx)(r.f,{})}),n]})}},45461:(e,t,n)=>{n(97107),n(82438),n(50020);const r=n(58756),o=n(43921),i=n(2085),a=n(91810);class s extends a{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super();for(const e of t)if(e.isEmpty())throw new Error("AddCommentOperation can't be built with empty ranges");this.commentId=e,this.ranges=t,this.resolved=n}toJSON(){const e={commentId:this.commentId,ranges:this.ranges.map((e=>e.toRaw()))};return this.resolved&&(e.resolved=!0),e}apply(e){e.comments.add(new o(this.commentId,this.ranges,this.resolved))}invert(e){const t=e.comments.getComment(this.commentId);return t?new r.AddCommentOperation(t.id,t.ranges.slice(),t.resolved):new r.DeleteCommentOperation(this.commentId)}canBeComposedWith(e){return e instanceof s&&this.commentId===e.commentId||e instanceof r.DeleteCommentOperation&&this.commentId===e.commentId||e instanceof r.SetCommentStateOperation&&this.commentId===e.commentId}compose(e){if(e instanceof r.DeleteCommentOperation&&e.commentId===this.commentId)return e;if(e instanceof s&&e.commentId===this.commentId)return e;if(e instanceof r.SetCommentStateOperation&&e.commentId===this.commentId)return new s(this.commentId,this.ranges,e.resolved);throw new Error(`Trying to compose AddCommentOperation with ${e?.constructor?.name}.`)}static fromJSON(e){return new s(e.commentId,e.ranges.map(i.fromRaw),e.resolved??!1)}}e.exports=s},45696:(e,t,n)=>{"use strict";n.d(t,{K:()=>B});var r=n(73643),o=(n(69033),n(68903),n(21018),n(1415),n(4448),n(58871),n(56539),n(5383));let i=null,a=null,s=0;function l(e,t){const n=e.pos+t;if(a===e&&s===n)return i;if(e.peek(t)!=="{".charCodeAt(0))return;t++;let r="";for(;;){const n=e.peek(t);if(!((o=n)>=65&&o<=90||o>=97&&o<=122||o>=48&&o<=57||42===o||43===o||64===o))break;r+=String.fromCharCode(n),t++}var o;return a=e,s=n,i=r||null}function c(e,t){this.name=e,this.parent=t,this.hash=t?t.hash:0;for(let t=0;t<e.length;t++)this.hash+=(this.hash<<4)+e.charCodeAt(t)+(e.charCodeAt(t)<<8)}const d=new r.Aj({start:null,shift:(e,t,n,r)=>t===o.Begin?new c(l(r,6)||"",e):e,reduce:(e,t)=>t===o.KnownEnvironment&&e?e.parent:e,reuse:(e,t,n,r)=>t.type.id===o.Begin?new c(l(r,0)||"",e):e,hash:e=>e?e.hash:0,strict:!1}),h=new r.Lu(((e,t)=>{e.next==="*".charCodeAt(0)&&e.advance();const n=e.next;if(-1!==n&&!/\s|\*/.test(String.fromCharCode(n))){for(e.advance();;){const t=e.next;if(-1===t||t===k)return;if(e.advance(),t===n)break}return e.acceptToken(o.VerbContent)}}),{contextual:!1}),u=new r.Lu(((e,t)=>{let n=e.next;if(-1!==n&&!/\s/.test(String.fromCharCode(n))){for(n===v&&(n=_),e.advance();;){const t=e.next;if(-1===t||t===k)return;if(e.advance(),t===n)break}return e.acceptToken(o.LstInlineContent)}}),{contextual:!1}),m=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;for(let r=0;r<t.length;r++)if(String.fromCharCode(e.peek(n+r))!==t[r])return!1;return!0},p=new r.Lu(((e,t)=>{const n="\\end{"+t.context.name+"}";for(let t=0;;t++){if(-1===e.peek(t)||m(e,n,t))return e.acceptToken(o.VerbatimContent,t)}}),{contextual:!1}),g=new r.Lu((e=>{for(let t=0;;t++){const n=e.peek(t);if(-1===n||n===_)return e.acceptToken(o.LiteralArgContent,t)}}),{contextual:!1}),f=new r.Lu((e=>{for(let t=0;;t++){const n=e.peek(t);if(-1===n||n===y||n===k)return e.acceptToken(o.SpaceDelimitedLiteralArgContent,t)}}),{contextual:!1});function O(e){return e.charCodeAt(0)}const b=O("\\"),v=O("{"),w=O("["),_=O("}"),x=O("\t"),y=O(" "),k=O("\n"),C=e=>new r.Lu((t=>{for(let n=0;n<100;++n){const r=t.peek(n);if(r===y||r===x)continue;const o=e(r);if(o)return void t.acceptToken(o)}}),{contextual:!1,fallback:!0}),S=C((e=>e===v?o.hasMoreArguments:o.endOfArguments)),Q=C((e=>e===v||e===w?o.hasMoreArgumentsOrOptionals:o.endOfArgumentsAndOptionals)),E=O("@"),T=new r.Lu(((e,t)=>{let n=0,r=-1;const i=e.peek(n);if(-1!==i&&i===b){for(n++;;){const t=e.peek(n);if(-1===t||!((a=t)>=65&&a<=90||a>=97&&a<=122||t===E)){r=n-1;break}r=n,n++}var a;if(-1!==r)return e.acceptToken(o.Csname,r+1)}})),j="\\end{document}".split("").reverse(),P=new r.Lu(((e,t)=>{if(-1!==e.next){for(let t=1;t<j.length+1;t++)if(String.fromCharCode(e.peek(-t))!==j[t-1])return;for(;e.next===y||e.next===k;){if(-1===e.advance())return e.acceptToken(o.TrailingWhitespaceOnly)}for(;-1!==e.advance(););return e.acceptToken(o.TrailingContent)}})),$=new Set(["\\fullref","\\Vref","\\autopageref","\\autoref","\\eqref","\\labelcpageref","\\labelcref","\\lcnamecref","\\lcnamecrefs","\\namecref","\\nameCref","\\namecrefs","\\nameCrefs","\\thnameref","\\thref","\\titleref","\\vrefrange","\\Crefrange","\\Crefrang","\\fref","\\pref","\\tref","\\Aref","\\Bref","\\Pref","\\Sref","\\vref","\\nameref"]),R=new Set(["\\vpageref","\\vref","\\zcpageref","\\zcref","\\zfullref","\\zref","\\zvpageref","\\zvref","\\cref","\\Cref","\\pageref","\\ref","\\Ref","\\subref","\\zpageref","\\ztitleref","\\vpagerefrange","\\zvpagerefrange","\\zvrefrange","\\crefrange"]),X=new Set(["\\autocites","\\Autocites","\\Cite","\\citeA","\\citealp","\\Citealp","\\citealt","\\Citealt","\\citeauthorNP","\\citeauthorp","\\Citeauthorp","\\citeauthort","\\Citeauthort","\\citeNP","\\citenum","\\citen","\\citeonline","\\cites","\\Cites","\\citeurl","\\citeyearpar","\\defcitealias","\\fnotecite","\\footcite","\\footcitetext","\\footfullcite","\\footnotecites","\\Footnotecites","\\fullcite","\\fullciteA","\\fullciteauthor","\\fullciteauthorNP","\\maskcite","\\maskciteA","\\maskcitealp","\\maskCitealp","\\maskcitealt","\\maskCitealt","\\maskciteauthor","\\maskciteauthorNP","\\maskciteauthorp","\\maskCiteauthorp","\\maskciteauthort","\\maskCiteauthort","\\maskciteNP","\\maskcitenum","\\maskcitep","\\maskCitep","\\maskcitepalias","\\maskcitet","\\maskCitet","\\maskcitetalias","\\maskciteyear","\\maskciteyearNP","\\maskciteyearpar","\\maskfullcite","\\maskfullciteA","\\maskfullciteauthor","\\maskfullciteauthorNP","\\masknocite","\\maskshortcite","\\maskshortciteA","\\maskshortciteauthor","\\maskshortciteauthorNP","\\maskshortciteNP","\\mautocite","\\Mautocite","\\mcite","\\Mcite","\\mfootcite","\\mfootcitetext","\\mparencite","\\Mparencite","\\msupercite","\\mtextcite","\\Mtextcite","\\nocite","\\nocitemeta","\\notecite","\\Parencite","\\parencites","\\Parencites","\\pnotecite","\\shortcite","\\shortciteA","\\shortciteauthor","\\shortciteauthorNP","\\shortciteNP","\\smartcite","\\Smartcite","\\smartcites","\\Smartcites","\\supercite","\\supercites","\\textcite","\\Textcite","\\textcites","\\Textcites"]),A=new Set(["\\cite","\\citeauthor","\\Citeauthor","\\citedate","\\citep","\\citepalias","\\Citep","\\citetitle","\\citeyear","\\parencite","\\citet","\\citetalias","\\autocite","\\Autocite"]),q=new Set(["\\label","\\thlabel","\\zlabel"]),L=new Set(["\\text","\\tag","\\textrm","\\intertext"]),I={"\\hbox":o.HboxCtrlSeq,"\\title":o.TitleCtrlSeq,"\\author":o.AuthorCtrlSeq,"\\affil":o.AffilCtrlSeq,"\\affiliation":o.AffiliationCtrlSeq,"\\date":o.DateCtrlSeq,"\\documentclass":o.DocumentClassCtrlSeq,"\\usepackage":o.UsePackageCtrlSeq,"\\href":o.HrefCtrlSeq,"\\url":o.UrlCtrlSeq,"\\verb":o.VerbCtrlSeq,"\\lstinline":o.LstInlineCtrlSeq,"\\includegraphics":o.IncludeGraphicsCtrlSeq,"\\caption":o.CaptionCtrlSeq,"\\def":o.DefCtrlSeq,"\\let":o.LetCtrlSeq,"\\left":o.LeftCtrlSeq,"\\right":o.RightCtrlSeq,"\\newcommand":o.NewCommandCtrlSeq,"\\renewcommand":o.RenewCommandCtrlSeq,"\\newenvironment":o.NewEnvironmentCtrlSeq,"\\renewenvironment":o.RenewEnvironmentCtrlSeq,"\\book":o.BookCtrlSeq,"\\part":o.PartCtrlSeq,"\\addpart":o.PartCtrlSeq,"\\chapter":o.ChapterCtrlSeq,"\\addchap":o.ChapterCtrlSeq,"\\section":o.SectionCtrlSeq,"\\addseq":o.SectionCtrlSeq,"\\subsection":o.SubSectionCtrlSeq,"\\subsubsection":o.SubSubSectionCtrlSeq,"\\paragraph":o.ParagraphCtrlSeq,"\\subparagraph":o.SubParagraphCtrlSeq,"\\input":o.InputCtrlSeq,"\\include":o.IncludeCtrlSeq,"\\item":o.ItemCtrlSeq,"\\centering":o.CenteringCtrlSeq,"\\newtheorem":o.NewTheoremCtrlSeq,"\\theoremstyle":o.TheoremStyleCtrlSeq,"\\bibliography":o.BibliographyCtrlSeq,"\\bibliographystyle":o.BibliographyStyleCtrlSeq,"\\maketitle":o.MaketitleCtrlSeq,"\\textcolor":o.TextColorCtrlSeq,"\\colorbox":o.ColorBoxCtrlSeq,"\\hline":o.HLineCtrlSeq,"\\toprule":o.TopRuleCtrlSeq,"\\midrule":o.MidRuleCtrlSeq,"\\bottomrule":o.BottomRuleCtrlSeq,"\\multicolumn":o.MultiColumnCtrlSeq,"\\parbox":o.ParBoxCtrlSeq,"\\textbf":o.TextBoldCtrlSeq,"\\textit":o.TextItalicCtrlSeq,"\\textsc":o.TextSmallCapsCtrlSeq,"\\texttt":o.TextTeletypeCtrlSeq,"\\textmd":o.TextMediumCtrlSeq,"\\textsf":o.TextSansSerifCtrlSeq,"\\textsuperscript":o.TextSuperscriptCtrlSeq,"\\textsubscript":o.TextSubscriptCtrlSeq,"\\sout":o.TextStrikeOutCtrlSeq,"\\emph":o.EmphasisCtrlSeq,"\\underline":o.UnderlineCtrlSeq,"\\setlength":o.SetLengthCtrlSeq,"\\footnote":o.FootnoteCtrlSeq,"\\endnote":o.EndnoteCtrlSeq},N=(e,t)=>"\\begin"===e?o.Begin:"\\end"===e?o.End:$.has(e)?o.RefCtrlSeq:R.has(e)?o.RefStarrableCtrlSeq:X.has(e)?o.CiteCtrlSeq:A.has(e)?o.CiteStarrableCtrlSeq:q.has(e)?o.LabelCtrlSeq:L.has(e)?o.MathTextCtrlSeq:I[e]||-1,D=new Set(["tabular","xltabular","tabularx","longtable"]),W=new Set(["equation","equation*","displaymath","displaymath*","math","math*","multline","multline*","matrix","tikzcd"]),M=new Set(["array","eqnarray","eqnarray*","align","align*","alignat","alignat*","flalign","flalign*","gather","gather*","pmatrix","pmatrix*","bmatrix","bmatrix*","Bmatrix","Bmatrix*","vmatrix","vmatrix*","Vmatrix","Vmatrix*","smallmatrix","smallmatrix*","split","split*","gathered","gathered*","aligned","aligned*","alignedat","alignedat*","cases","cases*","dcases","dcases*","rcases","rcases*","IEEEeqnarray","IEEEeqnarray*","subeqnarray","subeqnarray*"]),U=new Set(["verbatim","boxedverbatim","lstlisting","minted","Verbatim","lstlisting","tcblisting","codeexample","comment"]),F={document:o.DocumentEnvName,tikzpicture:o.TikzPictureEnvName,figure:o.FigureEnvName,"figure*":o.FigureEnvName,subfigure:o.FigureEnvName,enumerate:o.ListEnvName,itemize:o.ListEnvName,table:o.TableEnvName,description:o.ListEnvName},V=(e,t)=>D.has(e)?o.TabularEnvName:W.has(e)?o.EquationEnvName:M.has(e)?o.EquationArrayEnvName:U.has(e)?o.VerbatimEnvName:F[e]||-1,G={"\\(":o.OpenParenCtrlSym,"\\)":o.CloseParenCtrlSym,"\\[":o.OpenBracketCtrlSym,"\\]":o.CloseBracketCtrlSym,"\\\\":o.LineBreakCtrlSym},Z=(e,t)=>G[e]||-1,B=r.U1.deserialize({version:14,states:"$J`OVQ#tOOOOQO'#Kr'#KrO&lQ#tO'#ErOVQ#tO'#EqO&qQ#tO'#EkO&|Q#tO'#EwO'XQ#tO'#ExO'dQ#tO'#EyO'oQ#tO'#EzO'zQ#tO'#FOO(VQ#tO'#FQO(_Q#tO'#FSO(gQ#tO'#FUO(rQ#tO'#FWO(zQ#tO'#FXO)SQ#tO'#FYO)[Q&jO'#F[O)gQ#tO'#F]O)oQ#tO'#F^O)wQ#uO'#F_O)|Q#vO'#F`O*XQ#tO'#FaO*dQ&jO'#FdO*rQ#tO'#FeO*zQ#tO'#FgO+VQ&jO'#FgO+eQ#tO'#FiO+pQ&jO'#FiO0{Q#tO'#FwOOQO'#Fv'#FvO2RQ$fO'#FkO2^Q$fO'#GPO2cQ#tO'#GQO2kQ$fO'#GRO2vQ$fO'#GSO3RQ#tO'#GTO3ZQ$fO'#GUO3fQ#tO'#GVO3nQ#tO'#GYOOQO'#G['#G[O3sQ#tO'#G]O9rQ#tO'#G^O?qQ#tO'#G_OEpQ#tO'#G`OExQ&jO'#GeOFTQ#tO'#GfOF`Q#tO'#GgOF`Q#tO'#GhOF`Q#tO'#GiOF`Q#tO'#GjOF`Q#tO'#GkOF`Q#tO'#GlOF`Q#tO'#GmOF`Q#tO'#GnOF`Q#tO'#GoOF`Q#tO'#GpOF`Q#tO'#GqOFeQ#tO'#GrOFmQ#tO'#GsOFxQ#tO'#GtOOQO'#Ej'#EjOLQQ#tO'#GuOOQO'#Gu'#GuOOQO'#Ei'#EiO!#tQ,UO'#GvOOQO'#Ig'#IgO!#{Q,UO'#IfOOQO'#Ij'#IjO!$SQ,UO'#IiOOQO'#Kq'#KqOVQ#tO'#EaO!)WQ#tO'#InO!)_Q,UO'#IsO!)_Q,UO'#IxO!)fQ$UO'#I|O!)kQ#tO'#JROVQ#tO'#JYOVQ#tO'#J^OVQ#tO'#JbOOQO'#E`'#E`OOQO'#Kp'#KpO!.qQ#tO'#JfOOQO'#Ko'#KoOOQO'#KQ'#KQOOQO'#KP'#KPO!.xQ&jO'#JhO!/WQ&jO'#JkO!/fQ&jO'#JnO!/tQ&jO'#JqO!0SQ&jO'#JtO!0bQ&jO'#JwO!0pQ&jO'#JzO!1OQ&jO'#J}O!1^Q#tO'#J|OOQO'#Lv'#LvO!2TQ#tO'#E^QOQ#tOOO!2bQ#tO'#JyO!3XQ#tO'#JvO!4OQ#tO'#JsO!4uQ#tO'#JpO!5lQ#tO'#JmO!6cQ#tO'#JjO!7YQ#tO'#JgO!8PQ&jO'#EsO!8tQ#tO,5;^O!>ZQ#tO,5:|O!CpQ#tO,5?ZO!HpQ,UO,5?`O!MgQ,UO,5?eO#$^Q$UO,5?iO#$iQ#tO,5?nO#)oQ#tO,5?uO#/UQ#tO,5?yO#4kQ#tO,5?}OOQO'#Eu'#EuO#:QQ#tO,5;]O#:VQ#tO'#EmOOQO,5;V,5;VOF`Q#tO,5;VO#DVQ#tO'#EfO#D^Q#tO,5;VOOQO,5;c,5;cO#DfQ#tO,5;cO#DnQ#tO,5;cOOQO,5;d,5;dO#DyQ#tO,5;dO#ERQ#tO,5;dOOQO,5;e,5;eO#E^Q#tO,5;eO#EfQ#tO,5;eO#EqQ#tO'#E{OOQO,5;f,5;fO#JtQ#tO,5;fO#J|Q#tO,5;fOOQO'#FP'#FPOOQO,5;j,5;jO#KXQ#tO,5;jO#K^Q#tO,5;jOOQO'#FR'#FROOQO,5;l,5;lO#KXQ#tO,5;lOOQO'#FT'#FTOOQO,5;n,5;nO#KXQ#tO,5;nOOQO'#FV'#FVOOQO,5;p,5;pO#KXQ#tO,5;pO#K^Q#tO,5;pO#KfQ#tO,5;rO#KXQ#tO,5;rO#KnQ#tO,5;sO#KXQ#tO,5;sO#KvQ#xO'#FZO#KXQ#tO,5;tO#K{Q#tO,5;tO#D^Q#tO,5;vO#LQQ#tO,5;vO#KXQ#tO,5;vOOQO,5;w,5;wO#KXQ#tO,5;wOOQO,5;x,5;xO#K{Q#tO,5;xOOQO,5;y,5;yOOQO,5;z,5;zO#LYQ#vO,5;zO#L_Q#vO,5;zO#LgQ#xO'#FcOOQO'#Fb'#FbOOQO,5;{,5;{O3nQ#tO,5;{O#LlQ#tO,5;{OOQO,5<O,5<OOF`Q#tO,5<OO#LtQ#tO,5<OO#D^Q#tO,5<OOOQO'#Ff'#FfOOQO,5<P,5<PO#KXQ#tO,5<POOQO'#Fh'#FhOOQO,5<R,5<RO#MPQ#tO,5<RO#MPQ#tO,5<RO#M[Q#tO,5<ROOQO'#Fj'#FjOOQO,5<T,5<TO#MgQ#tO,5<TO#MgQ#tO,5<TO#MrQ#tO,5<TOOQO,5<c,5<cO#M}Q#tO,5<VO#N`Q$fO,5<VO#NhQ'[O,5<kOOQO,5<l,5<lOF`Q#tO,5<lO#NsQ#tO,5<mO$ RQ#xO,5<mO$ WQ$fO,5<mO#NsQ#tO,5<nO$ `Q#xO,5<nO$ eQ$fO,5<nO$ mQ#xO,5<oO$ rQ#tO,5<oO#NsQ#tO,5<pO$ wQ#xO,5<pO$ |Q$fO,5<pO$!UQ#|O'#GXOOQO'#GW'#GWOOQO,5<q,5<qOOQO'#GZ'#GZOOQO,5<t,5<tO$!ZQ#tO,5<wOOQO,5<w,5<wOOQO,5<x,5<xOOQO,5<y,5<yOOQO'#Ga'#GaO$(YQ#tO,5<zO#KXQ#tO,5<zOOQO,5=P,5=POF`Q#tO,5=PO$(bQ&jO,5=POOQO'#K['#K[OFTQ#tO,5=QO$(jQ#tO,5=QO#DaQ#tO'#K[OOQO,5=R,5=ROOQO,5=S,5=SOOQO,5=T,5=TOOQO,5=U,5=UOOQO,5=V,5=VOOQO,5=W,5=WOOQO,5=X,5=XOOQO,5=Y,5=YOOQO,5=Z,5=ZOOQO,5=[,5=[OOQO,5=],5=]O$(rQ#tO,5=^O#KXQ#tO,5=^OOQO,5=_,5=_O$(zQ#tO,5=_O$)SQ#tO,5=_OOQO,5=`,5=`O$)_Q#tO,5=`O$)gQ#tO,5=`OOQO'#K]'#K]O$)rQ#tO,5=aO$)rQ#tO,5=aO$/kQ,UO'#FwO$/xQ#tO'#G{O$0TQ#tO'#G|O$0`Q#tO'#G}O$0kQ#tO'#HOO$0vQ#tO'#HPO$1RQ#tO'#HQO$1^Q#tO'#HSO$1fQ#tO'#HUO$1nQ#tO'#HWO$1yQ#tO'#HXO$2RQ#tO'#HZO$2ZQ#tO'#H[O$2cQ&jO'#H]O$2nQ#tO'#H^O$2vQ#tO'#H_O$3OQ#uO'#H`O$3TQ#vO'#HaO$3`Q#tO'#HbO$3kQ&jO'#HdO$3yQ#tO'#HeO$4RQ#tO'#HfO$4^Q&jO'#HfO$4lQ#tO'#HgO$4wQ&jO'#HgO$5VQ$fO'#HhO$5bQ$fO'#HiO$5gQ#tO'#HjO$5oQ$fO'#HkO$5zQ$fO'#HlO$6VQ#tO'#HmO$6_Q$fO'#HnO3fQ#tO'#HoO3nQ#tO'#HqOOQO'#Hs'#HsO$6jQ,UO'#HtO$;pQ,UO'#HuO$@vQ,UO'#HvO$E|Q#tO'#HwO$FUQ&jO'#HzOFTQ#tO'#H{OF`Q#tO'#H|OF`Q#tO'#H}OF`Q#tO'#IOOF`Q#tO'#IPOF`Q#tO'#IQOF`Q#tO'#IROF`Q#tO'#ISOF`Q#tO'#ITO$FaQ#tO'#IUO$FaQ#tO'#IVO$FaQ#tO'#IWO$FfQ#tO'#IXO$FnQ#tO'#IYO$FyQ#tO'#IZOOQO'#Gz'#GzO$GUQ!!^O'#LSOOQO'#LS'#LSOOQO'#I['#I[OOQO'#Gy'#GyO$G^Q,UO'#I]O$InQ7[O'#I_O$IuQ,UO'#I^OOQO'#K^'#K^O$I|Q,UO'#GxOOQO'#Gw'#GwO$JdQ,UO'#IeO$JkQ#tO,5=bOOQO'#Ih'#IhOOQO,5?Q,5?QO$JpQ#tO,5?QOOQO'#Ik'#IkOOQO,5?T,5?TO$JuQ#tO,5?TO$JzQ#tO,5:{O$KPQ#tO'#GdOOQO'#Iq'#IqO$KZQ#tO,5?YOOQO'#Iv'#IvO$K`Q#tO,5?_O$KeQ#tO,5?dOOQO'#JP'#JPO$KjQ#tO,5?hO!)kQ#tO'#JWOOQO'#K`'#K`O$KoQ#tO'#JVOOQO'#JU'#JUO$KyQ#tO,5?mO$LOQ#tO,5?tO$LTQ#tO,5?xO$LYQ#tO,5?|OOQO,5@Q,5@QO$L_Q#tO,5@QOOQO-E>O-E>OO#:VQ#tO'#GOOOQO,5@S,5@SO$LdQ#tO,5@SO$LlQ#tO,5@SO$LwQ&jO,5@SOOQO,5@V,5@VO$MVQ#tO,5@VO$M_Q#tO,5@VO$MjQ&jO,5@VOOQO,5@Y,5@YO$MxQ#tO,5@YO$NQQ#tO,5@YO$N]Q&jO,5@YOOQO,5@],5@]O$NkQ#tO,5@]O$NsQ#tO,5@]O% OQ&jO,5@]OOQO,5@`,5@`O% ^Q#tO,5@`O% fQ#tO,5@`O% qQ&jO,5@`OOQO,5@c,5@cO%!PQ#tO,5@cO%!XQ#tO,5@cO%!dQ&jO,5@cOOQO,5@f,5@fO%!rQ#tO,5@fO%!zQ#tO,5@fO%#VQ&jO,5@fOOQO,5@i,5@iO%#eQ#tO,5@iO%#mQ#tO,5@iO%#xQ&jO,5@iOOQO'#Kh'#KhO%$WQ#tO'#KOOOQO,5@h,5@hOOQO-E=}-E=}OOQO'#Kg'#KgO%$}Q#tO'#J{OOQO,5@e,5@eOOQO'#Kf'#KfO%%tQ#tO'#JxOOQO,5@b,5@bOOQO'#Ke'#KeO%&kQ#tO'#JuOOQO,5@_,5@_OOQO'#Kd'#KdO%'bQ#tO'#JrOOQO,5@[,5@[OOQO'#Kc'#KcO%(XQ#tO'#JoOOQO,5@X,5@XOOQO'#Kb'#KbO%)OQ#tO'#JlOOQO,5@U,5@UOOQO'#Ka'#KaO%)uQ#tO'#JiOOQO,5@R,5@RO%*lQ#tO,5:}OOQO,5;_,5;_O%*qQ#tO,5;_O%*vQ#tO,5?[O%*{Q#tO,5?aO%+QQ#tO,5?fO%+VQ#tO,5?jO%+[Q#tO,5?oO%+aQ#tO,5?vO%+fQ#tO,5?zO%+kQ#tO,5@OOOQ`'#KT'#KTO%+pQ#tO1G0xO%+pQ#tO1G0xO%1VQ#tO1G0hO%1VQ#tO1G0hO%6lQ#tO1G4uO%6lQ#tO1G4uO%;lQ,UO1G4zO%;lQ,UO1G4zO%@cQ,UO1G5PO%@cQ,UO1G5PO%EYQ$UO1G5TO%EYQ$UO1G5TO%EbQ#tO1G5YO%EbQ#tO1G5YO%JhQ#tO1G5aO%JhQ#tO1G5aO& }Q#tO1G5eO& }Q#tO1G5eO&'dQ#tO1G5iO&'dQ#tO1G5iO&,yQ#tO'#EvOOQO1G0w1G0wO#:VQ#tO'#EpOOQO'#KS'#KSO&1uQ#tO'#EnO&2]Q#tO,5;XOOQO1G0q1G0qO&2bQ#tO'#IlOOQO'#KR'#KRO&2iQ#tO'#EhO&2sQ#tO,5;QOF`Q#tO1G0qOOQO1G0}1G0}OF`Q#tO1G0}O&2xQ#tO1G0}OOQO1G1O1G1OOF`Q#tO1G1OO&3QQ#tO1G1OOOQO1G1P1G1POF`Q#tO1G1PO&3YQ#tO1G1PO#EqQ#tO'#E}OOQO'#KU'#KUO&3bQ#tO'#E|O&3uQ#tO,5;gOOQO1G1Q1G1QO#KXQ#tO1G1QO&3zQ#tO1G1QOOQO1G1U1G1UO#KXQ#tO1G1UOOQO1G1W1G1WOOQO1G1Y1G1YOOQO1G1[1G1[O#KXQ#tO1G1[OOQO1G1^1G1^OF`Q#tO1G1^O&4SQ#tO1G1^OOQO1G1_1G1_OF`Q#tO1G1_O&4[Q#tO1G1_O&4dQ#tO,5;uOOQO1G1`1G1`O#KXQ#tO1G1`O&4iQ#tO1G1bOF`Q#tO1G1bO#D^Q#tO1G1bO#KXQ#tO1G1bOOQO1G1c1G1cOOQO1G1d1G1dOOQO1G1f1G1fO&:hQ#vO1G1fO&:mQ#tO,5;}OOQO1G1g1G1gO3nQ#tO1G1gOOQO1G1j1G1jOF`Q#tO1G1jO#D^Q#tO1G1jOOQO1G1k1G1kOOQO1G1m1G1mO&:rQ#tO1G1mO&:zQ#tO1G1mO&;VQ#tO1G1mO&;VQ#tO1G1mOOQO1G1o1G1oO&;bQ#tO1G1oO&;jQ#tO1G1oO&;uQ#tO1G1oO&;uQ#tO1G1oO&<QQ&jO'#FmO#NZQ#tO'#FnOOQO'#KV'#KVO&<oQ#tO1G1qO&<oQ#tO1G1qO&=QQ#tO'#FoO&CRQ#tO'#FoO&=QQ#tO'#FoOOQO1G1q1G1qO&CYQ#tO1G1qOOQO1G2V1G2VO&CkQ$fO1G2VO&CsQ'[O1G2VOOQO1G2W1G2WOOQO'#KW'#KWOOQO'#KZ'#KZO#NsQ#tO1G2XOOQO1G2X1G2XO&DOQ#tO1G2XO#NsQ#tO1G2XO&DTQ#xO1G2XO#NsQ#tO1G2YOOQO1G2Y1G2YO&DYQ#tO1G2YO#NsQ#tO1G2YO&D_Q#xO1G2YO&DdQ#tO1G2ZO&DiQ#xO1G2ZO#NsQ#tO1G2[O&DnQ#tO1G2[O&DyQ#tO1G2[O#NsQ#tO1G2[O&EOQ#xO1G2[OOQO,5<s,5<sOOQO1G2c1G2cOOQO'#Gb'#GbO&ETQ#tO1G2fO#KXQ#tO1G2fO&E]Q#tO1G2fOOQO1G2k1G2kOF`Q#tO1G2kOOQO-E>Y-E>YO&EeQ#tO1G2lOOQO1G2l1G2lOF`Q#tO1G2lOOQO,5@v,5@vOOQO1G2x1G2xO#KXQ#tO1G2xO&EmQ#tO1G2xOOQO1G2y1G2yOF`Q#tO1G2yO&EuQ#tO1G2yOOQO1G2z1G2zOF`Q#tO1G2zO&E}Q#tO1G2zOOQO-E>Z-E>ZOOQO1G2{1G2{OOQO,5=g,5=gOF`Q#tO,5=gO#D^Q#tO,5=gOOQO,5=h,5=hO&FVQ#tO,5=hO&F_Q#tO,5=hOOQO,5=i,5=iO&FjQ#tO,5=iO&FrQ#tO,5=iOOQO,5=j,5=jO&F}Q#tO,5=jO&GVQ#tO,5=jOOQO,5=k,5=kO&GbQ#tO,5=kO&GjQ#tO,5=kOOQO'#HR'#HROOQO,5=l,5=lO#KXQ#tO,5=lO#K^Q#tO,5=lOOQO'#HT'#HTOOQO,5=n,5=nO#KXQ#tO,5=nOOQO'#HV'#HVOOQO,5=p,5=pO#KXQ#tO,5=pOOQO,5=r,5=rO#KXQ#tO,5=rO#K^Q#tO,5=rO&GuQ#tO,5=sO#KXQ#tO,5=sO&G}Q#tO,5=uO#KXQ#tO,5=uO#KXQ#tO,5=vO#K{Q#tO,5=vO#D^Q#tO,5=wO&HVQ#tO,5=wO#KXQ#tO,5=wOOQO,5=x,5=xO#KXQ#tO,5=xOOQO,5=y,5=yO#K{Q#tO,5=yOOQO,5=z,5=zOOQO,5={,5={O&H_Q#vO,5={O&HdQ#vO,5={OOQO'#Hc'#HcOOQO,5=|,5=|O3nQ#tO,5=|O#LlQ#tO,5=|OOQO,5>O,5>OOF`Q#tO,5>OO&HlQ#tO,5>OO#D^Q#tO,5>OOOQO,5>P,5>PO#KXQ#tO,5>POOQO,5>Q,5>QO&HwQ#tO,5>QO&HwQ#tO,5>QO&ISQ#tO,5>QOOQO,5>R,5>RO&I_Q#tO,5>RO&I_Q#tO,5>RO&IjQ#tO,5>RO&IuQ#tO,5>SO&JWQ$fO,5>SO&J`Q'[O,5>TOOQO,5>U,5>UOF`Q#tO,5>UO#NsQ#tO,5>VO&JkQ#xO,5>VO&JpQ$fO,5>VO#NsQ#tO,5>WO&JxQ#xO,5>WO&J}Q$fO,5>WO&KVQ#xO,5>XO&K[Q#tO,5>XO#NsQ#tO,5>YO&KaQ#xO,5>YO&KfQ$fO,5>YOOQO'#Hp'#HpOOQO,5>Z,5>ZOOQO'#Hr'#HrOOQO,5>],5>]O&KnQ,UO,5>`OOQO,5>`,5>`OOQO,5>a,5>aOOQO,5>b,5>bOOQO'#Hx'#HxO'!tQ#tO,5>cO#KXQ#tO,5>cOOQO,5>f,5>fOF`Q#tO,5>fO'!|Q&jO,5>fOFTQ#tO,5>gO'#UQ#tO,5>gOOQO,5>h,5>hOOQO,5>i,5>iOOQO,5>j,5>jOOQO,5>k,5>kOOQO,5>l,5>lOOQO,5>m,5>mOOQO,5>n,5>nOOQO,5>o,5>oO'#^Q,UO'#HYOOQO,5>p,5>pOOQO,5>q,5>qOOQO,5>r,5>rO'#eQ#tO,5>sO#KXQ#tO,5>sOOQO,5>t,5>tO'#mQ#tO,5>tO'#uQ#tO,5>tOOQO,5>u,5>uO'$QQ#tO,5>uO'$YQ#tO,5>uO'$eQ#tO'#K_O'$mQ!!^O,5AnOOQO,5An,5AnOOQO,5>w,5>wO'$uQ#tO,5>wOOQO'#I`'#I`OOQO,5>y,5>yO$GeQ7[O,5>yO'$zQ7[O'#IaOOQO,5>x,5>xO'%RQ#tO,5>xOOQO-E>[-E>[OOQO,5?P,5?PO'%WQ#tO,5?POOQO1G2|1G2|OOQO1G4l1G4lOOQO1G4o1G4oO'%]Q#tO'#ImO'*_Q%WO1G0gO'+eQ#tO'#IrOOQO1G4t1G4tO'+jQ#tO'#IwOOQO1G4y1G4yO'+oQ#tO'#I{OOQO1G5O1G5OO'+tQ#tO'#JQOOQO1G5S1G5SO'+yQ#tO,5?rOOQO-E>^-E>^O',OQ#tO'#JXOOQO1G5X1G5XO',TQ#tO'#J]OOQO1G5`1G5`O',YQ#tO'#JaOOQO1G5d1G5dO',_Q#tO'#JeOOQO1G5h1G5hOOQO1G5l1G5lO',dQ#tO,5<jOOQO1G5n1G5nO',iQ#tO1G5nO',nQ#tO1G5nO',vQ#tO1G5nO'-RQ#tO1G5nOOQO1G5q1G5qO',iQ#tO1G5qO'-^Q#tO1G5qO'-fQ#tO1G5qO'-qQ#tO1G5qOOQO1G5t1G5tO',iQ#tO1G5tO'-|Q#tO1G5tO'.UQ#tO1G5tO'.aQ#tO1G5tOOQO1G5w1G5wO',iQ#tO1G5wO'.lQ#tO1G5wO'.tQ#tO1G5wO'/PQ#tO1G5wOOQO1G5z1G5zO',iQ#tO1G5zO'/[Q#tO1G5zO'/dQ#tO1G5zO'/oQ#tO1G5zOOQO1G5}1G5}O',iQ#tO1G5}O'/zQ#tO1G5}O'0SQ#tO1G5}O'0_Q#tO1G5}OOQO1G6Q1G6QO',iQ#tO1G6QO'0jQ#tO1G6QO'0rQ#tO1G6QO'0}Q#tO1G6QOOQO1G6T1G6TO',iQ#tO1G6TO'1YQ#tO1G6TO'1bQ#tO1G6TO'1mQ#tO1G6TOOQO-E>f-E>fOOQO-E>e-E>eOOQO-E>d-E>dOOQO-E>c-E>cOOQO-E>b-E>bOOQO-E>a-E>aOOQO-E>`-E>`OOQO-E>_-E>_OOQ!b1G0i1G0iOOQO1G0y1G0yOOQO1G4v1G4vOOQO1G4{1G4{OOQO1G5Q1G5QOOQ`1G5U1G5UOOQO1G5Z1G5ZOOQO1G5b1G5bOOQO1G5f1G5fOOQO1G5j1G5jOOQ`-E>R-E>RO'1xQ#tO7+&dO'7_Q#tO7+&SO'<tQ#tO7+*aO'AtQ,UO7+*fO'FkQ,UO7+*kO'KbQ$UO7+*oO'KjQ#tO7+*tO(!pQ#tO7+*{O((VQ#tO7++PO(-lQ#tO7++TO!8lQ&jO'#EsOOQO,5;b,5;bO(3RQ#tO,5;[OOQO-E>Q-E>QOOQ`1G0s1G0sO(3WQ#tO,5?WOOQO-E>P-E>POOQ!Ld1G0l1G0lOOQO7+&]7+&]OOQO7+&i7+&iOF`Q#tO7+&iOOQO7+&j7+&jOF`Q#tO7+&jOOQO7+&k7+&kOF`Q#tO7+&kO(3]Q#tO,5;iOOQO-E>S-E>SOOQO1G1R1G1ROOQO7+&l7+&lO#KXQ#tO7+&lOOQO7+&p7+&pOOQO7+&v7+&vOOQO7+&x7+&xOF`Q#tO7+&xOOQO7+&y7+&yOF`Q#tO7+&yOOQO1G1a1G1aOOQO7+&z7+&zOOQO7+&|7+&|O(3bQ#tO7+&|OF`Q#tO7+&|O#D^Q#tO7+&|OOQO7+'Q7+'QOOQO1G1i1G1iOOQO7+'R7+'ROOQO7+'U7+'UOF`Q#tO7+'UOOQO7+'X7+'XO#KXQ#tO7+'XO(9aQ#tO7+'XO(9iQ#tO7+'XO(9tQ#tO7+'XOOQO7+'Z7+'ZO#KXQ#tO7+'ZO(:PQ#tO7+'ZO(:XQ#tO7+'ZO(:dQ#tO7+'ZOOQO,5<X,5<XO(:oQ#tO,5<YOOQO-E>T-E>TO&DnQ#tO7+']OOQO7+']7+']O(:tQ#tO7+']OOQO-E>U-E>UO(;VQ#tO,5<ZO(;^Q!NvO'#LQOOQO'#LQ'#LQOOQO'#Fs'#FsOOQO'#Fr'#FrO(;fQ#tO'#FxO(;mQ&jO'#F}OOQO'#KX'#KXO(;{Q#tO'#FqOOQO,5<Z,5<ZO(<SQ#tO,5<ZO(<XQ#tO,5<ZO(:tQ#tO7+']OOQO7+'q7+'qO(<aQ$fO7+'qO(<fQ$fO7+'qOOQO-E>X-E>XOOQO7+'s7+'sO#NsQ#tO7+'sO#NsQ#tO7+'sO(<nQ#tO7+'sOOQO7+'t7+'tO#NsQ#tO7+'tO#NsQ#tO7+'tO(<sQ#tO7+'tO#NsQ#tO7+'uO(<xQ#tO7+'uO&DnQ#tO7+'vOOQO7+'v7+'vO#NsQ#tO7+'vO#NsQ#tO7+'vO(<}Q#tO7+'vO(=SQ#tO'#GcOOQO7+(Q7+(QO(=ZQ#tO7+(QO(=`Q#tO7+(QO#KXQ#tO7+(QOOQO7+(V7+(VOOQO7+(W7+(WOF`Q#tO7+(WOOQO7+(d7+(dO#KXQ#tO7+(dOOQO7+(e7+(eOF`Q#tO7+(eOOQO7+(f7+(fOF`Q#tO7+(fOOQO1G3R1G3ROF`Q#tO1G3ROOQO1G3S1G3SOF`Q#tO1G3SO(=hQ#tO1G3SOOQO1G3T1G3TOF`Q#tO1G3TO(=pQ#tO1G3TOOQO1G3U1G3UOF`Q#tO1G3UO(=xQ#tO1G3UOOQO1G3V1G3VO#KXQ#tO1G3VO(>QQ#tO1G3VOOQO1G3W1G3WO#KXQ#tO1G3WOOQO1G3Y1G3YOOQO1G3[1G3[OOQO1G3^1G3^O#KXQ#tO1G3^OOQO1G3_1G3_O$FaQ#tO1G3_O(>YQ#tO1G3_OOQO1G3a1G3aO$FaQ#tO1G3aO(>bQ#tO1G3aOOQO1G3b1G3bO#KXQ#tO1G3bO(>jQ,UO1G3cOF`Q#tO1G3cO#D^Q#tO1G3cO#KXQ#tO1G3cOOQO1G3d1G3dOOQO1G3e1G3eOOQO1G3g1G3gO(CpQ#vO1G3gOOQO1G3h1G3hO3nQ#tO1G3hOOQO1G3j1G3jOF`Q#tO1G3jO#D^Q#tO1G3jOOQO1G3k1G3kOOQO1G3l1G3lO(CuQ#tO1G3lO(C}Q#tO1G3lO(DYQ#tO1G3lO(DYQ#tO1G3lOOQO1G3m1G3mO(DeQ#tO1G3mO(DmQ#tO1G3mO(DxQ#tO1G3mO(DxQ#tO1G3mO(ETQ#tO1G3nO(ETQ#tO1G3nOOQO1G3n1G3nO(EfQ#tO1G3nOOQO1G3o1G3oO(EwQ$fO1G3oO(FPQ'[O1G3oOOQO1G3p1G3pO#NsQ#tO1G3qOOQO1G3q1G3qO(F[Q#tO1G3qO#NsQ#tO1G3qO(FaQ#xO1G3qO#NsQ#tO1G3rOOQO1G3r1G3rO(FfQ#tO1G3rO#NsQ#tO1G3rO(FkQ#xO1G3rO(FpQ#tO1G3sO(FuQ#xO1G3sO#NsQ#tO1G3tO&DnQ#tO1G3tO(FzQ#tO1G3tO#NsQ#tO1G3tO(GPQ#xO1G3tOOQO1G3z1G3zOOQO'#Hy'#HyO(GUQ#tO1G3}O#KXQ#tO1G3}O(G^Q#tO1G3}OOQO1G4Q1G4QOF`Q#tO1G4QO(GfQ#tO1G4ROOQO1G4R1G4ROF`Q#tO1G4ROOQMh,5=t,5=tO(GnQ#tO,5=tOOQO1G4_1G4_O#KXQ#tO1G4_O(GsQ#tO1G4_OOQO1G4`1G4`OF`Q#tO1G4`O(G{Q#tO1G4`OOQO1G4a1G4aOF`Q#tO1G4aO(HTQ#tO1G4aOOQMh,5@y,5@yO$FaQ#tO,5@yOOQMh-E>]-E>]OOQO1G7Y1G7YOOQO1G4c1G4cOOQO1G4e1G4eOOQO,5>{,5>{O$GeQ7[O,5>{OOQO1G4d1G4dOOQO1G4k1G4kO(H]Q-hO1G0gO(HpQ&jO'#EcOOQ!b,5?X,5?XOOQO7+&R7+&RO(HuQ&jO'#IpOOQO,5?^,5?^O(HzQ&jO'#IuOOQO,5?c,5?cO(IPQ&jO'#IzOOQO,5?g,5?gO(IUQ&jO'#JOOOQO,5?l,5?lOOQO1G5^1G5^O(IZQ&jO'#JTOOQO,5?s,5?sO(I`Q&jO'#J[OOQO,5?w,5?wO(IeQ&jO'#J`OOQO,5?{,5?{O(IjQ&jO'#JdOOQO,5@P,5@POOQO1G2U1G2UOOQO7++Y7++YO',iQ#tO7++YO(IoQ#tO7++YO(IwQ#tO7++YOOQO7++]7++]O',iQ#tO7++]O(JSQ#tO7++]O(J[Q#tO7++]OOQO7++`7++`O',iQ#tO7++`O(JgQ#tO7++`O(JoQ#tO7++`OOQO7++c7++cO',iQ#tO7++cO(JzQ#tO7++cO(KSQ#tO7++cOOQO7++f7++fO',iQ#tO7++fO(K_Q#tO7++fO(KgQ#tO7++fOOQO7++i7++iO',iQ#tO7++iO(KrQ#tO7++iO(KzQ#tO7++iOOQO7++l7++lO',iQ#tO7++lO(LVQ#tO7++lO(L_Q#tO7++lOOQO7++o7++oO',iQ#tO7++oO(LjQ#tO7++oO(LrQ#tO7++oOOQO1G0v1G0vO(L}Q#tO1G2{OOQO1G4r1G4rOOQO<<JT<<JTOOQO<<JU<<JUOOQO<<JV<<JVOOQO1G1T1G1TOOQO<<JW<<JWOOQO<<Jd<<JdOOQO<<Je<<JeOOQO<<Jh<<JhO)#}Q#tO<<JhOF`Q#tO<<JhOOQO<<Jp<<JpOOQO<<Js<<JsO#KXQ#tO<<JsO))|Q#tO<<JsO)*UQ#tO<<JsOOQO<<Ju<<JuO#KXQ#tO<<JuO)*aQ#tO<<JuO)*iQ#tO<<JuOOQO1G1t1G1tOOQO<<Jw<<JwO&DnQ#tO<<JwOOQO1G1u1G1uO)*tQ#tO1G1uO)*yQ#tO'#KYO)+UQ!NvO,5AlOOQO,5Al,5AlOOQO,5<d,5<dO)+^Q#tO,5<dOOQO,5<i,5<iO)+cQ#tO,5<iO)+kQ#tO,5<iO)+vQ&jO,5<iOOQO-E>V-E>VO),UQ#tO1G1uO),]Q#tO<<JwOOQO<<K]<<K]O),nQ$fO<<K]O#NsQ#tO<<K_OOQO<<K_<<K_O#NsQ#tO<<K_O#NsQ#tO<<K`OOQO<<K`<<K`O#NsQ#tO<<K`O#NsQ#tO<<KaO&DnQ#tO<<KaO#NsQ#tO<<KaOOQO<<Kb<<KbO#NsQ#tO<<KbO&DnQ#tO<<KbO#NsQ#tO<<KbO),sQ#tO,5<}OOQO<<Kl<<KlO(=ZQ#tO<<KlO),xQ#tO<<KlOOQO<<Kr<<KrOOQO<<LO<<LOOOQO<<LP<<LPOOQO<<LQ<<LQOOQO7+(m7+(mOOQO7+(n7+(nOF`Q#tO7+(nOOQO7+(o7+(oOF`Q#tO7+(oOOQO7+(p7+(pOF`Q#tO7+(pOOQO7+(q7+(qO#KXQ#tO7+(qOOQO7+(r7+(rOOQO7+(x7+(xOOQO7+(y7+(yO$FaQ#tO7+(yOOQO7+({7+({O$FaQ#tO7+({OOQO7+(|7+(|OOQO7+(}7+(}O)-QQ,UO7+(}OF`Q#tO7+(}O#D^Q#tO7+(}OOQO7+)R7+)ROOQO7+)S7+)SOOQO7+)U7+)UOF`Q#tO7+)UOOQO7+)W7+)WO#KXQ#tO7+)WO)2WQ#tO7+)WO)2`Q#tO7+)WO)2kQ#tO7+)WOOQO7+)X7+)XO#KXQ#tO7+)XO)2vQ#tO7+)XO)3OQ#tO7+)XO)3ZQ#tO7+)XO&DnQ#tO7+)YOOQO7+)Y7+)YO)3fQ#tO7+)YO)3fQ#tO7+)YOOQO7+)Z7+)ZO)3wQ$fO7+)ZO)3|Q$fO7+)ZOOQO7+)]7+)]O#NsQ#tO7+)]O#NsQ#tO7+)]O)4UQ#tO7+)]OOQO7+)^7+)^O#NsQ#tO7+)^O#NsQ#tO7+)^O)4ZQ#tO7+)^O#NsQ#tO7+)_O)4`Q#tO7+)_O&DnQ#tO7+)`OOQO7+)`7+)`O#NsQ#tO7+)`O#NsQ#tO7+)`O)4eQ#tO7+)`OOQO7+)i7+)iO(=ZQ#tO7+)iO)4jQ#tO7+)iO#KXQ#tO7+)iOOQO7+)l7+)lOOQO7+)m7+)mOF`Q#tO7+)mOOQMh1G3`1G3`OOQO7+)y7+)yO#KXQ#tO7+)yOOQO7+)z7+)zOF`Q#tO7+)zOOQO7+){7+){OF`Q#tO7+){OOQMh1G6e1G6eOOQO1G4g1G4gOOQO<<Nt<<NtO',iQ#tO<<NtO)4rQ#tO<<NtOOQO<<Nw<<NwO',iQ#tO<<NwO)4zQ#tO<<NwOOQO<<Nz<<NzO',iQ#tO<<NzO)5SQ#tO<<NzOOQO<<N}<<N}O',iQ#tO<<N}O)5[Q#tO<<N}OOQO<= Q<= QO',iQ#tO<= QO)5dQ#tO<= QOOQO<= T<= TO',iQ#tO<= TO)5lQ#tO<= TOOQO<= W<= WO',iQ#tO<= WO)5tQ#tO<= WOOQO<= Z<= ZO',iQ#tO<= ZO)5|Q#tO<= ZOOQOAN@SAN@SOOQOAN@_AN@_O#KXQ#tOAN@_O)6UQ#tOAN@_OOQOAN@aAN@aO#KXQ#tOAN@aO)6^Q#tOAN@aOOQOAN@cAN@cOOQO7+'a7+'aO)6fQ#tO'#FuOOQ!LQ,5@t,5@tO)6mQ#tO,5@tOOQ!LQ-E>W-E>WOOQO1G7W1G7WOOQO1G2O1G2OOOQO1G2T1G2TO',iQ#tO1G2TO)6uQ#tO1G2TO)6}Q#tO1G2TO)7YQ#tO1G2TO)7eQ#tO7+'aO&DnQ#tOAN@cOOQOAN@wAN@wOOQOAN@yAN@yO#NsQ#tOAN@yOOQOAN@zAN@zO#NsQ#tOAN@zO&DnQ#tOAN@{OOQOAN@{AN@{O#NsQ#tOAN@{O&DnQ#tOAN@|OOQOAN@|AN@|O#NsQ#tOAN@|OOQO1G2i1G2iOOQOANAWANAWO(=ZQ#tOANAWOOQO<<LY<<LYOOQO<<LZ<<LZOOQO<<L[<<L[OOQO<<L]<<L]OOQO<<Le<<LeOOQO<<Lg<<LgOOQO<<Li<<LiO)7jQ,UO<<LiOF`Q#tO<<LiOOQO<<Lp<<LpOOQO<<Lr<<LrO#KXQ#tO<<LrO)<pQ#tO<<LrO)<xQ#tO<<LrOOQO<<Ls<<LsO#KXQ#tO<<LsO)=TQ#tO<<LsO)=]Q#tO<<LsOOQO<<Lt<<LtO&DnQ#tO<<LtO)=hQ#tO<<LtOOQO<<Lu<<LuO)=yQ$fO<<LuO#NsQ#tO<<LwOOQO<<Lw<<LwO#NsQ#tO<<LwO#NsQ#tO<<LxOOQO<<Lx<<LxO#NsQ#tO<<LxO#NsQ#tO<<LyO&DnQ#tO<<LyO#NsQ#tO<<LyOOQO<<Lz<<LzO#NsQ#tO<<LzO&DnQ#tO<<LzO#NsQ#tO<<LzOOQO<<MT<<MTO(=ZQ#tO<<MTO)>OQ#tO<<MTOOQO<<MX<<MXOOQO<<Me<<MeOOQO<<Mf<<MfOOQO<<Mg<<MgOOQOAND`AND`O',iQ#tOAND`OOQOANDcANDcO',iQ#tOANDcOOQOANDfANDfO',iQ#tOANDfOOQOANDiANDiO',iQ#tOANDiOOQOANDlANDlO',iQ#tOANDlOOQOANDoANDoO',iQ#tOANDoOOQOANDrANDrO',iQ#tOANDrOOQOANDuANDuO',iQ#tOANDuOOQOG25yG25yO#KXQ#tOG25yOOQOG25{G25{O#KXQ#tOG25{OOQ!LQ,5<a,5<aO)>WQ#tO,5<aOOQ!LQ1G6`1G6`OOQO7+'o7+'oO',iQ#tO7+'oO)>]Q#tO7+'oO)>eQ#tO7+'oOOQO<<J{<<J{OOQOG25}G25}OOQOG26eG26eOOQOG26fG26fOOQOG26gG26gO&DnQ#tOG26gOOQOG26hG26hO&DnQ#tOG26hOOQOG26rG26rOOQOANBTANBTOOQOANB^ANB^O#KXQ#tOANB^O)>pQ#tOANB^OOQOANB_ANB_O#KXQ#tOANB_O)>xQ#tOANB_OOQOANB`ANB`O&DnQ#tOANB`OOQOANBaANBaOOQOANBcANBcO#NsQ#tOANBcOOQOANBdANBdO#NsQ#tOANBdO&DnQ#tOANBeOOQOANBeANBeO#NsQ#tOANBeO&DnQ#tOANBfOOQOANBfANBfO#NsQ#tOANBfOOQOANBoANBoO(=ZQ#tOANBoOOQOG29zG29zOOQOG29}G29}OOQOG2:QG2:QOOQOG2:TG2:TOOQOG2:WG2:WOOQOG2:ZG2:ZOOQOG2:^G2:^OOQOG2:aG2:aOOQOLD+eLD+eOOQOLD+gLD+gOOQ!LQ1G1{1G1{OOQO<<KZ<<KZO',iQ#tO<<KZO)?QQ#tO<<KZOOQOLD,RLD,ROOQOLD,SLD,SOOQOG27xG27xO#KXQ#tOG27xOOQOG27yG27yO#KXQ#tOG27yOOQOG27zG27zOOQOG27}G27}OOQOG28OG28OOOQOG28PG28PO&DnQ#tOG28POOQOG28QG28QO&DnQ#tOG28QOOQOG28ZG28ZOOQOAN@uAN@uO',iQ#tOAN@uOOQOLD-dLD-dOOQOLD-eLD-eOOQOLD-kLD-kOOQOLD-lLD-lOOQOG26aG26aO)?YQ#tO,5=aO$JzQ#tO,5:{O)DYQ#tO'#GuOVQ#tO'#Ea",stateData:")Dl~O#OOS~OXQOZhO[iO]jO^kO_gO`|OapObSOcXOd[Oe_OfbOgcOhdOieOjfOknOloOm!aOn!aOoqOprOqsOrtOs!wOt!xOu!yOv!zOw!{Ox!|Oy!}Oz#OO{uO|vO}xO!O`O!PaO!QwO!RYO!SZO!TTO!UUO!VVO!WWO!XyO!Y]O!Z^O![zO!]zO!^zO!_zO!`{O!a}O!b!OO!c!PO!d!QO!e!RO!f!SO!g!TO!h!UO!i!VO!j!WO!k!XO!l!YO!m!ZO!n![O!o!]O!y!eO!{!cO!}lO#R!rO#W!sO#ZPO#`!gO#cPO$`!`O$d!gO$h!_O$m!bO$n!gO$o!gO$p!gO~O#W#[O~O#W#iO#Z#lO#`#mO~O#W#iO#Z#lO#`#pO~O#W#iO#Z#lO#`#sO~O#W#iO#Z#lO#`#vO~O#W#wO#Z#lO#`#zO~O#W#wO#Z#lO#`$OO~O#W#wO#`$RO~O#W#wO#`$UO~O#W#wO#Z#lO#`$YO~O#W#wO#`$[O~O#W#wO#`$^O~O#W$_O#`$aO~O#W#wO#`$dO)j$cO~O#W#wO#`$fO~O#W$_O#`$hO~OP$iO~OQ$jO#Z#lO#`$lO~O#W$mO#Z#lO#`$qO~O#W#iO#Z#lO#`$uO)j$tO~O#W#wO#`$xO~O#W#wO#Z#lO#`$|O~O#W#wO#Z#lO#`$|O)j$}O~O#W#wO#Z#lO#`%RO~O#W#wO#Z#lO#`%RO)j%SO~O#Z#lOX$kXZ$kX[$kX]$kX^$kX_$kX`$kXa$kXb$kXc$kXd$kXe$kXf$kXg$kXh$kXi$kXj$kXk$kXl$kXm$kXn$kXo$kXp$kXq$kXr$kX{$kX|$kX}$kX!O$kX!P$kX!Q$kX!R$kX!S$kX!T$kX!U$kX!V$kX!W$kX!X$kX!Y$kX!Z$kX![$kX!]$kX!^$kX!_$kX!`$kX!a$kX!b$kX!c$kX!d$kX!e$kX!f$kX!g$kX!h$kX!i$kX!j$kX!k$kX!l$kX!m$kX!n$kX!o$kX!}$kX#W$kX#`$kX#c$kX$`$kX$d$kX$h$kX$m$kX$o$kX$p$kXY$kX#X$kX!z$kX!|$kX~Os$kXt$kXu$kXv$kXw$kXx$kXy$kXz$kX!y$kX!{$kX#R$kX$n$kX)]$kX)g$kX)h$kX)i$kX~P,OOU%UO#`%VO$`%UO~OU%WO~O#W#iO#`%YO~OU%ZO#W%[O#`%]O~OU%^O#W%_O#`%`O~O#W%aO#`%bO~OU%cO#W%dO#`%eO~O#W$mO#`%fO~O#W$mO~O#Z#lO#`%lOX%PXZ%PX[%PX]%PX^%PX_%PX`%PXa%PXb%PXc%PXd%PXe%PXf%PXg%PXh%PXi%PXj%PXk%PXl%PXm%PXn%PXo%PXp%PXq%PXr%PXs%PXt%PXu%PXv%PXw%PXx%PXy%PXz%PX{%PX|%PX}%PX!O%PX!P%PX!Q%PX!R%PX!S%PX!T%PX!U%PX!V%PX!W%PX!X%PX!Y%PX!Z%PX![%PX!]%PX!^%PX!_%PX!`%PX!a%PX!b%PX!c%PX!d%PX!e%PX!f%PX!g%PX!h%PX!i%PX!j%PX!k%PX!l%PX!m%PX!n%PX!o%PX!y%PX!{%PX!}%PX#R%PX#W%PX#c%PX$`%PX$d%PX$h%PX$m%PX$n%PX$o%PX$p%PX)]%PXY%PX)g%PX)h%PX)i%PX#X%PX!z%PX!|%PX~O#`%mOX%QXZ%QX[%QX]%QX^%QX_%QX`%QXa%QXb%QXc%QXd%QXe%QXf%QXg%QXh%QXi%QXj%QXk%QXl%QXm%QXn%QXo%QXp%QXq%QXr%QXs%QXt%QXu%QXv%QXw%QXx%QXy%QXz%QX{%QX|%QX}%QX!O%QX!P%QX!Q%QX!R%QX!S%QX!T%QX!U%QX!V%QX!W%QX!X%QX!Y%QX!Z%QX![%QX!]%QX!^%QX!_%QX!`%QX!a%QX!b%QX!c%QX!d%QX!e%QX!f%QX!g%QX!h%QX!i%QX!j%QX!k%QX!l%QX!m%QX!n%QX!o%QX!y%QX!{%QX!}%QX#R%QX#W%QX#Z%QX#c%QX$`%QX$d%QX$h%QX$m%QX$n%QX$o%QX$p%QX)]%QXY%QX)g%QX)h%QX)i%QX#X%QX!z%QX!|%QX~O#`%nOX%RXZ%RX[%RX]%RX^%RX_%RX`%RXa%RXb%RXc%RXd%RXe%RXf%RXg%RXh%RXi%RXj%RXk%RXl%RXm%RXn%RXo%RXp%RXq%RXr%RXs%RXt%RXu%RXv%RXw%RXx%RXy%RXz%RX{%RX|%RX}%RX!O%RX!P%RX!Q%RX!R%RX!S%RX!T%RX!U%RX!V%RX!W%RX!X%RX!Y%RX!Z%RX![%RX!]%RX!^%RX!_%RX!`%RX!a%RX!b%RX!c%RX!d%RX!e%RX!f%RX!g%RX!h%RX!i%RX!j%RX!k%RX!l%RX!m%RX!n%RX!o%RX!y%RX!{%RX!}%RX#R%RX#W%RX#Z%RX#c%RX$`%RX$d%RX$h%RX$m%RX$n%RX$o%RX$p%RX)]%RXY%RX)g%RX)h%RX)i%RX#X%RX!z%RX!|%RX~O#W#wO#`%qO~O#W#iO#`%tO)j%sO~O#W#wO#Z#lO#`%xO~O#W#iO~O#W#wO#`&VO~O#W#iO#Z#lO#`&YO~O#W#iO#Z#lO#`&]O~O#W#iO#Z#lOZ%iX[%iX]%iX^%iX_%iX`%iXa%iXb%iXc%iXd%iXe%iXf%iXg%iXh%iXi%iXj%iXk%iXl%iXm%iXn%iXo%iXp%iXq%iXr%iX{%iX|%iX}%iX!O%iX!P%iX!Q%iX!R%iX!S%iX!T%iX!U%iX!V%iX!W%iX!X%iX!Y%iX!Z%iX![%iX!]%iX!^%iX!_%iX!`%iX!a%iX!b%iX!c%iX!d%iX!e%iX!f%iX!g%iX!h%iX!i%iX!j%iX!k%iX!l%iX!m%iX!n%iX!o%iX!y%iX!{%iX!}%iX#c%iX$`%iX$d%iX$h%iX$m%iX$n%iX$o%iX$p%iX)g%iX)h%iX#X%iX~O#`&`OX%iXs%iXt%iXu%iXv%iXw%iXx%iXy%iXz%iX#R%iX)]%iXY%iX)i%iX~PGTOXQOZ&vO[&wO]&xO^&yO_&uO`'YOa&|Ob&bOc&gOd&jOe&mOf&pOg&qOh&rOi&sOj&tOk&zOl&{Om'pOo&}Op'OOq'POr'QO{'RO|'SO}'UO!O&nO!P&oO!Q'TO!R&hO!S&iO!T&cO!U&dO!V&eO!W&fO!X'VO!Y&kO!Z&lO!['WO!]'WO!^'WO!_'WO!`'XO!a'ZO!b'[O!c']O!d'^O!e'_O!f'`O!g'aO!h'bO!i'cO!j'dO!k'eO!l'fO!m'gO!n'hO!o'iO!}&aO#W'oO#Z'rO#`'rO#c'rO$`'lO$d'rO$h'kO$o'rO$p'rO'U'rO'V'rO'W'rO~O$m'uO~PMQO!|'wO~PMQO!z'zO~PMQOXQOZhO[iO]jO^kO_gO`|OapObSOcXOd[Oe_OfbOgcOhdOieOjfOknOloOm!aOn!aOoqOprOqsOrtO{uO|vO}xO!O`O!PaO!QwO!RYO!SZO!TTO!UUO!VVO!WWO!XyO!Y]O!Z^O![zO!]zO!^zO!_zO!`{O!a}O!b!OO!c!PO!d!QO!e!RO!f!SO!g!TO!h!UO!i!VO!j!WO!k!XO!l!YO!m!ZO!n![O!o!]O!y!eO!{!cO!}lO#R!rO#W!sO#ZPO#`!gO#cPO$`!`O$d!gO$h!_O$m!bO$n!gO$o!gO$p!gO~OY%WP~P!$ZOY'jP~PMQOT(UO~OXQOZhO[iO]jO^kO_gO`|OapObSOcXOd[Oe_OfbOgcOhdOieOjfOknOloOm!aOn!aOoqOprOqsOrtO{uO|vO}xO!O`O!PaO!QwO!RYO!SZO!TTO!UUO!VVO!WWO!XyO!Y]O!Z^O![zO!]zO!^zO!_zO!`{O!a}O!b!OO!c!PO!d!QO!e!RO!f!SO!g!TO!h!UO!i!VO!j!WO!k!XO!l!YO!m!ZO!n![O!o!]O!y!eO!{!cO!}lO#R!rO#W(WO#ZPO#`!gO#cPO$`!`O$d!gO$h!_O$m!bO$n!gO$o!gO$p!gO)g(XO)h(XO)i(XO~O#X(`O~PVO#W(cO#Z#lO#`(gO)j(fO~O#W(cO#Z#lO#`(kO)j(jO~O#W(cO#Z#lO#`(oO)j(nO~O#W(cO#Z#lO#`(sO)j(rO~O#W(cO#Z#lO#`(wO)j(vO~O#W(cO#Z#lO#`({O)j(zO~O#W(cO#Z#lO#`)PO)j)OO~O#W(cO#Z#lO#`)TO)j)SO~Os(rPt(rPu(rPv(rPw(rPx(rPy(rPz(rP)](rPY(rP#X(rP~P!$ZO)]#QXY#QX#X#QX~PVOz#OOs(oPt(oPu(oPv(oPw(oPx(oPy(oP)](oPY(oP#X(oP~P!$ZOy!}Oz#OOs(lPt(lPu(lPv(lPw(lPx(lP)](lPY(lP#X(lP~P!$ZOx!|Oy!}Oz#OOs(iPt(iPu(iPv(iPw(iP)](iPY(iP#X(iP~P!$ZOw!{Ox!|Oy!}Oz#OOs(fPt(fPu(fPv(fP)](fPY(fP#X(fP~P!$ZOv!zOw!{Ox!|Oy!}Oz#OOs(cPt(cPu(cP)](cPY(cP#X(cP~P!$ZOu!yOv!zOw!{Ox!|Oy!}Oz#OOs(`Pt(`P)](`PY(`P#X(`P~P!$ZOt!xOu!yOv!zOw!{Ox!|Oy!}Oz#OOs(]P)](]PY(]P#X(]P~P!$ZO!p)oO!q)rO!r)sO!s)tO!t)uO!u)vO!v)wO!w)xO!x)yO#X)pO#h)qO~O#W#iO#Z#lOX#faZ#fa[#fa]#fa^#fa_#fa`#faa#fab#fac#fad#fae#faf#fag#fah#fai#faj#fak#fal#fam#fan#fao#fap#faq#far#fas#fat#fau#fav#faw#fax#fay#faz#fa{#fa|#fa}#fa!O#fa!P#fa!Q#fa!R#fa!S#fa!T#fa!U#fa!V#fa!W#fa!X#fa!Y#fa!Z#fa![#fa!]#fa!^#fa!_#fa!`#fa!a#fa!b#fa!c#fa!d#fa!e#fa!f#fa!g#fa!h#fa!i#fa!j#fa!k#fa!l#fa!m#fa!n#fa!o#fa!y#fa!{#fa!}#fa#R#fa#`#fa#c#fa$`#fa$d#fa$h#fa$m#fa$n#fa$o#fa$p#fa~O#W#iO#Z#lOX#UaZ#Ua[#Ua]#Ua^#Ua_#Ua`#Uaa#Uab#Uac#Uad#Uae#Uaf#Uag#Uah#Uai#Uaj#Uak#Ual#Uam#Uan#Uao#Uap#Uaq#Uar#Uas#Uat#Uau#Uav#Uaw#Uax#Uay#Uaz#Ua{#Ua|#Ua}#Ua!O#Ua!P#Ua!Q#Ua!R#Ua!S#Ua!T#Ua!U#Ua!V#Ua!W#Ua!X#Ua!Y#Ua!Z#Ua![#Ua!]#Ua!^#Ua!_#Ua!`#Ua!a#Ua!b#Ua!c#Ua!d#Ua!e#Ua!f#Ua!g#Ua!h#Ua!i#Ua!j#Ua!k#Ua!l#Ua!m#Ua!n#Ua!o#Ua!y#Ua!{#Ua!}#Ua#R#Ua#`#Ua#c#Ua$`#Ua$d#Ua$h#Ua$m#Ua$n#Ua$o#Ua$p#Ua~O#W#iO#Z#lOX'caY'caZ'ca['ca]'ca^'ca_'ca`'caa'cab'cac'cad'cae'caf'cag'cah'cai'caj'cak'cal'cam'can'cao'cap'caq'car'ca{'ca|'ca}'ca!O'ca!P'ca!Q'ca!R'ca!S'ca!T'ca!U'ca!V'ca!W'ca!X'ca!Y'ca!Z'ca!['ca!]'ca!^'ca!_'ca!`'ca!a'ca!b'ca!c'ca!d'ca!e'ca!f'ca!g'ca!h'ca!i'ca!j'ca!k'ca!l'ca!m'ca!n'ca!o'ca!y'ca!{'ca!}'ca#R'ca#`'ca#c'ca$`'ca$d'ca$h'ca$m'ca$n'ca$o'ca$p'ca~O#W#iO#Z#lOX'haY'haZ'ha['ha]'ha^'ha_'ha`'haa'hab'hac'had'hae'haf'hag'hah'hai'haj'hak'hal'ham'hao'hap'haq'har'ha{'ha|'ha}'ha!O'ha!P'ha!Q'ha!R'ha!S'ha!T'ha!U'ha!V'ha!W'ha!X'ha!Y'ha!Z'ha!['ha!]'ha!^'ha!_'ha!`'ha!a'ha!b'ha!c'ha!d'ha!e'ha!f'ha!g'ha!h'ha!i'ha!j'ha!k'ha!l'ha!m'ha!n'ha!o'ha!}'ha#`'ha#c'ha$`'ha$d'ha$h'ha$o'ha$p'ha'U'ha'V'ha'W'ha~O#W#iO#Z#lOX'maY'maZ'ma['ma]'ma^'ma_'ma`'maa'mab'mac'mad'mae'maf'mag'mah'mai'maj'mak'mal'mam'mao'map'maq'mar'ma{'ma|'ma}'ma!O'ma!P'ma!Q'ma!R'ma!S'ma!T'ma!U'ma!V'ma!W'ma!X'ma!Y'ma!Z'ma!['ma!]'ma!^'ma!_'ma!`'ma!a'ma!b'ma!c'ma!d'ma!e'ma!f'ma!g'ma!h'ma!i'ma!j'ma!k'ma!l'ma!m'ma!n'ma!o'ma!}'ma#`'ma#c'ma$`'ma$d'ma$h'ma$o'ma$p'ma'U'ma'V'ma'W'ma~O#W#iO#Z#lOT'qa~O#W#iO#Z#lOX'vaZ'va['va]'va^'va_'va`'vaa'vab'vac'vad'vae'vaf'vag'vah'vai'vaj'vak'val'vam'van'vao'vap'vaq'var'va{'va|'va}'va!O'va!P'va!Q'va!R'va!S'va!T'va!U'va!V'va!W'va!X'va!Y'va!Z'va!['va!]'va!^'va!_'va!`'va!a'va!b'va!c'va!d'va!e'va!f'va!g'va!h'va!i'va!j'va!k'va!l'va!m'va!n'va!o'va!y'va!{'va!}'va#R'va#`'va#c'va$`'va$d'va$h'va$m'va$n'va$o'va$p'va)g'va)h'va)i'va~O#W#iO#Z#lOX'}aZ'}a['}a]'}a^'}a_'}a`'}aa'}ab'}ac'}ad'}ae'}af'}ag'}ah'}ai'}aj'}ak'}al'}am'}an'}ao'}ap'}aq'}ar'}as'}at'}au'}av'}aw'}ax'}ay'}az'}a{'}a|'}a}'}a!O'}a!P'}a!Q'}a!R'}a!S'}a!T'}a!U'}a!V'}a!W'}a!X'}a!Y'}a!Z'}a!['}a!]'}a!^'}a!_'}a!`'}a!a'}a!b'}a!c'}a!d'}a!e'}a!f'}a!g'}a!h'}a!i'}a!j'}a!k'}a!l'}a!m'}a!n'}a!o'}a!y'}a!{'}a!}'}a#R'}a#`'}a#c'}a$`'}a$d'}a$h'}a$m'}a$n'}a$o'}a$p'}a~O#W#iO#Z#lOX(RaZ(Ra[(Ra](Ra^(Ra_(Ra`(Raa(Rab(Rac(Rad(Rae(Raf(Rag(Rah(Rai(Raj(Rak(Ral(Ram(Ran(Rao(Rap(Raq(Rar(Ras(Rat(Rau(Rav(Raw(Rax(Ray(Raz(Ra{(Ra|(Ra}(Ra!O(Ra!P(Ra!Q(Ra!R(Ra!S(Ra!T(Ra!U(Ra!V(Ra!W(Ra!X(Ra!Y(Ra!Z(Ra![(Ra!](Ra!^(Ra!_(Ra!`(Ra!a(Ra!b(Ra!c(Ra!d(Ra!e(Ra!f(Ra!g(Ra!h(Ra!i(Ra!j(Ra!k(Ra!l(Ra!m(Ra!n(Ra!o(Ra!y(Ra!{(Ra!}(Ra#R(Ra#`(Ra#c(Ra$`(Ra$d(Ra$h(Ra$m(Ra$n(Ra$o(Ra$p(Ra~O#W#iO#Z#lOX(VaZ(Va[(Va](Va^(Va_(Va`(Vaa(Vab(Vac(Vad(Vae(Vaf(Vag(Vah(Vai(Vaj(Vak(Val(Vam(Van(Vao(Vap(Vaq(Var(Vas(Vat(Vau(Vav(Vaw(Vax(Vay(Vaz(Va{(Va|(Va}(Va!O(Va!P(Va!Q(Va!R(Va!S(Va!T(Va!U(Va!V(Va!W(Va!X(Va!Y(Va!Z(Va![(Va!](Va!^(Va!_(Va!`(Va!a(Va!b(Va!c(Va!d(Va!e(Va!f(Va!g(Va!h(Va!i(Va!j(Va!k(Va!l(Va!m(Va!n(Va!o(Va!y(Va!{(Va!}(Va#R(Va#`(Va#c(Va$`(Va$d(Va$h(Va$m(Va$n(Va$o(Va$p(Va~OY*aO~OXQOZhO[iO]jO^kO_gO`|OapObSOcXOd[Oe_OfbOgcOhdOieOjfOknOloOm!aOn!aOoqOprOqsOrtO{uO|vO}xO!O`O!PaO!QwO!RYO!SZO!TTO!UUO!VVO!WWO!XyO!Y]O!Z^O![zO!]zO!^zO!_zO!`{O!a}O!b!OO!c!PO!d!QO!e!RO!f!SO!g!TO!h!UO!i!VO!j!WO!k!XO!l!YO!m!ZO!n![O!o!]O!y!eO!{!cO!}lO#R*dO#W*cO#ZPO#`!gO#cPO$`!`O$d!gO$h!_O$m!bO$n!gO$o!gO$p!gO)g*dO)h*dO)i*dO#X#bP~OZhO[iO]jO^kO_gO`|OapObSOcXOd[Oe_OfbOgcOhdOieOjfOknOloOm!aOn!aOoqOprOqsOrtO{uO|vO}xO!O`O!PaO!QwO!RYO!SZO!TTO!UUO!VVO!WWO!XyO!Y]O!Z^O![zO!]zO!^zO!_zO!`{O!a}O!b!OO!c!PO!d!QO!e!RO!f!SO!g!TO!h!UO!i!VO!j!WO!k!XO!l!YO!m!ZO!n![O!o!]O!y!eO!{!cO!}lO#W*hO#`!gO$`!`O$d!gO$h>wO$m!bO$n!gO$o!gO$p!gO)g*iO)h*iO~O#c#[P~P#?`O#W#iO#Z#lO~O#W#iO#`*nO~O#W#iO#Z#lO#`*nO~O#W#iO#`*qO~O#W#iO#Z#lO#`*qO~O#W#iO#`*tO~O#W#iO#Z#lO#`*tO~OZhO[iO]jO^kO_gO`|OapObSOcXOd[Oe_OfbOgcOhdOieOjfOknOloOm!aOn!aOoqOprOqsOrtO{uO|vO}xO!O`O!PaO!QwO!RYO!SZO!TTO!UUO!VVO!WWO!XyO!Y]O!Z^O![zO!]zO!^zO!_zO!`{O!a}O!b!OO!c!PO!d!QO!e!RO!f!SO!g!TO!h!UO!i!VO!j!WO!k!XO!l!YO!m!ZO!n![O!o!]O!y!eO!{!cO!}lO#W*vO#ZPO#`!gO#cPO$`!`O$d!gO$h!_O$m!bO$n!gO$o!gO$p!gO)g*wO)h*wO)i*wO#X#pP~O#W#wO#`*{O~O#W#wO#Z#lO#`*{O~O#W#wO~O#W#wO#Z#lO~O#W#iO#`+UO~O#W#iO#`+XO~OR+ZO~O#W$_O~O#W#wO#`+aO~OQ+dO~OQ+dO#Z#lO~OR+fO~O#W$mO#Z#lO~O#W#iO#Z#lO#`+kO~O#W#wO#Z#lO#`+oO~O#W#wO#Z#lO#`+qO~O#W#wO#Z#lO#`+tO~O#W#wO#Z#lO#`+vO~O#W+}O#Z+xO#`+{O$d,OO)g+wO~OU,QO$`,QO~OU,RO#`,TO)u,SO~O#W+}O#Z#lO#`,VO$d,OO~OR,ZO~OU,[O#W,]O~OR,`O~OU,aO#W,bO~OR,cO~O#W,dO~OR,gO~OU,hO#W,iO~OS,jO~O#`,kOX%PaZ%Pa[%Pa]%Pa^%Pa_%Pa`%Paa%Pab%Pac%Pad%Pae%Paf%Pag%Pah%Pai%Paj%Pak%Pal%Pam%Pan%Pao%Pap%Paq%Par%Pas%Pat%Pau%Pav%Paw%Pax%Pay%Paz%Pa{%Pa|%Pa}%Pa!O%Pa!P%Pa!Q%Pa!R%Pa!S%Pa!T%Pa!U%Pa!V%Pa!W%Pa!X%Pa!Y%Pa!Z%Pa![%Pa!]%Pa!^%Pa!_%Pa!`%Pa!a%Pa!b%Pa!c%Pa!d%Pa!e%Pa!f%Pa!g%Pa!h%Pa!i%Pa!j%Pa!k%Pa!l%Pa!m%Pa!n%Pa!o%Pa!y%Pa!{%Pa!}%Pa#R%Pa#W%Pa#Z%Pa#c%Pa$`%Pa$d%Pa$h%Pa$m%Pa$n%Pa$o%Pa$p%Pa)]%PaY%Pa)g%Pa)h%Pa)i%Pa#X%Pa!z%Pa!|%Pa~O#W#wO#`,nO~O#W#iO)j,qO~O#W#iO#`,uO~O#W#wO#`,xO~O#W#iO#`,{O~O#W#iO#Z#lO#`,{O~O#W#iO#`-OO~O#W#iO#Z#lO#`-OO~O#W#iO#Z#lOX%iaZ%ia[%ia]%ia^%ia_%ia`%iaa%iab%iac%iad%iae%iaf%iag%iah%iai%iaj%iak%ial%iam%ian%iao%iap%iaq%iar%ias%iat%iau%iav%iaw%iax%iay%iaz%ia{%ia|%ia}%ia!O%ia!P%ia!Q%ia!R%ia!S%ia!T%ia!U%ia!V%ia!W%ia!X%ia!Y%ia!Z%ia![%ia!]%ia!^%ia!_%ia!`%ia!a%ia!b%ia!c%ia!d%ia!e%ia!f%ia!g%ia!h%ia!i%ia!j%ia!k%ia!l%ia!m%ia!n%ia!o%ia!y%ia!{%ia!}%ia#R%ia#`%ia#c%ia$`%ia$d%ia$h%ia$m%ia$n%ia$o%ia$p%ia)]%iaY%ia)g%ia)h%ia)i%ia#X%ia~O'U$kX'V$kX'W$kX~P,OO#W#iO#Z#lO#`-UO~O#W#iO#Z#lO#`-XO~O#W#iO#Z#lO#`-[O~O#W#iO#Z#lO#`-_O~O#W#wO#Z#lO#`-bO~O#W#wO#Z#lO#`-fO~O#W#wO#`-iO~O#W#wO#`-lO~O#W#wO#Z#lO#`-oO~O#W#wO#`-qO~O#W#wO#`-sO~O#W$_O#`-uO~O#W#wO#`-xO)j-wO~O#W#wO#`-zO~O#W$_O#`-|O~OP-}O~OQ.OO#Z#lO#`.QO~O#W$mO#Z#lO#`.UO~O#W#iO#Z#lO#`.YO)j.XO~O#W#wO#`.[O~O#W#wO#Z#lO#`._O~O#W#wO#Z#lO#`._O)j.`O~O#W#wO#Z#lO#`.cO~O#W#wO#Z#lO#`.cO)j.dO~OU.eO#`.fO$`.eO~OU.gO~O#W#iO#`.iO~OU.jO#W.kO#`.lO~OU.mO#W.nO#`.oO~O#W.pO#`.qO~OU.rO#W.sO#`.tO~O#Z#lO#`.zOX&hXZ&hX[&hX]&hX^&hX_&hX`&hXa&hXb&hXc&hXd&hXe&hXf&hXg&hXh&hXi&hXj&hXk&hXl&hXm&hXo&hXp&hXq&hXr&hX{&hX|&hX}&hX!O&hX!P&hX!Q&hX!R&hX!S&hX!T&hX!U&hX!V&hX!W&hX!X&hX!Y&hX!Z&hX![&hX!]&hX!^&hX!_&hX!`&hX!a&hX!b&hX!c&hX!d&hX!e&hX!f&hX!g&hX!h&hX!i&hX!j&hX!k&hX!l&hX!m&hX!n&hX!o&hX!}&hX#W&hX#c&hX$`&hX$d&hX$h&hX$m&hX$o&hX$p&hX'U&hX'V&hX'W&hX!|&hX!z&hXY&hX#X&hXn&hX~O#`.{OX&iXZ&iX[&iX]&iX^&iX_&iX`&iXa&iXb&iXc&iXd&iXe&iXf&iXg&iXh&iXi&iXj&iXk&iXl&iXm&iXo&iXp&iXq&iXr&iX{&iX|&iX}&iX!O&iX!P&iX!Q&iX!R&iX!S&iX!T&iX!U&iX!V&iX!W&iX!X&iX!Y&iX!Z&iX![&iX!]&iX!^&iX!_&iX!`&iX!a&iX!b&iX!c&iX!d&iX!e&iX!f&iX!g&iX!h&iX!i&iX!j&iX!k&iX!l&iX!m&iX!n&iX!o&iX!}&iX#W&iX#Z&iX#c&iX$`&iX$d&iX$h&iX$m&iX$o&iX$p&iX'U&iX'V&iX'W&iX!|&iX!z&iXY&iX#X&iXn&iX~O#`.|OX&jXZ&jX[&jX]&jX^&jX_&jX`&jXa&jXb&jXc&jXd&jXe&jXf&jXg&jXh&jXi&jXj&jXk&jXl&jXm&jXo&jXp&jXq&jXr&jX{&jX|&jX}&jX!O&jX!P&jX!Q&jX!R&jX!S&jX!T&jX!U&jX!V&jX!W&jX!X&jX!Y&jX!Z&jX![&jX!]&jX!^&jX!_&jX!`&jX!a&jX!b&jX!c&jX!d&jX!e&jX!f&jX!g&jX!h&jX!i&jX!j&jX!k&jX!l&jX!m&jX!n&jX!o&jX!}&jX#W&jX#Z&jX#c&jX$`&jX$d&jX$h&jX$m&jX$o&jX$p&jX'U&jX'V&jX'W&jX!|&jX!z&jXY&jX#X&jXn&jX~O#W#wO#`/PO~O#W#iO#`/SO)j/RO~O#W/_O~O#W#wO#`/dO~O#W#iO#Z#lO#`/gO~O#W#iO#Z#lO#`/jO~O)^/kO)_/mO~O#X/nO~PMQO)w/pO)x/pO)y/pO)z/pO){/pO)|/pO)}/pO*O/pO*P/pO*Q/pO*R/pO*S/pO*T/pO*U/pO*V/pO*W/pO*X/pO*Y/pO*Z/pO*[/pO*]/pO*^/pO*_/pO*`/pO*a/pO*b/pO*c/pO*d/pO*e/pO*f/pO*g/pO*h/pO*i/pO~O#`/rO~P$GeOn/sO~PMQO$m%lX!|%lX!z%lXY%lX#X%lXn%lX~PMQO$m/wO~PMQO$m/yO~O!|'wO~O!z'zO~OY/|O~OY%WX#X%WX~P!$ZOY0OO~OY0QO~OY0SO~OY0UO~OY'yX#X'yX~P!)kOY0YO~OY0[O~OY0^O~OY0`O~O#X0bO~O#W(cO#`0eO~O#W(cO#Z#lO#`0gO~O#W(cO#Z#lO#`0gO)j0hO~O#W(cO#`0jO~O#W(cO#Z#lO#`0lO~O#W(cO#Z#lO#`0lO)j0mO~O#W(cO#`0oO~O#W(cO#Z#lO#`0qO~O#W(cO#Z#lO#`0qO)j0rO~O#W(cO#`0tO~O#W(cO#Z#lO#`0vO~O#W(cO#Z#lO#`0vO)j0wO~O#W(cO#`0yO~O#W(cO#Z#lO#`0{O~O#W(cO#Z#lO#`0{O)j0|O~O#W(cO#`1OO~O#W(cO#Z#lO#`1QO~O#W(cO#Z#lO#`1QO)j1RO~O#W(cO#`1TO~O#W(cO#Z#lO#`1VO~O#W(cO#Z#lO#`1VO)j1WO~O#W(cO#`1YO~O#W(cO#Z#lO#`1[O~O#W(cO#Z#lO#`1[O)j1]O~Os(rXt(rXu(rXv(rXw(rXx(rXy(rXz(rX)](rXY(rX#X(rX~P!$ZOz#OOs(oXt(oXu(oXv(oXw(oXx(oXy(oX)](oXY(oX#X(oX~P!$ZOy!}Oz#OOs(lXt(lXu(lXv(lXw(lXx(lX)](lXY(lX#X(lX~P!$ZOx!|Oy!}Oz#OOs(iXt(iXu(iXv(iXw(iX)](iXY(iX#X(iX~P!$ZOw!{Ox!|Oy!}Oz#OOs(fXt(fXu(fXv(fX)](fXY(fX#X(fX~P!$ZOv!zOw!{Ox!|Oy!}Oz#OOs(cXt(cXu(cX)](cXY(cX#X(cX~P!$ZOu!yOv!zOw!{Ox!|Oy!}Oz#OOs(`Xt(`X)](`XY(`X#X(`X~P!$ZOt!xOu!yOv!zOw!{Ox!|Oy!}Oz#OOs(]X)](]XY(]X#X(]X~P!$ZO#X1fO~O#X1gO~O#X1hO~O#X1iO~O#X1jO~O#X1kO~O#X1lO~O#X1mO~O#X1nO~O#X1oO~O#W#iOX#fiZ#fi[#fi]#fi^#fi_#fi`#fia#fib#fic#fid#fie#fif#fig#fih#fii#fij#fik#fil#fim#fin#fio#fip#fiq#fir#fis#fit#fiu#fiv#fiw#fix#fiy#fiz#fi{#fi|#fi}#fi!O#fi!P#fi!Q#fi!R#fi!S#fi!T#fi!U#fi!V#fi!W#fi!X#fi!Y#fi!Z#fi![#fi!]#fi!^#fi!_#fi!`#fi!a#fi!b#fi!c#fi!d#fi!e#fi!f#fi!g#fi!h#fi!i#fi!j#fi!k#fi!l#fi!m#fi!n#fi!o#fi!y#fi!{#fi!}#fi#R#fi#Z#fi#`#fi#c#fi$`#fi$d#fi$h#fi$m#fi$n#fi$o#fi$p#fi~O#W#iOX#UiZ#Ui[#Ui]#Ui^#Ui_#Ui`#Uia#Uib#Uic#Uid#Uie#Uif#Uig#Uih#Uii#Uij#Uik#Uil#Uim#Uin#Uio#Uip#Uiq#Uir#Uis#Uit#Uiu#Uiv#Uiw#Uix#Uiy#Uiz#Ui{#Ui|#Ui}#Ui!O#Ui!P#Ui!Q#Ui!R#Ui!S#Ui!T#Ui!U#Ui!V#Ui!W#Ui!X#Ui!Y#Ui!Z#Ui![#Ui!]#Ui!^#Ui!_#Ui!`#Ui!a#Ui!b#Ui!c#Ui!d#Ui!e#Ui!f#Ui!g#Ui!h#Ui!i#Ui!j#Ui!k#Ui!l#Ui!m#Ui!n#Ui!o#Ui!y#Ui!{#Ui!}#Ui#R#Ui#Z#Ui#`#Ui#c#Ui$`#Ui$d#Ui$h#Ui$m#Ui$n#Ui$o#Ui$p#Ui~O#W#iOX'ciY'ciZ'ci['ci]'ci^'ci_'ci`'cia'cib'cic'cid'cie'cif'cig'cih'cii'cij'cik'cil'cim'cin'cio'cip'ciq'cir'ci{'ci|'ci}'ci!O'ci!P'ci!Q'ci!R'ci!S'ci!T'ci!U'ci!V'ci!W'ci!X'ci!Y'ci!Z'ci!['ci!]'ci!^'ci!_'ci!`'ci!a'ci!b'ci!c'ci!d'ci!e'ci!f'ci!g'ci!h'ci!i'ci!j'ci!k'ci!l'ci!m'ci!n'ci!o'ci!y'ci!{'ci!}'ci#R'ci#Z'ci#`'ci#c'ci$`'ci$d'ci$h'ci$m'ci$n'ci$o'ci$p'ci~O#W#iOX'hiY'hiZ'hi['hi]'hi^'hi_'hi`'hia'hib'hic'hid'hie'hif'hig'hih'hii'hij'hik'hil'him'hio'hip'hiq'hir'hi{'hi|'hi}'hi!O'hi!P'hi!Q'hi!R'hi!S'hi!T'hi!U'hi!V'hi!W'hi!X'hi!Y'hi!Z'hi!['hi!]'hi!^'hi!_'hi!`'hi!a'hi!b'hi!c'hi!d'hi!e'hi!f'hi!g'hi!h'hi!i'hi!j'hi!k'hi!l'hi!m'hi!n'hi!o'hi!}'hi#Z'hi#`'hi#c'hi$`'hi$d'hi$h'hi$o'hi$p'hi'U'hi'V'hi'W'hi~O#W#iOX'miY'miZ'mi['mi]'mi^'mi_'mi`'mia'mib'mic'mid'mie'mif'mig'mih'mii'mij'mik'mil'mim'mio'mip'miq'mir'mi{'mi|'mi}'mi!O'mi!P'mi!Q'mi!R'mi!S'mi!T'mi!U'mi!V'mi!W'mi!X'mi!Y'mi!Z'mi!['mi!]'mi!^'mi!_'mi!`'mi!a'mi!b'mi!c'mi!d'mi!e'mi!f'mi!g'mi!h'mi!i'mi!j'mi!k'mi!l'mi!m'mi!n'mi!o'mi!}'mi#Z'mi#`'mi#c'mi$`'mi$d'mi$h'mi$o'mi$p'mi'U'mi'V'mi'W'mi~O#W#iOT'qi~O#W#iOX'viZ'vi['vi]'vi^'vi_'vi`'via'vib'vic'vid'vie'vif'vig'vih'vii'vij'vik'vil'vim'vin'vio'vip'viq'vir'vi{'vi|'vi}'vi!O'vi!P'vi!Q'vi!R'vi!S'vi!T'vi!U'vi!V'vi!W'vi!X'vi!Y'vi!Z'vi!['vi!]'vi!^'vi!_'vi!`'vi!a'vi!b'vi!c'vi!d'vi!e'vi!f'vi!g'vi!h'vi!i'vi!j'vi!k'vi!l'vi!m'vi!n'vi!o'vi!y'vi!{'vi!}'vi#R'vi#Z'vi#`'vi#c'vi$`'vi$d'vi$h'vi$m'vi$n'vi$o'vi$p'vi)g'vi)h'vi)i'vi~O#W#iOX'}iZ'}i['}i]'}i^'}i_'}i`'}ia'}ib'}ic'}id'}ie'}if'}ig'}ih'}ii'}ij'}ik'}il'}im'}in'}io'}ip'}iq'}ir'}is'}it'}iu'}iv'}iw'}ix'}iy'}iz'}i{'}i|'}i}'}i!O'}i!P'}i!Q'}i!R'}i!S'}i!T'}i!U'}i!V'}i!W'}i!X'}i!Y'}i!Z'}i!['}i!]'}i!^'}i!_'}i!`'}i!a'}i!b'}i!c'}i!d'}i!e'}i!f'}i!g'}i!h'}i!i'}i!j'}i!k'}i!l'}i!m'}i!n'}i!o'}i!y'}i!{'}i!}'}i#R'}i#Z'}i#`'}i#c'}i$`'}i$d'}i$h'}i$m'}i$n'}i$o'}i$p'}i~O#W#iOX(RiZ(Ri[(Ri](Ri^(Ri_(Ri`(Ria(Rib(Ric(Rid(Rie(Rif(Rig(Rih(Rii(Rij(Rik(Ril(Rim(Rin(Rio(Rip(Riq(Rir(Ris(Rit(Riu(Riv(Riw(Rix(Riy(Riz(Ri{(Ri|(Ri}(Ri!O(Ri!P(Ri!Q(Ri!R(Ri!S(Ri!T(Ri!U(Ri!V(Ri!W(Ri!X(Ri!Y(Ri!Z(Ri![(Ri!](Ri!^(Ri!_(Ri!`(Ri!a(Ri!b(Ri!c(Ri!d(Ri!e(Ri!f(Ri!g(Ri!h(Ri!i(Ri!j(Ri!k(Ri!l(Ri!m(Ri!n(Ri!o(Ri!y(Ri!{(Ri!}(Ri#R(Ri#Z(Ri#`(Ri#c(Ri$`(Ri$d(Ri$h(Ri$m(Ri$n(Ri$o(Ri$p(Ri~O#W#iOX(ViZ(Vi[(Vi](Vi^(Vi_(Vi`(Via(Vib(Vic(Vid(Vie(Vif(Vig(Vih(Vii(Vij(Vik(Vil(Vim(Vin(Vio(Vip(Viq(Vir(Vis(Vit(Viu(Viv(Viw(Vix(Viy(Viz(Vi{(Vi|(Vi}(Vi!O(Vi!P(Vi!Q(Vi!R(Vi!S(Vi!T(Vi!U(Vi!V(Vi!W(Vi!X(Vi!Y(Vi!Z(Vi![(Vi!](Vi!^(Vi!_(Vi!`(Vi!a(Vi!b(Vi!c(Vi!d(Vi!e(Vi!f(Vi!g(Vi!h(Vi!i(Vi!j(Vi!k(Vi!l(Vi!m(Vi!n(Vi!o(Vi!y(Vi!{(Vi!}(Vi#R(Vi#Z(Vi#`(Vi#c(Vi$`(Vi$d(Vi$h(Vi$m(Vi$n(Vi$o(Vi$p(Vi~O#W1{O~OXQOZhO[iO]jO^kO_gO`|OapObSOcXOd[Oe_OfbOgcOhdOieOjfOknOloOm!aOn!aOoqOprOqsOrtO{uO|vO}xO!O`O!PaO!QwO!RYO!SZO!TTO!UUO!VVO!WWO!XyO!Y]O!Z^O![zO!]zO!^zO!_zO!`{O!a}O!b!OO!c!PO!d!QO!e!RO!f!SO!g!TO!h!UO!i!VO!j!WO!k!XO!l!YO!m!ZO!n![O!o!]O!y!eO!{!cO!}lO#ZPO#`!gO#cPO$`!`O$d!gO$h!_O$m!bO$n!gO$o!gO$p!gO~O#R*dO#W*cO)g*dO)h*dO)i*dO#X#bX~P&-OO#X2PO~O#X#[P~P#?`O#c#[X#X#[X~P#?`O#c2SO~O#W#iO#`2VO~O#W#iO#`2XO~O#W#iO#`2ZO~O#W*vO)g*wO)h*wO)i*wO#X#pX~P&-RO#X2^O~O#W#wO#`2`O~O#W#iO#`2dO~O#W#iO#`2fO~O#X2gO~O#Z#lOX$OiZ$Oi[$Oi]$Oi^$Oi_$Oi`$Oia$Oib$Oic$Oid$Oie$Oif$Oig$Oih$Oii$Oij$Oik$Oil$Oim$Oin$Oio$Oip$Oiq$Oir$Ois$Oit$Oiu$Oiv$Oiw$Oix$Oiy$Oiz$Oi{$Oi|$Oi}$Oi!O$Oi!P$Oi!Q$Oi!R$Oi!S$Oi!T$Oi!U$Oi!V$Oi!W$Oi!X$Oi!Y$Oi!Z$Oi![$Oi!]$Oi!^$Oi!_$Oi!`$Oi!a$Oi!b$Oi!c$Oi!d$Oi!e$Oi!f$Oi!g$Oi!h$Oi!i$Oi!j$Oi!k$Oi!l$Oi!m$Oi!n$Oi!o$Oi!y$Oi!{$Oi!}$Oi#R$Oi#W$Oi#`$Oi#c$Oi$`$Oi$d$Oi$h$Oi$m$Oi$n$Oi$o$Oi$p$Oi)]$OiY$Oi)g$Oi)h$Oi)i$Oi#X$Oi!z$Oi!|$Oi~OQ2mO~O#X2nO~O#W#wO#`2sO~O#W#wO#Z#lO#`2sO~O#W#wO#Z#lO#`2uO~O#W#wO#`2xO~O#W#wO#Z#lO#`2xO~O#W#wO#Z#lO#`2zO~O)k2|O)l2|O)m2|O)n2|O)o2|O)p2|O)q2|O)r2|O)s2|O~O#W+}O#Z+xO#`3PO$d,OO)g+wO~O#W3TO#`,VO~OX3[OY3[OZhO[iO]jO^kO_gO`|OapObSOcXOd[Oe_OfbOgcOhdOieOjfOknOloOm3[On3[OoqOprOqsOrtOs3ZOt3ZOu3ZOv3ZOw3ZOx3ZOy3ZOz3ZO{uO|vO}xO!O`O!PaO!QwO!RYO!SZO!TTO!UUO!VVO!WWO!XyO!Y]O!Z^O![zO!]zO!^zO!_zO!`{O!a}O!b!OO!c!PO!d!QO!e!RO!f!SO!g!TO!h!UO!i!VO!j!WO!k!XO!l!YO!m!ZO!n![O!o!]O!y3[O!z3[O!{3[O!|3[O!}lO#R3[O#W3YO#Z3[O#`3[O#c3[O$`3VO$d3[O$h3UO$m3[O$n3[O$o3[O$p3[O)g3[O)h3[O)i3[O~O#X3^O~P&=YO#W+}O#Z+xO#`3aO$d,OO)g+wO~OU3bO#`3cO~OU3bO#`3cO)u3dO~O#X3gO~OR3iO~O#X3kO~OR3mO~O#X3nO~OR3oO~O#W+}O#`,VO$d,OO~O#X3rO~OR3tO~O#W3uO#`3wO~O#W#wO#`3yO~O#W#iO#`3|O~O#W#wO#`4OO~O#W#iO#`4QO~O#W#iO#`4SO~O#W#iO#`4WO~O#W#iO#Z#lO#`4WO~O#W#iO#`4ZO~O#W#iO#Z#lO#`4ZO~O#W#iO#`4^O~O#W#iO#Z#lO#`4^O~O#W#wO#`4aO~O#W#wO#Z#lO#`4aO~O#W/_O#`4jO~O#W/_O#`4mO~O#W#wO#`4tO~OQ4wO~OQ4wO#Z#lO~O#W#iO#Z#lO#`4}O~O#W#wO#Z#lO#`5RO~O#W#wO#Z#lO#`5TO~O#W#wO#Z#lO#`5WO~O#W#wO#Z#lO#`5YO~O#W+}O#Z+xO#`5[O$d,OO)g+wO~OU5^O$`5^O~OU5_O#`5aO)u5`O~OR5eO~OU5fO#W5gO~OR5jO~OU5kO#W5lO~OR5mO~O#W5nO~OR5qO~OU5rO#W5sO~O#`5tOX&haZ&ha[&ha]&ha^&ha_&ha`&haa&hab&hac&had&hae&haf&hag&hah&hai&haj&hak&hal&ham&hao&hap&haq&har&ha{&ha|&ha}&ha!O&ha!P&ha!Q&ha!R&ha!S&ha!T&ha!U&ha!V&ha!W&ha!X&ha!Y&ha!Z&ha![&ha!]&ha!^&ha!_&ha!`&ha!a&ha!b&ha!c&ha!d&ha!e&ha!f&ha!g&ha!h&ha!i&ha!j&ha!k&ha!l&ha!m&ha!n&ha!o&ha!}&ha#W&ha#Z&ha#c&ha$`&ha$d&ha$h&ha$m&ha$o&ha$p&ha'U&ha'V&ha'W&ha!|&ha!z&haY&ha#X&han&ha~O#W#wO#`5wO~O#W#iO)j5zO~O#W#iO#`5}O~O#X6OO~PMQO#W#wO#`6RO~O#W#iO#`6UO~O#W#iO#Z#lO#`6UO~O#W#iO#`6XO~O#W#iO#Z#lO#`6XO~O#W/_O#`6[O~O)^/kO)_6^O~O#X6_O~O#`6bO~P$GeOn/sO~O$m6dO~O#W6fO~OV6hOW6hOX#TiZ#Ti[#Ti]#Ti^#Ti_#Ti`#Tia#Tib#Tic#Tid#Tie#Tif#Tig#Tih#Tii#Tij#Tik#Til#Tim#Tin#Tio#Tip#Tiq#Tir#Ti{#Ti|#Ti}#Ti!O#Ti!P#Ti!Q#Ti!R#Ti!S#Ti!T#Ti!U#Ti!V#Ti!W#Ti!X#Ti!Y#Ti!Z#Ti![#Ti!]#Ti!^#Ti!_#Ti!`#Ti!a#Ti!b#Ti!c#Ti!d#Ti!e#Ti!f#Ti!g#Ti!h#Ti!i#Ti!j#Ti!k#Ti!l#Ti!m#Ti!n#Ti!o#Ti!}#Ti#W#Ti#Z#Ti#`#Ti#c#Ti$`#Ti$d#Ti$h#Ti$m#Ti$o#Ti$p#TiY#Ti#X#Ti~Os#Tit#Tiu#Tiv#Tiw#Tix#Tiy#Tiz#Ti!y#Ti!{#Ti#R#Ti$n#Ti)]#Ti)g#Ti)h#Ti)i#Ti~P'%bO#W6iO~O#W6kO~O#W6mO~O#W6oO~O#X6qO~O#W6rO~O#W6tO~O#W6vO~O#W6xO~O#X6zO~O#W(cO~O#W(cO#`6|O~O#W(cO#Z#lO#`6|O~O#W(cO#Z#lO#`7OO~O#W(cO#`7QO~O#W(cO#Z#lO#`7QO~O#W(cO#Z#lO#`7SO~O#W(cO#`7UO~O#W(cO#Z#lO#`7UO~O#W(cO#Z#lO#`7WO~O#W(cO#`7YO~O#W(cO#Z#lO#`7YO~O#W(cO#Z#lO#`7[O~O#W(cO#`7^O~O#W(cO#Z#lO#`7^O~O#W(cO#Z#lO#`7`O~O#W(cO#`7bO~O#W(cO#Z#lO#`7bO~O#W(cO#Z#lO#`7dO~O#W(cO#`7fO~O#W(cO#Z#lO#`7fO~O#W(cO#Z#lO#`7hO~O#W(cO#`7jO~O#W(cO#Z#lO#`7jO~O#W(cO#Z#lO#`7lO~O#W#iOX#fqZ#fq[#fq]#fq^#fq_#fq`#fqa#fqb#fqc#fqd#fqe#fqf#fqg#fqh#fqi#fqj#fqk#fql#fqm#fqn#fqo#fqp#fqq#fqr#fqs#fqt#fqu#fqv#fqw#fqx#fqy#fqz#fq{#fq|#fq}#fq!O#fq!P#fq!Q#fq!R#fq!S#fq!T#fq!U#fq!V#fq!W#fq!X#fq!Y#fq!Z#fq![#fq!]#fq!^#fq!_#fq!`#fq!a#fq!b#fq!c#fq!d#fq!e#fq!f#fq!g#fq!h#fq!i#fq!j#fq!k#fq!l#fq!m#fq!n#fq!o#fq!y#fq!{#fq!}#fq#R#fq#Z#fq#`#fq#c#fq$`#fq$d#fq$h#fq$m#fq$n#fq$o#fq$p#fq~O#W#iOX#UqZ#Uq[#Uq]#Uq^#Uq_#Uq`#Uqa#Uqb#Uqc#Uqd#Uqe#Uqf#Uqg#Uqh#Uqi#Uqj#Uqk#Uql#Uqm#Uqn#Uqo#Uqp#Uqq#Uqr#Uqs#Uqt#Uqu#Uqv#Uqw#Uqx#Uqy#Uqz#Uq{#Uq|#Uq}#Uq!O#Uq!P#Uq!Q#Uq!R#Uq!S#Uq!T#Uq!U#Uq!V#Uq!W#Uq!X#Uq!Y#Uq!Z#Uq![#Uq!]#Uq!^#Uq!_#Uq!`#Uq!a#Uq!b#Uq!c#Uq!d#Uq!e#Uq!f#Uq!g#Uq!h#Uq!i#Uq!j#Uq!k#Uq!l#Uq!m#Uq!n#Uq!o#Uq!y#Uq!{#Uq!}#Uq#R#Uq#Z#Uq#`#Uq#c#Uq$`#Uq$d#Uq$h#Uq$m#Uq$n#Uq$o#Uq$p#Uq~O#W#iOX'cqY'cqZ'cq['cq]'cq^'cq_'cq`'cqa'cqb'cqc'cqd'cqe'cqf'cqg'cqh'cqi'cqj'cqk'cql'cqm'cqn'cqo'cqp'cqq'cqr'cq{'cq|'cq}'cq!O'cq!P'cq!Q'cq!R'cq!S'cq!T'cq!U'cq!V'cq!W'cq!X'cq!Y'cq!Z'cq!['cq!]'cq!^'cq!_'cq!`'cq!a'cq!b'cq!c'cq!d'cq!e'cq!f'cq!g'cq!h'cq!i'cq!j'cq!k'cq!l'cq!m'cq!n'cq!o'cq!y'cq!{'cq!}'cq#R'cq#Z'cq#`'cq#c'cq$`'cq$d'cq$h'cq$m'cq$n'cq$o'cq$p'cq~O#W#iOX'hqY'hqZ'hq['hq]'hq^'hq_'hq`'hqa'hqb'hqc'hqd'hqe'hqf'hqg'hqh'hqi'hqj'hqk'hql'hqm'hqo'hqp'hqq'hqr'hq{'hq|'hq}'hq!O'hq!P'hq!Q'hq!R'hq!S'hq!T'hq!U'hq!V'hq!W'hq!X'hq!Y'hq!Z'hq!['hq!]'hq!^'hq!_'hq!`'hq!a'hq!b'hq!c'hq!d'hq!e'hq!f'hq!g'hq!h'hq!i'hq!j'hq!k'hq!l'hq!m'hq!n'hq!o'hq!}'hq#Z'hq#`'hq#c'hq$`'hq$d'hq$h'hq$o'hq$p'hq'U'hq'V'hq'W'hq~O#W#iOX'mqY'mqZ'mq['mq]'mq^'mq_'mq`'mqa'mqb'mqc'mqd'mqe'mqf'mqg'mqh'mqi'mqj'mqk'mql'mqm'mqo'mqp'mqq'mqr'mq{'mq|'mq}'mq!O'mq!P'mq!Q'mq!R'mq!S'mq!T'mq!U'mq!V'mq!W'mq!X'mq!Y'mq!Z'mq!['mq!]'mq!^'mq!_'mq!`'mq!a'mq!b'mq!c'mq!d'mq!e'mq!f'mq!g'mq!h'mq!i'mq!j'mq!k'mq!l'mq!m'mq!n'mq!o'mq!}'mq#Z'mq#`'mq#c'mq$`'mq$d'mq$h'mq$o'mq$p'mq'U'mq'V'mq'W'mq~O#W#iOT'qq~O#W#iOX'vqZ'vq['vq]'vq^'vq_'vq`'vqa'vqb'vqc'vqd'vqe'vqf'vqg'vqh'vqi'vqj'vqk'vql'vqm'vqn'vqo'vqp'vqq'vqr'vq{'vq|'vq}'vq!O'vq!P'vq!Q'vq!R'vq!S'vq!T'vq!U'vq!V'vq!W'vq!X'vq!Y'vq!Z'vq!['vq!]'vq!^'vq!_'vq!`'vq!a'vq!b'vq!c'vq!d'vq!e'vq!f'vq!g'vq!h'vq!i'vq!j'vq!k'vq!l'vq!m'vq!n'vq!o'vq!y'vq!{'vq!}'vq#R'vq#Z'vq#`'vq#c'vq$`'vq$d'vq$h'vq$m'vq$n'vq$o'vq$p'vq)g'vq)h'vq)i'vq~O#W#iOX'}qZ'}q['}q]'}q^'}q_'}q`'}qa'}qb'}qc'}qd'}qe'}qf'}qg'}qh'}qi'}qj'}qk'}ql'}qm'}qn'}qo'}qp'}qq'}qr'}qs'}qt'}qu'}qv'}qw'}qx'}qy'}qz'}q{'}q|'}q}'}q!O'}q!P'}q!Q'}q!R'}q!S'}q!T'}q!U'}q!V'}q!W'}q!X'}q!Y'}q!Z'}q!['}q!]'}q!^'}q!_'}q!`'}q!a'}q!b'}q!c'}q!d'}q!e'}q!f'}q!g'}q!h'}q!i'}q!j'}q!k'}q!l'}q!m'}q!n'}q!o'}q!y'}q!{'}q!}'}q#R'}q#Z'}q#`'}q#c'}q$`'}q$d'}q$h'}q$m'}q$n'}q$o'}q$p'}q~O#W#iOX(RqZ(Rq[(Rq](Rq^(Rq_(Rq`(Rqa(Rqb(Rqc(Rqd(Rqe(Rqf(Rqg(Rqh(Rqi(Rqj(Rqk(Rql(Rqm(Rqn(Rqo(Rqp(Rqq(Rqr(Rqs(Rqt(Rqu(Rqv(Rqw(Rqx(Rqy(Rqz(Rq{(Rq|(Rq}(Rq!O(Rq!P(Rq!Q(Rq!R(Rq!S(Rq!T(Rq!U(Rq!V(Rq!W(Rq!X(Rq!Y(Rq!Z(Rq![(Rq!](Rq!^(Rq!_(Rq!`(Rq!a(Rq!b(Rq!c(Rq!d(Rq!e(Rq!f(Rq!g(Rq!h(Rq!i(Rq!j(Rq!k(Rq!l(Rq!m(Rq!n(Rq!o(Rq!y(Rq!{(Rq!}(Rq#R(Rq#Z(Rq#`(Rq#c(Rq$`(Rq$d(Rq$h(Rq$m(Rq$n(Rq$o(Rq$p(Rq~O#W#iOX(VqZ(Vq[(Vq](Vq^(Vq_(Vq`(Vqa(Vqb(Vqc(Vqd(Vqe(Vqf(Vqg(Vqh(Vqi(Vqj(Vqk(Vql(Vqm(Vqn(Vqo(Vqp(Vqq(Vqr(Vqs(Vqt(Vqu(Vqv(Vqw(Vqx(Vqy(Vqz(Vq{(Vq|(Vq}(Vq!O(Vq!P(Vq!Q(Vq!R(Vq!S(Vq!T(Vq!U(Vq!V(Vq!W(Vq!X(Vq!Y(Vq!Z(Vq![(Vq!](Vq!^(Vq!_(Vq!`(Vq!a(Vq!b(Vq!c(Vq!d(Vq!e(Vq!f(Vq!g(Vq!h(Vq!i(Vq!j(Vq!k(Vq!l(Vq!m(Vq!n(Vq!o(Vq!y(Vq!{(Vq!}(Vq#R(Vq#Z(Vq#`(Vq#c(Vq$`(Vq$d(Vq$h(Vq$m(Vq$n(Vq$o(Vq$p(Vq~O#X7mO~O#X7oO~O#X7sO~O#Z#lOX$OqZ$Oq[$Oq]$Oq^$Oq_$Oq`$Oqa$Oqb$Oqc$Oqd$Oqe$Oqf$Oqg$Oqh$Oqi$Oqj$Oqk$Oql$Oqm$Oqn$Oqo$Oqp$Oqq$Oqr$Oqs$Oqt$Oqu$Oqv$Oqw$Oqx$Oqy$Oqz$Oq{$Oq|$Oq}$Oq!O$Oq!P$Oq!Q$Oq!R$Oq!S$Oq!T$Oq!U$Oq!V$Oq!W$Oq!X$Oq!Y$Oq!Z$Oq![$Oq!]$Oq!^$Oq!_$Oq!`$Oq!a$Oq!b$Oq!c$Oq!d$Oq!e$Oq!f$Oq!g$Oq!h$Oq!i$Oq!j$Oq!k$Oq!l$Oq!m$Oq!n$Oq!o$Oq!y$Oq!{$Oq!}$Oq#R$Oq#W$Oq#`$Oq#c$Oq$`$Oq$d$Oq$h$Oq$m$Oq$n$Oq$o$Oq$p$Oq)]$OqY$Oq)g$Oq)h$Oq)i$Oq#X$Oq!z$Oq!|$Oq~O#W#wO#`7|O~O#W#wO#Z#lO#`7|O~O#W#wO#Z#lO#`8OO~O#W#wO#`8QO~O#W#wO#Z#lO#`8QO~O#W#wO#Z#lO#`8SO~O#c8TO~O#W+}O#Z+xO#`8VO$d,OO)g+wO~O#X8WO~P&=YO)`8YO)a8[O~O#X8]O~P&=YO#W(cO#Z#lO#`8bO)j8aO~O#X$eX~P&=YO#X8WO~O#W8dO#`,VO~OU8fO~OU8fO#`8gO~O#X8jO~O#X8mO~O#X8pO~O#X8tO~O#X%WP~P!$ZO#W3uO~O#W3uO#`8wO~O#W#iO#`9PO~O#W#iO#`9RO~O#W#iO#`9TO~O#W#wO#`9VO~O#W/_O#`9ZO~O#W/_O#`9]O~O#Z#lOX&PiZ&Pi[&Pi]&Pi^&Pi_&Pi`&Pia&Pib&Pic&Pid&Pie&Pif&Pig&Pih&Pii&Pij&Pik&Pil&Pim&Pio&Pip&Piq&Pir&Pi{&Pi|&Pi}&Pi!O&Pi!P&Pi!Q&Pi!R&Pi!S&Pi!T&Pi!U&Pi!V&Pi!W&Pi!X&Pi!Y&Pi!Z&Pi![&Pi!]&Pi!^&Pi!_&Pi!`&Pi!a&Pi!b&Pi!c&Pi!d&Pi!e&Pi!f&Pi!g&Pi!h&Pi!i&Pi!j&Pi!k&Pi!l&Pi!m&Pi!n&Pi!o&Pi!}&Pi#W&Pi#`&Pi#c&Pi$`&Pi$d&Pi$h&Pi$m&Pi$o&Pi$p&Pi'U&Pi'V&Pi'W&Pi!|&Pi!z&PiY&Pi#X&Pin&Pi~OQ9cO~O#W#wO#`9hO~O#W#wO#Z#lO#`9hO~O#W#wO#Z#lO#`9jO~O#W#wO#`9mO~O#W#wO#Z#lO#`9mO~O#W#wO#Z#lO#`9oO~O#W+}O#Z+xO#`9qO$d,OO)g+wO~O#W+}O#Z+xO#`9tO$d,OO)g+wO~OU9uO#`9vO~OU9uO#`9vO)u9wO~O#X9yO~OR9{O~O#X9}O~OR:PO~O#X:QO~OR:RO~O#X:UO~OR:WO~O#W3uO#`:YO~O#W#wO#`:[O~O#W#iO#`:_O~O#X:`O~O#W#wO#`:bO~O#W#iO#`:dO~O#W#iO#`:fO~O'U#Ti'V#Ti'W#Ti!|#Ti!z#Ti~P'%bO!p)oO~O!q)rO~O!r)sO~O!s)tO~O!t)uO~O!u)vO~O!v)wO~O!w)xO~O!x)yO~O#W(cO#`:jO~O#W(cO#Z#lO#`:jO~O#W(cO#`:mO~O#W(cO#Z#lO#`:mO~O#W(cO#`:pO~O#W(cO#Z#lO#`:pO~O#W(cO#`:sO~O#W(cO#Z#lO#`:sO~O#W(cO#`:vO~O#W(cO#Z#lO#`:vO~O#W(cO#`:yO~O#W(cO#Z#lO#`:yO~O#W(cO#`:|O~O#W(cO#Z#lO#`:|O~O#W(cO#`;PO~O#W(cO#Z#lO#`;PO~O#Z#lOZ%ii[%ii]%ii^%ii_%ii`%iia%iib%iic%iid%iie%iif%iig%iih%iii%iij%iik%iil%iim%iin%iio%iip%iiq%iir%ii{%ii|%ii}%ii!O%ii!P%ii!Q%ii!R%ii!S%ii!T%ii!U%ii!V%ii!W%ii!X%ii!Y%ii!Z%ii![%ii!]%ii!^%ii!_%ii!`%ii!a%ii!b%ii!c%ii!d%ii!e%ii!f%ii!g%ii!h%ii!i%ii!j%ii!k%ii!l%ii!m%ii!n%ii!o%ii!y%ii!{%ii!}%ii#W%ii#`%ii#c%ii$`%ii$d%ii$h%ii$m%ii$n%ii$o%ii$p%ii)g%ii)h%ii#X%ii~O#Z#lOX$OyZ$Oy[$Oy]$Oy^$Oy_$Oy`$Oya$Oyb$Oyc$Oyd$Oye$Oyf$Oyg$Oyh$Oyi$Oyj$Oyk$Oyl$Oym$Oyn$Oyo$Oyp$Oyq$Oyr$Oys$Oyt$Oyu$Oyv$Oyw$Oyx$Oyy$Oyz$Oy{$Oy|$Oy}$Oy!O$Oy!P$Oy!Q$Oy!R$Oy!S$Oy!T$Oy!U$Oy!V$Oy!W$Oy!X$Oy!Y$Oy!Z$Oy![$Oy!]$Oy!^$Oy!_$Oy!`$Oy!a$Oy!b$Oy!c$Oy!d$Oy!e$Oy!f$Oy!g$Oy!h$Oy!i$Oy!j$Oy!k$Oy!l$Oy!m$Oy!n$Oy!o$Oy!y$Oy!{$Oy!}$Oy#R$Oy#W$Oy#`$Oy#c$Oy$`$Oy$d$Oy$h$Oy$m$Oy$n$Oy$o$Oy$p$Oy)]$OyY$Oy)g$Oy)h$Oy)i$Oy#X$Oy!z$Oy!|$Oy~O#W#wO#`;TO~O#W#wO#Z#lO#`;TO~O#W#wO#`;WO~O#W#wO#Z#lO#`;WO~O#X;ZO~O#W;[O#Z#lO#`;^O~O)`8YO)a;`O~O#X;aO~O#W(cO#`;cO~O#W(cO#Z#lO#`;eO~O#W(cO#Z#lO#`;eO)j;fO~O#X;ZO~P&=YO#W+}O#Z+xO#`;hO$d,OO)g+wO~OU;iO~O#X;tO~O#W3uO#`;vO~O#Z#lOX&PqZ&Pq[&Pq]&Pq^&Pq_&Pq`&Pqa&Pqb&Pqc&Pqd&Pqe&Pqf&Pqg&Pqh&Pqi&Pqj&Pqk&Pql&Pqm&Pqo&Pqp&Pqq&Pqr&Pq{&Pq|&Pq}&Pq!O&Pq!P&Pq!Q&Pq!R&Pq!S&Pq!T&Pq!U&Pq!V&Pq!W&Pq!X&Pq!Y&Pq!Z&Pq![&Pq!]&Pq!^&Pq!_&Pq!`&Pq!a&Pq!b&Pq!c&Pq!d&Pq!e&Pq!f&Pq!g&Pq!h&Pq!i&Pq!j&Pq!k&Pq!l&Pq!m&Pq!n&Pq!o&Pq!}&Pq#W&Pq#`&Pq#c&Pq$`&Pq$d&Pq$h&Pq$m&Pq$o&Pq$p&Pq'U&Pq'V&Pq'W&Pq!|&Pq!z&PqY&Pq#X&Pqn&Pq~O#W#wO#`<SO~O#W#wO#Z#lO#`<SO~O#W#wO#Z#lO#`<UO~O#W#wO#`<WO~O#W#wO#Z#lO#`<WO~O#W#wO#Z#lO#`<YO~O#W+}O#Z+xO#`<[O$d,OO)g+wO~OU<^O~OU<^O#`<_O~O#X<bO~O#X<eO~O#X<hO~O#X<lO~O#W3uO#`<nO~O#W(cO#`<uO~O#W(cO#`<wO~O#W(cO#`<yO~O#W(cO#`<{O~O#W(cO#`<}O~O#W(cO#`=PO~O#W(cO#`=RO~O#W(cO#`=TO~O#W#wO#`=VO~O#W#wO#`=XO~O#X=YO~P&=YO#W;[O#Z#lO~O#W(cO#`=^O~O#W(cO#Z#lO#`=^O~O#W(cO#Z#lO#`=`O~O#X=aO~O#Z#lOX&PyZ&Py[&Py]&Py^&Py_&Py`&Pya&Pyb&Pyc&Pyd&Pye&Pyf&Pyg&Pyh&Pyi&Pyj&Pyk&Pyl&Pym&Pyo&Pyp&Pyq&Pyr&Py{&Py|&Py}&Py!O&Py!P&Py!Q&Py!R&Py!S&Py!T&Py!U&Py!V&Py!W&Py!X&Py!Y&Py!Z&Py![&Py!]&Py!^&Py!_&Py!`&Py!a&Py!b&Py!c&Py!d&Py!e&Py!f&Py!g&Py!h&Py!i&Py!j&Py!k&Py!l&Py!m&Py!n&Py!o&Py!}&Py#W&Py#`&Py#c&Py$`&Py$d&Py$h&Py$m&Py$o&Py$p&Py'U&Py'V&Py'W&Py!|&Py!z&PyY&Py#X&Pyn&Py~O#W#wO#`=lO~O#W#wO#Z#lO#`=lO~O#W#wO#`=oO~O#W#wO#Z#lO#`=oO~O#W+}O#Z+xO#`=rO$d,OO)g+wO~OU=sO~O#W3uO#`>PO~O#X>[O~O#W(cO#`>^O~O#W(cO#Z#lO#`>^O~O#W#wO#`>cO~O#W#wO#`>eO~O#W(cO#`>oO~O#W#iO#Z#lOZ%ia[%ia]%ia^%ia_%ia`%iaa%iab%iac%iad%iae%iaf%iag%iah%iai%iaj%iak%ial%iam%ian%iao%iap%iaq%iar%ia{%ia|%ia}%ia!O%ia!P%ia!Q%ia!R%ia!S%ia!T%ia!U%ia!V%ia!W%ia!X%ia!Y%ia!Z%ia![%ia!]%ia!^%ia!_%ia!`%ia!a%ia!b%ia!c%ia!d%ia!e%ia!f%ia!g%ia!h%ia!i%ia!j%ia!k%ia!l%ia!m%ia!n%ia!o%ia!y%ia!{%ia!}%ia#`%ia#c%ia$`%ia$d%ia$h%ia$m%ia$n%ia$o%ia$p%ia)g%ia)h%ia#X%ia~O#`>uO~PGTO$h$`#R'V'U'W$d#`$n#`~",goto:"#0[*kPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPP*lP*z,P-Q.TPP.ZP9x:O:{<QP=TEyP+y*zFSGTPGZGm<Q<Q<Q<QGpMxNO<QNT<QN_<QNe<QNk<Q<Q<Q! P<Q<Q<Q<Q<Q<Q! i! s<Q<Q!!]<Q!!i<Q!#}<QP!%c!%v!&WP!*x!+X;xP!+a!+g!,x!+XPPPP!+X!.V<Q<Q<Q<Q<Q<Q<Q!3Z!3^<Q!3d<Q<Q<Q<Q<Q!3g!3m!3w!4e<Q<Q<Q<Q<Q<Q<Q<Q<Q<Q<Q<Q<Q<Q<Q<Q!4k:O!5h!5k!6U!6b!6n!6n!6n!6n!6n!6n!6z!6n!7U!6n!7[!6n!6n!7b!6n!6n!6n!6n!6n!6n!6n!6n!8V!6n!6n!6n!6n!6n!6n!6n!6n!6n!6n!6n!6n!8a!6n!8d!6n!6n!6n!6n!6n!8g!8m!6n!6n!6n!6n!6n!6n!6n!6n!6n!6n!6n!6n!6n!6n!6n!6n!6b!6U!6U!8w!9T!9aPPP!5h:O!9g!:d:O!:j!;g!;m!;r,P!;x!<y!=P!=S,P!=V!>W!>^!>d,P!>g!?h!?n,P!?q!@r!@x!@{,P!AO!BP!BV!BY!B`!Be,P!Bh!Ci!Co,P!Cr!Ds!Dy,P!D|!E}!FT!FW!Fv!GR!G^!Ga!Gp!G}!HQ!He!Ht!Hw!I`!Iq!It!Ja!Jt!Jw!Kh!K}!LQ!Lu!M^!Ma!NY!Ns!Nv# T#!X#!`#!h#$^#$e#%R#'[#'f#'l#*S#*^#*l#*z#+Q#+X#+_#+e#+k#+q#+w#+}#,TPPPPPP#,Z#,y#-n#.mPPPPPPPPPPPPP#/kP#/sPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPP#0PQ#SO[#gR!h!n!o!p>xR(a!s!`!rOR!h!i!m!n!o!p!s#P#R#T#U#V#W#X#Y#Z(O(W(Y)V)Z)^)a)d)g)j)m3u>xd'r!b!d!f!j!k'o'q's'u/_X*d#i(c*c*e!}!qOR!b!d!f!h!i!j!k!m!n!o!p!s#P#R#T#U#V#W#X#Y#Z#i'o'q's'u(O(W(Y(c)V)Z)^)a)d)g)j)m*c*e/_3u>x!h!hOR!h!i!m!n!o!p!s#P#R#T#U#V#W#X#Y#Z#i(O(W(Y(c)V)Z)^)a)d)g)j)m*c*e3u>xe>x!b!d!f!j!k'o'q's'u/_Q#^QR6g/|Q#kSQ#oTQ#rUQ#uVQ#yWQ#}XQ$X[Q$kdQ$peQ$sfS${hiS%QjkS%Tl&aQ%kxW%u}%v'Z/TQ&X![Q&[!][&^!_&_&`7n>u>wQ(e!wQ(i!xQ(m!yQ(q!zQ(u!{Q(y!|Q(}!}Q)R#OQ)|#]Q*O#^Q*Q#_Q*S#`Q*U#aQ*W#bQ*Y#cQ*[#dQ*^#eQ*`#fQ*l#mQ*o#pQ*r#sQ*u#vQ*|#zQ+O$OQ+S$YQ+_$bQ+e$lQ+h$qS+j$t$uQ+n${S+p$|$}Q+s%QS+u%R%S#d,W%Z%^%c,X,[,^,a,e,h.j.m.r3g3h3k3l3n3r3s5c5f5h5k5o5r8h8j8k8m8n8p8r8t9y9z9}:O:Q:U:V;k;m;p;s<`<b<c<e<f<h<j<l=u=w=z=}Q,v%xQ,|&YQ-P&]Q-T&bQ-W&cQ-Z&dQ-^&eQ-a&fQ-e&gQ-n&jQ.P&rQ.T&sQ.W&tS.^&v&wS.b&x&yQ.y'UQ/f'hQ/i'iS0f(f(gS0k(j(kS0p(n(oS0u(r(sS0z(v(wS1P(z({S1U)O)PS1Z)S)TQ2i+^Q2k+`Q2q+kS2t+o+pQ2v+qS2y+t+uQ2{+vQ4U-UQ4X-XQ4[-[Q4_-_Q4b-bQ4d-fQ4h-oQ4r-vQ4x.QQ4z.US4|.X.YQ5Q.^S5S._.`Q5V.bS5X.c.dQ6V/gQ6Y/jS6}0g0hS7R0l0mS7V0q0rS7Z0v0wS7_0{0|S7c1Q1RS7g1V1WS7k1[1]Q7w2jQ7y2lS7}2u2vS8R2z2{Q8`3ZQ9_4qQ9a4sQ9f4}S9i5R5SQ9k5TS9n5W5XQ9p5YQ:k7OQ:n7SQ:q7WQ:t7[Q:w7`Q:z7dQ:}7hQ;Q7lQ;R7xQ;U8OQ;X8SQ;]8YS;d8a8bQ;}9`Q<P9bS<T9j9kS<X9o9pQ=[;^S=_;e;fQ=j<OQ=m<UQ=p<YR>_=`Q*k#lR2Q*h!u!gOR!h!i!m!n!o!p!s#P#R#T#U#V#W#X#Y#Z#i#l#w(O(W(Y(c)V)Z)^)a)d)g)j)m*c*e*h*j*v*x3u>x!t!aOR!h!i!m!n!o!p!s#P#R#T#U#V#W#X#Y#Z#i#l#w(O(W(Y(c)V)Z)^)a)d)g)j)m*c*e*h*j*v*x3u>x]3X+}3T3Y3]8d;[#R!^OR!h!i!m!n!o!p!s#P#R#T#U#V#W#X#Y#Z#i#l#w(O(W(Y(c)V)Z)^)a)d)g)j)m*c*e*h*j*v*x+}3T3Y3]3u8d;[>xQ#jSQ#nTQ#qUQ#tVQ$rfQ%XpQ%r|Q%y!OQ%z!PQ%{!QQ%|!RQ%}!SQ&O!TQ&P!UQ&Q!VQ&R!WQ&S!XQ&T!YQ&W![Q&Z!]Y&^!_&_&`>u>w!r)z#]#^#_#`#a#b#c#d#e#f){)|)}*O*P*Q*R*S*T*U*V*W*X*Y*Z*[*]*^*_*`1q1r1s1t1u1v1w1x1y1zS*g#k#mS*m#o#pS*p#r#sS*s#u#vQ+T$ZQ+W$]Q+^$bU+i$s$t$uQ,U%YS,p%s%tQ,t%wS,z&X&YS,}&[&]Q-S&bQ-V&cQ-Y&dQ-]&eQ.V&tQ.h&|Q/Q'YQ/V'[Q/W']Q/X'^Q/Y'_Q/Z'`Q/['aQ/]'bQ/^'cQ/e'hQ/h'iQ2T*lS2U*n*oS2W*q*rS2Y*t*uS2c+U+VS2e+X+YQ2i+_Q2j+`S2p+j+kQ3z,qS3{,s,uS4P,{,|S4R-O-PS4T-T-US4V-W-XS4Y-Z-[S4]-^-_Q4q-vU4{.W.X.YQ5b.iS5y/R/SQ5|/US6T/f/gS6W/i/jQ7p2VQ7q2XQ7r2ZQ7u2dQ7v2fQ7w2kQ7x2lQ7z2qQ8y3|Q8{4QQ8|4SQ8}4US9O4W4XS9Q4Z4[S9S4^4_Q9_4rQ9`4sS9e4|4}Q:]5zS:^5{5}S:c6U6VS:e6X6YQ;R7yQ;w9PQ;x9RQ;y9TQ;}9aQ<O9bQ<Q9fQ<p:_Q<r:dQ<s:fR=j<PQ*f#iQ0c(cR1}*c!}ROR!b!d!f!h!i!j!k!m!n!o!p!s#P#R#T#U#V#W#X#Y#Z#i'o'q's'u(O(W(Y(c)V)Z)^)a)d)g)j)m*c*e/_3u>xQ#]QR1|*aQ#hRQ'}!hQ(]!nQ(^!oQ(_!pR>v>xR*b#hQ#xWW#{X#}$O+OS$PY$RS$SZ$U`$V[$X$Y&j+S-n-o4hQ$Z]Q$]^Q$b`Q$eaW$vg$x&u.[!n$yhi${$|$}&v&w+n+o+p+q.^._.`2s2t2u2v5Q5R5S5T7|7}8O9h9i9j9k;T;U<S<T<U=V=l=m>c!n%Ojk%Q%R%S&x&y+s+t+u+v.b.c.d2x2y2z2{5V5W5X5Y8Q8R8S9m9n9o9p;W;X<W<X<Y=X=o=p>eS%o{%qQ%w}Q&U!ZS*z#y#zQ+V$[Q+Y$^Q+[$`S+`$c$dQ+b$fW,l%p,n,o3yQ,s%vQ,w&UQ,y&VQ-`&fW-c&g-e-f4dS-g&h-iS-j&i-lQ-p&kQ-r&lQ-v&nQ-y&oS.}'X/PQ/U'ZQ/c'gS2_*{*|Q2h+]Q2l+aS3},x,yS4`-a-bQ4k-qQ4n-sQ4o-tS4s-w-xQ4u-zW5u/O5w5x:[Q5{/TQ6Q/cQ6S/dQ7t2`Q8z4OS9U4a4bQ9^4pQ9b4tS:a6R6SQ;z9VR<q:bQ*y#wR2[*vV*w#w*v*xQ#|XS*}#}$OR2a+OQ$QYR+P$RQ$TZR+Q$UQ$W[S+R$X$YQ-m&jQ2b+SS4g-n-oR9X4hQ$`_Q$gbQ+]$aQ+c$hQ-t&mQ-{&pQ4p-uR4v-|Q$oeS+g$p$qR2o+hW$ne$p$q+hQ%guQ%ivW.R&s.T.U4zQ.u'RR.w'SQ$wgQ+l$xQ.Z&uR5O.[S$zhiU+m${$|$}S.]&v&wW2r+n+o+p+qU5P.^._.`W7{2s2t2u2vW9g5Q5R5S5TU;S7|7}8OW<R9h9i9j9kS=U;T;UU=k<S<T<UQ>Y=VS>b=l=mR>p>cS%PjkU+r%Q%R%SS.a&x&yW2w+s+t+u+vU5U.b.c.dW8P2x2y2z2{W9l5V5W5X5YU;V8Q8R8SW<V9m9n9o9pS=W;W;XU=n<W<X<YQ>Z=XS>d=o=pR>q>el+y%U+z+{,Q.e3R3a5Z5[5^8e9s9t<]R2}+xm+y%U+z+{,Q.e3R3a5Z5[5^8e9s9t<]Q,P%UQ,Y%ZQ,_%^Q,f%cU3Q+z+{,QS3f,X,[S3j,^,aS3p,e,hQ3q,fQ5].eQ5d.jQ5i.mQ5p.rU8U3P3R3aS8i3g3hS8l3k3lQ8o3nQ8q3pS8s3r3sU9r5Z5[5^S9x5c5fS9|5h5kS:S5o5rQ:T5pS;Y8V8eS;j8h8jS;l8k8mS;n8n8pQ;o8oS;q8r8tQ;r8sU<Z9q9s9tS<a9y9zS<d9}:OQ<g:QQ<i:SS<k:U:VQ=b;hQ=c;kQ=d;mQ=e;nQ=f;pQ=g;qQ=h;sS=q<[<]S=t<`<bS=v<c<eS=x<f<hQ=y<gS={<j<lQ=|<kQ>`=fQ>a=hQ>f=rQ>g=uQ>h=wQ>i=xQ>j=zQ>k={Q>l=}Q>r>jR>s>lQ3_+}Q8X3TQ8^3YQ;g8dR=Z;[]3[+}3T3Y3]8d;[Q;]8YR=[;^!t!aOR!h!i!m!n!o!p!s#P#R#T#U#V#W#X#Y#Z#i#l#w(O(W(Y(c)V)Z)^)a)d)g)j)m*c*e*h*j*v*x3u>xd'n!b!d!f!j!k'o'q's'u/_]3X+}3T3Y3]8d;[#gmOR!b!d!f!h!i!j!k!m!n!o!p!s#P#R#T#U#V#W#X#Y#Z#i#l#w'o'q's'u(O(W(Y(c)V)Z)^)a)d)g)j)m*c*e*h*j*v*x+}/_3T3Y3]3u8d;[>xQ(d!wQ(h!xQ(l!yQ(p!zQ(t!{Q(x!|Q(|!}Q)Q#OU0d(e(f(gU0i(i(j(kU0n(m(n(oU0s(q(r(sU0x(u(v(wU0}(y(z({U1S(})O)PU1X)R)S)TW6{0e0f0g0hW7P0j0k0l0mW7T0o0p0q0rW7X0t0u0v0wW7]0y0z0{0|W7a1O1P1Q1RW7e1T1U1V1WW7i1Y1Z1[1]Q8_3ZU:i6|6}7OU:l7Q7R7SU:o7U7V7WU:r7Y7Z7[U:u7^7_7`U:x7b7c7dU:{7f7g7hU;O7j7k7lU;b8`8a8bS<t:j:kS<v:m:nS<x:p:qS<z:s:tS<|:v:wS=O:y:zS=Q:|:}S=S;P;QW=];c;d;e;fQ>Q<uQ>R<wQ>S<yQ>T<{Q>U<}Q>V=PQ>W=RQ>X=TU>]=^=_=`S>n>^>_R>t>oR%huQ%guR.u'RR%jvQ%p{R,o%qQ,m%pS3x,n,oR8x3yQ3v,mS8v3w3xQ:X5vS;u8w8xS<m:Y:ZQ=i;vS>O<n<oR>m>PQ(P!iR8u3u!u!aOR!h!i!m!n!o!p!s#P#R#T#U#V#W#X#Y#Z#i#l#w(O(W(Y(c)V)Z)^)a)d)g)j)m*c*e*h*j*v*x3u>xR'v!bQ't!bQ'y!dQ'|!fS(R!j!kQ/o'oQ/u'qQ/x'uR6P/_e'r!b!d!f!j!k'o'q's'u/_e'n!b!d!f!j!k'o'q's'u/_e'j!b!d!f!j!k'o'q's'u/_Q-d&gS4c-e-fR9W4dQ-h&hR4e-iQ-k&iR4f-lQ/`'dQ/a'eQ/b'fQ4i-pQ4l-rQ6Z/kS9Y4j4kS9[4m4nQ:g6[Q;{9ZR;|9]Q.S&sS4y.T.UR9d4zR.v'RR.x'SQ/O'XR5x/PQ5v/OS:Z5w5xR<o:[e'q!b!d!f!j!k'o'q's'u/_Q/q'pQ6`/rQ6a/sR:h6bQ/t'qR6c/u!u!dOR!h!i!m!n!o!p!s#P#R#T#U#V#W#X#Y#Z#i#l#w(O(W(Y(c)V)Z)^)a)d)g)j)m*c*e*h*j*v*x3u>xQ'x!dR/z'y!u!fOR!h!i!m!n!o!p!s#P#R#T#U#V#W#X#Y#Z#i#l#w(O(W(Y(c)V)Z)^)a)d)g)j)m*c*e*h*j*v*x3u>xQ'{!fR/{'|V*i#l*h*jQ/}'}R6e>v!}!iOR!b!d!f!h!i!j!k!m!n!o!p!s#P#R#T#U#V#W#X#Y#Z#i'o'q's'u(O(W(Y(c)V)Z)^)a)d)g)j)m*c*e/_3u>xQ#_QR6j0OR(Q!iR0P(Q!}!jOR!b!d!f!h!i!j!k!m!n!o!p!s#P#R#T#U#V#W#X#Y#Z#i'o'q's'u(O(W(Y(c)V)Z)^)a)d)g)j)m*c*e/_3u>xQ#`QR6l0QQ(S!jR(T!kR0R(S!}!kOR!b!d!f!h!i!j!k!m!n!o!p!s#P#R#T#U#V#W#X#Y#Z#i'o'q's'u(O(W(Y(c)V)Z)^)a)d)g)j)m*c*e/_3u>xQ#aQR6n0SR0T(T!}!lOR!b!d!f!h!i!j!k!m!n!o!p!s#P#R#T#U#V#W#X#Y#Z#i'o'q's'u(O(W(Y(c)V)Z)^)a)d)g)j)m*c*e/_3u>xQ#bQR6p0UR(V!lR0V(V!}!mOR!b!d!f!h!i!j!k!m!n!o!p!s#P#R#T#U#V#W#X#Y#Z#i'o'q's'u(O(W(Y(c)V)Z)^)a)d)g)j)m*c*e/_3u>xQ#cQR6s0YR([!mQ(Z!mR0W(WV(X!m(W(YR0Z([!}!nOR!b!d!f!h!i!j!k!m!n!o!p!s#P#R#T#U#V#W#X#Y#Z#i'o'q's'u(O(W(Y(c)V)Z)^)a)d)g)j)m*c*e/_3u>xQ#dQR6u0[R0](]!}!oOR!b!d!f!h!i!j!k!m!n!o!p!s#P#R#T#U#V#W#X#Y#Z#i'o'q's'u(O(W(Y(c)V)Z)^)a)d)g)j)m*c*e/_3u>xQ#eQR6w0^R0_(^!}!pOR!b!d!f!h!i!j!k!m!n!o!p!s#P#R#T#U#V#W#X#Y#Z#i'o'q's'u(O(W(Y(c)V)Z)^)a)d)g)j)m*c*e/_3u>xQ#fQR6y0`R0a(_!Z!tOR!h!i!n!o!p!s#P#R#T#U#V#W#X#Y#Z(O)V)Z)^)a)d)g)j)m3u>xc#QOR!h!n!o!p!s#R>xc#ZOR!h!n!o!p!s#R>xR)n#Zb#QOR!h!n!o!p!s#R>xT)l#Z)mg#YOR!h!n!o!p!s#R#Z)m>xR)k#Yb#QOR!h!n!o!p!s#R>xS)i#Y)jT)l#Z)mk#XOR!h!n!o!p!s#R#Y#Z)j)m>xR)h#Xb#QOR!h!n!o!p!s#R>xS)f#X)gS)i#Y)jT)l#Z)mo#WOR!h!n!o!p!s#R#X#Y#Z)g)j)m>xR)e#Wb#QOR!h!n!o!p!s#R>xS)c#W)dS)f#X)gS)i#Y)jT)l#Z)ms#VOR!h!n!o!p!s#R#W#X#Y#Z)d)g)j)m>xR)b#Vb#QOR!h!n!o!p!s#R>xS)`#V)aS)c#W)dS)f#X)gS)i#Y)jT)l#Z)mw#UOR!h!n!o!p!s#R#V#W#X#Y#Z)a)d)g)j)m>xR)_#Ub#QOR!h!n!o!p!s#R>xS)]#U)^S)`#V)aS)c#W)dS)f#X)gS)i#Y)jT)l#Z)m{#TOR!h!n!o!p!s#R#U#V#W#X#Y#Z)^)a)d)g)j)m>xR)[#Tb#QOR!h!n!o!p!s#R>xS)Y#T)ZS)]#U)^S)`#V)aS)c#W)dS)f#X)gS)i#Y)jT)l#Z)m!P#POR!h!n!o!p!s#R#T#U#V#W#X#Y#Z)Z)^)a)d)g)j)m>xR)W#P`#ROR!h!n!o!p!s>xR)X#Rb!vOR!h!n!o!p!s#R>xS(O!i3uQ(b(OS)U#P)VS)Y#T)ZS)]#U)^S)`#V)aS)c#W)dS)f#X)gS)i#Y)jT)l#Z)mS*j#l*hR2R*jU*e#i(c*cR2O*eQ){#]Q)}#^Q*P#_Q*R#`Q*T#aQ*V#bQ*X#cQ*Z#dQ*]#eQ*_#fx1p){)}*P*R*T*V*X*Z*]*_1q1r1s1t1u1v1w1x1y1zQ1q)|Q1r*OQ1s*QQ1t*SQ1u*UQ1v*WQ1w*YQ1x*[Q1y*^R1z*`S*x#w*vR2]*xQ+z%U[3O+z3R5Z8e9s<]S3R+{,QQ5Z.eQ8e3aS9s5[5^R<]9t%O+|%U%Z%^%c+z+{,Q,X,[,^,a,e,f,h.e.j.m.r3P3R3a3g3h3k3l3n3p3r3s5Z5[5^5c5f5h5k5o5p5r8V8e8h8j8k8m8n8o8p8r8s8t9q9s9t9y9z9}:O:Q:S:U:V;h;k;m;n;p;q;s<[<]<`<b<c<e<f<g<h<j<k<l=f=h=r=u=w=x=z={=}>j>lS3S+|3`R3`,OY3]+}3T3Y8d;[R8c3]Q8Z3UR;_8ZQ,X%ZQ,^%^Q,e%c!Y3e,X,^,e3h3l3s5c5h5o8h8k8n8r9z:O:V;k;m;p;s<`<c<f<j=u=w=z=}Q3h,[Q3l,aQ3s,hQ5c.jQ5h.mQ5o.rQ8h3gQ8k3kQ8n3nQ8r3rQ9z5fQ:O5kQ:V5rQ;k8jQ;m8mQ;p8pQ;s8tQ<`9yQ<c9}Q<f:QQ<j:UQ=u<bQ=w<eQ=z<hR=}<lQ%v}S,r%v/TR/T'ZS&_!_>wS-Q&_7nQ-R&`R7n>ub's!b!d!f!j!k'o'q'u/_R/v'sQ/l'kR6]/lS(Y!m(WR0X(YQ)m#ZR1e)mQ)j#YR1d)jQ)g#XR1c)gQ)d#WR1b)dQ)a#VR1a)aQ)^#UR1`)^Q)Z#TR1_)ZQ)V#PR1^)V!Z!uOR!h!i!n!o!p!s#P#R#T#U#V#W#X#Y#Z(O)V)Z)^)a)d)g)j)m3u>x!Y!tOR!h!i!n!o!p!s#P#R#T#U#V#W#X#Y#Z(O)V)Z)^)a)d)g)j)m3u>xV(X!m(W(Y!nPOR!h!i!m!n!o!p!s#P#R#T#U#V#W#X#Y#Z#i#w(O(W(Y(c)V)Z)^)a)d)g)j)m*c*e*v*x3u>xV*i#l*h*j!`!rOR!h!i!m!n!o!p!s#P#R#T#U#V#W#X#Y#Z(O(W(Y)V)Z)^)a)d)g)j)m3u>xW*d#i(c*c*eV*w#w*v*x]3W+}3T3Y3]8d;[e'm!b!d!f!j!k'o'q's'u/_c!vOR!h!n!o!p!s#R>x",nodeNames:"⚠ VerbContent LstInlineContent LiteralArgContent SpaceDelimitedLiteralArgContent VerbatimContent Csname TrailingWhitespaceOnly TrailingContent Begin End RefCtrlSeq RefStarrableCtrlSeq CiteCtrlSeq CiteStarrableCtrlSeq LabelCtrlSeq MathTextCtrlSeq HboxCtrlSeq TitleCtrlSeq DocumentClassCtrlSeq UsePackageCtrlSeq HrefCtrlSeq UrlCtrlSeq VerbCtrlSeq LstInlineCtrlSeq IncludeGraphicsCtrlSeq CaptionCtrlSeq DefCtrlSeq LetCtrlSeq LeftCtrlSeq RightCtrlSeq NewCommandCtrlSeq RenewCommandCtrlSeq NewEnvironmentCtrlSeq RenewEnvironmentCtrlSeq BookCtrlSeq PartCtrlSeq ChapterCtrlSeq SectionCtrlSeq SubSectionCtrlSeq SubSubSectionCtrlSeq ParagraphCtrlSeq SubParagraphCtrlSeq InputCtrlSeq IncludeCtrlSeq ItemCtrlSeq NewTheoremCtrlSeq TheoremStyleCtrlSeq CenteringCtrlSeq BibliographyCtrlSeq BibliographyStyleCtrlSeq AuthorCtrlSeq AffilCtrlSeq AffiliationCtrlSeq DateCtrlSeq MaketitleCtrlSeq TextColorCtrlSeq ColorBoxCtrlSeq HLineCtrlSeq TopRuleCtrlSeq MidRuleCtrlSeq BottomRuleCtrlSeq MultiColumnCtrlSeq ParBoxCtrlSeq TextBoldCtrlSeq TextItalicCtrlSeq TextSmallCapsCtrlSeq TextTeletypeCtrlSeq TextMediumCtrlSeq TextSansSerifCtrlSeq TextSuperscriptCtrlSeq TextSubscriptCtrlSeq TextStrikeOutCtrlSeq EmphasisCtrlSeq UnderlineCtrlSeq SetLengthCtrlSeq FootnoteCtrlSeq EndnoteCtrlSeq DocumentEnvName TabularEnvName EquationEnvName EquationArrayEnvName VerbatimEnvName TikzPictureEnvName FigureEnvName ListEnvName TableEnvName OpenParenCtrlSym CloseParenCtrlSym OpenBracketCtrlSym CloseBracketCtrlSym LineBreakCtrlSym Comment LaTeX Text BlankLine KnownEnvironment DocumentEnvironment BeginEnv EnvNameGroup OpenBrace CloseBrace OptionalArgument OpenBracket ShortOptionalArg Command KnownCommand Title Whitespace TextArgument LongArg CloseBracket NonEmptyGroup Environment BeginEnv EnvNameGroup EnvName Content EndEnv Author Affil Affiliation Date ShortTextArgument ShortArg NonEmptyGroup DocumentClass DocumentClassArgument BibliographyCommand BibliographyArgument BibliographyStyleCommand BibliographyStyleArgument UsePackage PackageArgument TextColorCommand ColorBoxCommand HrefCommand UrlArgument NewTheoremCommand TheoremStyleCommand UrlCommand VerbCommand LstInlineCommand IncludeGraphics IncludeGraphicsArgument FilePathArgument Caption Label LabelArgument Ref RefArgument Cite BibKeyArgument Def CtrlSym MacroParameter OptionalMacroParameter DefinitionArgument NewLine DefinitionFragment DefinitionFragmentCommand DefinitionFragmentUnknownCommand CtrlSeq DefinitionFragmentArgument KnownCtrlSym LineBreak Group Dollar Normal Ampersand Tilde SectioningCommand SectioningArgument Let Hbox NewCommand RenewCommand NewEnvironment RenewEnvironment Input InputArgument BareFilePathArgument Include IncludeArgument Centering Item Maketitle HorizontalLine MultiColumn SpanArgument ColumnArgument TabularArgument TabularContent MathTextCommand ParBoxCommand TextBoldCommand TextItalicCommand TextSmallCapsCommand TextTeletypeCommand TextMediumCommand TextSansSerifCommand TextSuperscriptCommand TextSubscriptCommand StrikeOutCommand EmphasisCommand UnderlineCommand SetLengthCommand FootnoteCommand EndnoteCommand UnknownCommand DollarMath InlineMath Math MathCommand KnownCommand Title Author Affil Affiliation Date DocumentClass DocumentClassArgument BibliographyCommand BibliographyArgument BibliographyStyleCommand BibliographyStyleArgument UsePackage TextColorCommand MathArgument ColorBoxCommand HrefCommand NewTheoremCommand TheoremStyleCommand UrlCommand VerbCommand LstInlineCommand IncludeGraphics IncludeGraphicsArgument Caption Label Ref Cite Def Let Hbox NewCommand RenewCommand NewEnvironment RenewEnvironment Input InputArgument Include IncludeArgument Centering Item Maketitle HorizontalLine MultiColumn SpanArgument ColumnArgument MathTextCommand ParBoxCommand TextBoldCommand TextItalicCommand TextSmallCapsCommand TextTeletypeCommand TextMediumCommand TextSansSerifCommand TextSuperscriptCommand TextSubscriptCommand StrikeOutCommand EmphasisCommand UnderlineCommand SetLengthCommand FootnoteCommand EndnoteCommand MathUnknownCommand Group MathDelimitedGroup MathOpening MathDelimiter MathClosing MathSpecialChar Number MathChar DisplayMath BracketMath OpenBracketMath CloseBracketMath ParenMath OpenParenMath CloseParenMath NonEmptyGroup EndEnv TabularEnvironment BeginEnv EnvNameGroup Content EndEnv EquationEnvironment BeginEnv EnvNameGroup Content EndEnv EquationArrayEnvironment BeginEnv EnvNameGroup EndEnv VerbatimEnvironment BeginEnv EnvNameGroup Content EndEnv TikzPictureEnvironment BeginEnv EnvNameGroup Content TikzPictureContent NonEmptyGroup EndEnv FigureEnvironment BeginEnv EnvNameGroup EndEnv ListEnvironment BeginEnv EnvNameGroup EndEnv TableEnvironment BeginEnv EnvNameGroup EndEnv Group Book SectioningCommand Content Part SectioningCommand Content Chapter SectioningCommand Content Section SectioningCommand Content SubSection SectioningCommand Content SubSubSection SectioningCommand Content Paragraph SectioningCommand Content SubParagraph SectioningCommand Content",maxTerm:440,context:d,nodeProps:[["group",-10,97,113,294,299,304,308,313,320,324,328,"$Environment",-3,210,286,289,"$MathContainer",-8,333,336,339,342,345,348,351,354,"$Section"],["closedBy",100,"CloseBrace",103,"CloseBracket",287,"CloseBracketMath",290,"CloseParenMath"],["openedBy",101,"OpenBrace",111,"OpenBracket",288,"OpenBracketMath",291,"OpenParenMath"]],skippedNodes:[0,92],repeatNodeCount:24,tokenData:"!Hy~R!ROX$[XY'mYZ'xZp$[pq'mqs$[st(Ytu)Yuv)_vw*Owx$[xy*Tyz.]z{/}{|+u|}$[}!O+u!O!P1o!P!Q3T!Q!R4u!R!S6i!S!T7h!T!U8g!U!V9f!V!W:e!W!X;d!X!Y<c!Y!Z=b!Z![>a![!^$[!^!_+u!_!`?`!`!a+u!a!c$[!c!}AQ!}#OCc#O#PCj#P#Q!EZ#Q#R!Eb#R#S!F[#S#T$[#T#oAQ#o#p!GU#p#q!GZ#q#r!Ho#r#s!Ht#s;'S$[;'S;=`'g<%lO$[T$cc'WS$nPOX$[Zp$[pq%nqs$[st&cwx$[x|%n|}$[}!O%n!O!P$[!P![%n![!^$[!^!a%n!a!}$[#S#o$[#p#q$[#s;'S$[;'S;=`'g<%lO$[P%sW$nPOX%nZs%nw!}%n#S#o%n#p#q%n#s;'S%n;'S;=`&]<%lO%nP&`P;=`<%l%nS&h]'WSOX&cZp&cqt&cwx&c|}&c!O!P&c![!^&c!a!}&c#S#o&c#p#q&c#s;'S&c;'S;=`'a<%lO&cS'dP;=`<%l&cT'jP;=`<%l$[~'rQ#`~XY'mpq'm~'}P$d~YZ(Q~(VP#R~YZ(QT(a])gP'WSOX&cZp&cqt&cwx&c|}&c!O!P&c![!^&c!a!}&c#S#o&c#p#q&c#s;'S&c;'S;=`'a<%lO&c~)_O$m~~)dT#O~OY)_YZ)sZ;'S)_;'S;=`)x<%lO)_~)xO#O~~){P;=`<%l)_~*TO$o~]*^g)yW'US$nPOX%nZs%nwx%nxy+uyz+uz{+u{|+u|}%n}!O+u!O!P%n!P!Q+u!Q!^%n!^!_+u!_!`+u!`!a+u!a!}%n#Q#R-e#R#S-e#S#o%n#p#q%n#s;'S%n;'S;=`&]<%lO%nT+|g'US$nPOX%nZs%nwx%nxy+uyz+uz{+u{|+u|}%n}!O+u!O!P%n!P!Q+u!Q!^%n!^!_+u!_!`+u!`!a+u!a!}%n#Q#R-e#R#S-e#S#o%n#p#q%n#s;'S%n;'S;=`&]<%lO%nS-jZ'USxy-eyz-ez{-e{|-e}!O-e!P!Q-e!^!_-e!_!`-e!`!a-e#Q#R-e#R#S-e].fg)zW'US$nPOX%nZs%nwx%nxy+uyz+uz{+u{|+u|}%n}!O+u!O!P%n!P!Q+u!Q!^%n!^!_+u!_!`+u!`!a+u!a!}%n#Q#R-e#R#S-e#S#o%n#p#q%n#s;'S%n;'S;=`&]<%lO%nV0Wg)jQ'US$nPOX%nZs%nwx%nxy+uyz+uz{+u{|+u|}%n}!O+u!O!P%n!P!Q+u!Q!^%n!^!_+u!_!`+u!`!a+u!a!}%n#Q#R-e#R#S-e#S#o%n#p#q%n#s;'S%n;'S;=`&]<%lO%n]1xc*iW'WS$nPOX$[Zp$[pq%nqs$[st&cwx$[x|%n|}$[}!O%n!O!P$[!P![%n![!^$[!^!a%n!a!}$[#S#o$[#p#q$[#s;'S$[;'S;=`'g<%lO$[]3^g)wW'US$nPOX%nZs%nwx%nxy+uyz+uz{+u{|+u|}%n}!O+u!O!P%n!P!Q+u!Q!^%n!^!_+u!_!`+u!`!a+u!a!}%n#Q#R-e#R#S-e#S#o%n#p#q%n#s;'S%n;'S;=`&]<%lO%nT4|['VS$nPOX%nZs%nw!O%n!O!P5r!P!Q%n!Q![4u![!}%n#S#o%n#p#q%n#s;'S%n;'S;=`&]<%lO%nT5yY'VS$nPOX%nZs%nw!Q%n!Q![5r![!}%n#S#o%n#p#q%n#s;'S%n;'S;=`&]<%lO%nV6r[)kQ'VS$nPOX%nZs%nw!O%n!O!P5r!P!Q%n!Q![4u![!}%n#S#o%n#p#q%n#s;'S%n;'S;=`&]<%lO%nV7q[)lQ'VS$nPOX%nZs%nw!O%n!O!P5r!P!Q%n!Q![4u![!}%n#S#o%n#p#q%n#s;'S%n;'S;=`&]<%lO%nV8p[)mQ'VS$nPOX%nZs%nw!O%n!O!P5r!P!Q%n!Q![4u![!}%n#S#o%n#p#q%n#s;'S%n;'S;=`&]<%lO%nV9o[)nQ'VS$nPOX%nZs%nw!O%n!O!P5r!P!Q%n!Q![4u![!}%n#S#o%n#p#q%n#s;'S%n;'S;=`&]<%lO%nV:n[)oQ'VS$nPOX%nZs%nw!O%n!O!P5r!P!Q%n!Q![4u![!}%n#S#o%n#p#q%n#s;'S%n;'S;=`&]<%lO%nV;m[)pQ'VS$nPOX%nZs%nw!O%n!O!P5r!P!Q%n!Q![4u![!}%n#S#o%n#p#q%n#s;'S%n;'S;=`&]<%lO%nV<l[)qQ'VS$nPOX%nZs%nw!O%n!O!P5r!P!Q%n!Q![4u![!}%n#S#o%n#p#q%n#s;'S%n;'S;=`&]<%lO%nV=k[)rQ'VS$nPOX%nZs%nw!O%n!O!P5r!P!Q%n!Q![4u![!}%n#S#o%n#p#q%n#s;'S%n;'S;=`&]<%lO%nV>j[)sQ'VS$nPOX%nZs%nw!O%n!O!P5r!P!Q%n!Q![4u![!}%n#S#o%n#p#q%n#s;'S%n;'S;=`&]<%lO%nV?ig)uQ'US$nPOX%nZs%nwx%nxy+uyz+uz{+u{|+u|}%n}!O+u!O!P%n!P!Q+u!Q!^%n!^!_+u!_!`+u!`!a+u!a!}%n#Q#R-e#R#S-e#S#o%n#p#q%n#s;'S%n;'S;=`&]<%lO%nVAZg#hQ'WS$nPOX$[Zp$[pq%nqs$[st&cwx$[xz%nz{Br{|%n|}$[}!O%n!O!P$[!P![%n![!^$[!^!a%n!a!c$[!c!}AQ#S#T$[#T#oAQ#p#q$[#s;'S$[;'S;=`'g<%lO$[RByW#hQ$nPOX%nZs%nw!}%n#S#o%n#p#q%n#s;'S%n;'S;=`&]<%lO%n_CjO){W#ZV]CmjO!cE_!c!fEd!f!gEo!g!wEd!w!xHw!x!yNk!y!}Ed!}#TE_#T#UEd#U#V! }#V#WEd#W#X!%S#X#`Ed#`#a!([#a#fEd#f#g!2y#g#iEd#i#j!=h#j#k!C[#k#oEd#o#p!Dn#p#q!Du#q#r!D|#r;'SE_;'S;=`!ET<%lOE_TEdO$`TTEiQ$hT!c!}Ed#T#oEd]EtS$hT!c!}Ed#T#cEd#c#dFQ#d#oEd]FVS$hT!c!}Ed#T#kEd#k#lFc#l#oEd]FhS$hT!c!}Ed#T#bEd#b#cFt#c#oEd]FyR$hT!c!}Ed#T#UGS#U#oEd]GXS$hT!c!}Ed#T#fEd#f#gGe#g#oEd]GjS$hT!c!}Ed#T#fEd#f#gGv#g#oEd]G{S$hT!c!}Ed#T#cEd#c#dHX#d#oEd]H^S$hT!c!}Ed#T#kEd#k#lHj#l#oEd]HqQ*ZW$hT!c!}Ed#T#oEd]H|S$hT!c!}Ed#T#dEd#d#eIY#e#oEd]I_T$hT!c!}Ed#T#UIn#U#WEd#W#XKc#X#oEd]IsS$hT!c!}Ed#T#fEd#f#gJP#g#oEd]JUS$hT!c!}Ed#T#fEd#f#gJb#g#oEd]JgS$hT!c!}Ed#T#cEd#c#dJs#d#oEd]JxS$hT!c!}Ed#T#kEd#k#lKU#l#oEd]K]Q*YW$hT!c!}Ed#T#oEd]KhS$hT!c!}Ed#T#cEd#c#dKt#d#oEd]KyS$hT!c!}Ed#T#kEd#k#lLV#l#oEd]L[S$hT!c!}Ed#T#bEd#b#cLh#c#oEd]LmR$hT!c!}Ed#T#ULv#U#oEd]L{S$hT!c!}Ed#T#fEd#f#gMX#g#oEd]M^S$hT!c!}Ed#T#fEd#f#gMj#g#oEd]MoS$hT!c!}Ed#T#cEd#c#dM{#d#oEd]NQS$hT!c!}Ed#T#kEd#k#lN^#l#oEd]NeQ*]W$hT!c!}Ed#T#oEd]NpS$hT!c!}Ed#T#XEd#X#YN|#Y#oEd]! RS$hT!c!}Ed#T#fEd#f#g! _#g#oEd]! dS$hT!c!}Ed#T#hEd#h#i! p#i#oEd]! wQ*dW$hT!c!}Ed#T#oEd]!!SR$hT!c!}Ed#T#U!!]#U#oEd]!!bS$hT!c!}Ed#T#VEd#V#W!!n#W#oEd]!!sS$hT!c!}Ed#T#_Ed#_#`!#P#`#oEd]!#US$hT!c!}Ed#T#gEd#g#h!#b#h#oEd]!#gS$hT!c!}Ed#T#`Ed#`#a!#s#a#oEd]!#xR$hT!c!}Ed#T#U!$R#U#oEd]!$WS$hT!c!}Ed#T#gEd#g#h!$d#h#oEd]!$iS$hT!c!}Ed#T#[Ed#[#]!$u#]#oEd]!$|Q*WW$hT!c!}Ed#T#oEd]!%XS$hT!c!}Ed#T#cEd#c#d!%e#d#oEd]!%jS$hT!c!}Ed#T#kEd#k#l!%v#l#oEd]!%{S$hT!c!}Ed#T#bEd#b#c!&X#c#oEd]!&^R$hT!c!}Ed#T#U!&g#U#oEd]!&lS$hT!c!}Ed#T#fEd#f#g!&x#g#oEd]!&}S$hT!c!}Ed#T#fEd#f#g!'Z#g#oEd]!'`S$hT!c!}Ed#T#cEd#c#d!'l#d#oEd]!'qS$hT!c!}Ed#T#kEd#k#l!'}#l#oEd]!(UQ*^W$hT!c!}Ed#T#oEd]!(aZ$hT!c!xEd!x!y!)S!y!}Ed#T#U!*f#U#V!,Z#V#W!.`#W#YEd#Y#Z!/r#Z#jEd#j#k!1g#k#oEd]!)XS$hT!c!}Ed#T#XEd#X#Y!)e#Y#oEd]!)jS$hT!c!}Ed#T#fEd#f#g!)v#g#oEd]!){S$hT!c!}Ed#T#hEd#h#i!*X#i#oEd]!*`Q*`W$hT!c!}Ed#T#oEd]!*kS$hT!c!}Ed#T#bEd#b#c!*w#c#oEd]!*|S$hT!c!}Ed#T#ZEd#Z#[!+Y#[#oEd]!+_S$hT!c!}Ed#T#`Ed#`#a!+k#a#oEd]!+pS$hT!c!}Ed#T#XEd#X#Y!+|#Y#oEd]!,TQ*UW$hT!c!}Ed#T#oEd]!,`S$hT!c!}Ed#T#fEd#f#g!,l#g#oEd]!,qR$hT!c!}Ed#T#U!,z#U#oEd]!-PS$hT!c!}Ed#T#VEd#V#W!-]#W#oEd]!-bU$hT!c!}Ed#T#XEd#X#Y!-t#Y#_Ed#_#`!.R#`#oEd]!-{Q*eW$hT!c!}Ed#T#oEd]!.YQ*gW$hT!c!}Ed#T#oEd]!.eS$hT!c!}Ed#T#XEd#X#Y!.q#Y#oEd]!.vS$hT!c!}Ed#T#]Ed#]#^!/S#^#oEd]!/XS$hT!c!}Ed#T#`Ed#`#a!/e#a#oEd]!/lQ*SW$hT!c!}Ed#T#oEd]!/wS$hT!c!}Ed#T#`Ed#`#a!0T#a#oEd]!0YS$hT!c!}Ed#T#cEd#c#d!0f#d#oEd]!0kS$hT!c!}Ed#T#cEd#c#d!0w#d#oEd]!0|S$hT!c!}Ed#T#fEd#f#g!1Y#g#oEd]!1aQ*QW$hT!c!}Ed#T#oEd]!1lS$hT!c!}Ed#T#XEd#X#Y!1x#Y#oEd]!1}S$hT!c!}Ed#T#fEd#f#g!2Z#g#oEd]!2`S$hT!c!}Ed#T#hEd#h#i!2l#i#oEd]!2sQ*_W$hT!c!}Ed#T#oEd]!3OZ$hT!c!xEd!x!y!3q!y!}Ed#T#U!5T#U#V!6x#V#W!8}#W#YEd#Y#Z!:a#Z#jEd#j#k!<U#k#oEd]!3vS$hT!c!}Ed#T#XEd#X#Y!4S#Y#oEd]!4XS$hT!c!}Ed#T#fEd#f#g!4e#g#oEd]!4jS$hT!c!}Ed#T#hEd#h#i!4v#i#oEd]!4}Q*aW$hT!c!}Ed#T#oEd]!5YS$hT!c!}Ed#T#bEd#b#c!5f#c#oEd]!5kS$hT!c!}Ed#T#ZEd#Z#[!5w#[#oEd]!5|S$hT!c!}Ed#T#`Ed#`#a!6Y#a#oEd]!6_S$hT!c!}Ed#T#XEd#X#Y!6k#Y#oEd]!6rQ*VW$hT!c!}Ed#T#oEd]!6}S$hT!c!}Ed#T#fEd#f#g!7Z#g#oEd]!7`R$hT!c!}Ed#T#U!7i#U#oEd]!7nS$hT!c!}Ed#T#VEd#V#W!7z#W#oEd]!8PU$hT!c!}Ed#T#XEd#X#Y!8c#Y#_Ed#_#`!8p#`#oEd]!8jQ*fW$hT!c!}Ed#T#oEd]!8wQ*hW$hT!c!}Ed#T#oEd]!9SS$hT!c!}Ed#T#XEd#X#Y!9`#Y#oEd]!9eS$hT!c!}Ed#T#]Ed#]#^!9q#^#oEd]!9vS$hT!c!}Ed#T#`Ed#`#a!:S#a#oEd]!:ZQ*TW$hT!c!}Ed#T#oEd]!:fS$hT!c!}Ed#T#`Ed#`#a!:r#a#oEd]!:wS$hT!c!}Ed#T#cEd#c#d!;T#d#oEd]!;YS$hT!c!}Ed#T#cEd#c#d!;f#d#oEd]!;kS$hT!c!}Ed#T#fEd#f#g!;w#g#oEd]!<OQ*RW$hT!c!}Ed#T#oEd]!<ZS$hT!c!}Ed#T#XEd#X#Y!<g#Y#oEd]!<lS$hT!c!}Ed#T#fEd#f#g!<x#g#oEd]!<}S$hT!c!}Ed#T#hEd#h#i!=Z#i#oEd]!=bQ*bW$hT!c!}Ed#T#oEd]!=mS$hT!c!}Ed#T#dEd#d#e!=y#e#oEd]!>OT$hT!c!}Ed#T#U!>_#U#WEd#W#X!@S#X#oEd]!>dS$hT!c!}Ed#T#fEd#f#g!>p#g#oEd]!>uS$hT!c!}Ed#T#fEd#f#g!?R#g#oEd]!?WS$hT!c!}Ed#T#cEd#c#d!?d#d#oEd]!?iS$hT!c!}Ed#T#kEd#k#l!?u#l#oEd]!?|Q*XW$hT!c!}Ed#T#oEd]!@XS$hT!c!}Ed#T#cEd#c#d!@e#d#oEd]!@jS$hT!c!}Ed#T#kEd#k#l!@v#l#oEd]!@{S$hT!c!}Ed#T#bEd#b#c!AX#c#oEd]!A^R$hT!c!}Ed#T#U!Ag#U#oEd]!AlS$hT!c!}Ed#T#fEd#f#g!Ax#g#oEd]!A}S$hT!c!}Ed#T#fEd#f#g!BZ#g#oEd]!B`S$hT!c!}Ed#T#cEd#c#d!Bl#d#oEd]!BqS$hT!c!}Ed#T#kEd#k#l!B}#l#oEd]!CUQ*[W$hT!c!}Ed#T#oEd]!CaS$hT!c!}Ed#T#XEd#X#Y!Cm#Y#oEd]!CrS$hT!c!}Ed#T#fEd#f#g!DO#g#oEd]!DTS$hT!c!}Ed#T#hEd#h#i!Da#i#oEd]!DhQ*cW$hT!c!}Ed#T#oEd]!DuO)}W$`T]!D|O*PW$`T]!ETO*OW$`TT!EWP;=`<%lE_]!EbO)|W#cTT!EiZ)iP'USxy-eyz-ez{-e{|-e}!O-e!P!Q-e!^!_-e!_!`-e!`!a-e#Q#R-e#R#S-eT!FcZ)hP'USxy-eyz-ez{-e{|-e}!O-e!P!Q-e!^!_-e!_!`-e!`!a-e#Q#R-e#R#S-e~!GZO#W~]!Gdc)xW'WS$nPOX$[Zp$[pq%nqs$[st&cwx$[x|%n|}$[}!O%n!O!P$[!P![%n![!^$[!^!a%n!a!}$[#S#o$[#p#q$[#s;'S$[;'S;=`'g<%lO$[~!HtO#X~~!HyO$p~",tokenizers:[h,u,g,f,p,T,P,0,1,2,3,S,Q],topRules:{LaTeX:[0,93]},specialized:[{term:162,get:(e,t)=>N(e)<<1,external:N},{term:116,get:(e,t)=>V(e)<<1,external:V},{term:154,get:(e,t)=>Z(e)<<1,external:Z}],tokenPrec:18555})},46039:(e,t,n)=>{"use strict";n.d(t,{aO:()=>s,xl:()=>l});n(97107);var r=n(14041),o=n(95896),i=n(31085);const a=(0,r.createContext)(void 0),s=e=>{let{children:t}=e;const[n,r]=(0,o.A)(null,"editor.view"),s={view:n,setView:r};return(0,i.jsx)(a.Provider,{value:s,children:t})},l=()=>{const e=(0,r.useContext)(a);if(!e)throw new Error("useEditorViewContext is only available inside EditorViewProvider");return e}},46094:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});n(82438),n(50020);var r=n(14041),o=n(97434),i=n(92956),a=n(31085);function s(e){let{issue:t,name:n}=e;const{t:r}=(0,o.Bd)();switch(n){case"sizeCheck":return(0,a.jsx)(i.A,{headerTitle:r("project_too_large"),formattedContent:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{children:r("project_too_large_please_reduce")}),(0,a.jsx)("ul",{className:"list-no-margin-bottom",children:t.resources.map((e=>(0,a.jsxs)("li",{children:[e.path," — ",e.kbSize,"kb"]},e.path)))})]}),entryAriaLabel:r("validation_issue_entry_description"),level:"error"});case"conflictedPaths":return(0,a.jsx)(i.A,{headerTitle:r("conflicting_paths_found"),formattedContent:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{children:r("following_paths_conflict")}),(0,a.jsx)("ul",{className:"list-no-margin-bottom",children:t.map((e=>(0,a.jsxs)("li",{children:["/",e.path]},e.path)))})]}),entryAriaLabel:r("validation_issue_entry_description"),level:"error"});case"mainFile":return(0,a.jsx)(i.A,{headerTitle:r("main_file_not_found"),formattedContent:r("please_set_main_file"),entryAriaLabel:r("validation_issue_entry_description"),level:"error"});default:return null}}const l=(0,r.memo)(s)},46910:(e,t,n)=>{"use strict";n.d(t,{O:()=>a,z:()=>i});n(82438),n(2989);var r=n(29587),o=n(16851);const i={"\\textbf":"TextBoldCommand","\\textit":"TextItalicCommand"},a=e=>{const t=(0,r.mv)(e);return n=>{const r=i[n];return e.selection.ranges.every((e=>{const n=t.resolveInner(e.from,-1),i=(0,o.TK)(n,(e=>e.type.is(r)));if(!i)return!1;const a=t.resolveInner(e.to,1),s=(0,o.j1)(i,a);if(!s)return!1;const l=(0,o.TK)(s,(e=>e.type.is(r)));return Boolean(l)}))}}},47200:(e,t,n)=>{"use strict";n.d(t,{CN:()=>s,P4:()=>c});n(82438),n(12266),n(50020);var r=n(29587),o=n(79066);const i=20,a=500;let s=function(e){return e[e.Pending=0]="Pending",e[e.Partial=1]="Partial",e[e.Complete=2]="Complete",e}({});const l=(e,t,n,r)=>!(t<n||e>r);function c(e,t,n,c,d){let h=arguments.length>5&&void 0!==arguments[5]&&arguments[5],u=arguments.length>6?arguments[6]:void 0,m=arguments.length>7?arguments[7]:void 0,p=arguments.length>8&&void 0!==arguments[8]?arguments[8]:{items:[],status:s.Pending};const g=p.status===s.Complete?p.items.filter((e=>!l(e.from,e.to,t,n))).map((e=>function(e,t){if(!t)return e;const{from:n,to:r}=e,o=t.changes.mapPos(n),i=t.changes.mapPos(r),a=t.state.doc.lineAt(o).number;return o===n&&i===r&&a===e.line?e:{...e,from:o,to:i,line:a}}(e,m))):[];p.status!==s.Complete&&(d=e.doc.length,c=0);const f=(0,r.a_)(e,d,h?a:i);return f?(f.iterate({from:c,to:d,enter:t=>u(e,t,g,(e=>l(e.from,e.to,c,d))),mode:o.Qj.IgnoreMounts|o.Qj.IgnoreOverlays}),{status:s.Complete,items:g.sort(((e,t)=>e.from-t.from))}):p.status!==s.Pending?{status:s.Partial,items:p.items}:{items:[],status:s.Pending}}},48130:(e,t,n)=>{"use strict";n.d(t,{Rl:()=>s,dq:()=>i,fy:()=>l});var r=n(29587),o=n(16851);const i=(e,t)=>n=>{let o=(0,r.mv)(n.state).resolveInner(n.pos,-1);for(;o;){if(o.type.is(e))return t(n);o=o.parent}return null};function a(e,t){const n=e.selection.main;if(!n.empty)return!1;const i=n.anchor,a=(0,r.mv)(e);if(a.length<i)return!1;const s=a.resolveInner(i,-1);if(!s.type.is("OpenBrace"))return!1;const l=a.resolveInner(i,1);if(!l.type.is("CloseBrace"))return!1;const c=(0,o.Bw)(s,...t);return!!c&&(c.from===s.from&&c.to===l.to)}function s(e){return a(e,["EnvNameGroup","BibliographyStyleArgument","BibliographyArgument","BibKeyArgument","DocumentClassArgument","FilePathArgument","RefArgument","PackageArgument"])}function l(e){return a(e,["BibKeyArgument"])}},48200:(e,t,n)=>{"use strict";n.d(t,{LI:()=>o,Q_:()=>a,rr:()=>i,u9:()=>s});n(97107);var r=n(14041);const o=(0,r.createContext)(void 0),i=(0,r.createContext)(void 0),a=()=>{const e=(0,r.useContext)(o);if(!e)throw new Error("useCodeMirrorStateContext is only available inside CodeMirrorStateContext.Provider");return e},s=()=>{const e=(0,r.useContext)(i);if(!e)throw new Error("useCodeMirrorViewContext is only available inside CodeMirrorViewContext.Provider");return e}},49008:(e,t,n)=>{"use strict";const r=n(64347).assert,o=n(64331);class i extends o{constructor(e,t){r.integer(e,"RestoreProjectOrigin: bad version"),r.date(t,"RestoreProjectOrigin: bad timestamp"),super(i.KIND),this.version=e,this.timestamp=t}static fromRaw(e){return new i(e.version,new Date(e.timestamp))}toRaw(){return{kind:i.KIND,version:this.version,timestamp:this.timestamp.toISOString()}}getVersion(){return this.version}getTimestamp(){return this.timestamp}}i.KIND="project-restore",e.exports=i},49412:(e,t,n)=>{"use strict";n.d(t,{a6:()=>a,yN:()=>o});var r=n(57195);const o=e=>r.sU.define({create:()=>e,update(e,t){for(const n of t.effects)n.is(i)&&(e=n.value);return e}}),i=r.Pe.define(),a=e=>({effects:i.of(e)})},49438:(e,t,n)=>{"use strict";n.d(t,{I:()=>r});const r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16;return(e=e.replace(/^\.\//,"")).length>t+3&&(e="…"+e.substring(e.length-t).trim()),e}},49791:(e,t,n)=>{"use strict";n.d(t,{M:()=>o});var r=n(14041);const o=()=>{const e=(0,r.useRef)(null);return null===e.current&&"BroadcastChannel"in window&&(e.current=new BroadcastChannel("user")),(0,r.useEffect)((()=>()=>e.current?.close?.()),[]),e.current}},50329:(e,t,n)=>{"use strict";n.d(t,{b:()=>y,A:()=>k});var r={};n.r(r),n.d(r,{default:()=>m});var o=n(14041),i=n(62817),a=n(69954),s=n(97434),l=n(59162),c=n(36155),d=n(71627),h=n(66502),u=n(31085);function m(e){let{logEntry:t,id:n}=e;const{t:r}=(0,s.Bd)(),i=(0,h.A)(t),a=(0,o.useCallback)((()=>{window.dispatchEvent(new CustomEvent("editor:view-compile-log-entry",{detail:{id:n,suggestFix:!0}}))}),[n]);return i?(0,u.jsx)(l.A,{id:`suggest-fix-${n}`,description:r("suggest_fix"),overlayProps:{placement:"bottom"},children:(0,u.jsx)(d.A,{variant:"ghost",className:"icon-button",onClick:a,children:(0,u.jsx)("img",{width:"20",height:"20",alt:"sparkle",className:"ai-error-assistant-sparkle",src:c,"aria-hidden":"true"},"sparkle")})}):null}var p=n(53373),g=n.n(p),f=n(33288),O=n(24639),b=n(96713);const v=[{import:r,path:"/overleaf/services/web/modules/ai/frontend/js/components/ide-redesign/ai-error-assistant-log-header-button"}];const w=function(e){let{sourceLocation:t,level:n,headerTitle:r,logType:i,showSourceLocationLink:a=!0,onSourceLocationClick:c,collapsed:d,onToggleCollapsed:h,id:m,logEntry:p,actionButtonsOverride:w,openCollapseIconOverride:_}=e;const{t:x}=(0,s.Bd)(),y=(0,o.useRef)(null),[k,C]=(0,o.useState)(!1);(0,f.A)(y,k,(function(e){const t=e.target,n=t.scrollWidth>t.clientWidth;C(n)}));const S=t?t.file:null,Q=t?t.line:null,E=g()("log-entry-header-text",{"log-entry-header-text-error":"error"===n,"log-entry-header-text-warning":"warning"===n,"log-entry-header-text-info":"info"===n||"typesetting"===n,"log-entry-header-text-success":"success"===n,"log-entry-header-text-raw":"raw"===n}),T=a&&S?`${S}${Q?`, ${Q}`:""}`:null,j=T?(0,u.jsx)("span",{ref:y,className:"log-entry-location",children:`‪${T}‬`}):null,P=i?`${i} ${r}`:r;return(0,u.jsxs)("header",{className:"log-entry-header-card",children:[(0,u.jsx)(l.A,{id:`expand-collapse-${T}`,description:x(d?"expand":"collapse"),overlayProps:{placement:"bottom"},children:(0,u.jsxs)("button",{"data-action":"expand-collapse","data-collapsed":d,className:"log-entry-header-button",onClick:h,"aria-label":x(d?"expand":"collapse"),children:[(0,u.jsx)(b.A,{type:_??(d?"chevron_right":"expand_more")}),(0,u.jsxs)("div",{className:"log-entry-header-content",children:[(0,u.jsx)("h3",{className:E,children:P}),k&&j&&T?(0,u.jsx)(l.A,{id:T,description:T,overlayProps:{placement:"left"},tooltipProps:{className:"log-location-tooltip"},children:j}):j]})]})}),w??(0,u.jsxs)("div",{className:"log-entry-header-actions",children:[a&&(0,u.jsx)(l.A,{id:`go-to-location-${T}`,description:x("go_to_code_location"),overlayProps:{placement:"bottom"},children:(0,u.jsx)(O.A,{onClick:c,variant:"ghost",icon:"my_location",accessibilityLabel:x("go_to_code_location")})}),v.map((e=>{let{import:{default:t},path:n}=e;return(0,u.jsx)(t,{logEntry:p,id:m},n)}))]})]})};var _=n(14768);function x(e){const[t,n]=(0,o.useState)(0!==e.index);return(0,u.jsx)(y,{...e,collapsed:t,setCollapsed:n})}function y(e){let{ruleId:t,headerTitle:n,rawContent:r,logType:s,formattedContent:l,extraInfoURL:c,level:d,sourceLocation:h,showSourceLocationLink:m=!0,entryAriaLabel:p,contentDetails:f,onSourceLocationClick:O,index:b,logEntry:v,id:x,alwaysExpandRawContent:y=!1,className:k,collapsed:C,setCollapsed:S,actionButtonsOverride:Q,openCollapseIconOverride:E}=e;if(t&&i.A[t]){const e=i.A[t];l=e.formattedContent(f),c=e.extraInfoURL}const T=(0,o.useCallback)((e=>{if(e.preventDefault(),O&&h){O(h);const e=h?.file?.split("."),n=e?.length&&e?.length>1?e.pop():"";(0,a._)("log-entry-link-click",{level:d,ruleId:t,extension:n})}}),[d,O,t,h]);return(0,u.jsxs)("div",{className:g()("log-entry",k),"data-ruleid":t,"data-log-entry-id":x,"aria-label":p,children:[(0,u.jsx)(w,{level:d,sourceLocation:h,headerTitle:n,logType:s,showSourceLocationLink:m,onSourceLocationClick:T,collapsed:C,onToggleCollapsed:()=>S((e=>!e)),id:x,logEntry:v,actionButtonsOverride:Q,openCollapseIconOverride:E}),(0,u.jsx)("div",{className:g()("horizontal-divider",{hidden:C})}),(0,u.jsx)(_.A,{className:g()({hidden:C}),alwaysExpandRawContent:y,rawContent:r,formattedContent:l,extraInfoURL:c,index:b,logEntry:v})]})}const k=(0,o.memo)(x)},50614:(e,t,n)=>{n(97107);const r=n(98695),o=n(45461),i=n(45317),a=n(85544),s=n(90482);function l(e){return null!==e&&"object"==typeof e&&"textOperation"in e}function c(e){return null!==e&&"object"==typeof e&&"commentId"in e&&"ranges"in e&&Array.isArray(e.ranges)}function d(e){return null!==e&&"object"==typeof e&&"deleteComment"in e}function h(e){return null!==e&&"object"==typeof e&&"commentId"in e&&"resolved"in e&&"boolean"==typeof e.resolved}function u(e){return null!==e&&"object"==typeof e&&"noOp"in e}e.exports=class{static fromJSON(e){if(l(e))return i.fromJSON(e);if(c(e))return o.fromJSON(e);if(d(e))return r.fromJSON(e);if(h(e))return a.fromJSON(e);if(u(e))return s.fromJSON();throw new Error("Unsupported operation in EditOperationBuilder.fromJSON")}static isValid(e){return l(e)||c(e)||d(e)||h(e)||u(e)}}},51275:(e,t,n)=>{"use strict";n.d(t,{$3:()=>l,I_:()=>h,Tv:()=>d});var r=n(33829),o=n(69954),i=n(33478),a=n(60961);const s=9,l=(0,r.A)(),c={viewerId:l};function d(){return c}function h(e,t,n){const{timings:r,pdfCachingMinChunkSize:c}=e,d={compileTimeClientE2E:t,compileTimeServerE2E:r?.compileE2E};let h=!0;return{deliveryLatencies:d,firstRenderDone:function(e){let{latencyFetch:t,latencyRender:r,pdfCachingMetrics:u}=e;h&&(h=!1,d.totalDeliveryTime=Math.ceil(performance.now()-n),d.latencyFetch=t,r&&(d.latencyRender=r),i.Hs&&function(e){const t={version:s,...e,id:l};a.$.log("/event/compile-metrics",JSON.stringify(t)),(0,o._)("compile-metrics-v6",t)}({pdfCachingMinChunkSize:c,...d,...u}))}}}},51301:(e,t,n)=>{"use strict";n.d(t,{y:()=>o});var r=n(5383);function o(e){let t=null;return e.node.cursor().iterate((n=>!t&&(n.type.is(r.CenteringCtrlSeq)?(t=n.node,!1):(n.node===e.node||!n.type.is("$Environment"))&&void 0))),t}},52036:(e,t,n)=>{"use strict";n.d(t,{E1:()=>f,VH:()=>g});n(97107);var r=n(14041),o=n(78494),i=n(16896),a=n(45250),s=n(60440),l=n(41479),c=n(6599),d=n(60961),h=n(14020),u=n(55937),m=n(31085);const p=(0,r.createContext)(void 0),g=e=>{let{children:t}=e;const{eventEmitter:n}=(0,o.yn)(),{socket:g}=(0,i.FX)(),{currentDocumentId:f}=(0,u.Wq)(),{fileTreeData:O}=(0,s.Q)(),[b,v]=(0,r.useState)({}),[w,_]=(0,r.useState)({}),[x,y]=(0,r.useState)([]),[k,C]=(0,r.useState)(0),[S,Q]=(0,r.useState)(null),[E,T]=(0,r.useState)(500),j=(0,r.useCallback)((e=>{const t={},n=[],r={};for(const[o,i]of Object.entries(e)){const e={...i},a=i.doc_id;a&&O&&(e.doc=(0,l.p)(O,a)),null!==i.name&&0!==i.name.trim().length||(e.name=i.email?i.email.trim():"Anonymous"),e.initial=i.name?.[0],e.initial&&" "!==e.initial||(e.initial="?"),n.push(e),t[o]=e,null!=a&&null!=i.row&&null!=i.column&&(r[a]||(r[a]=[]),r[a].push({label:i.name,cursor:{row:i.row,column:i.column},hue:(0,h.Om)(i.user_id)}))}return{onlineUsers:t,onlineUsersArray:n,onlineUserCursorHighlights:r,cursorUpdateInterval:n.length>0?500:3e5}}),[O]),P=(0,r.useCallback)((e=>{const t=j(e);v(t.onlineUsers),y(t.onlineUsersArray),C(t.onlineUsersArray.length),_(t.onlineUserCursorHighlights),T(t.cursorUpdateInterval)}),[j,_,v,y,C]);(0,r.useEffect)((()=>{const e=()=>{g.emit("clientTracking.getConnectedUsers",((e,t)=>{if(e)return void d.$.error(e);const n={};for(const e of t)e.client_id!==g.publicId&&(n[e.client_id]={id:e.client_id,user_id:e.user_id,email:e.email,name:`${e.first_name} ${e.last_name}`,doc_id:e.cursorData?.doc_id,row:e.cursorData?.row,column:e.cursorData?.column});P(n)}))};return n.on("project:joined",e),()=>{n.off("project:joined",e)}}),[n,P,v,g]),(0,r.useEffect)((()=>{const e=e=>{let{detail:[t]}=e;t&&Q(t)};return n.on("cursor:editor:update",e),()=>{n.off("cursor:editor:update",e)}}),[E,n]),(0,r.useEffect)((()=>{const e=window.setTimeout((()=>{g.emit("clientTracking.updatePosition",{row:S?.row,column:S?.column,doc_id:f})}),E);return()=>{window.clearTimeout(e)}}),[S,E,f,g]);const $=(0,r.useCallback)((e=>{e.id!==g.publicId&&P({...b,[e.id]:e})}),[b,P,g.publicId]);(0,c.A)(g,"clientTracking.clientUpdated",$);const R=(0,r.useCallback)((e=>{P((0,a.omit)(b,e))}),[b,P]);(0,c.A)(g,"clientTracking.clientDisconnected",R);const X=(0,r.useMemo)((()=>({onlineUsers:b,onlineUsersArray:x,onlineUserCursorHighlights:w,onlineUsersCount:k})),[b,x,w,k]);return(0,m.jsx)(p.Provider,{value:X,children:t})};function f(){const e=(0,r.useContext)(p);if(!e)throw new Error("useOnlineUsersContext is only available inside OnlineUsersProvider");return e}},53969:(e,t,n)=>{"use strict";n.d(t,{L:()=>r});const r=n(83173).Lz.baseTheme({"&dark .table-generator":{"--table-generator-active-border-color":"#ccc","--table-generator-coming-soon-background-color":"#41464f","--table-generator-coming-soon-color":"#fff","--table-generator-divider-color":"rgba(125,125,125,0.3)","--table-generator-dropdown-divider-color":"rgba(125,125,125,0.3)","--table-generator-focus-border-color":"#5d7498","--table-generator-inactive-border-color":"#888","--table-generator-selected-background-color":"#ffffff2a","--table-generator-selector-background-color":"#777","--table-generator-selector-hover-color":"#3265b2","--table-generator-toolbar-background":"#2c3645","--table-generator-toolbar-button-active-background":"rgba(125, 125, 125, 0.4)","--table-generator-toolbar-button-color":"#fff","--table-generator-toolbar-button-hover-background":"rgba(125, 125, 125, 0.2)","--table-generator-toolbar-dropdown-border-color":"rgba(125,125,125,0.3)","--table-generator-toolbar-dropdown-disabled-background":"rgba(125,125,125,0.3)","--table-generator-toolbar-dropdown-disabled-color":"#999","--table-generator-toolbar-dropdown-active-background":"var(--green-10)","--table-generator-toolbar-dropdown-active-color":"var(--green-70)","--table-generator-toolbar-dropdown-active-hover-background":"var(--green-10)","--table-generator-toolbar-dropdown-active-active-background":"var(--green-20)","--table-generator-toolbar-shadow-color":"#1e253029","--table-generator-error-background":"#2c3645","--table-generator-error-color":"#fff","--table-generator-error-border-color":"#677283","--table-generator-column-size-indicator-background":"var(--neutral-80)","--table-generator-column-size-indicator-hover-background":"var(--neutral-70)","--table-generator-column-size-indicator-color":"white","--table-generator-column-size-indicator-hover-color":"white"},"&light .table-generator":{"--table-generator-active-border-color":"#666","--table-generator-coming-soon-background-color":"var(--neutral-10)","--table-generator-coming-soon-color":"var(--neutral-70)","--table-generator-divider-color":"var(--neutral-20)","--table-generator-dropdown-divider-color":"var(--neutral-20)","--table-generator-focus-border-color":"#97b6e5","--table-generator-inactive-border-color":"#dedede","--table-generator-selected-background-color":"var(--blue-10)","--table-generator-selector-background-color":"var(--neutral-30)","--table-generator-selector-hover-color":"#3265b2","--table-generator-toolbar-background":"#fff","--table-generator-toolbar-button-active-background":"rgba(47, 58, 76, 0.16)","--table-generator-toolbar-button-color":"var(--neutral-70)","--table-generator-toolbar-button-hover-background":"rgba(47, 58, 76, 0.08)","--table-generator-toolbar-dropdown-border-color":"var(--neutral-60)","--table-generator-toolbar-dropdown-disabled-background":"#f2f2f2","--table-generator-toolbar-dropdown-disabled-color":"var(--neutral-40)","--table-generator-toolbar-dropdown-active-background":"var(--green-10)","--table-generator-toolbar-dropdown-active-color":"var(--green-70)","--table-generator-toolbar-dropdown-active-hover-background":"var(--green-10)","--table-generator-toolbar-dropdown-active-active-background":"var(--green-20)","--table-generator-toolbar-shadow-color":"#1e253029","--table-generator-error-background":"#F1F4F9","--table-generator-error-color":"black","--table-generator-error-border-color":"#C3D0E3","--table-generator-column-size-indicator-background":"#E7E9EE","--table-generator-column-size-indicator-hover-background":"#D7DADF","--table-generator-column-size-indicator-color":"black","--table-generator-column-size-indicator-hover-color":"black"},".table-generator":{position:"relative","--table-generator-inactive-border-width":"1px","--table-generator-active-border-width":"1px","--table-generator-selector-handle-buffer":"12px","--table-generator-focus-border-width":"2px","--table-generator-focus-negative-border-width":"-2px"},".table-generator-cell.selected":{"background-color":"var(--table-generator-selected-background-color)"},".table-generator-cell:focus-visible":{outline:"2px dotted var(--table-generator-focus-border-color)"},".table-generator-cell":{border:"var(--table-generator-inactive-border-width) dashed var(--table-generator-inactive-border-color)","min-width":"40px",height:"30px","&.selection-edge-top":{"--shadow-top":"0 var(--table-generator-focus-negative-border-width) 0 var(--table-generator-focus-border-color)"},"&.selection-edge-bottom":{"--shadow-bottom":"0 var(--table-generator-focus-border-width) 0 var(--table-generator-focus-border-color)"},"&.selection-edge-left":{"--shadow-left":"var(--table-generator-focus-negative-border-width) 0 0 var(--table-generator-focus-border-color)"},"&.selection-edge-right":{"--shadow-right":"var(--table-generator-focus-border-width) 0 0 var(--table-generator-focus-border-color)"},"box-shadow":"var(--shadow-top, 0 0 0 transparent), var(--shadow-bottom, 0 0 0 transparent), var(--shadow-left, 0 0 0 transparent), var(--shadow-right, 0 0 0 transparent)","&.table-generator-cell-border-left":{"border-left-style":"solid","border-left-color":"var(--table-generator-active-border-color)","border-left-width":"var(--table-generator-active-border-width)"},"&.table-generator-cell-border-right":{"border-right-style":"solid","border-right-color":"var(--table-generator-active-border-color)","border-right-width":"var(--table-generator-active-border-width)"},"&.table-generator-row-border-top":{"border-top-style":"solid","border-top-color":"var(--table-generator-active-border-color)","border-top-width":"var(--table-generator-active-border-width)"},"&.table-generator-row-border-bottom":{"border-bottom-style":"solid","border-bottom-color":"var(--table-generator-active-border-color)","border-bottom-width":"var(--table-generator-active-border-width)"},"& .table-generator-cell-render":{"overflow-x":"auto","overflow-y":"hidden",width:"100%"}},".table-generator-table":{"table-layout":"fixed",width:"95%","max-width":"95%",margin:"0 auto",cursor:"default","& td":{"&:not(.editing)":{padding:"0 0.25em"},"vertical-align":"top","&.alignment-left":{"text-align":"left"},"&.alignment-right":{"text-align":"right"},"&.alignment-center":{"text-align":"center"},"&.alignment-paragraph":{"text-align":"justify"}},"& .table-generator-selector-cell":{padding:"0",border:"none !important",position:"relative",cursor:"pointer","&.row-selector":{width:"calc(var(--table-generator-selector-handle-buffer) + 8px)","&::after":{width:"4px",bottom:"4px",height:"calc(100% - 8px)"}},"&.column-selector":{height:"calc(var(--table-generator-selector-handle-buffer) + 8px)","&::after":{width:"calc(100% - 8px)",height:"4px",right:"4px"}},"&::after":{content:'""',display:"block",position:"absolute",bottom:"8px",right:"8px",width:"calc(100% - 8px)",height:"calc(100% - 8px)","background-color":"var(--table-generator-selector-background-color)","border-radius":"4px"},"&:hover::after":{"background-color":"var(--table-generator-selector-hover-color)"},"&.fully-selected::after":{"background-color":"var(--table-generator-selector-hover-color)"}}},".table-generator-floating-toolbar":{position:"absolute",transform:"translateY(-100%)",left:"0",right:"0",margin:"0 auto","z-index":"152","border-radius":"4px",width:"max-content","justify-content":"start",maxWidth:"100%","background-color":"var(--table-generator-toolbar-background)","box-shadow":"0px 2px 4px 0px var(--table-generator-toolbar-shadow-color)",padding:"4px",display:"flex",flexWrap:"wrap",rowGap:"8px","&.table-generator-toolbar-floating-custom-sizes":{top:"-8px"}},".table-generator-toolbar-button":{display:"inline-flex","align-items":"center","justify-content":"center",margin:"0","background-color":"transparent",border:"none","border-radius":"4px","line-height":"1",overflow:"hidden",color:"var(--table-generator-toolbar-button-color)","text-align":"center",padding:"4px","&:not(first-child)":{"margin-left":"4px"},"&:not(:last-child)":{"margin-right":"4px"},"& > span":{"font-size":"24px"},"&:hover, &:focus":{"background-color":"var(--table-generator-toolbar-button-hover-background)"},"&:active, &.active":{"background-color":"var(--table-generator-toolbar-button-active-background)"},"&:hover, &:focus, &:active, &.active":{"box-shadow":"none"},'&[aria-disabled="true"]':{"&:hover, &:focus, &:active, &.active":{"background-color":"transparent"},opacity:"0.2"}},".toolbar-beta-badge":{padding:"0 4px 2px 12px"},".table-generator-button-group":{display:"inline-flex","align-items":"center","justify-content":"center","line-height":"1",overflow:"hidden","&:not(:last-child)":{"border-right":"1px solid var(--table-generator-divider-color)","padding-right":"8px","margin-right":"8px"}},".table-generator-button-menu-popover":{"background-color":"var(--table-generator-toolbar-background) !important","& .popover-content, & .popover-body":{padding:"4px"},"& .list-group":{margin:"0",padding:"0"},"& > .arrow, & > .popover-arrow":{display:"none"}},".table-generator-cell-input":{color:"inherit","background-color":"transparent",width:"100%","text-align":"inherit",height:"1.5em","min-height":"100%",border:"1px solid var(--table-generator-toolbar-shadow-color)",padding:"0 0.25em",resize:"none","box-sizing":"border-box",overflow:"hidden","&:focus, &:focus-visible":{outline:"2px solid var(--table-generator-focus-border-color)","outline-offset":"-2px"}},".table-generator-border-options-coming-soon":{display:"flex",margin:"4px","font-size":"12px",background:"var(--table-generator-coming-soon-background-color)",color:"var(--table-generator-coming-soon-color)",padding:"8px",gap:"6px","align-items":"flex-start","max-width":"240px","font-family":"var(--bs-body-font-family)","& .info-icon":{flex:" 0 0 24px"}},".table-generator-toolbar-dropdown-toggle":{border:"1px solid var(--table-generator-toolbar-dropdown-border-color)","box-shadow":"none",background:"transparent","white-space":"nowrap",color:"var(--table-generator-toolbar-button-color)","border-radius":"4px",padding:"6px 8px",gap:"8px","min-width":"120px","font-size":"14px",display:"flex","align-items":"center","justify-content":"space-between","font-family":"var(--bs-body-font-family)",height:"36px","&:not(:first-child)":{"margin-left":"8px"},'&[aria-disabled="true"]':{"background-color":"var(--table-generator-toolbar-dropdown-disabled-background)",color:"var(--table-generator-toolbar-dropdown-disabled-color)"}},".table-generator-toolbar-dropdown-popover":{"max-width":"300px",background:"var(--table-generator-toolbar-background) !important","& .popover-content, & .popover-body":{padding:"0"},"& > .arrow, & > .popover-arrow":{display:"none"}},".table-generator-toolbar-dropdown-menu":{display:"flex","flex-direction":"column","min-width":"200px",padding:"4px","& > button":{border:"none","box-shadow":"none",background:"transparent","white-space":"nowrap",color:"var(--table-generator-toolbar-button-color)","border-radius":"4px","font-size":"14px",display:"flex","align-items":"center","justify-content":"flex-start","column-gap":"8px","align-self":"stretch",padding:"12px 8px","font-family":"var(--bs-body-font-family)","& .table-generator-button-label":{"align-self":"stretch",flex:"1 0 auto","text-align":"left"},"&.ol-cm-toolbar-dropdown-option-active":{"background-color":"var(--table-generator-toolbar-dropdown-active-background)",color:"var(--table-generator-toolbar-dropdown-active-color)"},"&:hover, &:focus":{"background-color":"var(--table-generator-toolbar-button-hover-background)"},"&:active, &.active":{"background-color":"var(--table-generator-toolbar-button-active-background)"},"&.ol-cm-toolbar-dropdown-option-active:hover, &.ol-cm-toolbar-dropdown-option-active:focus":{"background-color":"var(--table-generator-toolbar-dropdown-active-hover-background)"},"&.ol-cm-toolbar-dropdown-option-active:active, &.ol-cm-toolbar-dropdown-option-active.active":{"background-color":"var(--table-generator-toolbar-dropdown-active-active-background)"},"&:hover, &:focus, &:active, &.active":{"box-shadow":"none"},'&[aria-disabled="true"]':{"&:hover, &:focus, &:active, &.active":{"background-color":"transparent"},color:"var(--table-generator-toolbar-dropdown-disabled-color)"}},"& > hr":{background:"var(--table-generator-dropdown-divider-color)",margin:"2px 8px",display:"block","box-sizing":"content-box",border:"0",height:"1px"},"& .ol-cm-toolbar-dropdown-option-content":{textAlign:"left",flexGrow:"1"}},".ol-cm-environment-table.table-generator-error-container, .ol-cm-environment-table.ol-cm-tabular":{background:"rgba(125, 125, 125, 0.05)","font-family":"var(--bs-body-font-family)"},".table-generator-filler-row":{border:"none !important","& td":{"min-width":"40px"}},".table-generator-column-indicator-button":{verticalAlign:"middle",borderRadius:"4px",padding:"2px 4px 2px 4px",background:"var(--table-generator-column-size-indicator-background)",margin:0,border:"none",fontFamily:"Lato, sans-serif",fontSize:"12px",lineHeight:"16px",fontWeight:400,display:"flex",maxWidth:"100%",color:"var(--table-generator-column-size-indicator-color)","&:hover":{background:"var(--table-generator-column-size-indicator-hover-background)",color:"var(--table-generator-column-size-indicator-hover-color)"},"& .table-generator-column-indicator-icon":{fontSize:"16px",lineHeight:"16px"},"& .table-generator-column-indicator-label":{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}},".table-generator-column-widths-row":{height:"20px","& td":{lineHeight:"1"}}})},54830:(e,t,n)=>{"use strict";n.d(t,{X:()=>p,i:()=>m});n(97107);var r=n(14041),o=n(37766),i=n(89139),a=n(69954),s=n(25133),l=n(37664),c=n(86316),d=n(55937),h=n(31085);const u=(0,r.createContext)(void 0),m=e=>{let{children:t}=e;const[n,m]=(0,r.useState)(void 0),[p,f]=(0,r.useState)(-1),[O,b]=(0,r.useState)(!1),[v,w]=(0,r.useState)(!1),[_,x]=(0,r.useState)(!1),y=(0,o.A)("editor:gotoLine",!0);(0,i.A)("file-view:file-opened",(0,r.useCallback)((()=>{b(!0)}),[])),(0,i.A)("scroll:editor:update",(0,r.useCallback)((e=>{_?x(!1):f(e.detail+1)}),[_])),(0,i.A)("cursor:editor:update",(0,r.useCallback)((e=>{v?w(!1):f(e.detail.row+1)}),[v])),(0,i.A)("doc:after-opened",(0,r.useCallback)((e=>{e.detail.isNewDoc&&w(!0),b(!1),x(!0)}),[]));const k=(0,r.useCallback)(((e,t)=>{x(!0),y({gotoLine:e,gotoColumn:0,syncToPdf:t}),a._("outline-jump-to-line")}),[y]),C=(0,r.useMemo)((()=>g(n?.items,p)),[n,p]),{openDocName:S}=(0,d.Wq)(),Q=(0,r.useMemo)((()=>!!S&&(0,s.K)(S)),[S]),{projectId:E}=(0,c.Om)(),T=`file_outline.expanded.${E}`,[j,P]=(0,r.useState)((()=>!1!==l.A.getItem(T))),$=Q&&!O,R=(0,r.useCallback)((()=>{$&&(l.A.setItem(T,!j),a._(j?"outline-collapse":"outline-expand"),P(!j))}),[$,j,T]),X=(0,r.useMemo)((()=>({flatOutline:n,setFlatOutline:m,highlightedLine:C,jumpToLine:k,canShowOutline:$,outlineExpanded:j,toggleOutlineExpanded:R})),[n,C,k,$,j,R]);return(0,h.jsx)(u.Provider,{value:X,children:t})},p=()=>{const e=(0,r.useContext)(u);if(!e)throw new Error("useOutlineProvider is only available inside OutlineProvider");return e},g=(e,t)=>{if(!e)return-1;let n=-1;for(const r of e){if(r.line>t)return n;n=r.line}return n}},55937:(e,t,n)=>{"use strict";n.d(t,{Wq:()=>l,d9:()=>s});n(97107);var r=n(14041),o=n(95896),i=n(31085);const a=(0,r.createContext)(void 0),s=e=>{let{children:t}=e;const[n,s]=(0,o.A)(null,"editor.open_doc_id"),[l,c]=(0,o.A)(null,"editor.open_doc_name"),[d,h]=(0,r.useState)(null),u={currentDocumentId:n,setCurrentDocumentId:s,openDocName:l,setOpenDocName:c,currentDocument:d,setCurrentDocument:h};return(0,i.jsx)(a.Provider,{value:u,children:t})},l=()=>{const e=(0,r.useContext)(a);if(!e)throw new Error("useEditorOpenDocContext is only available inside EditorOpenDocContext.Provider");return e}},56447:(e,t,n)=>{"use strict";n.d(t,{UY:()=>y,LV:()=>k});n(97107);var r=n(14041),o=n(93588),i=n(64932),a=n(69139),s=n(69954),l=n(28699),c=n(60961);const d=(0,i.A)("ol-debugPdfDetach");var h=n(37664),u=n(37766),m=n(89139),p=n(94857),g=n(22440),f=n(70569),O=n(42093),b=n(68853),v=n(31085);const w=(0,i.A)("ol-debugPdfDetach"),_=(0,r.createContext)(void 0);const x=`ui.reviewPanelOpen.${(0,i.A)("ol-project_id")}`,y=e=>{let{children:t}=e;const[n,i]=(0,r.useState)("editor"),[y,k]=(0,r.useState)(null),C=(0,u.A)("history:toggle",!0),{isOpen:S,setIsOpen:Q}=(0,f.h)(),[E,T]=(0,r.useState)(S),j=(0,r.useRef)("editor"),P=(0,r.useCallback)((e=>{i((t=>("history"!==e&&"history"!==t||C(),"history"===e&&(T(S),Q(!0)),"history"===t&&Q(E),"editor"!==e&&"file"!==e||(j.current=e),e)))}),[i,Q,C,E,T,S]),$=(0,r.useCallback)((()=>{P(j.current??"editor")}),[P]),[R,X]=(0,O.A)("ui.chatOpen",!1),[A,q]=(0,O.A)(x,!1),[L,I]=(0,r.useState)(!1),[N,D]=(0,r.useState)(!1),[W,M]=(0,r.useState)(!1);(0,m.A)("ui.toggle-left-menu",(0,r.useCallback)((e=>{D(e.detail)}),[D])),(0,m.A)("ui.toggle-review-panel",(0,r.useCallback)((()=>{q((e=>!e))}),[q])),(0,m.A)("keydown",(0,r.useCallback)((e=>{(p.c?e.metaKey:e.ctrlKey)&&e.shiftKey&&"KeyF"===e.code&&(e.preventDefault(),(0,g.T)("search-open",{searchType:"full-project",method:"keyboard"}),M(!0))}),[]));const[U,F]=(0,r.useState)("sideBySide"),[V,G]=(0,r.useState)(!1),Z=(0,r.useCallback)((function(e){const t="sideBySide"===e?"editor":arguments.length>1&&void 0!==arguments[1]?arguments[1]:"editor";F(e),"editor"===t?$():P(t),function(e){h.A.setItem("pdf.layout","sideBySide"===e?"split":"flat")}(e)}),[F,P,$]);(0,r.useEffect)((()=>{"pdf"===n&&"flat"===U&&(0,b.K)()}),[n,U]);const{reattach:B,detach:z,isLinking:Y,isLinked:H,role:K,isRedundant:J}=function(){const{role:e,setRole:t,broadcastEvent:n,addEventHandler:i,deleteEventHandler:h}=(0,o.Q2)(),[u,m]=(0,r.useState)(!1),[p,g]=(0,r.useState)(!1),[f,O]=(0,r.useState)(!1),b=(0,r.useRef)();(0,r.useEffect)((()=>{d&&c.$.warn("Effect",{isLinked:p}),m(!1)}),[p,m]),(0,r.useEffect)((()=>{d&&c.$.warn("Effect",{role:e,isLinked:p}),"detached"===e&&p&&s._("project-layout-detached")}),[e,p]),(0,r.useEffect)((()=>{b.current&&clearTimeout(b.current),"detacher"===e&&!1===p&&(b.current=setTimeout((()=>{t(null)}),u?6e4:1e4))}),[e,u,p,t]),(0,r.useEffect)((()=>{d&&c.$.warn("Effect",{isLinking:u})}),[u]);const v=(0,l.A)(e);(0,r.useEffect)((()=>{v&&!e&&s._("project-layout-reattached")}),[v,e]);const w=(0,r.useCallback)((()=>{n("reattach"),t(null),g(!1)}),[t,g,n]),_=(0,r.useCallback)((()=>{O(!1),t("detacher"),m(!0),window.open((0,a.Z)("detached").toString(),"_blank")}),[t,m]),x=(0,r.useCallback)((()=>{d&&c.$.warn("Duplicate detacher detected, turning into a regular editor again"),O(!0),g(!1),t(null)}),[t,g]),y=(0,r.useCallback)((e=>{switch(e.event){case"connected":n("up"),g(!0);break;case"up":g(!0);break;case"closed":g(!1)}}),[g,n]),k=(0,r.useCallback)((e=>{switch(e.event){case"connected":n("up"),g(!0);break;case"up":g(!0);break;case"closed":g(!1);break;case"reattach":g(!1),window.close()}}),[g,n]),C=(0,r.useCallback)((e=>{"closed"===e.event&&n("up")}),[n]),S=(0,r.useCallback)((t=>{"detacher"===e?"detacher"===t.role?x():"detached"===t.role&&y(t):"detached"===e&&("detacher"===t.role?k(t):"detached"===t.role&&C(t))}),[e,x,y,k,C]);return(0,r.useEffect)((()=>(i(S),()=>h(S))),[i,h,S]),{reattach:w,detach:_,isLinked:p,isLinking:u,role:e,isRedundant:f}}(),ee="sideBySide"===U||"pdf"===n||"detacher"===K;(0,r.useEffect)((()=>{w&&c.$.warn("Layout Effect",{detachIsRedundant:J,detachRole:K,detachIsLinking:Y,detachIsLinked:H}),"detacher"===K&&(J?Z("sideBySide"):(Y||H)&&Z("flat","editor"))}),[J,K,Y,H,Z]);const te=(0,r.useMemo)((()=>({reattach:B,detach:z,detachIsLinked:H,detachRole:K,changeLayout:Z,chatIsOpen:R,leftMenuShown:N,openFile:y,pdfLayout:U,pdfPreviewOpen:ee,projectSearchIsOpen:W,setProjectSearchIsOpen:M,reviewPanelOpen:A,miniReviewPanelVisible:L,loadingStyleSheet:V,setChatIsOpen:X,setLeftMenuShown:D,setOpenFile:k,setPdfLayout:F,setReviewPanelOpen:q,setMiniReviewPanelVisible:I,setLoadingStyleSheet:G,setView:P,view:n,restoreView:$})),[B,z,H,K,Z,R,N,y,U,ee,W,M,A,L,V,X,D,k,F,q,I,G,P,n,$]);return(0,v.jsx)(_.Provider,{value:te,children:t})};function k(){const e=(0,r.useContext)(_);if(!e)throw new Error("useLayoutContext is only available inside LayoutProvider");return e}},57220:(e,t,n)=>{"use strict";n.d(t,{y:()=>s});var r=n(66020),o=n(24731),i=n(14041);const a=window.matchMedia?.("(prefers-color-scheme: dark)")??{matches:!0,addEventListener:()=>{},removeEventListener:()=>{}};const s=()=>{const[e,t]=(0,i.useState)(a.matches),{userSettings:{overallTheme:n}}=(0,r.dk)(),s=(0,i.useMemo)((()=>function(e,t){return(0,o.R)()?"dark":"light-"===e?"light":"system"===e?t?"dark":"light":"dark"}(n,e)),[n,e]);return(0,i.useEffect)((()=>{const e=e=>{t(e.matches)};return a.addEventListener("change",e),()=>{a.removeEventListener("change",e)}}),[]),s}},58516:(e,t,n)=>{"use strict";n.d(t,{Tg:()=>O,wy:()=>f});n(97107);var r=n(14041),o=n(16896),i=n(78494),a=n(64932),s=n(5805),l=n(86316),c=n(31085);const d=(0,r.createContext)(void 0),h={readOnly:{read:!0,comment:!0,resolveOwnComments:!1,resolveAllComments:!1,trackedWrite:!1,write:!1,admin:!1,labelVersion:!1},review:{read:!0,comment:!0,resolveOwnComments:!0,resolveAllComments:!1,trackedWrite:!0,write:!1,admin:!1,labelVersion:!0},readAndWrite:{read:!0,comment:!0,resolveOwnComments:!0,resolveAllComments:!0,trackedWrite:!0,write:!0,admin:!1,labelVersion:!0},owner:{read:!0,comment:!0,resolveOwnComments:!0,resolveAllComments:!0,trackedWrite:!0,write:!0,admin:!0,labelVersion:!0}},u={readOnly:{...h.readOnly,comment:!1},readAndWrite:{...h.readAndWrite,comment:!1},review:{...h.review,comment:!1},owner:{...h.owner,comment:!1}},m={readOnly:{...h.readOnly,comment:!1},readAndWrite:h.readAndWrite,review:h.review,owner:h.owner},p={readOnly:h.readOnly,readAndWrite:h.readAndWrite,review:{...h.review,trackedWrite:!1},owner:h.owner},g={read:!0,write:!0,admin:!1,comment:!0,resolveOwnComments:!1,resolveAllComments:!1,trackedWrite:!0,labelVersion:!1},f=e=>{let{children:t}=e;const[n,f]=(0,r.useState)(g),{connectionState:O}=(0,o.FX)(),{permissionsLevel:b}=(0,i.yn)(),v=(0,s.A)(),w=(0,a.A)("ol-anonymous"),{features:_}=(0,l.Om)();return(0,r.useEffect)((()=>{let e;e=v?m:w?u:_.trackChanges?h:p,f(e[b])}),[w,b,f,v,_.trackChanges]),(0,r.useEffect)((()=>{O.forceDisconnected&&f((e=>({...e,write:!1})))}),[O.forceDisconnected,f]),(0,c.jsx)(d.Provider,{value:n,children:t})};function O(){const e=(0,r.useContext)(d);if(!e)throw new Error("usePermissionsContext is only available inside PermissionsProvider");return e}},58528:(e,t,n)=>{"use strict";n.d(t,{g9:()=>o});var r=n(64932);function o(e){return"enabled"===(0,r.A)("ol-splitTestVariants")?.[e]}},58756:(e,t,n)=>{const r=n(45461),o=n(10729),i=n(99568),a=n(97277),s=n(35078),l=n(10048),c=n(11485),d=n(33101),h=n(1651),u=n(43921),m=n(98695),p=n(79600),g=n(62293),f=n(97348),O=n(91822),b=n(87520),v=n(84140),w=n(85544),_=n(82927),x=n(90482),y=n(65734),k=n(63821),C=n(27673),S=n(8010),Q=n(41546),E=n(33755),T=n(64331),j=n(23531),P=n(45317),$=n(91810),R=n(22246),X=n(44838),A=n(2058),q=n(65591),{InsertOp:L,RemoveOp:I,RetainOp:N,ScanOp:D}=n(42991),W=n(26041),M=n(13376),U=n(61210),F=n(2085),V=n(18452),G=n(82174),Z=n(14679),B=n(50614);t.AddCommentOperation=r,t.Author=o,t.AuthorList=i,t.Blob=a,t.Change=s,t.ChangeRequest=l,t.ChangeNote=c,t.Chunk=d,t.ChunkResponse=h,t.Comment=u,t.DeleteCommentOperation=m,t.File=p,t.FileMap=g,t.LazyStringFileData=G,t.StringFileData=Z,t.History=f,t.Label=O,t.AddFileOperation=b,t.MoveFileOperation=v,t.SetCommentStateOperation=w,t.EditFileOperation=_,t.EditNoOperation=x,t.EditOperationBuilder=B,t.EditOperationTransformer=y,t.SetFileMetadataOperation=k,t.NoOperation=C,t.Operation=S,t.RestoreOrigin=Q,t.RestoreFileOrigin=E,t.Origin=T,t.OtClient=j,t.TextOperation=P,t.EditOperation=$,t.safePathname=R,t.Snapshot=X,t.util=A,t.V2DocVersions=q,t.ScanOp=D,t.InsertOp=L,t.RetainOp=N,t.RemoveOp=I,t.TrackedChangeList=M,t.TrackedChange=W,t.Range=F,t.CommentList=V,t.TrackingProps=U},59622:(e,t,n)=>{"use strict";n(97107);const r=n(64347).assert,o=n(97277),i=n(12628);class a extends i{constructor(e,t){super(),r.match(e,o.HEX_HASH_RX,"HashFileData: bad hash"),t&&r.match(t,o.HEX_HASH_RX,"HashFileData: bad ranges hash"),this.hash=e,this.rangesHash=t}static fromRaw(e){return new a(e.hash,e.rangesHash)}toRaw(){const e={hash:this.hash};return this.rangesHash&&(e.rangesHash=this.rangesHash),e}getHash(){return this.hash}getRangesHash(){return this.rangesHash}async toEager(e){const t=await this.toLazy(e);return await t.toEager(e)}async toLazy(e){const[t,n]=await Promise.all([e.getBlob(this.hash),this.rangesHash?e.getBlob(this.rangesHash):Promise.resolve(void 0)]);if(null===n)throw new Error("Failed to look up rangesHash in blobStore");if(!t)throw new Error("blob not found: "+this.hash);return i.createLazyFromBlobs(t,n)}async toHollow(e){const t=await e.getBlob(this.hash);if(!t)throw new Error("Failed to look up hash in blobStore");return i.createHollow(t.getByteLength(),t.getStringLength())}async store(){const e={hash:this.hash};return this.rangesHash&&(e.rangesHash=this.rangesHash),e}}e.exports=a},59722:(e,t,n)=>{"use strict";n.d(t,{Wg:()=>d,XW:()=>h});n(97107);var r=n(14041),o=n(85960),i=n(13653),a=n(37858),s=n(10646),l=n(31085);const c=(0,r.createContext)(void 0),d=e=>{let{children:t}=e;const n=(0,o.ur)(),{writefullInstance:d}=(0,s.mi)(),[h,u]=(0,r.useState)(n.features||{});return(0,i.Q)((0,r.useCallback)((e=>{e?.features&&u(e.features)}),[])),(0,r.useEffect)((()=>{const e=async e=>{let{isPremium:t}=e;if(h?.aiErrorAssistant===t)return;const n=await(0,a.hm)("/user/features");u(n)};return d?.addEventListener("writefull-login-complete",e),()=>{d?.removeEventListener("writefull-login-complete",e)}}),[h?.aiErrorAssistant,d]),(0,l.jsx)(c.Provider,{value:h,children:t})};function h(){const e=(0,r.useContext)(c);if(!e)throw new Error("useUserFeaturesContext is only available inside UserFeaturesContext");return e}},60230:(e,t,n)=>{"use strict";n.d(t,{t:()=>h});var r=n(53373),o=n.n(r),i=n(64459),a=n(79953),s=n(97434),l=n(96713),c=n(14041),d=n(31085);const h=e=>{let{type:t="info",className:n="",content:r,title:h,isDismissible:u,onDismiss:m,autoHide:p,delay:g}=e;const{t:f}=(0,s.Bd)(),[O,b]=(0,c.useState)(!0),v=o()("notification",`notification-type-${t}`,n,"toast-content"),w=(0,c.useCallback)((()=>{b(!1)}),[]),_=(0,c.useCallback)((()=>{m&&m()}),[m]),x=(0,d.jsxs)("div",{className:v,children:[(0,d.jsx)(a.H,{notificationType:t}),(0,d.jsx)("div",{className:"notification-content-and-cta",children:(0,d.jsxs)("div",{className:"notification-content",children:[h&&(0,d.jsx)("p",{children:(0,d.jsx)("b",{children:h})}),r]})}),u&&(0,d.jsx)("div",{className:"notification-close-btn",children:(0,d.jsx)("button",{"aria-label":f("close"),"data-bs-dismiss":"toast",onClick:w,children:(0,d.jsx)(l.A,{type:"close"})})})]});return(0,d.jsx)(i.A,{onClose:w,autohide:p,onExited:_,delay:g,show:O,children:x})}},60347:(e,t,n)=>{"use strict";n.d(t,{l_:()=>d,z_:()=>u});n(82438),n(50020),n(47200);var r=n(5383),o=n(21947),i=n(94355);var a=function(e){return e[e.Book=1]="Book",e[e.Part=2]="Part",e[e.Chapter=3]="Chapter",e[e.Section=4]="Section",e[e.SubSection=5]="SubSection",e[e.SubSubSection=6]="SubSubSection",e[e.Paragraph=7]="Paragraph",e[e.SubParagraph=8]="SubParagraph",e[e.Frame=9]="Frame",e[e.Invalid=-1]="Invalid",e}(a||{});const s={book:a.Book,part:a.Part,chapter:a.Part,section:a.Section,subsection:a.SubSection,subsubsection:a.SubSubSection,paragraph:a.Paragraph,subparagraph:a.SubParagraph,frame:a.Frame},l=e=>{if("string"==typeof e)return s[e]??a.Invalid;switch(e){case r.Book:return a.Book;case r.Part:return a.Part;case r.Chapter:return a.Chapter;case r.Section:return a.Section;case r.SubSection:return a.SubSection;case r.SubSubSection:return a.SubSubSection;case r.Paragraph:return a.Paragraph;case r.SubParagraph:return a.SubParagraph;default:return a.Invalid}},c=(e,t)=>{const n=[];return t.node.cursor().iterate((r=>{if(r.from>=t.to)return!1;if(r.type.is("Label"))return!1;if(r.type.is("UnknownCommand")){const t=(0,i.Kn)(e,r.node,"pdf");if(t)return n.push(t),!1}if(r.node.firstChild)return!0;n.push(e.doc.sliceString(r.from,r.to))})),n.join("")},d=(e,t,n,r)=>{if(t.type.is("SectioningCommand")){const o=t.node,i=o.parent;if(!r(o))return;const a=o.getChild("SectioningArgument")?.getChild("LongArg");if(!a)return;for(let e=i;e;e=e.parent)if(e.type.is("NewCommand")||e.type.is("RenewCommand"))return!1;const s=()=>{const t=o.firstChild;return t?e.doc.sliceString(t.from+1,t.to):""},d=i?.type.is("$Section")?l(i.type.id):l(s()),h={line:e.doc.lineAt(o.from).number,title:c(e,a),from:o.from,to:o.to,level:d};n.push(h)}if(t.type.is("$Environment")){const i=t.node;if("frame"===(0,o.$2)(i,e)){const t=i.getChild("BeginEnv");if(!r(t))return;const s=(0,o.E9)(i)?.map((e=>e.getChild("LongArg")));if(s?.length){const r=s[0],o=r?e.sliceDoc(r.from,r.to):"",i={line:e.doc.lineAt(t.from).number,title:o,from:t.from,to:t.to,level:a.Frame};n.push(i)}}}},h=e=>({title:e.title,line:e.line,level:e.level}),u=e=>{const t=[],n=[];for(const r of e){const e=h(r);for(;t.length&&t[t.length-1].level>=e.level;)t.pop();if(t.length){const n=t[t.length-1];n.children?n.children.push(e):n.children=[e],t.push(e)}else t.push(e),n.push(e)}return n}},60440:(e,t,n)=>{"use strict";n.d(t,{_:()=>Q,Q:()=>S});n(97107);var r=n(22743),o=n(14041),i=(n(82438),n(50020),n(6896));function a(e,t){return l(e,t,((e,t,n)=>[...e.slice(0,n),...e.slice(n+1)]))}function s(e,t,n){const{type:r,...o}=n;if(!r)throw new Error("Entity has no type");const i=`${r}s`;return l(e,t,((e,t,n)=>(e[n]={...t,[i]:[...t[i],o]},e)))}function l(e,t,n){if(!t||e._id===t){const[t]=n([],e,0);return t}for(const r of["docs","fileRefs","folders"])for(let o=0;o<e[r].length;o++){const i=e[r][o];if(i._id===t)return{...e,[r]:n(e[r],i,o)}}const r=e.folders.map((e=>l(e,t,n)));return{...e,folders:r}}var c=n(64932);function d(e){if(!e)return 0;const t=function(e){function t(e){if(null==e)return 0;let n=0;if(e.folders){n+=e.folders.length;for(const r of e.folders)n+=t(r)}return e.docs&&(n+=e.docs.length),e.fileRefs&&(n+=e.fileRefs.length),n}return t(e)}(e),n=(0,c.A)("ol-ExposedSettings").maxEntitiesPerProject,r=function(e,t,n){if(e>=t)return"error";if(e>=t-n)return"warning";return"success"}(t,n,Math.ceil(n/20));return{value:t,status:r,limit:n}}var h=n(45250),u=n.n(h);function m(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e.docs.map((e=>({doc:{id:e._id,name:e.name},path:t+e.name})));for(const r of e.folders)n.push(...m(r,`${t}${r.name}/`));return n}function p(e){const t=m(e);return t.sort((function(e,t){const n=(e.path.match(/\//g)||[]).length,r=(t.path.match(/\//g)||[]).length;return n-r!=0?-(n-r):e.path<t.path?-1:e.path>t.path?1:0})),t}var g=n(55937),f=n(65982),O=n(86316),b=n(78494),v=n(31085);const{buildFileTree:w,createFolder:_}=r||f.CH,x=(0,o.createContext)(void 0);var y=function(e){return e.RENAME="RENAME",e.RESET="RESET",e.DELETE="DELETE",e.MOVE="MOVE",e.CREATE="CREATE",e}(y||{});function k(e,t){let{fileTreeData:n}=e;switch(t.type){case y.RESET:{const e=t.fileTreeData;return{fileTreeData:e,fileCount:d(e)}}case y.RENAME:{const e=function(e,t,n){let{newName:r}=n;return l(e,t,((e,t,n)=>{const o=Object.assign([],e),i={...t,name:r};return o[n]=i,o}))}(n,t.id,{newName:t.newName});return{fileTreeData:e,fileCount:d(e)}}case y.DELETE:{const e=a(n,t.id);return{fileTreeData:e,fileCount:d(e)}}case y.MOVE:{const e=function(e,t,n){const r=(0,i.k3)(e,t);return r.parentFolderId===n?e:s(a(e,t),n,{...r.entity,type:r.type})}(n,t.entityId,t.toFolderId);return{fileTreeData:e,fileCount:d(e)}}case y.CREATE:{const e=s(n,t.parentFolderId,t.entity);return{fileTreeData:e,fileCount:d(e)}}default:throw new Error(`Unknown mutable file tree action type: ${t.type}`)}}const C=e=>{const t=e?.[0];return{fileTreeData:t,fileCount:d(t)}};function S(){const e=(0,o.useContext)(x);if(!e)throw new Error("useFileTreeData is only available inside FileTreeDataProvider");return e}const Q=e=>{let{children:t}=e;const{project:n}=(0,O.Om)(),{currentDocumentId:r,setOpenDocName:i}=(0,g.Wq)(),{permissionsLevel:a}=(0,b.yn)(),{fileTreeFromHistory:s,snapshot:l,snapshotVersion:c}=(0,f.P4)(),d="readOnly"===a||s,[h,m]=(0,o.useState)(n?.rootFolder);(0,o.useEffect)((()=>{s||m(n?.rootFolder)}),[n?.rootFolder,s]),(0,o.useEffect)((()=>{s&&(h&&!h?.[0]?._id||m([_("","")]))}),[s,h]),(0,o.useEffect)((()=>{s&&l&&m([w(l)])}),[s,l,c]);const[{fileTreeData:S,fileCount:Q},E]=(0,o.useReducer)(k,h,C),[T,j]=(0,o.useState)([]),P=(0,o.useMemo)((()=>S?p(S):void 0),[S]);!function(e,t){const n=(0,o.useRef)();(0,o.useEffect)((()=>{u().isEqual(t,n.current)||(n.current=t,e())}),t)}((()=>{E({type:y.RESET,fileTreeData:h?.[0]})}),[h]);const $=(0,o.useCallback)(((e,t)=>{t.type="folder",E({type:y.CREATE,parentFolderId:e,entity:t})}),[]),R=(0,o.useCallback)(((e,t)=>{t.type="doc",E({type:y.CREATE,parentFolderId:e,entity:t})}),[]),X=(0,o.useCallback)(((e,t)=>{t.type="fileRef",E({type:y.CREATE,parentFolderId:e,entity:t})}),[]),A=(0,o.useCallback)(((e,t)=>{E({type:y.RENAME,newName:t,id:e}),e===r&&i(t)}),[r,i]),q=(0,o.useCallback)((e=>{E({type:y.DELETE,id:e})}),[]),L=(0,o.useCallback)(((e,t)=>{E({type:y.MOVE,entityId:e,toFolderId:t})}),[]),I=(0,o.useMemo)((()=>({dispatchCreateDoc:R,dispatchCreateFile:X,dispatchCreateFolder:$,dispatchDelete:q,dispatchMove:L,dispatchRename:A,fileCount:Q,fileTreeData:S,fileTreeReadOnly:d,hasFolders:S?.folders.length>0,selectedEntities:T,setSelectedEntities:j,docs:P})),[R,X,$,q,L,A,Q,S,d,T,j,P]);return(0,v.jsx)(x.Provider,{value:I,children:t})}},61210:(e,t,n)=>{n(97107);class r{constructor(e,t,n){this.type=e,this.userId=t,this.ts=n}static fromRaw(e){return new r(e.type,e.userId,new Date(e.ts))}toRaw(){return{type:this.type,userId:this.userId,ts:this.ts.toISOString()}}equals(e){return e instanceof r&&(this.type===e.type&&this.userId===e.userId&&this.ts.getTime()===e.ts.getTime())}canMergeWith(e){return e instanceof r&&(this.type===e.type&&this.userId===e.userId)}mergeWith(e){if(!this.canMergeWith(e))throw new Error("Cannot merge with incompatible tracking props");const t=this.ts<=e.ts?this.ts:e.ts;return new r(this.type,this.userId,t)}}e.exports=r},62293:(e,t,n)=>{"use strict";n(82438),n(57327);const r=n(45250),o=n(64347).assert,i=n(37603),a=n(90953),s=n(79600),l=n(22246);class PathnameError extends i{}class NonUniquePathnameError extends PathnameError{constructor(e){super("pathnames are not unique",{pathnames:e}),this.pathnames=e}}class BadPathnameError extends PathnameError{constructor(e,t){e.length>10&&(e=e.slice(0,5)+"..."+e.slice(-5)),super("invalid pathname",{reason:t,pathname:e}),this.pathname=e}}class PathnameConflictError extends PathnameError{constructor(e){super("pathname conflicts with another file",{pathname:e}),this.pathname=e}}class FileNotFoundError extends PathnameError{constructor(e){super("file does not exist",{pathname:e}),this.pathname=e}}class c{static PathnameError=(()=>PathnameError)();static NonUniquePathnameError=(()=>NonUniquePathnameError)();static BadPathnameError=(()=>BadPathnameError)();static PathnameConflictError=(()=>PathnameConflictError)();static FileNotFoundError=(()=>FileNotFoundError)();constructor(e){this.files=Object.create(null),r.assign(this.files,e),function(e){if(function(e){const t=r.keys(e);return r.uniqWith(t,d).length===t.length}(e))return;throw new c.NonUniquePathnameError(r.keys(e))}(this.files),function(e){const t=e.getPathnames();t.forEach(h);const n=[];for(let e=0;e<t.length;e++)n[e]=t[e]+"/";n.sort();for(let e=0;e<n.length-1;e++)if(n[e+1].startsWith(n[e])){const t=n[e+1].substr(0,-1);throw new c.PathnameConflictError(t)}}(this)}static fromRaw(e){return o.object(e,"bad raw files"),new c(r.mapValues(e,s.fromRaw))}toRaw(){return r.mapValues(this.files,(function(e){return e.toRaw()}))}addFile(e,t){h(e),o.object(t,"bad file"),u(this,e),p(this.files,e,t)}removeFile(e){h(e);const t=m(this.files,e);if(!t)throw new c.FileNotFoundError(e);delete this.files[t]}moveFile(e,t){if(e===t)return;if(""===t)return this.removeFile(e);h(e),h(t),u(this,t,e);const n=m(this.files,e);if(!n)throw new c.FileNotFoundError(e);const r=this.files[n];delete this.files[n],p(this.files,t,r)}countFiles(){return r.size(this.files)}getFile(e){const t=m(this.files,e);if(t)return this.files[t]}wouldConflict(e,t){h(e),o.maybe.string(t);const n=this.getPathnames(),r=e+"/";for(let o=0;o<n.length;o++){if(n[o].startsWith(r)&&!d(n[o],t))return!0;if(e.startsWith(n[o])&&e.length>n[o].length&&"/"===e[n[o].length]&&!d(n[o],t))return!0}return!1}getPathnames(){return r.keys(this.files)}map(e){return r.mapValues(this.files,e)}async mapAsync(e,t){o.maybe.number(t,"bad concurrency");const n=this.getPathnames(),i=await a(n,(t=>e(this.getFile(t),t,n)),{concurrency:t||1});return r.zipObject(n,i)}}function d(e,t){return e===t}function h(e){o.nonEmptyString(e,"bad pathname");const[t,n]=l.isCleanDebug(e);if(!t)throw new c.BadPathnameError(e,n)}function u(e,t,n){if(e.wouldConflict(t,n))throw new c.PathnameConflictError(t)}function m(e,t){if(t in e)return t}function p(e,t,n){const r=m(e,t);r&&delete e[r],e[t]=n}e.exports=c},62817:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});n(82438),n(57327);var r=n(71606),o=n(64932),i=n(31085);function a(e){let{url:t,children:n}=e;return(0,o.A)("ol-wikiEnabled")?(0,i.jsx)("a",{href:t,target:"_blank",rel:"noopener",children:n}):(0,i.jsx)(i.Fragment,{children:n})}const s={hint_misplaced_alignment_tab_character:{extraInfoURL:"https://www.overleaf.com/learn/Errors/Misplaced_alignment_tab_character_%26",formattedContent:()=>(0,i.jsxs)(i.Fragment,{children:["You have placed an alignment tab character '&' in the wrong place. If you want to align something, you must write it inside an align environment such as \\begin","{align}"," … \\end","{align}",", \\begin","{tabular}"," … \\end","{tabular}",", etc. If you want to write an ampersand '&' in text, you must write \\& instead."]})},hint_extra_alignment_tab_has_been_changed:{extraInfoURL:"https://www.overleaf.com/learn/Errors/Extra_alignment_tab_has_been_changed_to_%5Ccr",formattedContent:()=>(0,i.jsxs)(i.Fragment,{children:["You have written too many alignment tabs in a table, causing one of them to be turned into a line break. Make sure you have specified the correct number of columns in your"," ",(0,i.jsx)(a,{url:"https://www.overleaf.com/learn/Tables",children:"table"}),"."]})},hint_display_math_should_end_with:{extraInfoURL:"https://www.overleaf.com/learn/Errors/Display_math_should_end_with_$$",formattedContent:()=>(0,i.jsx)(i.Fragment,{children:"You have forgotten a $ sign at the end of 'display math' mode. When writing in display math mode, you must always math write inside $$ … $$. Check that the number of $s match around each math expression."})},hint_missing_inserted:{extraInfoURL:"https://www.overleaf.com/learn/Errors/Missing_$_inserted",formattedContent:()=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("p",{children:"You need to enclose all mathematical expressions and symbols with special markers. These special markers create a ‘math mode’."}),(0,i.jsxs)("p",{children:["Use ",(0,i.jsx)("code",{children:"$...$"})," for inline math mode, and ",(0,i.jsx)("code",{children:"\\[...\\]"}),"or one of the mathematical environments (e.g. equation) for display math mode."]}),(0,i.jsxs)("p",{children:["This applies to symbols such as subscripts ( ",(0,i.jsx)("code",{children:"_"})," ), integrals ( ",(0,i.jsx)("code",{children:"\\int"})," ), Greek letters ( ",(0,i.jsx)("code",{children:"\\alpha"}),","," ",(0,i.jsx)("code",{children:"\\beta"}),", ",(0,i.jsx)("code",{children:"\\delta"})," ) and modifiers"," ",(0,i.jsx)("code",{children:"(\\vec{x}"}),", ",(0,i.jsxs)("code",{children:["\\tilde{x}",")"]}),"."]})]})},hint_reference_undefined:{extraInfoURL:"https://www.overleaf.com/learn/Errors/There_were_undefined_references",formattedContent:()=>(0,i.jsxs)(i.Fragment,{children:["You have referenced something which has not yet been labelled. If you have labelled it already, make sure that what is written inside \\ref","{...}"," is the same as what is written inside \\label","{...}","."]})},hint_there_were_undefined_references:{extraInfoURL:"https://www.overleaf.com/learn/Errors/There_were_undefined_references",formattedContent:()=>(0,i.jsxs)(i.Fragment,{children:["You have referenced something which has not yet been labelled. If you have labelled it already, make sure that what is written inside \\ref","{...}"," is the same as what is written inside \\label","{...}","."]})},hint_citation_on_page_undefined_on_input_line:{extraInfoURL:"https://www.overleaf.com/learn/Errors/Citation_XXX_on_page_XXX_undefined_on_input_line_XXX",formattedContent:()=>(0,i.jsxs)(i.Fragment,{children:["You have cited something which is not included in your bibliography. Make sure that the citation (\\cite","{...}",") has a corresponding key in your bibliography, and that both are spelled the same way."]})},hint_label_multiply_defined_labels:{extraInfoURL:"https://www.overleaf.com/learn/Errors/There_were_multiply-defined_labels",formattedContent:()=>(0,i.jsxs)(i.Fragment,{children:["You have used the same label more than once. Check that each \\label","{...}"," labels only one item."]})},hint_float_specifier_changed:{extraInfoURL:"https://www.overleaf.com/learn/Errors/%60!h%27_float_specifier_changed_to_%60!ht%27",formattedContent:()=>(0,i.jsxs)(i.Fragment,{children:["The float specifier 'h' is too strict of a demand for LaTeX to place your float in a nice way here. Try relaxing it by using 'ht', or even 'htbp' if necessary. If you want to try keep the float here anyway, check out the"," ",(0,i.jsx)(a,{url:"https://www.overleaf.com/learn/Positioning_of_Figures",children:"float package"}),"."]})},hint_no_positions_in_optional_float_specifier:{extraInfoURL:"https://www.overleaf.com/learn/Errors/No_positions_in_optional_float_specifier",formattedContent:()=>(0,i.jsxs)(i.Fragment,{children:["You have forgotten to include a float specifier, which tells LaTeX where to position your figure. To fix this, either insert a float specifier inside the square brackets (e.g. \\begin","{figure}","[h]), or remove the square brackets (e.g. \\begin","{figure}","). Find out more about float specifiers"," ",(0,i.jsx)(a,{url:"https://www.overleaf.com/learn/Positioning_of_Figures",children:"here"}),"."]})},hint_undefined_control_sequence:{formattedContent:e=>{if(e?.length&&r.H.has(e[0])){const t=e[0],n=r.H.get(t);return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("p",{children:["We think you’ve got a missing package! The ",(0,i.jsx)("code",{children:t})," ","command won't work unless you include",(0,i.jsx)("code",{children:n.command})," in your"," ",(0,i.jsx)(a,{url:"https://www.overleaf.com/learn/latex/Learn_LaTeX_in_30_minutes#The_preamble_of_a_document",children:"document preamble"}),"."," ",(0,i.jsx)(a,{url:"https://www.overleaf.com/learn/latex/Learn_LaTeX_in_30_minutes#Finding_and_using_LaTeX_packages",children:"Learn more about packages"}),"."]})})}return(0,i.jsxs)(i.Fragment,{children:["The compiler is having trouble understanding a command you have used. Check that the command is spelled correctly. If the command is part of a package, make sure you have included the package in your preamble using ",(0,i.jsx)("code",{children:"\\usepackage"}),"{...}",".",(0,i.jsx)("div",{className:"log-entry-content-link",children:(0,i.jsx)("a",{href:"https://www.overleaf.com/learn/Errors/Undefined_control_sequence",target:"_blank",rel:"noopener",children:"Learn more"})})]})}},hint_undefined_environment:{formattedContent:e=>{if(e?.length&&r.P.has(e[0])){const t=e[0],n=r.P.get(t);return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("p",{children:["We think you’ve got a missing package! The"," ",(0,i.jsx)("code",{children:t})," environment won't work unless you include ",(0,i.jsx)("code",{children:n.command})," in your"," ",(0,i.jsx)(a,{url:"https://www.overleaf.com/learn/latex/Learn_LaTeX_in_30_minutes#The_preamble_of_a_document",children:"document preamble"}),"."," ",(0,i.jsx)(a,{url:"https://www.overleaf.com/learn/latex/Learn_LaTeX_in_30_minutes#Finding_and_using_LaTeX_packages",children:"Learn more about packages"}),"."]})})}return(0,i.jsxs)(i.Fragment,{children:["You have created an environment (using \\begin","{…}"," and \\end","{…}"," commands) which is not recognized. Make sure you have included the required package for that environment in your preamble, and that the environment is spelled correctly.",(0,i.jsx)("div",{className:"log-entry-content-link",children:(0,i.jsx)("a",{href:"https://www.overleaf.com/learn/Errors%2FLaTeX%20Error%3A%20Environment%20XXX%20undefined",target:"_blank",rel:"noopener",children:"Learn more"})})]})}},hint_file_not_found:{extraInfoURL:"https://www.overleaf.com/learn/Errors/File_XXX_not_found_on_input_line_XXX",formattedContent:()=>(0,i.jsxs)(i.Fragment,{children:["The compiler cannot find the file you want to include. Make sure that you have"," ",(0,i.jsx)(a,{url:"https://www.overleaf.com/learn/how-to/Including_images_on_Overleaf",children:"uploaded the file"})," ","and"," ",(0,i.jsx)(a,{url:"https://www.overleaf.com/learn/Errors/File_XXX_not_found_on_input_line_XXX.",children:"specified the file location correctly"}),"."]})},hint_unknown_graphics_extension:{extraInfoURL:"https://www.overleaf.com/learn/Errors/LaTeX_Error:_Unknown_graphics_extension:_.XXX",formattedContent:()=>(0,i.jsxs)(i.Fragment,{children:["The compiler does not recognise the file type of one of your images. Make sure you are using a"," ",(0,i.jsx)(a,{url:"https://www.overleaf.com/learn/Errors/LaTeX_Error:_Unknown_graphics_extension:_.gif.",children:"supported image format"})," ","for your choice of compiler, and check that there are no periods (.) in the name of your image."]})},hint_unknown_float_option_h:{extraInfoURL:"https://www.overleaf.com/learn/Errors/LaTeX_Error:_Unknown_float_option_%60H%27",formattedContent:()=>(0,i.jsxs)(i.Fragment,{children:["The compiler isn't recognizing the float option 'H'. Include \\usepackage","{float}"," in your preamble to fix this."]})},hint_unknown_float_option_q:{extraInfoURL:"https://www.overleaf.com/learn/Errors/LaTeX_Error:_Unknown_float_option_%60q%27",formattedContent:()=>(0,i.jsxs)(i.Fragment,{children:["You have used a float specifier which the compiler does not understand. You can learn more about the different float options available for placing figures"," ",(0,i.jsx)(a,{url:"https://www.overleaf.com/learn/Positioning_of_Figures",children:"here"})," ","."]})},hint_math_allowed_only_in_math_mode:{extraInfoURL:"https://www.overleaf.com/learn/Errors/LaTeX_Error:_%5Cmathrm_allowed_only_in_math_mode",formattedContent:()=>(0,i.jsxs)(i.Fragment,{children:["You have used a font command which is only available in math mode. To use this command, you must be in maths mode (E.g. $ … $ or \\begin","{math}"," … \\end","{math}","). If you want to use it outside of math mode, use the text version instead: \\textrm, \\textit, etc."]})},hint_mismatched_environment:{formattedContent:()=>(0,i.jsxs)(i.Fragment,{children:["You have used \\begin","{...}"," without a corresponding \\end","{...}","."]})},hint_mismatched_brackets:{formattedContent:()=>(0,i.jsx)(i.Fragment,{children:"You have used an open bracket without a corresponding close bracket."})},hint_can_be_used_only_in_preamble:{extraInfoURL:"https://www.overleaf.com/learn/Errors/LaTeX_Error:_Can_be_used_only_in_preamble",formattedContent:()=>(0,i.jsxs)(i.Fragment,{children:["You have used a command in the main body of your document which should be used in the preamble. Make sure that \\documentclass[…]","{…}"," and all \\usepackage","{…}"," commands are written before \\begin","{document}","."]})},hint_missing_right_inserted:{extraInfoURL:"https://www.overleaf.com/learn/Errors/Missing_%5Cright_insertede",formattedContent:()=>(0,i.jsxs)(i.Fragment,{children:["You have started an expression with a \\left command, but have not included a corresponding \\right command. Make sure that your \\left and \\right commands balance everywhere, or else try using \\Biggl and \\Biggr commands instead as shown"," ",(0,i.jsx)(a,{url:"https://www.overleaf.com/learn/Errors/Missing_%5Cright_inserted",children:"here"}),"."]})},hint_double_superscript:{extraInfoURL:"https://www.overleaf.com/learn/Errors/Double_superscript",formattedContent:()=>(0,i.jsxs)(i.Fragment,{children:["You have written a double superscript incorrectly as a^b^c, or else you have written a prime with a superscript. Remember to include ","{and}"," ","when using multiple superscripts. Try a^","{b ^ c}"," instead."]})},hint_double_subscript:{extraInfoURL:"https://www.overleaf.com/learn/Errors/Double_subscript",formattedContent:()=>(0,i.jsxs)(i.Fragment,{children:["You have written a double subscript incorrectly as a_b_c. Remember to include ","{and}"," when using multiple subscripts. Try a_","{b_c}"," instead."]})},hint_no_author_given:{extraInfoURL:"https://www.overleaf.com/learn/Errors/No_%5Cauthor_given",formattedContent:()=>(0,i.jsxs)(i.Fragment,{children:["You have used the \\maketitle command, but have not specified any \\author. To fix this, include an author in your preamble using the \\author","{…}"," command."]})},hint_somethings_wrong_perhaps_a_missing_item:{extraInfoURL:"https://www.overleaf.com/learn/Errors/LaTeX_Error:_Something%27s_wrong--perhaps_a_missing_%5Citem",formattedContent:()=>(0,i.jsx)(i.Fragment,{children:"There are no entries found in a list you have created. Make sure you label list entries using the \\item command, and that you have not used a list inside a table."})},hint_misplaced_noalign:{extraInfoURL:"https://www.overleaf.com/learn/Errors/Misplaced_%5Cnoalign",formattedContent:()=>(0,i.jsx)(i.Fragment,{children:"You have used a \\hline command in the wrong place, probably outside a table. If the \\hline command is written inside a table, try including \\\\ before it."})},hint_no_line_here_to_end:{extraInfoURL:"https://www.overleaf.com/learn/Errors/LaTeX_Error:_There%27s_no_line_here_to_end",formattedContent:()=>(0,i.jsx)(i.Fragment,{children:"You have used a \\\\ or \\newline command where LaTeX was not expecting one. Make sure that you only use line breaks after blocks of text, and be careful using linebreaks inside lists and other environments."})},hint_verb_ended_by_end_of_line:{extraInfoURL:"https://www.overleaf.com/learn/Errors/LaTeX_Error:_%5Cverb_ended_by_end_of_line",formattedContent:()=>(0,i.jsxs)(i.Fragment,{children:["You have used a \\verb command incorrectly. Try replacling the \\verb command with \\begin","{verbatim}","…\\end","{verbatim}",".\\"]})},hint_illegal_unit_of_measure_pt_inserted:{extraInfoURL:"https://www.overleaf.com/learn/Errors%2FIllegal%20unit%20of%20measure%20(pt%20inserted)",formattedContent:()=>(0,i.jsx)(i.Fragment,{children:"You have written a length, but have not specified the appropriate units (pt, mm, cm etc.). If you have not written a length, check that you have not witten a linebreak \\\\ followed by square brackets […] anywhere."})},hint_extra_right:{extraInfoURL:"https://www.overleaf.com/learn/Errors/Extra_%5Cright",formattedContent:()=>(0,i.jsx)(i.Fragment,{children:"You have written a \\right command without a corresponding \\left command. Check that all \\left and \\right commands balance everywhere."})},hint_missing_begin_document_:{extraInfoURL:"https://www.overleaf.com/learn/Errors%2FLaTeX%20Error%3A%20Missing%20%5Cbegin%20document",formattedContent:()=>(0,i.jsxs)(i.Fragment,{children:["No \\begin","{document}"," command was found. Make sure you have included \\begin","{document}"," in your preamble, and that your main document is set correctly."]})},hint_mismatched_environment2:{formattedContent:()=>(0,i.jsxs)(i.Fragment,{children:["You have used \\begin","{}"," without a corresponding \\end","{}","."]})},hint_mismatched_environment3:{formattedContent:()=>(0,i.jsxs)(i.Fragment,{children:["You have used \\begin","{}"," without a corresponding \\end","{}","."]})},hint_mismatched_environment4:{formattedContent:()=>(0,i.jsxs)(i.Fragment,{children:["You have used \\begin","{}"," without a corresponding \\end","{}","."]})}};Object.keys(s);(0,o.A)("ol-wikiEnabled")||Object.keys(s).forEach((e=>{s[e].extraInfoURL=null}));const l=s},63308:()=>{ReadableStream.prototype.values??=function(){let{preventCancel:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this.getReader();return{async next(){try{const e=await t.read();return e.done&&t.releaseLock(),e}catch(e){throw t.releaseLock(),e}},async return(n){if(e)t.releaseLock();else{const e=t.cancel(n);t.releaseLock(),await e}return{done:!0,value:n}},[Symbol.asyncIterator](){return this}}},ReadableStream.prototype[Symbol.asyncIterator]??=ReadableStream.prototype.values},63815:(e,t,n)=>{"use strict";n.d(t,{J:()=>a,K:()=>s});n(97107);var r=n(14041),o=n(31085);const i=(0,r.createContext)(void 0),a=()=>{const e=(0,r.useContext)(i);if(!e)throw new Error("usePdfPreviewContext is only available inside PdfPreviewProvider");return e},s=e=>{let{children:t}=e;const[n,a]=(0,r.useState)(!1),s=(0,r.useMemo)((()=>({loadingError:n,setLoadingError:a})),[n]);return(0,o.jsx)(i.Provider,{value:s,children:t})}},63821:(e,t,n)=>{"use strict";const r=n(45250),o=n(64347).assert,i=n(8010);e.exports=class extends i{constructor(e,t){super(),o.string(e,"SetFileMetadataOperation: bad pathname"),o.object(t,"SetFileMetadataOperation: bad metadata"),this.pathname=e,this.metadata=t}toRaw(){return{pathname:this.pathname,metadata:r.cloneDeep(this.metadata)}}getPathname(){return this.pathname}getMetadata(){return this.metadata}applyTo(e){const t=e.getFile(this.pathname);t&&t.setMetadata(this.metadata)}}},64331:(e,t,n)=>{"use strict";const r=n(64347).assert;let o=null,i=null,a=null;class s{constructor(e){r.string(e,"Origin: bad kind"),this.kind=e}static fromRaw(e){return e?e.kind===o.KIND?o.fromRaw(e):e.kind===i.KIND?i.fromRaw(e):e.kind===a.KIND?a.fromRaw(e):new s(e.kind):null}toRaw(){return{kind:this.kind}}getKind(){return this.kind}}e.exports=s,o=n(41546),i=n(33755),a=n(49008)},64657:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});n(82438),n(50020);var r=n(8164),o=n(10646),i=n(64932),a=n(14041),s=n(97434);const l=e=>e.trim().replace(/(\n|^)\[\d.*/s,"").replace(/\s\*{11}\s.*/s,"").replace(/(\n|^)See the LaTeX manual .+/,"").replace(/(\n|^)Type\s+H <return> .+/,"");var c=n(36526),d=n(60961),h=n(49438),u=n(86316),m=n(23442),p=n(57195),g=n(21283);function f(e,t){const{setHasPremiumSuggestion:n,setPremiumSuggestionResetDate:f}=(0,o.mi)(),{projectId:O}=(0,u.Om)(),[b,v]=(0,a.useState)([]),[w,_]=(0,a.useState)(null),[x,y]=(0,a.useState)(null),[k,C]=(0,a.useState)(!1),[S,Q]=(0,a.useState)(!1),[E,T]=(0,a.useState)(),[j,P]=(0,a.useState)(0),{syncToEntry:$,fileList:R,recordAction:X}=(0,r.Rf)(),A=(0,a.useRef)();(0,a.useEffect)((()=>{v([])}),[e.raw]),(0,a.useEffect)((()=>()=>{A.current&&A.current.abort()}),[]);const{t:q}=(0,s.Bd)(),L=(0,a.useCallback)((async()=>{_(null),v([]),Q(!1),P(0),C(!0),X("suggestedFix"),T(q("finding_a_fix")+"…"),A.current&&A.current.abort(),A.current=new AbortController,e.file&&$({file:e.file,line:e.line,column:e.column},!0);const t={role:"assistant",content:"",tool_calls:[]};try{const r=await fetch(`/project/${O}/suggest-fix`,{method:"POST",headers:{"Content-Type":"application/json","X-Csrf-Token":(0,i.A)("ol-csrfToken")},body:JSON.stringify({logEntry:{file:e.file,line:e.line,column:e.column,raw:l(e.raw)||e.raw,ruleId:e.ruleId,level:e.level},outputFiles:Object.values(R??{}).flat()}),signal:A.current.signal}),o=1e3*parseInt(r.headers.get("ratelimit-reset")||"0");if(f(new Date(Date.now()+o)),n(parseInt(r.headers.get("ratelimit-remaining")||"0")>0),r.ok&&r.body){const e=r.body.pipeThrough(new TextDecoderStream).pipeThrough(new c.Z);for await(const n of e)if("event"===n.type){const e=JSON.parse(n.data);if(e.delta)t.content+=e.delta,v((e=>e.slice(0,-1).concat({...t})));else if(e.finish)t.tool_calls.length||T("");else if(e.error)d.$.error(e.error),_("unhandled");else if(e.tool){t.tool_calls.push(e),t.content+="\n\n",v((e=>e.slice(0,-1).concat({...t})));const n=e.args.path?.replace(/^\.\//,"");switch(e.tool){case"getDocLines":T(q("read_lines_from_path",{path:(0,h.I)(n)}));break;case"searchDocLines":T(q("searched_path_for_lines_containing",{path:(0,h.I)(n),query:e.args.query}));break;case"suggestLineChange":T(q("suggested_fix_for_error_in_path",{path:(0,h.I)(n)}))}}else d.$.error("Unknown data",e)}}else 429===r.status?(n(!1),_("limit"),y(q("you_can_request_a_maximum_of_limit_fixes_per_day",{limit:r.headers.get("ratelimit-limit")}))):_("unhandled");Q(!0)}catch(e){if(d.$.error(e),"AbortError"!==e.name)throw _("unhandled"),C(!1),A.current=void 0,e}C(!1),A.current=void 0}),[e.raw,e.file,e.line,e.column,e.ruleId,e.level,$,O,R,q,X,n,f]),I=(0,a.useRef)(null);(0,a.useEffect)((()=>{I.current={messages:b,logEntry:e}}),[b,e]),(0,a.useEffect)((()=>{S&&I.current&&t.dispatch({effects:m.previousFixEffect.of({...I.current,applied:!1})})}),[S,t]);const N=(0,a.useCallback)((e=>{const n=t.state.changes(e),r=p.OF.create(e.map((e=>p.OF.range(e.from,e.to)))).map(n);t.dispatch({changes:e,effects:[g.highlightFixEffect.of(r),m.previousFixEffect.of({...I.current,applied:!0})]}),window.setTimeout((()=>{t.dispatch({effects:g.highlightFixEffect.of(null)})}),2e3)}),[t]);return{messages:b,error:w,errorMessage:x,running:k,finished:S,heading:E,rating:j,setRating:P,suggestFix:L,replaceContent:N}}},64735:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(71072),o=n(31085);const i=function(e){return(0,o.jsx)(r.A,{...e})}},64762:(e,t,n)=>{"use strict";n.d(t,{A:()=>$});var r={};n.r(r),n.d(r,{default:()=>C});n(82438),n(50020);var o=n(14041),i=n(56447),a=n(32912),s=n(7241),l=n(46039),c=n(97434),d=n(23442),h=n(96713),u=n(71627),m=n(49438),p=n(64932),g=n(97536),f=n(17112),O=n(13665),b=n(50329),v=n(8164),w=n(31085);const _=()=>{const{view:e}=(0,l.xl)(),[t,n]=(0,o.useState)((()=>e?.state.field(d.previousFixState,!1))),{compiling:r}=(0,v.Rf)();(0,o.useEffect)((()=>{r||n(e?.state.field(d.previousFixState,!1))}),[r,e?.state]);const{t:i}=(0,c.Bd)(),[a,s]=(0,o.useState)(!0),{syncToEntry:h}=(0,v.Rf)();if(!e||!t)return null;const m=(0,w.jsx)(x,{previousFix:t,view:e});return(0,w.jsx)(b.b,{id:"previous-fix",className:"ai-error-assistant-previous-fix-entry",headerTitle:i("last_suggested_fix"),formattedContent:m,level:t.logEntry.level,entryAriaLabel:i("last_suggested_fix"),sourceLocation:{file:t.logEntry.file,line:t.logEntry.line,column:t.logEntry.column},onSourceLocationClick:h,collapsed:a,setCollapsed:s,actionButtonsOverride:a?(0,w.jsx)(u.A,{size:"sm",variant:"secondary",onClick:()=>s(!1),children:i("reopen")}):void 0,openCollapseIconOverride:a?"history":void 0})},x=e=>{let{previousFix:t,view:n}=e;const[r,i]=(0,o.useState)(0),{t:a}=(0,c.Bd)(),l=(0,o.useMemo)((()=>{if(t)for(const e of t.messages)if(e.tool_calls)for(const t of e.tool_calls)if("suggestLineChange"===t.tool)return t.args}),[t]);return(0,w.jsxs)("div",{className:"ai-error-assistant ai-error-assistant-finished",children:[(0,w.jsx)("div",{className:"ai-error-assistant-meta",children:(0,w.jsx)("div",{className:"ai-error-assistant-heading",children:l?a("suggested_fix_for_error_in_path",{path:(0,m.I)(l.path)}):a("last_suggested_fix")})}),(0,w.jsx)("div",{className:"ai-error-assistant-messages",children:t.messages.map(((e,t)=>"assistant"===e.role&&(0,w.jsx)(s.K,{view:n,level:"previous-fix",message:e},t)))}),(0,w.jsx)(O.I,{messages:t.messages,logEntry:t.logEntry,applied:t.applied,rating:r,setRating:i,finished:!0})]})},y=()=>{const{detachRole:e}=(0,i.LV)();return e||!(0,p.A)("ol-showAiErrorAssistant")?null:(0,w.jsx)(_,{})},k=()=>{const[e,t]=(0,o.useState)(0),{view:n}=(0,l.xl)(),{t:r}=(0,c.Bd)(),[i,p]=(0,o.useState)(!1),[g]=(0,o.useState)((()=>n?.state.field(d.previousFixState,!1))),f=(0,o.useMemo)((()=>{if(g)for(const e of g.messages)if(e.tool_calls)for(const t of e.tool_calls)if("suggestLineChange"===t.tool)return t.args}),[g]);return n&&g?(0,w.jsx)("div",{className:"ai-error-assistant-previous-fix",children:(0,w.jsxs)("div",{className:"ai-error-assistant",children:[(0,w.jsx)("div",{className:"ai-error-assistant-meta",children:(0,w.jsxs)("div",{className:"ai-error-assistant-previous-fix-heading",children:[(0,w.jsxs)("div",{className:"ai-error-assistant-previous-fix-meta",children:[(0,w.jsx)(h.A,{type:"history"}),f?(0,w.jsxs)("span",{children:[(0,w.jsx)("b",{children:r("last_suggested_fix")})," - ",r("line")," ",f.from.line,f.path&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)("span",{children:[" ",r("of")," "]}),(0,w.jsx)("span",{children:(0,m.I)(f.path)})]})]}):(0,w.jsx)("span",{children:(0,w.jsx)("b",{children:r("last_suggested_fix")})})]}),!i&&(0,w.jsx)(u.A,{variant:"secondary",size:"sm",onClick:()=>p(!0),children:r("reopen")})]})}),i&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("div",{className:"ai-error-assistant-messages",children:g.messages.map(((e,t)=>"assistant"===e.role&&(0,w.jsx)(s.K,{view:n,level:"previous-fix",message:e},t)))}),(0,w.jsx)(a.I,{messages:g.messages,logEntry:g.logEntry,applied:g.applied,rating:e,setRating:t,finished:!0})]})]})}):null},C=()=>{const{detachRole:e}=(0,i.LV)(),t=(0,g.G)(),n=(0,f.u)("new-editor-error-logs-redesign");return t&&n?(0,w.jsx)(y,{}):e||!(0,p.A)("ol-showAiErrorAssistant")?null:(0,w.jsx)(k,{})};var S=n(41026),Q=n(92956);function E(e){let{hasErrors:t}=e;const{t:n}=(0,c.Bd)(),{startCompile:r,stoppedOnFirstError:i,setAnimateCompileDropdownArrow:a}=(0,v.Rf)(),{enableStopOnFirstError:s}=(0,S.V)({eventSource:"too-many-logs"}),l=(0,o.useCallback)((()=>{s(),r({stopOnFirstError:!0}),a(!0)}),[s,r,a]);return t&&!i?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)("p",{children:[(0,w.jsx)(h.A,{type:"lightbulb",className:"align-middle"})," ",(0,w.jsxs)("strong",{children:[n("tip"),": "]}),(0,w.jsx)(c.x6,{i18nKey:"log_entry_maximum_entries_enable_stop_on_first_error",components:[(0,w.jsx)(u.A,{variant:"primary",size:"sm",onClick:l},"enable-stop-on-first-error"),(0,w.jsx)("a",{href:"https://www.overleaf.com/learn/latex/Questions/Tips_and_Tricks_for_Troubleshooting_LaTeX"},"learn-more")]})," "]}),(0,w.jsx)("p",{children:n("log_entry_maximum_entries_see_full_logs")})]}):(0,w.jsxs)("p",{children:[(0,w.jsx)(h.A,{type:"lightbulb",className:"align-middle"})," ",(0,w.jsxs)("strong",{children:[n("tip"),": "]}),n("log_entry_maximum_entries_see_full_logs")]})}const T=function(e){let{totalEntries:t,entriesShown:n,hasErrors:r}=e;const{t:o}=(0,c.Bd)(),i=o("log_entry_maximum_entries_title",{total:t,displayed:n});return(0,w.jsx)(Q.A,{entryAriaLabel:o("log_entry_maximum_entries"),headerTitle:i,level:"raw",formattedContent:(0,w.jsx)(E,{hasErrors:r})})},j=[{import:r,path:"/overleaf/services/web/modules/ai/frontend/js/components/ai-error-assistant-previous-fix"}];function P(e){let{entries:t,hasErrors:n}=e;const{t:r}=(0,c.Bd)(),{syncToEntry:o}=(0,v.Rf)(),i=t.slice(0,100);return(0,w.jsxs)(w.Fragment,{children:[t.length>100&&(0,w.jsx)(T,{totalEntries:t.length,entriesShown:100,hasErrors:n}),j.map((e=>{let{import:{default:t},path:n}=e;return(0,w.jsx)(t,{},n)})),i.map(((e,t)=>(0,w.jsx)(Q.A,{index:t,id:e.key,logEntry:e,ruleId:e.ruleId,headerTitle:e.messageComponent??e.message,rawContent:e.content,logType:e.type,level:e.level,contentDetails:e.contentDetails,entryAriaLabel:r("log_entry_description",{level:e.level}),sourceLocation:{file:e.file,line:e.line,column:e.column},onSourceLocationClick:o},e.key)))]})}const $=(0,o.memo)(P)},65591:(e,t,n)=>{"use strict";const r=n(45250);class o{constructor(e){this.data=e||{}}static fromRaw(e){if(e)return new o(e)}toRaw(){if(!this.data)return null;return r.clone(this.data)}clone(){return o.fromRaw(this.toRaw())}applyTo(e){r.size(this.data)&&(e.v2DocVersions?r.assign(e.v2DocVersions.data,this.data):e.v2DocVersions=this.clone())}moveFile(e,t){for(const[n,r]of Object.entries(this.data))if(r.pathname===e){""===t?delete this.data[n]:r.pathname=t;break}}}e.exports=o},65734:(e,t,n)=>{n(97107);const r=n(58756),o=n(43921),i=n(90482),a=n(45317);function s(e,t,n){return(r,o)=>{if(r instanceof e&&o instanceof t)return n(r,o);if(o instanceof e&&r instanceof t){const[e,t]=n(o,r);return[t,e]}return!1}}function l(e,t){return[e,t]}e.exports=class{static transform(e,t){const{AddCommentOperation:n,DeleteCommentOperation:c,SetCommentStateOperation:d}=r;if(e instanceof i||t instanceof i)return[e,t];const h=[s(a,a,a.transform),s(a,c,l),s(a,d,l),s(a,n,((e,t)=>{const r=new o(t.commentId,t.ranges,t.resolved).applyTextOperation(e,t.commentId);return[e,new n(r.id,r.ranges,r.resolved)]})),s(n,n,((e,t)=>e.commentId===t.commentId?[new i,t]:[e,t])),s(n,c,((e,t)=>e.commentId===t.commentId?[new i,t]:[e,t])),s(n,d,((e,t)=>{if(e.commentId===t.commentId){return[new n(e.commentId,e.ranges,t.resolved),t]}return[e,t]})),s(c,c,((e,t)=>e.commentId===t.commentId?[new i,new i]:[e,t])),s(c,d,((e,t)=>e.commentId===t.commentId?[e,new i]:[e,t])),s(d,d,((e,t)=>{if(e.commentId!==t.commentId)return[e,t];if(e.resolved===t.resolved)return[new i,new i];const n=e.resolved&&t.resolved;return e.resolved===n?[e,new i]:[new i,t]}))];for(const n of h){const r=n(e,t);if(r)return r}throw new Error(`Transform not implemented for ${e.constructor.name}￮${t.constructor.name}`)}}},65982:(e,t,n)=>{"use strict";n.d(t,{CH:()=>l,P4:()=>u,yg:()=>h});n(97107);var r=n(22743),o=n(14041),i=n(86316),a=n(60961),s=n(31085);const l={SnapshotUpdater:class{constructor(e){this.projectId=e}refresh(){throw new Error("not implemented")}abort(){throw new Error("not implemented")}},buildFileTree(e){throw new Error("not implemented")},createFolder(e,t){throw new Error("not implemented")}},{SnapshotUpdater:c}=r||l,d=(0,o.createContext)(void 0),h=e=>{let{children:t}=e;const{projectId:n}=(0,i.Om)(),[r,l]=(0,o.useState)(""),[h]=(0,o.useState)((()=>new c(n))),[u,m]=(0,o.useState)(),[p,g]=(0,o.useState)(-1),[f,O]=(0,o.useState)(!1);(0,o.useEffect)((()=>{if(!f)return;let e,t=!1;const n=()=>{l("loading"),h.refresh().then((e=>{let{snapshot:t,snapshotVersion:n}=e;m(t),g(n),l("")})).catch((e=>{a.$.error(e),l("error")})).finally((()=>{t||(e=window.setTimeout(n,3e4))}))};return n(),()=>{t=!0,h.abort(),clearInterval(e)}}),[n,f,h]);const b=(0,o.useMemo)((()=>({snapshot:u,snapshotVersion:p,snapshotLoadingState:r,fileTreeFromHistory:f,setFileTreeFromHistory:O})),[u,p,r,f,O]);return(0,s.jsx)(d.Provider,{value:b,children:t})};function u(){const e=(0,o.useContext)(d);if(!e)throw new Error("useSnapshotContext is only available within SnapshotProvider");return e}},66020:(e,t,n)=>{"use strict";n.d(t,{dk:()=>u,wI:()=>h});n(97107);var r=n(14041),o=n(64932),i=n(7881),a=n(97536),s=n(67353),l=n(31085);const c={pdfViewer:"pdfjs",autoComplete:!0,autoPairDelimiters:!0,syntaxValidation:!1,editorTheme:"textmate",overallTheme:"",mode:"default",fontSize:12,fontFamily:"monaco",lineHeight:"normal",mathPreview:!0,referencesSearchMode:"advanced",enableNewEditor:!0,breadcrumbs:!0},d=(0,r.createContext)(void 0),h=e=>{let{children:t}=e;const[n,h]=(0,r.useState)((()=>(0,o.A)("ol-userSettings")||c)),{unstableStore:u}=(0,s.nK)();(0,r.useEffect)((()=>{const{fontFamily:e,lineHeight:t}=(0,i.e4)(n);u.set("settings",{overallTheme:"light-"===n.overallTheme?"light":"dark",keybindings:"none"===n.mode?"default":n.mode,fontFamily:e,lineHeight:t,fontSize:n.fontSize,isNewEditor:(0,a.x)()&&n.enableNewEditor})}),[u,n]);const m=(0,r.useMemo)((()=>({userSettings:n,setUserSettings:h})),[n,h]);return(0,l.jsx)(d.Provider,{value:m,children:t})};function u(){const e=(0,r.useContext)(d);if(!e)throw new Error("useUserSettingsContext is only available inside UserSettingsProvider");return e}},66502:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(46039),o=n(64932);const i={raw:!1,warning:!0,error:!0,typesetting:!1};function a(e){const{view:t}=(0,r.xl)();return!!t&&(!!(0,o.A)("ol-showAiErrorAssistant")&&(!!e&&(!(!e.level||!i[e.level])&&!!e.raw)))}},67353:(e,t,n)=>{"use strict";n.d(t,{Qi:()=>a,nK:()=>s});n(97107);var r=n(14041),o=n(31085);const i=(0,r.createContext)(void 0),a=e=>{let{ide:t,scopeEventEmitter:n,unstableStore:a,children:s}=e;(0,r.useEffect)((()=>{window.overleaf={...window.overleaf,unstable:{...window.overleaf?.unstable,store:a}}}),[a]);const l=(0,r.useMemo)((()=>({...t,scopeEventEmitter:n,unstableStore:a})),[t,n,a]);return(0,o.jsx)(i.Provider,{value:l,children:s})};function s(){const e=(0,r.useContext)(i);if(!e)throw new Error("useIdeContext is only available inside IdeProvider");return e}},67777:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(57597),o=n(31085);const i=function(e){const t=e.as??"div";return(0,o.jsx)(r.A,{...e,as:t})}},68016:(e,t,n)=>{"use strict";n.d(t,{f:()=>m,A:()=>h});var r=n(14041);const o=n.p+"images/ai-error-assistant-sparkle-59ba9c256cb58b732225.svg";var i=n(31085);const a=e=>{let{height:t=28,width:n=30}=e;return(0,i.jsx)("img",{alt:"sparkle",height:t,width:n,src:o,className:"ai-error-assistant-avatar"})};var s=n(35447),l=n(71627),c=n(69954),d=n(97434);const h="ai-error-assistant-consent",u={location:"logs",name:h},m=e=>{let{suggestFix:t}=e;const{t:n}=(0,d.Bd)(),{completeTutorial:o}=(0,s.A)(h,u);(0,r.useEffect)((()=>{c._("promo-prompt",u)}),[]);const m=(0,r.useCallback)((async()=>{await o({event:"promo-click",action:"complete"}),t()}),[o,t]);return(0,i.jsxs)("div",{className:"ai-error-assistant ai-error-assistant-intro",children:[(0,i.jsxs)("div",{className:"ai-error-assistant-header",children:[(0,i.jsx)(a,{}),(0,i.jsx)("div",{className:"ai-error-assistant-meta",children:(0,i.jsx)("div",{className:"ai-error-assistant-heading",children:n("before_you_use_error_assistant")})})]}),(0,i.jsxs)("div",{className:"ai-error-assistant-messages ai-error-assistant-intro-messages",children:[(0,i.jsx)("p",{children:"Error Assist uses AI. Like any AI, it can make mistakes, so make sure you review the fixes it suggests before you apply them. And don’t forget to let us know if it was helpful (or not)."}),(0,i.jsxs)("p",{children:["It’s powered by GPT-4 and some of your project’s content will be sent to OpenAI to generate the answers it provides. Your data will not be used for training the model. There are more details about this"," ",(0,i.jsx)("a",{href:"/learn/how-to/Overleaf_AI_error_assistant",target:"_blank",children:"in our docs"}),"."]})]}),(0,i.jsx)("div",{className:"ai-error-assistant-footer",children:(0,i.jsx)(l.A,{variant:"primary",onClick:m,children:n("accept_and_continue")})})]})}},68273:(e,t,n)=>{"use strict";n.d(t,{w:()=>o});var r=n(14041);const o=e=>{const t=(0,r.useRef)(null),n=(0,r.useCallback)((n=>{if(n&&"ResizeObserver"in window){t.current&&t.current.observer.unobserve(t.current.element);const r=new ResizeObserver((t=>{let[n]=t;e(n.target)}));t.current={element:n,observer:r},r.observe(n),e(n)}}),[e]);return(0,r.useEffect)((()=>()=>{t.current&&t.current.observer.unobserve(t.current.element)}),[]),{elementRef:n,resizeRef:t}}},68543:(e,t,n)=>{"use strict";n.d(t,{al:()=>M,TS:()=>U});n(97107),n(82438),n(34840),n(99817);var r=n(14041),o=n(69954),i=(n(12266),n(50020),n(74786),n(73208)),a=n.n(i),s=n(44199),l=n(18860),c=n(60961);function d(e){return decodeURIComponent(escape(e))}const h="ShareJsDoc";class u{lastReport=null;queue=[];constructor(e){this.onTimeoutHandler=e}getMetaPreferLocal(){for(const e of this.queue)if(e.scope===h)return e;return this.queue.pop()}onTimeout(e){this.queue.push(e),setTimeout((()=>{if(!this.queue.length)return;const e=this.getMetaPreferLocal();this.queue.length=0;const t=Date.now();null!==this.lastReport&&t-this.lastReport<6e4||(this.lastReport=t,this.onTimeoutHandler(e))}))}}class m{lastAck=null;constructor(e){let{parent:t,onTimeoutHandler:n}=e;if(this.scope=t?h:"global",this.timeout=6e4,this.parent=t,t)this.reporter=t.reporter;else{if(!n)throw new Error("No parent or onTimeoutHandler");this.reporter=new u(n)}this.lastAck=null,this.lastUnackedEdit=null}onAck(){this.lastAck=performance.now(),this.parent&&this.parent.onAck()}onEdit(){const e=performance.now();this.lastAck>this.lastUnackedEdit&&(this.lastUnackedEdit=null),this.lastUnackedEdit||(this.lastUnackedEdit=e);const t=e-this.lastUnackedEdit;if(t>this.timeout){const n=Date.now()-e,r={scope:this.scope,delay:t,lastAck:this.lastAck?n+this.lastAck:0,lastUnackedEdit:n+this.lastUnackedEdit};this.log("timedOut",r),this.reporter.onTimeout(r)}}attachToEditor(e){this.log("attach to editor");const t=(e,t)=>{"remote"!==t.origin&&(t.removed||t.inserted)&&this.onEdit()};return e.on("change",t),()=>{this.log("detach from editor"),e.off("change",t)}}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];c.$.log(`[EditorWatchdogManager] ${this.scope}:`,...t)}}var p=n(64932);var g=n(58756);const f={api:{otType:"history-ot",trackChangesUserId:null,getText(){return this.snapshot.getContent({filterTrackedDeletes:!0})},getLength(){return this.snapshot.getStringLength()}},transformX(e,t){const n=[...e],r=[...t];for(let e=0;e<n.length;e++)for(let t=0;t<r.length;t++){const[o,i]=g.EditOperationTransformer.transform(n[e],r[t]);n[e]=o,r[t]=i}return[n,r]},apply(e,t){const n=g.StringFileData.fromRaw(e.toRaw());for(const e of t)n.edit(e);return n},compose(e,t){const n=[...e,...t];let r=n.shift();if(void 0===r)return[];const o=[];for(const e of n)r.canBeComposedWith(e)?r=r.compose(e):(o.push(r),r=e);return o.push(r),o}};class O extends s.A{track_changes=!1;track_changes_id_seeds=null;lastAcked=null;pendingOpCreatedAt=null;inflightOpCreatedAt=null;queuedMessageTimer=null;queuedMessages=[];detachEditorWatchdogManager=null;_timeoutTimer=null;constructor(e,t,n,r,o,i){var a;let s,h,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"sharejs-text-ot";super(),a=this,this.doc_id=e,this.socket=r,this.globalEditorWatchdogManager=o,this.eventEmitter=i,this.type=u,"history-ot"===this.type?(h=g.StringFileData.fromRaw(t),s=f):(h=t.map((e=>d(e))).join("\n"),s=l.A.types.text),this.connection={send:e=>(this.startInflightOpTimeout(e),this.track_changes&&this.track_changes_id_seeds&&(null==e.meta&&(e.meta={}),e.meta.tc=this.track_changes_id_seeds.inflight),this.socket.emit("applyOtUpdate",this.doc_id,e,(e=>{null!=e&&this.handleError(e)}))),state:"ok",id:this.socket.publicId},this._doc=new l.J(this.connection,this.doc_id,{type:s}),this._doc.setFlushDelay(2e3),this._doc.on("change",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t[3]||a.pendingOpCreatedAt||(c.$.log("set pendingOpCreatedAt",new Date),a.pendingOpCreatedAt=performance.now()),a.trigger("change",...t)})),this.editorWatchdogManager=new m({parent:o}),this._doc.on("acknowledge",(()=>(this.lastAcked=performance.now(),this.inflightOpCreatedAt=null,c.$.log("unset inflightOpCreatedAt"),this.editorWatchdogManager.onAck(),this.trigger("acknowledge")))),this._doc.on("remoteop",(function(){a._doc.setFlushDelay(500);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return a.trigger("remoteop",...t)})),this._doc.on("flipped_pending_to_inflight",(()=>(this.inflightOpCreatedAt=this.pendingOpCreatedAt,c.$.log("set inflightOpCreatedAt from pendingOpCreatedAt"),this.pendingOpCreatedAt=null,c.$.log("unset pendingOpCreatedAt"),this.trigger("flipped_pending_to_inflight")))),this._doc.on("saved",(()=>this.trigger("saved"))),this._doc.on("error",(e=>this.handleError(e))),this.bindToDocChanges(this._doc),this.processUpdateFromServer({open:!0,v:n,snapshot:h}),this.removeCarriageReturnCharFromShareJsDoc()}setTrackChangesUserId(e){this.track_changes=null!=e}getTrackedChanges(){return"history-ot"===this._doc.otType?this._doc.snapshot.getTrackedChanges():null}removeCarriageReturnCharFromShareJsDoc(){const e=this._doc;let t;for(;-1!==(t=e.getText().indexOf("\r"));)c.$.log("[ShareJsDoc] remove-carriage-return-char",t),e.del(t,1)}submitOp(e){this._doc.submitOp(e)}isAheadOfExpectedVersion(e){return this._doc.version>0&&e.v>this._doc.version}pushOntoQueue(e){c.$.log(`[processUpdate] push onto queue ${e.v}`),this.queuedMessageTimer||(this.queuedMessageTimer=window.setTimeout((()=>{c.$.log(`[processUpdate] queue timeout fired for ${e.v}`),this.processUpdateFromServer(e)}),5e3)),this.queuedMessages.push(e),this.queuedMessages.sort((function(e,t){return e.v-t.v}))}clearQueue(){this.queuedMessages=[]}processQueue(){if(this.queuedMessages.length>0){const e=this.queuedMessages[0].v;if(e>this._doc.version);else{c.$.log(`[processUpdate] taken from queue ${e}`);const t=this.queuedMessages.shift();t&&this.processUpdateFromServerInOrder(t),0===this.queuedMessages.length&&this.queuedMessageTimer&&(c.$.log("[processUpdate] queue is empty, cleared timeout"),window.clearTimeout(this.queuedMessageTimer),this.queuedMessageTimer=null)}}}processUpdateFromServerInOrder(e){if(this.isAheadOfExpectedVersion(e))return void this.pushOntoQueue(e);const t=this.processUpdateFromServer(e);t instanceof Error&&"Invalid version from server"===t.message?this.clearQueue():this.processQueue()}processUpdateFromServer(e){try{if("history-ot"===this.type&&null!=e.op){const t=e.op;this._doc._onMessage({...e,op:t.map(g.EditOperationBuilder.fromJSON)})}else this._doc._onMessage(e)}catch(e){return c.$.log(e),this.handleError(e),e}if("external"===e.meta?.type)return this.trigger("externalUpdate",e)}catchUp(e){return e.map((e=>(e.v=this._doc.version,e.doc=this.doc_id,this.processUpdateFromServer(e))))}getSnapshot(){return this._doc.getText()}getVersion(){return this._doc.version}getTimeSinceLastServerActivity(){return Math.floor(performance.now()-this._doc.lastServerActivity)}getType(){return this.type}clearInflightAndPendingOps(){return this.clearFatalTimeoutTimer(),this._doc.inflightOp=null,this._doc.inflightCallbacks=[],this._doc.pendingOp=null,this._doc.pendingCallbacks=[]}flushPendingOps(){return this._doc.flush()}updateConnectionState(e){c.$.log(`[updateConnectionState] Setting state to ${e}`),this.connection.state=e,this.connection.id=this.socket.publicId,this._doc.autoOpen=!1,this._doc._connectionStateChanged(e),this.lastAcked=null}hasBufferedOps(){return null!=this._doc.inflightOp||null!=this._doc.pendingOp}getInflightOp(){return this._doc.inflightOp}getPendingOp(){return this._doc.pendingOp}getRecentAck(){return null!==this.lastAcked&&performance.now()-this.lastAcked<4e3}getInflightOpCreatedAt(){return this.inflightOpCreatedAt}getPendingOpCreatedAt(){return this.pendingOpCreatedAt}attachEditorWatchdogManager(e){this.detachEditorWatchdogManager=this.editorWatchdogManager.attachToEditor(e)}attachToEditor(e,t){this.attachEditorWatchdogManager(e),t()}maybeDetachEditorWatchdogManager(){this.detachEditorWatchdogManager&&(this.detachEditorWatchdogManager(),this.detachEditorWatchdogManager=null)}attachToCM6(e){this.attachToEditor(e,(()=>{e.attachShareJs(this._doc,(0,p.A)("ol-maxDocLength"))}))}detachFromCM6(){this.maybeDetachEditorWatchdogManager(),this._doc.detach_cm6&&this._doc.detach_cm6()}startInflightOpTimeout(e){this.startFatalTimeoutTimer(e);const t=()=>{if(c.$.log("[inflightOpTimeout] Trying op again"),null!=this._doc.inflightOp){if(e.dupIfSource=[this.connection.id,...Array.from(this._doc.inflightSubmittedIds)],"ok"===this.connection.state)return c.$.log("[inflightOpTimeout] Sending"),this.connection.send(e);c.$.log("[inflightOpTimeout] Not connected, retrying in 0.5s"),window.setTimeout(t,500)}},n=window.setTimeout(t,5e3);return this._doc.inflightCallbacks.push((()=>{this.clearFatalTimeoutTimer(),window.clearTimeout(n)}))}startFatalTimeoutTimer(e){if(null==this._timeoutTimer)return this._timeoutTimer=window.setTimeout((()=>(this.clearFatalTimeoutTimer(),this.trigger("op:timeout",e))),45e3)}clearFatalTimeoutTimer(){if(null!=this._timeoutTimer)return clearTimeout(this._timeoutTimer),this._timeoutTimer=null}handleError(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.trigger("error",e,t)}bindToDocChanges(e){const{submitOp:t}=e;e.submitOp=(n,r)=>(function(){const e=(0,p.A)("ol-project_id");(0,o.v4)("document-first-change",{projectId:e,isSmallDevice:o.mP})}(),this.trigger("op:sent",n),e.pendingCallbacks.push((()=>this.trigger("op:acknowledged",n))),t.call(e,n,r));const{flush:n}=e;e.flush=()=>(this.trigger("flush",e.inflightOp,e.pendingOp,e.version),n.call(e))}}var b=n(72607),v=n(37603),w=n.n(v);function _(e){return e.reduce(((e,t)=>e+function(e){return(0,b.Tb)(e)?e.i.length:(0,b.XQ)(e)?e.d.length:0}(t)),0)}class x extends s.A{wantToBeJoined=!1;chaosMonkeyTimer=null;track_changes_as=null;joinCallbacks=[];leaveCallbacks=[];joined=!1;docName="";constructor(e,t,n,r,o){super(),this.doc_id=e,this.socket=t,this.globalEditorWatchdogManager=n,this.ideEventEmitter=r,this.detachDoc=o,this.connected=this.socket.socket.connected,this.bindToEditorEvents(),this.bindToSocketEvents()}attachToCM6(e){this.cm6=e,this.doc&&this.doc.attachToCM6(this.cm6),this.cm6.on("change",this.checkConsistency)}detachFromCM6(){this.doc&&this.doc.detachFromCM6(),this.cm6&&this.cm6.off("change",this.checkConsistency),delete this.cm6,this.clearChaosMonkey(),this.doc&&this.ideEventEmitter.emit("document:closed",this.doc)}submitOp(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.doc?.submitOp(t)}checkConsistency=e=>{window.setTimeout((()=>{const t=e?.getValue(),n=this.doc?.getSnapshot();if(t!==n)return this.onError(new Error("Editor text does not match server text"),{},t)}),0)};getSnapshot(){return this.doc?.getSnapshot()}getType(){return this.doc?.getType()}getInflightOp(){return this.doc?.getInflightOp()}getPendingOp(){return this.doc?.getPendingOp()}getRecentAck(){return this.doc?.getRecentAck()}getInflightOpCreatedAt(){return this.doc?.getInflightOpCreatedAt()}getPendingOpCreatedAt(){return this.doc?.getPendingOpCreatedAt()}hasBufferedOps(){return this.doc?.hasBufferedOps()}setTrackChangesUserId(e){this.track_changes_as=e,this.doc&&this.doc.setTrackChangesUserId(e),this.cm6&&this.cm6.setTrackChangesUserId(e)}getTrackingChanges(){return!!this.doc?.track_changes}setTrackChangesIdSeeds(e){this.doc&&(this.doc.track_changes_id_seeds=e)}onUpdateAppliedHandler=e=>this.onUpdateApplied(e);onErrorHandler=(e,t)=>{t.doc_id===this.doc_id&&this.onError(e,t)};onDisconnectHandler=()=>this.onDisconnect();bindToSocketEvents(){return this.socket.on("otUpdateApplied",this.onUpdateAppliedHandler),this.socket.on("otUpdateError",this.onErrorHandler),this.socket.on("disconnect",this.onDisconnectHandler)}unBindFromSocketEvents(){return this.socket.removeListener("otUpdateApplied",this.onUpdateAppliedHandler),this.socket.removeListener("otUpdateError",this.onErrorHandler),this.socket.removeListener("disconnect",this.onDisconnectHandler)}bindToEditorEvents(){this.ideEventEmitter.on("project:joined",this.onReconnect)}unBindFromEditorEvents(){this.ideEventEmitter.off("project:joined",this.onReconnect)}leaveAndCleanUp(e){return this.leave((t=>{this.cleanUp(),e&&e(t)}))}leaveAndCleanUpPromise(){return new Promise(((e,t)=>{this.leaveAndCleanUp((n=>{n?t(n):e()}))}))}join(e){this.wantToBeJoined=!0,this.cancelLeave(),this.connected?this.joinDoc(e):e&&this.joinCallbacks.push(e)}leave(e){this.flush(),this.wantToBeJoined=!1,this.cancelJoin(),this.doc?.hasBufferedOps()?(c.$.log("[leave] Doc has buffered ops, pushing callback for later"),e&&this.leaveCallbacks.push(e)):this.connected?(c.$.log("[leave] Leaving now"),this.leaveDoc(e)):(c.$.log("[leave] Not connected, returning now"),e?.())}flush(){return this.doc?.flushPendingOps()}chaosMonkey(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"a";const n=t;let r=null,o=0;const i=()=>{null!=r&&r.length||(r=n.slice()+" "+new Date+"\n",e+=Math.random()>.1?1:-2,e<0&&(e=0),o=0),t=r[0],r=r.slice(1),this.cm6&&this.cm6.view.dispatch({changes:{from:Math.min(o,this.cm6.view.state.doc.length),insert:t}}),o+=1,this.chaosMonkeyTimer=window.setTimeout(i,100+(Math.random()<.1?1e3:0))};i()}clearChaosMonkey(){const e=this.chaosMonkeyTimer;e&&(this.chaosMonkeyTimer=null,window.clearTimeout(e))}pollSavedStatus(){let e;const t=this.getInflightOp(),n=this.getPendingOp(),r=this.getRecentAck(),o=n?_(n):0;return null==t&&null==n?(e=!0,c.$.log("[pollSavedStatus] no inflight or pending ops")):t&&t===this.oldInflightOp?(e=!1,c.$.log("[pollSavedStatus] inflight op is same as before")):null!=n&&r&&o<64?(e=!0,c.$.log("[pollSavedStatus] pending op (small with recent ack) assume ok",n,o)):(e=!1,c.$.log(`[pollSavedStatus] assuming not saved (inflightOp?: ${null!=t}, pendingOp?: ${null!=n})`)),this.oldInflightOp=t,e}cancelLeave(){this.leaveCallbacks=[]}cancelJoin(){this.joinCallbacks=[]}onUpdateApplied(e){if(e?.doc===this.doc_id&&null!=this.doc&&(this.doc.processUpdateFromServerInOrder(e),!this.wantToBeJoined))return this.leave()}onDisconnect(){return c.$.log("[onDisconnect] disconnecting"),this.connected=!1,this.joined=!1,null!=this.doc?this.doc.updateConnectionState("disconnected"):void 0}onReconnect=()=>{c.$.log("[onReconnect] reconnected (joined project)"),this.connected=!0,(this.wantToBeJoined||this.doc?.hasBufferedOps())&&(c.$.log(`[onReconnect] Rejoining (wantToBeJoined: ${this.wantToBeJoined} OR hasBufferedOps: ${this.doc?.hasBufferedOps()})`),this.joinDoc((e=>{e?this.onError(e):(this.doc?.updateConnectionState("ok"),this.doc?.flushPendingOps(),this.callJoinCallbacks())})))};callJoinCallbacks(){for(const e of this.joinCallbacks)e();this.joinCallbacks=[]}joinDoc(e){var t=this;if(this.doc)return this.socket.emit("joinDoc",this.doc_id,this.doc.getVersion(),{encodeRanges:!0,age:this.doc.getTimeSinceLastServerActivity(),supportsHistoryOT:!0},(function(n,r,o,i,a){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"sharejs-text-ot";if(n)e?.(n);else{if(t.joined=!0,t.doc?.catchUp(i),t.doc?.getType()!==s)throw new(w())("ot type mismatch",{got:s,want:t.doc?.getType()});"sharejs-text-ot"===s&&(t.decodeRanges(a),t.catchUpRanges(a?.changes,a?.comments)),e?.()}}));this.socket.emit("joinDoc",this.doc_id,{encodeRanges:!0,supportsHistoryOT:!0},(function(n,r,o,i,s){let l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"sharejs-text-ot";n?e?.(n):(t.joined=!0,t.doc=new O(t.doc_id,r,o,t.socket,t.globalEditorWatchdogManager,t.ideEventEmitter,l),"sharejs-text-ot"===l&&t.decodeRanges(s),t.ranges=new(a())(s?.changes,s?.comments),t.bindToShareJsDocEvents(),e?.())}))}decodeRanges(e){try{if(e.changes)for(const t of e.changes)(0,b.Tb)(t.op)&&(t.op.i=d(t.op.i)),(0,b.XQ)(t.op)&&(t.op.d=d(t.op.d));return e.comments?e.comments.map((e=>null!=e.op.c?e.op.c=d(e.op.c):void 0)):[]}catch(e){c.$.error(e)}}leaveDoc(e){c.$.log("[leaveDoc] Sending leaveDoc request"),this.socket.emit("leaveDoc",this.doc_id,(t=>{if(t)e?.(t);else{this.joined=!1;for(const e of this.leaveCallbacks)c.$.log("[_leaveDoc] Calling buffered callback",e),e(t);this.leaveCallbacks=[],e?.()}}))}cleanUp(){this.hasBufferedOps()?c.$.log(`[cleanUp] Document (${this.doc_id}) has buffered ops, refusing to remove from openDocs`):(this.detachDoc(this.doc_id,this),this.unBindFromEditorEvents(),this.unBindFromSocketEvents())}bindToShareJsDocEvents(){var e=this;if(!this.doc)return;this.doc.on("error",((e,t)=>this.onError(e,t))),this.doc.on("externalUpdate",(e=>this.trigger("externalUpdate",e))),this.doc.on("remoteop",(function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.trigger("remoteop",...n)})),this.doc.on("op:sent",(()=>this.trigger("op:sent"))),this.doc.on("op:acknowledged",(e=>(this.ideEventEmitter.emit("ide:opAcknowledged",{doc_id:this.doc_id,op:e}),this.trigger("op:acknowledged")))),this.doc.on("op:timeout",(()=>(this.trigger("op:timeout"),this.onError(new Error("op timed out")))));let t,n=null;this.doc.on("change",((e,t,r)=>{"sharejs-text-ot"===this.getType()&&this.applyOpsToRanges(e,r),n&&window.clearTimeout(n),n=window.setTimeout((()=>{e.some(b.E0)&&(window.dispatchEvent(new CustomEvent("doc:changed",{detail:{id:this.doc_id}})),this.ideEventEmitter.emit("doc:changed",{doc_id:this.doc_id}))}),50)})),this.doc.on("flipped_pending_to_inflight",(()=>this.trigger("flipped_pending_to_inflight"))),this.doc.on("saved",(()=>{t&&window.clearTimeout(t),t=window.setTimeout((()=>{window.dispatchEvent(new CustomEvent("doc:saved",{detail:{id:this.doc_id}})),this.ideEventEmitter.emit("doc:saved",{doc_id:this.doc_id})}),50)}))}onError(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;t.doc_id=this.doc_id,c.$.log("ShareJS error",e,t),"no project_id found on client"!==e.message?(this.doc&&this.doc.clearInflightAndPendingOps(),this.trigger("error",e,t,n),this.cleanUp()):c.$.log("ignoring error, will wait to join project")}applyOpsToRanges(e,t){let n,r=null;const o=null!=t;o&&t?.meta.tc?(n=this.ranges.getIdSeed(),this.ranges.setIdSeed(t.meta.tc),r=t.meta.user_id):o||null==this.track_changes_as||(r=this.track_changes_as),this.ranges.track_changes=null!=r;for(const t of this.filterOps(e))this.ranges.applyOp(t,{user_id:r});return null!=n&&this.ranges.setIdSeed(n),o?window.setTimeout((()=>this.emit("ranges:dirty"))):this.emit("ranges:dirty")}catchUpRanges(e,t){null==e&&(e=[]),null==t&&(t=[]),this.emit("ranges:clear"),this.ranges.changes=e,this.ranges.comments=t,this.ranges.track_changes=this.doc?.track_changes??!1;for(const e of this.filterOps(this.doc?.getInflightOp()||[]))this.ranges.setIdSeed(this.doc?.track_changes_id_seeds?.inflight),this.ranges.applyOp(e,{user_id:this.track_changes_as});for(const e of this.filterOps(this.doc?.getPendingOp()||[]))this.ranges.setIdSeed(this.doc?.track_changes_id_seeds?.pending),this.ranges.applyOp(e,{user_id:this.track_changes_as});return this.emit("ranges:redraw")}filterOps(e){return(0,p.A)("ol-isRestrictedTokenMember")?e.filter((e=>!(0,b.H8)(e))):e}}class y{openDocs=(()=>new Map)();constructor(e,t,n){this.socket=e,this.globalEditorWatchdogManager=t,this.events=n}getDocument(e){return this.openDocs.has(e)&&(c.$.log(`[getDocument] Cleaning up existing document instance for ${e}`),this.openDocs.get(e)?.cleanUp()),this.openDocs.has(e)?c.$.log(`[getDocument] Returning existing document instance for ${e}`):(c.$.log(`[getDocument] Creating new document instance for ${e}`),this.createDoc(e)),this.openDocs.get(e)}createDoc(e){const t=new x(e,this.socket,this.globalEditorWatchdogManager,this.events,this.detachDoc.bind(this));this.openDocs.set(e,t)}detachDoc(e,t){this.openDocs.get(e)===t?(c.$.log(`[detach] Removing document with ID (${e}) from openDocs`),this.openDocs.delete(e)):c.$.log(`[_cleanUp] New instance of (${e}) created. Not removing`)}hasUnsavedChanges(){for(const e of this.openDocs.values())if(e.hasBufferedOps())return!0;return!1}flushAll(){for(const e of this.openDocs.values())e.flush()}unsavedDocs(){const e=[];for(const t of this.openDocs.values())t.pollSavedStatus()||e.push(t);return e}async awaitBufferedOps(e){if(this.hasUnsavedChanges()){const{promise:t,resolve:n}=Promise.withResolvers();let r=!1;const o=()=>{this.hasUnsavedChanges()||(c.$.log("saved"),window.removeEventListener("doc:saved",o),r=!0,n())};window.addEventListener("doc:saved",o),e.addEventListener("abort",(()=>{r||(c.$.log("aborted"),window.removeEventListener("doc:saved",o),n())})),this.flushAll(),await t}}}var k=n(78494),C=n(16896),S=n(56447),Q=n(85960),E=n(60440),T=n(41479),j=n(37766),P=n(83096),$=n(97434),R=n(37664),X=n(89139),A=n(29755);const q=(e,t)=>{const n=(0,r.useRef)(null),o=(0,r.useRef)(null),i=(0,r.useRef)({});(0,r.useEffect)((()=>{n.current=t}),[t]),(0,r.useEffect)((()=>{o.current=e}),[e]);const a=(0,r.useMemo)((()=>async()=>await async function(e,t,n){if(c.$.debug("tryGetDiffSize"),!t)return c.$.debug("tryGetDiffSize: missing projectId"),null;if(!e)return c.$.debug("tryGetDiffSize: missing currentContents"),null;if(!n)return c.$.debug("tryGetDiffSize: missing docId"),null;try{const r=await fetch(`/Project/${t}/doc/${n}/download`,{signal:AbortSignal.timeout(5e3)}),o=await r.text(),i=(0,A.JJ)(o,e);let a=0;for(const e of i)(e.added||e.removed)&&(a+=e.value.length);return a}catch{return c.$.debug("tryGetDiffSize: fetch failed"),null}}(n.current?.getSnapshot(),o.current,n.current?.doc_id)),[]);return{createDebugDiff:a,debugTimers:i}};var L=n(39891),I=n(55937),N=n(96283),D=n(31085);const W=(0,r.createContext)(void 0),M=e=>{let{children:t}=e;const{t:n}=(0,$.Bd)(),{reportError:i,eventEmitter:a,projectId:s,setOutOfSync:l}=(0,k.yn)(),{socket:d,closeConnection:h,connectionState:u}=(0,C.FX)(),{view:p,setView:g,setOpenFile:f}=(0,S.LV)(),{showGenericMessageModal:O,genericModalVisible:b,showOutOfSyncModal:v}=(0,P.T)(),{id:w}=(0,Q.ur)(),{showVisual:_,opening:x,setOpening:A,errorState:M,setErrorState:U,setTrackChanges:F,wantTrackChanges:V}=(0,N.dB)(),{currentDocumentId:G,setCurrentDocumentId:Z,setOpenDocName:B,currentDocument:z,setCurrentDocument:Y}=(0,I.Wq)(),H=(0,r.useRef)(V);(0,r.useEffect)((()=>{H.current=V}),[V]);const K=(0,j.A)("editor:gotoLine"),{fileTreeData:J}=(0,E.Q)(),[ee,te]=(0,r.useState)(!1),{createDebugDiff:ne,debugTimers:re}=q(s,z),[oe]=(0,r.useState)((()=>new m({onTimeoutHandler:e=>{let t=null;ne().then((e=>{t=e})).finally((()=>{(0,o._)("losing-edits",{...e,diffSize:t,timers:re.current}),i("losing-edits",{...e,diffSize:t,timers:re.current})}))}}))),[ie,ae]=(0,r.useState)(null),[se,le]=(0,r.useState)(!1);(0,r.useEffect)((()=>{b||le(!1)}),[b]);const[ce]=(0,r.useState)((()=>new y(d,oe,a))),de=`doc.open_id.${s}`;(0,r.useEffect)((()=>{G&&R.A.setItem(de,G)}),[G,de]);const he=(0,r.useRef)(0),ue=(0,r.useCallback)((()=>z?_?"cm6-rich-text":"cm6":null),[z,_]),me=(0,r.useCallback)((()=>z?.getSnapshot()??null),[z]),pe=(0,r.useCallback)((()=>G),[G]),ge=(0,r.useCallback)((e=>{K(e)}),[K]),fe=(0,r.useCallback)(((e,t)=>{t.on("error",((n,r,o)=>{ae({doc:e,document:t,error:n,meta:r,editorContent:o})}))}),[]),Oe=(0,r.useRef)(ee);(0,r.useEffect)((()=>{Oe.current=ee}),[ee]);const be=(0,r.useCallback)(((e,t)=>{fe(e,t),t.on("externalUpdate",(e=>{Oe.current||"external"===e.meta.type&&"git-bridge"===e.meta.source||"file-restore"!==e.meta.origin?.kind&&"project-restore"!==e.meta.origin?.kind&&O(n("document_updated_externally"),n("document_updated_externally_detail"))}))}),[fe,O,n]),ve=(0,r.useRef)(null),we=(0,r.useCallback)((e=>{if(!e)return;ve.current&&(window.clearTimeout(ve.current),ve.current=null);const t=H.current,n=e.getTrackingChanges();if(t===n)return void F(t);const r=()=>{null==e.getInflightOp()&&null==e.getPendingOp()?(e.setTrackChangesUserId(t?w:null),F(t)):ve.current=window.setTimeout(r,100)};r()}),[F,w]),_e=(0,r.useCallback)((e=>new Promise(((t,n)=>{c.$.log("[doOpenNewDocument] Opening...");const r=ce.getDocument(e._id);if(!r)return c.$.error(`No open document with ID '${e._id}' found`),void n(new Error("no open document found"));const o=++he.current;r.join((i=>i?(c.$.log(`[doOpenNewDocument] error joining doc ${e._id}`,i),void n(i)):he.current!==o?(c.$.log(`[doOpenNewDocument] editorOpenDocEpoch mismatch ${he.current} vs ${o}`),r.leaveAndCleanUp(),void n(new Error("another document was loaded"))):(be(e,r),void t(r))))}))),[be,ce]),xe=(0,r.useCallback)((async e=>{const t=z?.doc_id,n=z&&z.hasBufferedOps();if(z&&t!==e._id||n){c.$.log("[openNewDocument] Leaving existing open doc..."),z.off(),fe(e,z);const n=++he.current;try{await z.leaveAndCleanUpPromise()}catch(e){throw c.$.log(`[openNewDocument] error leaving doc ${t}`,e),e}if(he.current!==n)throw c.$.log(`[openNewDocument] editorOpenDocEpoch mismatch ${he.current} vs ${n}`),new Error("another document was loaded")}return _e(e)}),[fe,_e,z]),ye=(0,r.useRef)(G);(0,r.useEffect)((()=>{ye.current=G}),[G]);const ke=(0,r.useCallback)((async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};c.$.log(`[openDoc] Opening ${e._id}`);const{promise:r,resolve:o,reject:i}=Promise.withResolvers();"editor"===p&&a.emit("store-doc-position"),t.keepCurrentView||g("editor");const s=n=>{window.dispatchEvent(new CustomEvent("doc:after-opened",{detail:{isNewDoc:n,docId:e._id}})),window.dispatchEvent(new CustomEvent("entity:opened",{detail:e._id})),!function(e){return"number"==typeof e.gotoLine}(t)?function(e){return"number"==typeof e.gotoOffset}(t)&&window.setTimeout((()=>{a.emit("editor:gotoOffset",t)})):(window.setTimeout((()=>ge(t))),n&&window.addEventListener("editor:scroll-position-restored",(()=>ge(t)),{once:!0})),o(e)};if(e._id!==ye.current||t.forceReopen){ye.current=e._id,Z(e._id),B(e.name),A(!0);try{const t=await xe(e);we(t),A(!1),Y(t),s(!0)}catch(t){if("another document was loaded"===t?.message)return void c.$.log(`[openDoc] another document was loaded while ${e._id} was loading`);c.$.error("Error opening document",t),O(n("error_opening_document"),n("error_opening_document_detail")),i(t)}return r}s(!1)}),[a,ge,xe,Y,Z,B,A,g,O,we,n,p]),Ce=(0,r.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=(0,T.p)(J,e);n&&ke(n,t)}),[J,ke]),Se=(0,r.useCallback)((e=>{const t=(0,T.i)(J,e);t&&(f((0,L.D)(t)),window.dispatchEvent(new CustomEvent("entity:opened",{detail:t._id})))}),[J,f]),Qe=(0,r.useCallback)((e=>{const t=R.A.getItem(de)||e;t&&Ce(t)}),[de,Ce]);(0,r.useEffect)((()=>{if(ie){const{doc:e,document:t,error:r,meta:o}=ie;let{editorContent:s}=ie;const c="string"==typeof r?r:r?.message??"";if(ae(null),c.includes("maxDocLength")){ke(e,{forceReopen:!0});const r=null!=t.ranges&&t.ranges.changes.some((e=>"d"in e.op))?`${n("document_too_long_detail")} ${n("document_too_long_tracked_deletes")}`:n("document_too_long_detail");O(n("document_too_long"),r),le(!0)}else if(/too many comments or tracked changes/.test(c))O(n("too_many_comments_or_tracked_changes"),n("too_many_comments_or_tracked_changes_detail"));else if(!se)return t.off("error"),s="string"==typeof s?s:t.getSnapshot(),t.doc&&t.doc.clearInflightAndPendingOps(),t.leaveAndCleanUp(),h("out-of-sync"),i(r,o),U(!0),l(!0),void v(s||"");const d=()=>{ke(e,{forceReopen:!0})};return a.once("project:joined",d),()=>{a.off("project:joined",d)}}}),[h,ie,se,a,ke,i,U,O,v,l,n]),(0,X.A)("editor:insert-symbol",(0,r.useCallback)((()=>{(0,o._)("symbol-palette-insert")}),[])),(0,X.A)("blur",(0,r.useCallback)((()=>{ce.flushAll()}),[ce])),(0,r.useEffect)((()=>{u.forceDisconnected&&ce.flushAll()}),[u.forceDisconnected,ce]);const Ee=(0,r.useRef)(V);(0,r.useEffect)((()=>{z&&V!==Ee.current&&(Ee.current=V,we(z))}),[z,we,V]);const Te=Boolean((!z||x)&&!M&&G),je=(0,r.useMemo)((()=>({getEditorType:ue,getCurrentDocValue:me,getCurrentDocumentId:pe,setIgnoringExternalUpdates:te,openDocWithId:Ce,openDoc:ke,openDocs:ce,isLoading:Te,openFileWithId:Se,openInitialDoc:Qe,jumpToLine:ge,debugTimers:re})),[ue,me,pe,te,Ce,ke,ce,Se,Qe,Te,ge,re]);return(0,D.jsx)(W.Provider,{value:je,children:t})};function U(){const e=(0,r.useContext)(W);if(!e)throw new Error("useEditorManagerContext is only available inside EditorManagerProvider");return e}},68853:(e,t,n)=>{"use strict";n.d(t,{K:()=>a,h:()=>i});var r=n(83173);const o="editor:repositionAllTooltips",i=()=>r.Z9.define((e=>{const t=()=>(0,r.Pq)(e);return window.addEventListener(o,t),{destroy(){window.removeEventListener(o,t)}}})),a=()=>{window.dispatchEvent(new Event(o))}},69139:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});n(61412),n(91883),n(70286);function r(e){return function(e,t){let n=e.pathname.replace(/\/(detached|detacher)\/?$/,"").replace(/\/$/,"");t&&(n+=`/${t}`);return e.pathname=n,e}(new URL(window.location.href),e)}},70569:(e,t,n)=>{"use strict";n.d(t,{S:()=>c,h:()=>d});n(97107);var r=n(22440),o=n(89139),i=n(94857),a=n(14041),s=n(31085);const l=(0,a.createContext)(void 0),c=e=>{let{children:t}=e;const[n,c]=(0,a.useState)(!0),[d,h]=(0,a.useState)(!1),[u,m]=(0,a.useState)(null),p=(0,a.useCallback)((e=>{m(e)}),[]),g=(0,a.useRef)(null),f=(0,a.useCallback)((()=>{c((e=>!e))}),[]),O=(0,a.useCallback)((()=>{c(!0)}),[]),b=(0,a.useCallback)((()=>{c(!1)}),[]),[v,w]=(0,a.useState)("file-tree");(0,a.useLayoutEffect)((()=>{const e=g.current;e&&(n?e.expand():e.collapse())}),[n,v]);const _=(0,a.useCallback)((e=>{w(e),c(!0)}),[c,w]);(0,o.A)("ui.toggle-review-panel",(0,a.useCallback)((()=>{n&&"review-panel"===v?b():_("review-panel")}),[b,v,n,_])),(0,o.A)("keydown",(0,a.useCallback)((e=>{(i.c?e.metaKey:e.ctrlKey)&&e.shiftKey&&"KeyF"===e.code&&(e.preventDefault(),(0,r.T)("search-open",{searchType:"full-project",method:"keyboard"}),_("full-project-search"))}),[_]));const x=(0,a.useMemo)((()=>({selectedTab:v,isOpen:n,setIsOpen:c,panelRef:g,togglePane:f,handlePaneExpand:O,handlePaneCollapse:b,resizing:d,setResizing:h,activeModal:u,setActiveModal:p,openTab:_})),[v,n,c,g,f,O,b,d,h,u,p,_]);return(0,s.jsx)(l.Provider,{value:x,children:t})},d=()=>{const e=(0,a.useContext)(l);if(!e)throw new Error("useRailContext is only available inside RailProvider");return e}},70915:(e,t,n)=>{"use strict";n.d(t,{e:()=>o});n(82438),n(34840);const r=/^[^%]*\\documentclass/,o=e=>e.split("\n").some((e=>r.test(e)))},71606:(e,t,n)=>{"use strict";n.d(t,{H:()=>r,P:()=>o});const r=new Map([["\\includegraphics",{name:"graphicx",command:"\\usepackage{graphicx}"}],["\\toprule",{name:"booktabs",command:"\\usepackage{booktabs}"}],["\\midrule",{name:"booktabs",command:"\\usepackage{booktabs}"}],["\\bottomrule",{name:"booktabs",command:"\\usepackage{booktabs}"}],["\\cmidrule",{name:"booktabs",command:"\\usepackage{booktabs}"}],["\\multirow",{name:"multirow",command:"\\usepackage{multirow}"}],["\\justifying",{name:"ragged2e",command:"\\usepackage{ragged2e}"}],["\\tag",{name:"amsmath",command:"\\usepackage{amsmath}"}],["\\notag",{name:"amsmath",command:"\\usepackage{amsmath}"}],["\\text",{name:"amsmath",command:"\\usepackage{amsmath}"}],["\\boldsymbol",{name:"amsmath",command:"\\usepackage{amsmath}"}],["\\eqref",{name:"amsmath",command:"\\usepackage{amsmath}"}],["\\iint",{name:"amsmath",command:"\\usepackage{amsmath}"}],["\\iiint",{name:"amsmath",command:"\\usepackage{amsmath}"}],["\\nmid",{name:"amssymb",command:"\\usepackage{amssymb}"}],["\\varnothing",{name:"amssymb",command:"\\usepackage{amssymb}"}],["\\Box",{name:"amssymb",command:"\\usepackage{amssymb}"}],["\\citep",{name:"natbib",command:"\\usepackage{natbib}"}],["\\citet",{name:"natbib",command:"\\usepackage{natbib}"}],["\\citepalias",{name:"natbib",command:"\\usepackage{natbib}"}],["\\citetalias",{name:"natbib",command:"\\usepackage{natbib}"}],["\\url",{name:"url",command:"\\usepackage{url}"}],["\\href",{name:"hyperref",command:"\\usepackage{hyperref}"}],["\\texorpdfstring",{name:"hyperref",command:"\\usepackage{hyperref}"}],["\\phantomsection",{name:"hyperref",command:"\\usepackage{hyperref}"}],["\\arraybackslash",{name:"array",command:"\\usepackage{array}"}]]),o=new Map([["justify",{name:"ragged2e",command:"\\usepackage{ragged2e}"}],["align",{name:"amsmath",command:"\\usepackage{amsmath}"}],["align*",{name:"amsmath",command:"\\usepackage{amsmath}"}],["split",{name:"amsmath",command:"\\usepackage{amsmath}"}],["gather",{name:"amsmath",command:"\\usepackage{amsmath}"}],["cases",{name:"amsmath",command:"\\usepackage{amsmath}"}],["matrix",{name:"amsmath",command:"\\usepackage{amsmath}"}],["pmatrix",{name:"amsmath",command:"\\usepackage{amsmath}"}],["bmatrix",{name:"amsmath",command:"\\usepackage{amsmath}"}],["subequations",{name:"amsmath",command:"\\usepackage{amsmath}"}]])},71879:(e,t,n)=>{"use strict";n(57182);"function"!=typeof AbortSignal.timeout&&(AbortSignal.timeout=e=>{const t=new AbortController;t.signal.addEventListener("abort",(function e(){window.clearTimeout(n),t.signal.removeEventListener("abort",e)}));const n=window.setTimeout((function(){t.abort(new DOMException("Timed out","TimeoutError"))}),e);return t.signal}),"function"!=typeof AbortSignal.any&&(AbortSignal.any=e=>{const t=new AbortController;for(const n of e)if(n.aborted)return t.abort(n.reason),t.signal;function n(){t.abort(),function(){for(const t of e)t.removeEventListener("abort",n)}()}for(const t of e)t.addEventListener("abort",n);return t.signal})},72607:(e,t,n)=>{"use strict";n.d(t,{A8:()=>c,E0:()=>a,H8:()=>o,Tb:()=>r,XQ:()=>i,YL:()=>s,sm:()=>l});const r=e=>"i"in e,o=e=>"c"in e,i=e=>"d"in e,a=e=>r(e)||i(e),s=e=>r(e.op),l=e=>i(e.op),c=e=>o(e)?e.c.length:r(e)?e.i.length:0},73152:(e,t,n)=>{"use strict";n.d(t,{$:()=>c});var r=n(14041),o=n(97434),i=n(71627),a=n(59162),s=n(24639),l=n(31085);const c=(0,r.memo)((e=>{let{content:t,tooltipId:n,kind:c="icon"}=e;const{t:d}=(0,o.Bd)(),[h,u]=(0,r.useState)(!1),m=(0,r.useCallback)((()=>{navigator.clipboard.writeText(t).then((()=>{u(!0),window.setTimeout((()=>{u(!1)}),1500)}))}),[t]);return navigator.clipboard?.writeText?(0,l.jsx)(a.A,{id:n,description:h?`${d("copied")}!`:d("copy"),overlayProps:{delay:h?1e3:250},children:"text"===c?(0,l.jsx)(i.A,{onClick:m,size:"sm",variant:"secondary",className:"copy-button",children:d("copy")}):(0,l.jsx)(s.A,{onClick:m,variant:"link",size:"sm",accessibilityLabel:d("copy"),className:"copy-button",icon:h?"check":"content_copy"})}):null}));c.displayName="CopyToClipboard"},73208:(e,t,n)=>{n(97107),n(82438),n(12266),n(69033),n(68903),n(21018),n(1415),n(4448),n(58871),n(56539);class r{constructor(e,t){null==e&&(e=[]),this.changes=e,null==t&&(t=[]),this.comments=t,this.track_changes=!1,this.id_seed=r.generateIdSeed(),this.id_increment=0,this._dirtyState={comment:{moved:{},removed:{},added:{}},change:{moved:{},removed:{},added:{}}}}getIdSeed(){return this.id_seed}setIdSeed(e){this.id_seed=e,this.id_increment=0}static generateIdSeed(){const e=Math.floor(32767*Math.random()).toString(16),t=Math.floor(16777216*Math.random()).toString(16),n=Math.floor((new Date).valueOf()/1e3).toString(16);return"00000000".substr(0,8-n.length)+n+"000000".substr(0,6-t.length)+t+"0000".substr(0,4-e.length)+e}static generateId(){return this.generateIdSeed()+"000001"}newId(){this.id_increment++;const e=this.id_increment.toString(16);return this.id_seed+"000000".substr(0,6-e.length)+e}getComment(e){let t=null;for(const n of this.comments)if(n.id===e){t=n;break}return t}removeCommentId(e){const t=this.getComment(e);null!=t&&(this.comments=this.comments.filter((t=>t.id!==e)),this._markAsDirty(t,"comment","removed"))}moveCommentId(e,t,n){for(const r of this.comments)r.id===e&&(r.op.p=t,r.op.c=n,this._markAsDirty(r,"comment","moved"))}getChange(e){let t=null;for(const n of this.changes)if(n.id===e){t=n;break}return t}getChanges(e){const t=new Set(e);return this.changes.filter((e=>t.has(e.id)))}removeChangeId(e){this.removeChangeIds([e])}removeChangeIds(e){if(null==e||0===e.length)return;const t=new Set(e),n=[];for(const e of this.changes)t.has(e.id)?this._markAsDirty(e,"change","removed"):n.push(e);this.changes=n}validate(e){let t;for(const n of this.changes)if(null!=n.op.i&&(t=e.slice(n.op.p,n.op.p+n.op.i.length),t!==n.op.i))throw new Error("insertion does not match text in document");for(const n of this.comments)if(t=e.slice(n.op.p,n.op.p+n.op.c.length),t!==n.op.c)throw new Error("comment does not match text in document")}applyOp(e,t){if(null==t&&(t={}),null==t.ts&&(t.ts=new Date),null!=e.i)this.applyInsertToChanges(e,t),this.applyInsertToComments(e);else if(null!=e.d)this.applyDeleteToChanges(e,t),this.applyDeleteToComments(e);else{if(null==e.c)throw new Error("unknown op type");this.addComment(e,t)}}applyOps(e,t){null==t&&(t={});for(const n of e)this.applyOp(n,t)}addComment(e,t){if(null!=this.getComment(e.t))this.moveCommentId(e.t,e.p,e.c);else{let n;this.comments.push(n={id:e.t||this.newId(),op:{c:e.c,p:e.p,t:e.t},metadata:t}),this._markAsDirty(n,"comment","added")}}applyInsertToComments(e){for(const t of this.comments)if(e.p<=t.op.p)t.op.p+=e.i.length,this._markAsDirty(t,"comment","moved");else if(e.p<t.op.p+t.op.c.length){const n=e.p-t.op.p;t.op.c=t.op.c.slice(0,+(n-1)+1||void 0)+e.i+t.op.c.slice(n),this._markAsDirty(t,"comment","moved")}}applyDeleteToComments(e){const t=e.p,n=e.d.length,r=e.p+n;for(const o of this.comments){const i=o.op.p,a=o.op.p+o.op.c.length,s=a-i;if(r<=i)o.op.p-=n,this._markAsDirty(o,"comment","moved");else if(t>=a);else{let n,l;l=t<=i?"":o.op.c.slice(0,t-i),n=r>=a?"":o.op.c.slice(r-i);const c=o.op.c.slice(l.length,s-n.length),d=Math.max(0,i-t);if(c!==e.d.slice(d).slice(0,c.length))throw new Error("deleted content does not match comment content");o.op.p=Math.min(i,t),o.op.c=l+n,this._markAsDirty(o,"comment","moved")}}}applyInsertToChanges(e,t){let n;const r=e.p,o=e.i.length,i=e.p+o,a=!!e.u;let s=!1,l=null;const c=[],d=[],h=[],u=[];for(let m=0;m<this.changes.length;m++){n=this.changes[m];const p=n.op.p;if(null!=n.op.d){if(r<p)n.op.p+=o,c.push(n);else if(r===p)if(!s&&a&&n.op.d.length>=e.i.length&&n.op.d.slice(0,e.i.length)===e.i){n.op.d=n.op.d.slice(e.i.length),n.op.p+=e.i.length,""===n.op.d?d.push(n):c.push(n),s=!0;for(const e of u)e.op.p-=o}else n.op.p+=o,c.push(n),s||u.push(n)}else if(null!=n.op.i){let d;const u=p+n.op.i.length,g=r>=p&&r<=u,f=t.user_id===n.metadata.user_id,O=this.changes[m+1],b=null!=O&&null!=O.op.d&&e.p===u&&O.op.p===e.p,v=a&&b&&O.op.d.slice(0,e.i.length)===e.i,w=null!=l&&null!=l.op.d&&l.op.p===i;if(this.track_changes&&g&&!w&&!s&&!v&&f)d=r-p,n.op.i=n.op.i.slice(0,d)+e.i+n.op.i.slice(d),n.metadata.ts=t.ts,s=!0,c.push(n);else if(r<=p)n.op.p+=o,c.push(n);else if((!f||!this.track_changes)&&p<r&&r<u){d=r-p;const e=n.op.i.slice(0,d),t=n.op.i.slice(d);n.op.i=e,c.push(n);const i={op:{i:t,p:p+d+o},metadata:{}};for(const e in n.metadata){const t=n.metadata[e];i.metadata[e]=t}h.push(i)}}l=n}for({op:e,metadata:t}of(this.track_changes&&!s&&this._addOp(e,t),h))this._addOp(e,t);for(n of d)this._removeChange(n);for(n of c)this._markAsDirty(n,"change","moved")}applyDeleteToChanges(e,t){const n=e.p,r=e.d.length,o=e.p+r,i=[];let a=[];const s=[];for(const t of this.changes){let l;if(null!=t.op.i){l=t.op.p;const c=l+t.op.i.length;if(o<=l)t.op.p-=r,a.push(t);else if(n>=c);else{let r,d,h,u;n>=l?(d="",u=t.op.i.slice(0,n-l)):(d=e.d.slice(0,l-n),u=""),o<=c?(r="",h=t.op.i.slice(o-l)):(r=e.d.slice(c-n),h="");const m=u+h;m.length>0?(t.op.i=m,t.op.p=Math.min(l,n),a.push(t)):i.push(t);const p=e.d.length-d.length-r.length,g=d.length,f={d:e.d.slice(g,g+p),p:g};f.d.length>0&&s.push(f)}}else if(null!=t.op.d)if(l=t.op.p,o<l||!this.track_changes&&o===l)t.op.p-=r,a.push(t);else if(n<=l&&l<=o)if(this.track_changes){const e=l-n;s.push({i:t.op.d,p:e}),i.push(t)}else t.op.p=n,a.push(t)}e={p:e.p,d:this._applyOpModifications(e.d,s)};for(const n of i)e.d.length>0&&null!=n.op.d&&e.p<=n.op.p&&n.op.p<=e.p+e.d.length?(n.op.p=e.p,n.op.d=e.d,n.metadata=t,a.push(n),e.d=""):this._removeChange(n);if(this.track_changes&&e.d.length>0)this._addOp(e,t);else{const e=this._scanAndMergeAdjacentUpdates();a=a.concat(e.movedChanges);for(const t of e.removeChanges)this._removeChange(t),a=a.filter((e=>e!==t))}for(const e of a)this._markAsDirty(e,"change","moved")}_addOp(e,t){e=this._clone(e);const n={id:this.newId(),op:e,metadata:this._clone(t)};this.changes.push(n),this.changes.sort((function(e,t){const n=e.op.p-t.op.p;return 0!==n?n:null!=e.op.i&&null!=t.op.d?1:null!=e.op.d&&null!=t.op.i?-1:0})),this._markAsDirty(n,"change","added")}_removeChange(e){this.changes=this.changes.filter((t=>t!==e)),this._markAsDirty(e,"change","removed")}_applyOpModifications(e,t){t.sort((function(e,t){const n=t.p-e.p;return 0!==n?n:null!=e.i&&null!=t.d?1:null!=e.d&&null!=t.i?-1:0}));for(const n of t)if(null!=n.i)e=e.slice(0,n.p)+n.i+e.slice(n.p);else if(null!=n.d){if(e.slice(n.p,n.p+n.d.length)!==n.d)throw new Error("deletion does not match text in document");e=e.slice(0,n.p)+e.slice(n.p+n.d.length)}return e}_scanAndMergeAdjacentUpdates(){let e=null;const t=[],n=[];for(const r of this.changes)if(null!=e?.op.i&&null!=r.op.i){const o=e.op.p+e.op.i.length,i=e.metadata.user_id,a=r.op.p,s=r.metadata.user_id;o===a&&i===s&&(t.push(r),e.op.i+=r.op.i,n.push(e))}else null!=e?.op.d&&null!=r.op.d&&e?.op.p===r.op.p?(e.op.d+=r.op.d,t.push(r),n.push(e)):e=r;return{movedChanges:n,removeChanges:t}}resetDirtyState(){this._dirtyState={comment:{moved:{},removed:{},added:{}},change:{moved:{},removed:{},added:{}}}}getDirtyState(){return this._dirtyState}getTrackedDeletesLength(){let e=0;for(const t of this.changes)null!=t.op.d&&(e+=t.op.d.length);return e}_markAsDirty(e,t,n){this._dirtyState[t][n][e.id]=e}_clone(e){const t={};for(const n in e){const r=e[n];t[n]=r}return t}}e.exports=r},73547:(e,t,n)=>{"use strict";n.d(t,{E:()=>i,R:()=>a});var r=n(21947),o=n(16851);const i=(e,t)=>(0,o.rn)(e,t,"$MathContainer")||(0,o.rn)(e,t,"EquationEnvironment")||(0,o.rn)(e,t,"EquationArrayEnvironment"),a=(e,t,n)=>{const o=e.doc.sliceString(t.from,t.to).trim();if(!o.length)return null;let i=o,a=!1,s=!0,l=t.from;if(n.type.is("$Environment")){const t=(0,r.$2)(n,e);t&&("tikzcd"===t&&(s=!1),"math"!==t&&"displaymath"!==t&&(i=e.doc.sliceString(n.from,n.to).trim(),l=n.from),"math"!==t&&(a=!0))}else(n.type.is("BracketMath")||Boolean(n.getChild("DisplayMath")))&&(a=!0);return{content:i,displayMode:a,passToMathJax:s,pos:l}}},74656:(e,t,n)=>{"use strict";n.d(t,{BJ:()=>f,MB:()=>g,w4:()=>p,uG:()=>m});n(82438),n(50020);var r=n(83173),o=n(57195),i=n(29587),a=n(49913);const s=(0,a.az)([{tag:a._A.link,class:"tok-link"},{tag:a._A.heading,class:"tok-heading"},{tag:a._A.emphasis,class:"tok-emphasis"},{tag:a._A.strong,class:"tok-strong"},{tag:a._A.keyword,class:"tok-keyword"},{tag:a._A.atom,class:"tok-atom"},{tag:a._A.bool,class:"tok-bool"},{tag:a._A.url,class:"tok-url"},{tag:a._A.labelName,class:"tok-labelName"},{tag:a._A.inserted,class:"tok-inserted"},{tag:a._A.deleted,class:"tok-deleted"},{tag:a._A.literal,class:"tok-literal"},{tag:a._A.string,class:"tok-string"},{tag:a._A.number,class:"tok-number"},{tag:[a._A.regexp,a._A.escape,a._A.special(a._A.string)],class:"tok-string2"},{tag:a._A.variableName,class:"tok-variableName"},{tag:a._A.local(a._A.variableName),class:"tok-variableName tok-local"},{tag:a._A.definition(a._A.variableName),class:"tok-variableName tok-definition"},{tag:a._A.special(a._A.variableName),class:"tok-variableName2"},{tag:a._A.definition(a._A.propertyName),class:"tok-propertyName tok-definition"},{tag:a._A.typeName,class:"tok-typeName"},{tag:a._A.namespace,class:"tok-namespace"},{tag:a._A.className,class:"tok-className"},{tag:a._A.macroName,class:"tok-macroName"},{tag:a._A.propertyName,class:"tok-propertyName"},{tag:a._A.operator,class:"tok-operator"},{tag:a._A.comment,class:"tok-comment"},{tag:a._A.meta,class:"tok-meta"},{tag:a._A.invalid,class:"tok-invalid"},{tag:a._A.punctuation,class:"tok-punctuation"},{tag:a._A.attributeValue,class:"tok-attributeValue"}]);var l=n(53373),c=n.n(l),d=n(7881);const h=new o.xx,u=new o.xx,m=o.YH.define(),p=e=>[v,w,(0,i.y9)(s),h.of(b(e)),u.of([])],g=e=>({effects:h.reconfigure(b(e)),annotations:m.of(!0)}),f=async e=>{const t=await x(e);return{effects:u.reconfigure(t)}},O=e=>`url('data:image/svg+xml,${encodeURIComponent(`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40 40">${e}</svg>`)}')`,b=e=>{let{fontSize:t=12,fontFamily:n="monaco",lineHeight:o="normal",activeOverallTheme:i="dark"}=e;const a=(0,d.e4)({fontSize:t,fontFamily:n,lineHeight:o});return[r.Lz.editorAttributes.of({class:c()("dark"===i?"overall-theme-dark":"overall-theme-light"),style:Object.entries({"--font-size":a.fontSize,"--source-font-family":a.fontFamily,"--line-height":a.lineHeight}).map((e=>{let[t,n]=e;return`${t}: ${n}`})).join(";")}),r.Lz.theme({".cm-tooltip":{"--font-size":a.fontSize,"--source-font-family":a.fontFamily,"--line-height":a.lineHeight}})]},v=r.Lz.baseTheme({".cm-content":{fontSize:"var(--font-size)",fontFamily:"var(--source-font-family)",lineHeight:"var(--line-height)"},".cm-cursor-primary":{fontSize:"var(--font-size)",fontFamily:"var(--source-font-family)",lineHeight:"var(--line-height)"},".cm-gutters":{fontSize:"var(--font-size)",lineHeight:"var(--line-height)"},".cm-tooltip":{fontSize:"var(--font-size)"},".cm-panel":{fontSize:"var(--font-size)"},".cm-foldGutter .cm-gutterElement > span":{height:"calc(var(--font-size) * var(--line-height))"},".cm-lineNumbers":{fontFamily:"var(--source-font-family)"},".cm-lintRange.cm-lintRange":{backgroundImage:"none"},".cm-lintRange-error":{padding:"var(--half-leading, 0) 0",background:"rgba(255, 0, 0, 0.2)","& .cm-lintRange-error":{background:"none"}},".cm-specialChar":{color:"red",backgroundColor:"rgba(255, 0, 0, 0.1)"},".cm-widgetBuffer":{height:"1.3em"},".cm-snippetFieldPosition":{display:"inline-block",height:"1.3em"},"&dark .cm-foldGutter .cm-gutterElement > span:hover":{boxShadow:"0 1px 1px rgba(255, 255, 255, 0.2)",backgroundColor:"rgba(255, 255, 255, 0.1)"},"&light .cm-foldGutter .cm-gutterElement > span:hover":{borderColor:"rgba(0, 0, 0, 0.3)",boxShadow:"0 1px 1px rgba(255, 255, 255, 0.7)",backgroundColor:"rgba(255, 255, 255, 0.2)"},".cm-diagnosticSource":{display:"none"},".ol-cm-diagnostic-actions":{marginTop:"4px"},".cm-diagnostic:last-of-type .ol-cm-diagnostic-actions":{marginBottom:"4px"},".cm-vim-panel input":{color:"inherit"}}),w=r.Lz.theme({"&":{height:"100%",textRendering:"optimizeSpeed",fontVariantNumeric:"slashed-zero"},"&.cm-editor.cm-focused:not(:focus-visible)":{outline:"none"},".cm-panel.cm-search label":{display:"inline-flex",alignItems:"center",fontWeight:"normal"},".cm-selectionLayer":{zIndex:-10},".cm-gutters":{borderRight:"none",flexShrink:0},".cm-foldGutter .cm-gutterElement > span":{border:"1px solid transparent",borderRadius:"3px",display:"inline-flex",flexDirection:"column",justifyContent:"center",color:"rgba(109, 109, 109, 0.7)"},".cm-lineNumbers .cm-gutterElement":{padding:"0",userSelect:"none"},"&:not(.cm-focused) > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block",opacity:.2},".cm-cursor, .cm-dropCursor":{borderWidth:"2px",marginLeft:"-1px",borderLeftColor:"inherit"},".cm-tooltip-hover":{border:"none"},".cm-snippetField":{background:"rgba(194, 193, 208, 0.09)",border:"1px dotted rgba(211, 208, 235, 0.62)"},".cm-foldPlaceholder":{boxSizing:"border-box",display:"inline-block",height:"11px",width:"1.8em",marginTop:"-2px",verticalAlign:"middle",backgroundImage:'url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=")',backgroundRepeat:"no-repeat, repeat-x",backgroundPosition:"center center, top left",color:"transparent",border:"1px solid black",borderRadius:"2px"},".cm-gutter-lint .cm-gutterElement":{padding:"0.3em"},".cm-lint-marker-error:before":{content:"normal"},".cm-lint-marker-error":{content:O('<circle cx="20" cy="20" r="15" fill="#f87" stroke="#f43" stroke-width="6"/>')},".cm-lint-marker-warning":{content:O('<path fill="#FCC483" stroke="#DE8014" stroke-width="6" stroke-linejoin="round" d="M20 6L37 35L3 35Z"/>')}}),_=new Map,x=async e=>{if(e||(e="textmate"),!_.has(e)){const{theme:t,highlightStyle:o,dark:i}=await n(96110)(`./${e}.json`),a=[r.Lz.theme(t,{dark:i}),r.Lz.theme(o,{dark:i})];_.set(e,a)}return _.get(e)}},77631:(e,t,n)=>{"use strict";n.d(t,{n:()=>a});var r=n(39314),o=n(14041),i=n(31085);const a=e=>{let{url:t,id:n,text:a}=e;const l=(0,o.useMemo)((()=>({id:`${n}-tooltip`,text:a||(0,i.jsx)(s,{})})),[n,a]);return(0,i.jsx)(r.A,{tooltip:l,phase:"release",link:{href:t}})},s=()=>(0,i.jsxs)(i.Fragment,{children:["We are testing this new feature.",(0,i.jsx)("br",{}),"Click to give feedback"]})},78494:(e,t,n)=>{"use strict";n.d(t,{HA:()=>y,yn:()=>k});n(97107);var r=n(14041),o=(n(82438),n(34840),n(69033),n(68903),n(21018),n(1415),n(4448),n(58871),n(56539),n(45250)),i=n.n(o),a=n(37664),s=n(60961);const l=Symbol("not found");function c(e){return null!==e&&"object"==typeof e&&!("length"in e&&"number"==typeof e.length&&e.length>0)}function d(e){const t=[];let n,r=e;for(;-1!==(n=r.lastIndexOf("."));)r=r.slice(0,n),t.push(r);return t}class h{items=(()=>new Map)();persisters=(()=>new Map)();watcherUpdates=(()=>new Map)();watcherUpdateTimer=null;allowedNonExistentPaths=[];nonExistentPathAllowed(e){return this.allowedNonExistentPaths.some((t=>t.path===e||t.deep&&e.startsWith(t.path+".")))}findInAncestors(e){for(const t of d(e)){const n=this.items.get(t);if(n&&"value"in n&&c(n.value)){const r=e.slice(t.length+1),o=i().get(n.value,r);if(o!==l)return{value:o,watchers:[]}}}return{watchers:[]}}getItem(e){const t=this.items.get(e)||this.findInAncestors(e);if(!("value"in t)){if(this.nonExistentPathAllowed(e))return s.$.log(`No value found for key '${e}'. This is allowed because the path is in allowedNonExistentPaths`),{value:void 0};throw new Error(`No value found for key '${e}'`)}return t}reassembleObjectValue(e,t){const n={...t},r=e+".";for(const[e,t]of this.items.entries())if(e.startsWith(r)){const o=e.slice(r.length);-1===o.indexOf(".")&&"value"in t&&(n[o]=t.value)}return n}flushUpdates(){this.watcherUpdateTimer&&(window.clearTimeout(this.watcherUpdateTimer),this.watcherUpdateTimer=null);const e=[...this.watcherUpdates.values()];this.watcherUpdates=new Map;for(const{value:t,watchers:n}of e)for(const e of n)e.removed||e.callback.call(null,t)}scheduleWatcherUpdate(e,t,n){const r={value:t,path:e,watchers:[...n]};this.watcherUpdates.set(e,r),this.watcherUpdateTimer||(this.watcherUpdateTimer=window.setTimeout((()=>{this.watcherUpdateTimer=null,this.flushUpdates()}),0))}get(e){return this.getItem(e).value}setValue(e,t){s.$.log("setValue",e,t);let n=this.items.get(e);if(void 0===n)n={value:t,watchers:[]},this.items.set(e,n);else if("value"in n){if(n.value===t)return;n.value=t}else n={...n,value:t},this.items.set(e,n);this.scheduleWatcherUpdate(e,t,n.watchers);const r=this.persisters.get(e);r&&a.A.setItem(r.localStorageKey,r.toPersisted?.(t)||t)}setValueAndDescendants(e,t){if(this.setValue(e,t),c(t)){const n=e+".";for(const[e,r]of this.items.entries())if(e.startsWith(n)){const o=i().get(t,e.slice(n.length),l);o===l||"value"in r&&o===r.value||this.setValue(e,o)}const r=[],o=new Set(Object.keys(t));for(const e of this.items.keys())if(e.startsWith(n)){const t=e.slice(n.length).split(".",1)[0];o.has(t)||r.push(e)}for(const e of r)this.items.delete(e)}}set(e,t){this.setValueAndDescendants(e,t);for(const t of d(e)){const e=this.items.get(t);e&&"value"in e&&(e.value=this.reassembleObjectValue(t,e.value),this.scheduleWatcherUpdate(t,e.value,e.watchers))}}watch(e,t){let n=this.items.get(e);n||(n=this.findInAncestors(e),this.items.set(e,n));const r=n.watchers,o={removed:!1,callback:t};if(n.watchers.push(o),"value"in n){const{watchers:t}=this.watcherUpdates.get(e)??{watchers:[]};this.scheduleWatcherUpdate(e,n.value,[...t,o])}return()=>{o.removed=!0,i().pull(r,o)}}persisted(e,t,n,r){const o=a.A.getItem(n);let i=t;null!==o&&(i=r?r.fromPersisted(o):o),this.set(e,i),this.persisters.set(e,{localStorageKey:n,toPersisted:r?.toPersisted})}allowNonExistentPath(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.allowedNonExistentPaths.push({path:e,deep:t})}dump(){const e=[];for(const[t,n]of this.items.entries())e.push({path:t,value:"value"in n?n.value:"[not set]",watcherCount:n.watchers.length});return e}}var u=n(67353);class m extends EventTarget{emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.dispatchEvent(new CustomEvent(e,{detail:n}))}on(e,t){this.addEventListener(e,t)}once(e,t){this.addEventListener(e,t,{once:!0})}off(e,t){this.removeEventListener(e,t)}}function p(){return new m}var g=n(16896),f=n(37858);class O{constructor(e){this.eventEmitter=e}emit(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];this.eventEmitter.dispatchEvent(new CustomEvent(e,{detail:r}))}on(e,t){const n=e=>{t(e,...e.detail)};return this.eventEmitter.addEventListener(e,n),()=>{this.eventEmitter.removeEventListener(e,n)}}}var b=n(64932),v=n(86316),w=n(31085);const _=new Date,x=(0,r.createContext)(void 0),y=e=>{let{children:t}=e;const n=(0,b.A)("ol-project_id"),[o]=(0,r.useState)(p),[i,a]=(0,r.useState)("readOnly"),[s,l]=(0,r.useState)(!1),[c]=(0,r.useState)((()=>new O(o))),[d]=(0,r.useState)((()=>{const e=new h;return e.set("editor.ready",void 0),e})),[m,y]=(0,r.useState)(!1),k=(0,b.A)("ol-ExposedSettings")?.sentryRelease??null,[C,S]=(0,r.useState)(!1),{socket:Q,getSocketDebuggingInfo:E}=(0,g.FX)(),{joinProject:T,project:j}=(0,v.Om)(),P=j?.spellCheckLanguage,$=(0,r.useCallback)(((e,t)=>{const r={...t,user_id:(0,b.A)("ol-user_id"),project_id:n,client_now:new Date,performance_now:performance.now(),release:k,client_load:_,spellCheckLanguage:P,...E()},o={};if("object"==typeof e)for(const t of Object.getOwnPropertyNames(e))o[t]=e[t];else"string"==typeof e&&(o.message=e);return(0,f.TB)("/error/client",{body:{error:o,meta:r}})}),[k,n,E,P]);(0,r.useEffect)((()=>{function e(e){let{project:{rootDoc_id:t,publicAccesLevel:n,...r},permissionsLevel:i}=e;const s={...r,rootDocId:t,publicAccessLevel:n};T(s),a(i),o.emit("project:joined",{project:s,permissionsLevel:i}),S(!0)}return Q.on("joinProjectResponse",e),()=>{Q.removeListener("joinProjectResponse",e)}}),[Q,o,T]);const R=(0,r.useMemo)((()=>({_id:n,socket:Q,reportError:$})),[n,Q,$]),X=(0,r.useMemo)((()=>({eventEmitter:o,startedFreeTrial:m,setStartedFreeTrial:y,permissionsLevel:s?"readOnly":i,setPermissionsLevel:a,setOutOfSync:l,projectId:n,reportError:$,projectJoined:C})),[o,s,i,n,C,$,m]);return(0,w.jsx)(x.Provider,{value:X,children:(0,w.jsx)(u.Qi,{ide:R,scopeEventEmitter:c,unstableStore:d,children:t})})};function k(){const e=(0,r.useContext)(x);if(!e)throw new Error("useIdeReactContext is only available inside IdeReactProvider");return e}},79384:(e,t,n)=>{"use strict";n.d(t,{BC:()=>j,kv:()=>Q,Ms:()=>_,ji:()=>S,NZ:()=>E,Dc:()=>k,Kg:()=>x,Bg:()=>C,aU:()=>y,s:()=>p,Tt:()=>O,Rk:()=>g,Bc:()=>b,rp:()=>T,oW:()=>w,dD:()=>f,JM:()=>v});n(82438),n(2989);var r=n(57195),o=n(59509),i=n(188),a=n(32629),s=n(77213),l=n(92329),c=n(31410);const d={figure:(0,c.V)(l.dT.get("figure")),table:(0,c.V)(l.dT.get("table")),cite:(0,c.V)("\\cite{${}}"),ref:(0,c.V)("\\ref{${}}")};var h=n(16851),u=n(11235),m=n(22440);const p=(0,i.rS)("\\textbf"),g=(0,i.rS)("\\textit"),f=(0,i.nI)("\\href{}{","}",!1,((e,t)=>(0,u.ZS)(t)?e:r.OF.cursor(e.from-2))),O=(0,a.iB)("itemize"),b=(0,a.iB)("enumerate"),v=(0,i.nI)("\\(","\\)"),w=(0,i.nI)("\n\\[","\\]\n"),_=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"below",r=t.anchor,o="",i="";const a=e.doc.lineAt(r);if(a.text.trim().length){r="below"===n?Math.min(a.to+1,e.doc.length):Math.max(a.from-1,0);const t=e.doc.lineAt(r);t.length&&"below"===n?o="\n":t.length&&"above"===n&&(i="\n")}return{pos:r,suffix:o,prefix:i}},x=e=>{const{state:t,dispatch:n}=e,{pos:r,suffix:o}=_(t,t.selection.main),i=`\n${d.figure}\n${o}`;return(0,s.UA)(i)({state:t,dispatch:n},{label:"Figure"},r,r),!0},y=(e,t,n)=>{const{state:r,dispatch:o}=e,i=(0,u.ZS)(e),a=i?"":"#{}",l=i?"#{}":"",{pos:c,suffix:d}=_(r,r.selection.main),h=`${l}\n\\begin{table}\n\t\\centering\n\t\\begin{tabular}{${"c".repeat(t)}}\n${("\t\t"+`${a} & ${a}`.repeat(t-1)+"\\\\\n").repeat(n)}\t\\end{tabular}\n\t\\caption{Caption}\n\t\\label{tab:my_label}\n\\end{table}${d}`;return(0,s.UA)(h)({state:r,dispatch:o},{label:"Table"},c,c),!0},k=e=>{const{state:t,dispatch:n}=e,r=t.selection.main.anchor,o=d.cite;return(0,s.UA)(o)({state:t,dispatch:n},{label:"Cite"},r,r),!0},C=e=>{const{state:t,dispatch:n}=e,r=t.selection.main.anchor,o=d.ref;return(0,s.UA)(o)({state:t,dispatch:n},{label:"Ref"},r,r),!0},S=e=>{if((0,h.nQ)(e.state)<2)return!1;switch((0,a.CU)(e.state)){case"itemize":return(0,a.kW)(e);case"enumerate":return(0,a.eT)(e);case"description":return(0,a.iq)(e);default:return!1}},Q=e=>e.selection.ranges.every((t=>{const n=e.doc.lineAt(t.from),r=e.sliceDoc(n.from,t.from);return/\\item\s*$/.test(r)})),E=e=>{if((0,h.nQ)(e.state)<1)return!1;switch((0,a.CU)(e.state)){case"itemize":return(0,a._r)(e);case"enumerate":return(0,a.wY)(e);case"description":return(0,a.kT)(e);default:return!1}},T=e=>((0,o.NK)(e.state)?(0,o.jO)(e):((0,m.T)("search-open",{searchType:"document",method:"button",location:"toolbar",mode:(0,u.ZS)(e)?"visual":"source"}),(0,o.pi)(e)),!0),j=()=>{window.dispatchEvent(new Event("add-new-review-comment"))}},79600:(e,t,n)=>{"use strict";const r=n(45250),o=n(64347).assert,i=n(37603),a=n(12628),s=n(59622),l=n(14679);class NotEditableError extends i{constructor(){super("File is not editable")}}class c{static EMPTY_FILE_HASH="e69de29bb2d1d6434b8b29ae775ad8c2e48c5391";static NotEditableError=(()=>NotEditableError)();constructor(e,t){o.instance(e,a,"File: bad data"),this.data=e,this.metadata={},this.setMetadata(t||{})}static fromRaw(e){return e?new c(a.fromRaw(e),e.metadata):null}static fromHash(e,t,n){return new c(new s(e,t),n)}static fromString(e,t){return new c(new l(e),t)}static createHollow(e,t,n){return new c(a.createHollow(e,t),n)}static createLazyFromBlobs(e,t,n){return new c(a.createLazyFromBlobs(e,t),n)}toRaw(){const e=this.data.toRaw();return d(this.metadata,e),e}getHash(){return this.data.getHash()}getRangesHash(){return this.data.getRangesHash()}getContent(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.data.getContent(e)}isEditable(){return this.data.isEditable()}getByteLength(){return this.data.getByteLength()}getStringLength(){return this.data.getStringLength()}getMetadata(){return this.metadata}setMetadata(e){o.object(e,"File: bad metadata"),this.metadata=e}edit(e){if(!this.data.isEditable())throw new c.NotEditableError;this.data.edit(e)}getComments(){return this.data.getComments()}getTrackedChanges(){return this.data.getTrackedChanges()}clone(){return c.fromRaw(this.toRaw())}async load(e,t){const n=await this.data.load(e,t);return this.data=n,this}async store(e){const t=await this.data.store(e);return d(this.metadata,t),t}}function d(e,t){r.isEmpty(e)||(t.metadata=r.cloneDeep(e))}e.exports=c},80760:(e,t,n)=>{"use strict";n.d(t,{eS:()=>ge,tB:()=>fe});n(97107);var r=n(14041),o=n(42093),i=n(52155),a=(n(61412),n(91883),n(70286),n(70915)),s=n(64932),l=n(37858),c=n(45250),d=n(51275),h=n(33478),u=n(60961),m=n(87776);const p=new URLSearchParams(window.location.search);class g{constructor(e){let{compilingRef:t,projectId:n,setChangedAt:r,setCompiling:o,setData:i,setFirstRenderDone:a,setDeliveryLatencies:s,setError:l,cleanupCompileResult:d,signal:h,openDocs:u}=e;this.compilingRef=t,this.projectId=n,this.setChangedAt=r,this.setCompiling=o,this.setData=i,this.setFirstRenderDone=a,this.setDeliveryLatencies=s,this.setError=l,this.cleanupCompileResult=d,this.signal=h,this.openDocs=u,this.projectRootDocId=null,this.clsiServerId=null,this.currentDoc=null,this.error=void 0,this.timer=0,this.defaultOptions={draft:!1,stopOnFirstError:!1},this.debouncedAutoCompile=(0,c.debounce)((()=>{this.compile({isAutoCompileOnChange:!0})}),2500,{maxWait:5e3})}async compile(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e={...this.defaultOptions,...e},e.isAutoCompileOnLoad&&(0,s.A)("ol-preventCompileOnLoad"))return;const t=this.compilingRef.current;if(this.setCompiling(!0),t)e.isAutoCompileOnChange&&this.debouncedAutoCompile();else try{await this.openDocs.awaitBufferedOps((0,m.E)(this.signal,1e4)),this.setChangedAt(0),this.validationIssues=void 0;const t=this.buildCompileParams(e),n=performance.now(),r=this.getRootDocOverrideId(),o={rootDoc_id:r,draft:e.draft,check:"silent",incrementalCompilesEnabled:!this.error,stopOnFirstError:e.stopOnFirstError,editorId:d.$3},i=await(0,l.TB)(`/project/${this.projectId}/compile?${t}`,{body:o,signal:this.signal}),a=Math.ceil(performance.now()-n),{deliveryLatencies:s,firstRenderDone:c}=(0,d.I_)(i,a,n);this.setDeliveryLatencies((()=>s)),this.setFirstRenderDone((()=>c)),this.setError(void 0),i.options=e,i.rootDocId=r,i.clsiServerId&&(this.clsiServerId=i.clsiServerId),this.setData(i)}catch(e){u.$.error(e),this.cleanupCompileResult(),this.setError(429===e.info?.statusCode?"rate-limited":"error")}finally{this.setCompiling(!1)}}getRootDocOverrideId(){if(this.currentDoc&&this.currentDoc.doc_id!==this.projectRootDocId){const e=this.currentDoc.getSnapshot();if(e&&(0,a.e)(e))return this.currentDoc.doc_id}return null}buildPostCompileParams(){const e=new URLSearchParams;return this.clsiServerId&&e.set("clsiserverid",this.clsiServerId),e}buildCompileParams(e){const t=new URLSearchParams;return(e.isAutoCompileOnLoad||e.isAutoCompileOnChange)&&t.set("auto_compile","true"),h.lW&&t.set("enable_pdf_caching","true"),"true"===p.get("file_line_errors")&&(t.file_line_errors="true"),t}stopCompile(){const e=this.buildPostCompileParams();return(0,l.TB)(`/project/${this.projectId}/compile/stop?${e}`,{signal:this.signal}).catch((e=>{u.$.error(e),this.setError("error")})).finally((()=>{this.setCompiling(!1)}))}clearCache(){const e=this.buildPostCompileParams();return(0,l.Un)(`/project/${this.projectId}/output?${e}`,{signal:this.signal}).catch((e=>{u.$.error(e),this.setError("clear-cache")}))}setOption(e,t){this.defaultOptions[e]=t}}var f=n(69954);n(82438),n(12266),n(99819),n(57327),n(69033),n(68903),n(21018),n(1415),n(4448),n(58871),n(56539);const O=/^LaTeX(?:3| Font)? Warning: (.*)$/,b=/^(Over|Under)full \\(v|h)box/,v=/^((?:Package|Class|Module) \b.+\b Warning:.*)$/,w=/lines? ([0-9]+)/,_=/^(?:Package|Class|Module) (\b.+\b) Warning/,x=/^([./].*):(\d+): (.*)/,y=0,k=1;class C{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.state=y,this.fileBaseNames=t.fileBaseNames||[/compiles/,/\/usr\/local/],this.ignoreDuplicates=t.ignoreDuplicates,this.data=[],this.fileStack=[],this.currentFileList=this.rootFileList=[],this.openParens=0,this.latexWarningRegex=O,this.packageWarningRegex=v,this.packageRegex=_,this.log=new S(e)}parse(){for(;!1!==(this.currentLine=this.log.nextLine());)if(this.state===y&&(this.currentLineIsError()?(this.state=k,this.currentError={line:null,file:this.currentFilePath,level:"error",message:this.currentLine.slice(2),content:"",raw:this.currentLine+"\n"}):this.currentLineIsFileLineError()?(this.state=k,this.parseFileLineError()):this.currentLineIsRunawayArgument()?this.parseRunawayArgumentError():this.currentLineIsWarning()?this.parseSingleWarningLine(this.latexWarningRegex):this.currentLineIsHboxWarning()?this.parseHboxLine():this.currentLineIsPackageWarning()?this.parseMultipleWarningLine():this.parseParensForFilenames()),this.state===k){this.currentError.content+=this.log.linesUpToNextMatchingLine(/^l\.[0-9]+/).join("\n"),this.currentError.content+="\n",this.currentError.content+=this.log.linesUpToNextWhitespaceLine(!0).join("\n"),this.currentError.content+="\n",this.currentError.content+=this.log.linesUpToNextWhitespaceLine(!0).join("\n"),this.currentError.raw+=this.currentError.content;const e=this.currentError.raw.match(/l\.([0-9]+)/);e&&null===this.currentError.line&&(this.currentError.line=parseInt(e[1],10)),this.data.push(this.currentError),this.state=y}return this.postProcess(this.data)}currentLineIsError(){return"!"===this.currentLine[0]&&"!  ==> Fatal error occurred, no output PDF file produced!"!==this.currentLine}currentLineIsFileLineError(){return x.test(this.currentLine)}currentLineIsRunawayArgument(){return this.currentLine.match(/^Runaway argument/)}currentLineIsWarning(){return!!this.currentLine.match(this.latexWarningRegex)}currentLineIsPackageWarning(){return!!this.currentLine.match(this.packageWarningRegex)}currentLineIsHboxWarning(){return!!this.currentLine.match(b)}parseFileLineError(){const e=this.currentLine.match(x);this.currentError={line:e[2],file:e[1],level:"error",message:e[3],content:"",raw:this.currentLine+"\n"}}parseRunawayArgumentError(){this.currentError={line:null,file:this.currentFilePath,level:"error",message:this.currentLine,content:"",raw:this.currentLine+"\n"},this.currentError.content+=this.log.linesUpToNextWhitespaceLine().join("\n"),this.currentError.content+="\n",this.currentError.content+=this.log.linesUpToNextWhitespaceLine().join("\n"),this.currentError.raw+=this.currentError.content;const e=this.currentError.raw.match(/l\.([0-9]+)/);return e&&(this.currentError.line=parseInt(e[1],10)),this.data.push(this.currentError)}parseSingleWarningLine(e){const t=this.currentLine.match(e);if(!t)return;const n=t[1],r=n.match(w),o=r?parseInt(r[1],10):null;this.data.push({line:o,file:this.currentFilePath,level:"warning",message:n,raw:n})}parseMultipleWarningLine(){let e=this.currentLine.match(this.packageWarningRegex);if(!e)return;const t=[e[1]];let n=this.currentLine.match(w),r=n?parseInt(n[1],10):null;const o=this.currentLine.match(this.packageRegex)[1],i=new RegExp("(?:\\("+o+"\\))*[\\s]*(.*)","i");for(;this.currentLine=this.log.nextLine();)n=this.currentLine.match(w),r=n?parseInt(n[1],10):r,e=this.currentLine.match(i),t.push(e[1]);const a=t.join(" ");this.data.push({line:r,file:this.currentFilePath,level:"warning",message:a,raw:a})}parseHboxLine(){const e=this.currentLine.match(w),t=e?parseInt(e[1],10):null;this.data.push({line:t,file:this.currentFilePath,level:"typesetting",message:this.currentLine,raw:this.currentLine})}parseParensForFilenames(){const e=this.currentLine.search(/[()]/);if(-1!==e){const t=this.currentLine[e];if(this.currentLine=this.currentLine.slice(e+1),"("===t){const e=this.consumeFilePath();if(e){this.currentFilePath=e;const t={path:e,files:[]};this.fileStack.push(t),this.currentFileList.push(t),this.currentFileList=t.files}else this.openParens++}else if(")"===t)if(this.openParens>0)this.openParens--;else if(this.fileStack.length>1){this.fileStack.pop();const e=this.fileStack[this.fileStack.length-1];this.currentFilePath=e.path,this.currentFileList=e.files}this.parseParensForFilenames()}}consumeFilePath(){if(!this.currentLine.match(/^\/?([^ ()\\]+\/)+/))return!1;let e,t=this.currentLine.search(/[ ()\\]/);for(;-1!==t&&" "===this.currentLine[t];){const e=this.currentLine.slice(0,t);if(/\.\w+$/.test(e))break;const n=this.currentLine.slice(t+1);if(/^\s*["()[\]]/.test(n))break;const r=n.search(/[ "()[\]]/);-1===r?t=-1:t+=r+1}return-1===t?(e=this.currentLine,this.currentLine=""):(e=this.currentLine.slice(0,t),this.currentLine=this.currentLine.slice(t)),e}postProcess(e){const t=[],n={error:[],warning:[],typesetting:[]},r=new Set;return e.forEach((e=>{const o=e.raw;this.ignoreDuplicates&&r.has(o)||(n[e.level]?.push(e),t.push(e),r.add(o))})),{errors:n.error,warnings:n.warning,typesetting:n.typesetting,all:t,files:this.rootFileList}}}class S{constructor(e){this.text=e.replace(/(\r\n)|\r/g,"\n");const t=this.text.split("\n");this.lines=[t[0]];for(let e=1;e<t.length;e++){const n=t[e-1],r=t[e];79===n.length&&"..."!==n.slice(-3)&&"!"!==r.charAt(0)?this.lines[this.lines.length-1]+=r:this.lines.push(r)}this.row=0}nextLine(){return this.row++,!(this.row>=this.lines.length)&&this.lines[this.row]}rewindLine(){this.row--}linesUpToNextWhitespaceLine(e){return this.linesUpToNextMatchingLine(/^ *$/,e)}linesUpToNextMatchingLine(e,t){const n=[];for(;;){const r=this.nextLine();if(!1===r)break;if(t&&r.match(/^! /)){this.rewindLine();break}if(n.push(r),r.match(e))break}return n}}var Q=n(71606),E=n(31085);const T=[...[{ruleId:"hint_misplaced_alignment_tab_character",regexToMatch:/Misplaced alignment tab character &/},{ruleId:"hint_extra_alignment_tab_has_been_changed",regexToMatch:/Extra alignment tab has been changed to \\cr/},{ruleId:"hint_display_math_should_end_with",regexToMatch:/Display math should end with \$\$/},{ruleId:"hint_missing_inserted",regexToMatch:/Missing [{$] inserted\./},{ruleId:"hint_reference_undefined",regexToMatch:/Reference.+undefined/},{ruleId:"hint_there_were_undefined_references",regexToMatch:/There were undefined references/},{ruleId:"hint_citation_on_page_undefined_on_input_line",regexToMatch:/Citation .+ on page .+ undefined on input line .+/},{ruleId:"hint_label_multiply_defined_labels",regexToMatch:/(Label .+)? multiply[ -]defined( labels)?/},{ruleId:"hint_float_specifier_changed",regexToMatch:/`!?h' float specifier changed to `!?ht/},{ruleId:"hint_no_positions_in_optional_float_specifier",regexToMatch:/No positions in optional float specifier/},{ruleId:"hint_undefined_control_sequence",regexToMatch:/Undefined control sequence/,contentRegex:/^[^\n]*(\\\S+)\s*[\n]/,improvedTitle:(e,t)=>{if(t?.length&&Q.H.has(t[0])){const e=t[0],n=Q.H.get(e);return[`Is ${n.command} missing?`,(0,E.jsxs)("span",{children:["Is ",(0,E.jsx)("code",{children:n.command})," missing?"]})]}return e},highlightCommand:e=>e[0]},{ruleId:"hint_undefined_environment",regexToMatch:/LaTeX Error: Environment .+ undefined/,contentRegex:/\\begin\{(\S+)\}/,improvedTitle:(e,t)=>{if(t?.length&&Q.P.has(t[0])){const e=t[0],n=Q.P.get(e);return[`Is ${n.command} missing?`,(0,E.jsxs)("span",{children:["Is ",(0,E.jsx)("code",{children:n.command})," missing?"]})]}return e}},{ruleId:"hint_file_not_found",regexToMatch:/File .+ not found/},{ruleId:"hint_unknown_graphics_extension",regexToMatch:/LaTeX Error: Unknown graphics extension: \..+/},{ruleId:"hint_unknown_float_option_h",regexToMatch:/LaTeX Error: Unknown float option `H/},{ruleId:"hint_unknown_float_option_q",regexToMatch:/LaTeX Error: Unknown float option `q/},{ruleId:"hint_math_allowed_only_in_math_mode",regexToMatch:/LaTeX Error: \\math.+ allowed only in math mode/},{ruleId:"hint_mismatched_environment",types:["environment"],regexToMatch:/Error: `([^']{2,})' expected, found `([^']{2,})'.*/,newMessage:"Error: environment does not match \\begin{$1} ... \\end{$2}"},{ruleId:"hint_mismatched_brackets",types:["environment"],regexToMatch:/Error: `([^a-zA-Z0-9])' expected, found `([^a-zA-Z0-9])'.*/,newMessage:"Error: brackets do not match, found '$2' instead of '$1'"},{ruleId:"hint_can_be_used_only_in_preamble",regexToMatch:/LaTeX Error: Can be used only in preamble/},{ruleId:"hint_missing_right_inserted",regexToMatch:/Missing \\right inserted/},{ruleId:"hint_double_superscript",regexToMatch:/Double superscript/},{ruleId:"hint_double_subscript",regexToMatch:/Double subscript/},{ruleId:"hint_no_author_given",regexToMatch:/No \\author given/},{ruleId:"hint_somethings_wrong_perhaps_a_missing_item",regexToMatch:/LaTeX Error: Something's wrong--perhaps a missing \\item/},{ruleId:"hint_misplaced_noalign",regexToMatch:/Misplaced \\noalign/},{ruleId:"hint_no_line_here_to_end",regexToMatch:/LaTeX Error: There's no line here to end/},{ruleId:"hint_verb_ended_by_end_of_line",regexToMatch:/LaTeX Error: \\verb ended by end of line/},{ruleId:"hint_illegal_unit_of_measure_pt_inserted",regexToMatch:/Illegal unit of measure (pt inserted)/},{ruleId:"hint_extra_right",regexToMatch:/Extra \\right/},{ruleId:"hint_missing_begin_document",regexToMatch:/Missing \\begin{document}/},{ruleId:"hint_mismatched_environment2",types:["environment"],cascadesFrom:["environment"],regexToMatch:/Error: `\\end\{([^\}]+)\}' expected but found `\\end\{([^\}]+)\}'.*/,newMessage:"Error: environments do not match: \\begin{$1} ... \\end{$2}"},{ruleId:"hint_mismatched_environment3",types:["environment"],cascadesFrom:["environment"],regexToMatch:/Warning: No matching \\end found for `\\begin\{([^\}]+)\}'.*/,newMessage:"Warning: No matching \\end found for \\begin{$1}"},{ruleId:"hint_mismatched_environment4",types:["environment"],cascadesFrom:["environment"],regexToMatch:/Error: Found `\\end\{([^\}]+)\}' without corresponding \\begin.*/,newMessage:"Error: found \\end{$1} without a corresponding \\begin{$1}"}],{ruleId:"hint_character_invalid_at_this_point",regexToMatch:/^Package calc error: `(.+?)' invalid at this point/,package:"calc"},{ruleId:"hint_command_allowed_only_in_math_mode",regexToMatch:/^Package amsmath error: (.+?) allowed only in math mode/,package:"amsmath"},{ruleId:"hint_command_undefined",regexToMatch:/^LaTeX error: (.+?) undefined/,package:"LaTeX"},{ruleId:"hint_lt_in_mid_line",regexToMatch:/^LaTeX error: \\< in mid line/,package:"LaTeX"},{ruleId:"hint_a_box_was_supposed_to_be_here",regexToMatch:/^A <Box> was supposed to be here/i,package:"TeX"},{ruleId:"hint_accent_not_provided_by_font_family",regexToMatch:/^Package textcomp error: Accent (.+?) not provided by font family (.+)/,package:"textcomp"},{ruleId:"hint_argument_of_has_an_extra",regexToMatch:/^Argument of (.+?) has an extra }/,package:"TeX"},{ruleId:"hint_bad_line_or_vector_argument",regexToMatch:/^LaTeX error: Bad \\line or \\vector argument/,package:"LaTeX"},{ruleId:"hint_bad_math_environment_delimiter",regexToMatch:/^LaTeX error: Bad math environment delimiter/,package:"LaTeX"},{ruleId:"hint_begin_env_allowed_only_in_paragraph_mode",regexToMatch:/^Package amsmath error: \\begin{(.+?)} allowed only in paragraph mode/,package:"amsmath"},{ruleId:"hint_begin_env_on_input_line_x_ended_by_end_x",regexToMatch:/^LaTeX error: \\begin{(.+?)} on input line (.+?) ended by \\end{(.+?)}/,package:"LaTeX"},{ruleId:"hint_begin_split_wont_work_here",regexToMatch:/^Package amsmath error: \\begin{split} won't work here/,package:"amsmath"},{ruleId:"hint_can_be_used_only_in_preamble",regexToMatch:/^LaTeX error: Can be used only in preamble/,package:"LaTeX"},{ruleId:"hint_cannot_be_used_in_preamble",regexToMatch:/^LaTeX error: Cannot be used in preamble/,package:"LaTeX"},{ruleId:"hint_unicode_character",regexToMatch:/^LaTeX Error: Unicode character /,package:"LaTeX"},{ruleId:"hint_cannot_define_unicode_char_value_lt_00a0",regexToMatch:/^Package inputenc error: Cannot define Unicode char value < 00A0/,package:"inputenc"},{ruleId:"hint_cannot_determine_size_of_graphic_in_file",regexToMatch:/^Package (graphics|graphicx) error: Cannot determine size of graphic in (.+)/,package:"graphics/graphicx"},{ruleId:"hint_cannot_include_graphics_of_type",regexToMatch:/^Package (graphics|graphicx) error: Cannot include graphics of type\s*: (.+)/,package:"graphics/graphicx"},{ruleId:"hint_caption_outside_float",regexToMatch:/^LaTeX error: \\caption outside float/,package:"LaTeX"},{ruleId:"hint_command_already_defined",regexToMatch:/^LaTeX error: Command (.+?) already defined/,package:"LaTeX"},{ruleId:"hint_command_invalid_in_math_mode",regexToMatch:/^LaTeX error: Command (.+?) invalid in math mode/,package:"LaTeX"},{ruleId:"hint_command_not_defined_as_a_math_alphabet",regexToMatch:/^LaTeX error: Command (.+?) not defined as a math alphabet/,package:"LaTeX"},{ruleId:"hint_corrupted_nfss_tables",regexToMatch:/^LaTeX error: Corrupted NFSS tables/,package:"LaTeX"},{ruleId:"hint_counter_too_large",regexToMatch:/^LaTeX error: Counter too large/,package:"LaTeX"},{ruleId:"hint_dimension_too_large",regexToMatch:/^Dimension too large/,package:"TeX"},{ruleId:"hint_displaybreak_cannot_be_applied_here",regexToMatch:/^Package amsmath error: \\displaybreak cannot be applied here/,package:"amsmath"},{ruleId:"hint_division_by_0",regexToMatch:/^Package (graphics|graphicx) error: Division by 0/,package:"graphics/graphicx"},{ruleId:"hint_double_subscript",regexToMatch:/^Double subscript/,package:"TeX"},{ruleId:"hint_double_superscript",regexToMatch:/^Double superscript/,package:"TeX"},{ruleId:"hint_encoding_file_not_found",regexToMatch:/^Package fontenc error: Encoding file `(.+?)' not found/,package:"fontenc"},{ruleId:"hint_encoding_scheme_unknown",regexToMatch:/^LaTeX error: Encoding scheme `(.+?)' unknown/,package:"LaTeX"},{ruleId:"hint_environment_undefined",regexToMatch:/^LaTeX error: Environment (.+?) undefined/,package:"LaTeX"},{ruleId:"hint_erroneous_nesting_of_equation_structures",regexToMatch:/^Package amsmath error: Erroneous nesting of equation structures/,package:"amsmath"},{ruleId:"hint_extra_on_this_line",regexToMatch:/^Package amsmath error: Extra & on this line/,package:"amsmath"},{ruleId:"hint_extra_alignment_tab_has_been_changed_to_cr",regexToMatch:/^Extra alignment tab has been changed to \\cr/,package:"TeX"},{ruleId:"hint_extra_endgroup",regexToMatch:/^Extra \\endgroup/,package:"TeX"},{ruleId:"hint_extra_or",regexToMatch:/^Extra \\or/,package:"TeX"},{ruleId:"hint_extra_right",regexToMatch:/^Extra \\right/,package:"TeX"},{ruleId:"hint_extra_or_forgotten",regexToMatch:/^Extra }, or forgotten \$/,package:"TeX"},{ruleId:"hint_extra_or_forgotten_endgroup",regexToMatch:/^Extra }, or forgotten \\endgroup/,package:"TeX"},{ruleId:"hint_file_not_found",regexToMatch:/^LaTeX error: File `(.+?)' not found/,package:"LaTeX"},{ruleId:"hint_file_ended_while_scanning",regexToMatch:/^File ended while scanning (.+)/,package:"TeX"},{ruleId:"hint_float_lost",regexToMatch:/^LaTeX error: Float\(s\) lost/,package:"LaTeX"},{ruleId:"hint_font_family_unknown",regexToMatch:/^LaTeX error: Font family `(.+?)\+(.+?)' unknown/,package:"LaTeX"},{ruleId:"hint_font_not_found",regexToMatch:/^LaTeX error: Font (.+?) not found/,package:"LaTeX"},{ruleId:"hint_font_not_loaded_not_enough_room_left",regexToMatch:/^Font (.+?)=(.+?) not loaded: Not enough room left/,package:"TeX"},{ruleId:"hint_font_shape_not_found",regexToMatch:/^LaTeX error: Font shape (.+?) not found/,package:"LaTeX"},{ruleId:"hint_i_cant_find_file",regexToMatch:/^I can't find file `(.+?)'/,package:"TeX"},{ruleId:"hint_i_cant_write_on_file",regexToMatch:/^I can't write on file `(.+?)'/,package:"TeX"},{ruleId:"hint_illegal_character_in_array_arg",regexToMatch:/^LaTeX error: Illegal character in array arg/,package:"LaTeX"},{ruleId:"hint_illegal_parameter_number_in_definition_of",regexToMatch:/^Illegal parameter number in definition of (.+)/,package:"TeX"},{ruleId:"hint_illegal_unit_of_measure_pt_inserted",regexToMatch:/^Illegal unit of measure \(pt inserted\)/,package:"TeX"},{ruleId:"hint_improper_argument_for_math_accent",regexToMatch:/^Package amsmath error: Improper argument for math accent/,package:"amsmath"},{ruleId:"hint_improper_discretionary_list",regexToMatch:/^Improper discretionary list/,package:"TeX"},{ruleId:"hint_improper_hyphenation",regexToMatch:/^Improper \\hyphenation/,package:"TeX"},{ruleId:"hint_improper_prevdepth",regexToMatch:/^Improper \\prevdepth/,package:"TeX"},{ruleId:"hint_improper_spacefactor",regexToMatch:/^Improper \\spacefactor/,package:"TeX"},{ruleId:"hint_include_cannot_be_nested",regexToMatch:/^LaTeX error: \\include cannot be nested/,package:"LaTeX"},{ruleId:"hint_incompatible_list_cant_be_unboxed",regexToMatch:/^Incompatible list can't be unboxed/,package:"TeX"},{ruleId:"hint_incomplete_all_text_was_ignored_after_line",regexToMatch:/^Incomplete (.+?); all text was ignored after line (.+)/,package:"TeX"},{ruleId:"hint_infinite_glue_shrinkage_found",regexToMatch:/^Infinite glue shrinkage found (.+)/,package:"TeX"},{ruleId:"hint_interruption",regexToMatch:/^Interruption/,package:"TeX"},{ruleId:"hint_invalid_use_of_commande",regexToMatch:/^Package amsmath error: Invalid use of (.+)/,package:"amsmath"},{ruleId:"hint_keyboard_character_used_is_undefined_in_input_encoding",regexToMatch:/^Package inputenc error: Keyboard character used is undefined in input encoding (.+)/,package:"inputenc"},{ruleId:"hint_language_definition_file_not_found",regexToMatch:/^Package babel error: Language definition file (.+?)\.ldf not found /,package:"babel"},{ruleId:"hint_limit_controls_must_follow_a_math_operator",regexToMatch:/^Limit controls must follow a math operator/,package:"TeX"},{ruleId:"hint_loadclass_in_package_file",regexToMatch:/^LaTeX error: \\LoadClass in package file/,package:"LaTeX"},{ruleId:"hint_lonely_item_perhaps_a_missing_list_environment",regexToMatch:/^LaTeX error: Lonely \\item--perhaps a missing list environment/,package:"LaTeX"},{ruleId:"hint_math_alphabet_identifier_is_undefined_in_math_version",regexToMatch:/^LaTeX error: Math alphabet identifier (.+?) is undefined in math version (.+)/,package:"LaTeX"},{ruleId:"hint_math_version_is_not_defined",regexToMatch:/^LaTeX error: Math version (.+?) is not defined/,package:"LaTeX"},{ruleId:"hint_misplaced_alignment_tab_character",regexToMatch:/^Misplaced alignment tab character &/,package:"TeX"},{ruleId:"hint_misplaced_cr",regexToMatch:/^Misplaced \\cr/,package:"TeX"},{ruleId:"hint_misplaced_crcr",regexToMatch:/^Misplaced \\crcr/,package:"TeX"},{ruleId:"hint_misplaced_noalign",regexToMatch:/^Misplaced \\noalign/,package:"TeX"},{ruleId:"hint_misplaced_omit",regexToMatch:/^Misplaced \\omit/,package:"TeX"},{ruleId:"hint_missing_begin_document",regexToMatch:/^LaTeX error: Missing \\begin{document}/,package:"LaTeX"},{ruleId:"hint_missing_control_sequence_inserted",regexToMatch:/^Missing control sequence inserted/,package:"TeX"},{ruleId:"hint_missing_cr_inserted",regexToMatch:/^Missing \\cr inserted/,package:"TeX"},{ruleId:"hint_missing_delimiter_inserted",regexToMatch:/^Missing delimiter \(. inserted\)/,package:"TeX"},{ruleId:"hint_missing_endcsname_inserted",regexToMatch:/^Missing \\endcsname inserted/,package:"TeX"},{ruleId:"hint_missing_number_treated_as_zero",regexToMatch:/^Missing number, treated as zero/,package:"TeX"},{ruleId:"hint_missing_p_arg_in_array_arg",regexToMatch:/^LaTeX error: Missing p-arg in array arg/,package:"LaTeX"},{ruleId:"hint_missing_exp_in_array_arg",regexToMatch:/^LaTeX error: Missing @-exp in array arg/,package:"LaTeX"},{ruleId:"hint_missing_inserted_in_alignment_preamble",regexToMatch:/^Missing # inserted in alignment preamble/,package:"TeX"},{ruleId:"hint_missing_inserted_for_ifnum",regexToMatch:/^Missing = inserted for \\ifnum/,package:"TeX"},{ruleId:"hint_missing_inserted_for_ifdim",regexToMatch:/^Missing = inserted for \\ifdim/,package:"TeX"},{ruleId:"hint_missing_inserted",regexToMatch:/^Missing \$ inserted/,package:"TeX"},{ruleId:"hint_missing_endgroup_inserted",regexToMatch:/^Missing \\endgroup inserted/,package:"TeX"},{ruleId:"hint_missing_right_inserted",regexToMatch:/^Missing \\right\. inserted/,package:"TeX"},{ruleId:"hint_missing_inserted",regexToMatch:/^Missing \{ inserted/,package:"TeX"},{ruleId:"hint_missing_inserted",regexToMatch:/^Missing } inserted/,package:"TeX"},{ruleId:"hint_multiple_labels_label_tiquette_will_be_lost",regexToMatch:/^Package amsmath error: Multiple \\label's: label (.+?) will be lost/,package:"amsmath"},{ruleId:"hint_multiple_tag",regexToMatch:/^Package amsmath error: Multiple \\tag/,package:"amsmath"},{ruleId:"hint_no_counter_defined",regexToMatch:/^LaTeX error: No counter '(.+?)' defined/,package:"LaTeX"},{ruleId:"hint_no_cyrillic_encoding_definition_files_were_found",regexToMatch:/^Package babel error: No Cyrillic encoding definition files were found/,package:"babel"},{ruleId:"hint_no_declaration_for_shape",regexToMatch:/^LaTeX error: No declaration for shape (.+)/,package:"LaTeX"},{ruleId:"hint_no_driver_specified",regexToMatch:/^Package (color|graphics|graphicx) error: No driver specified/,package:"color/graphics/graphicx"},{ruleId:"hint_no_room_for_a_new_register",regexToMatch:/^No room for a new (.+)/,package:"TeX"},{ruleId:"hint_no_title_given",regexToMatch:/^LaTeX error: No \\title given/,package:"LaTeX"},{ruleId:"hint_not_a_letter",regexToMatch:/^Not a letter/,package:"TeX"},{ruleId:"hint_not_in_outer_par_mode",regexToMatch:/^LaTeX error: Not in outer par mode/,package:"LaTeX"},{ruleId:"hint_number_too_big",regexToMatch:/^Number too big/,package:"TeX"},{ruleId:"hint_ok_see_the_transcript_file",regexToMatch:/^OK \(see the transcript file\)/,package:"TeX"},{ruleId:"hint_old_form_should_be_begin",regexToMatch:/^Package amsmath error: Old form (.+?) should be \\begin{(.+?)} /,package:"amsmath"},{ruleId:"hint_only_one_is_allowed_per_tab",regexToMatch:/^Only one # is allowed per tab/,package:"TeX"},{ruleId:"hint_option_clash_for_package",regexToMatch:/^LaTeX error: Option clash for package (.+)/,package:"LaTeX"},{ruleId:"hint_page_height_already_too_large",regexToMatch:/^LaTeX error: Page height already too large/,package:"LaTeX"},{ruleId:"hint_paragraph_ended_before_command_was_complete",regexToMatch:/^Paragraph ended before (.+?) was complete/,package:"TeX"},{ruleId:"hint_please_type_a_command_or_say_end",regexToMatch:/^\(Please type a command or say `\\end'\)/,package:"TeX"},{ruleId:"hint_pushtabs_and_poptabs_dont_match",regexToMatch:/^LaTeX error: \\pushtabs and \\poptabs don't match/,package:"LaTeX"},{ruleId:"hint_requirepackage_or_loadclass_in_options_section",regexToMatch:/^LaTeX error: \\RequirePackage or \\LoadClass in Options Section/,package:"LaTeX"},{ruleId:"hint_rotation_not_supported",regexToMatch:/^Package (graphics|graphicx) error: Rotation not supported/,package:"graphics/graphicx"},{ruleId:"hint_runaway",regexToMatch:/^Runaway (.+)/,package:"TeX"},{ruleId:"hint_you_havent_specified_a_language_option",regexToMatch:/^Package babel error: You haven't specified a language option/,package:"babel"},{ruleId:"hint_calculating_math_sizes_for_size",regexToMatch:/^LaTeX (Font )?(Warning|Info): Calculating math sizes for size (.+)/,package:"LaTeX"},{ruleId:"hint_checking_defaults_for",regexToMatch:/^LaTeX (Font )?(Warning|Info): Checking defaults for (.+)/,package:"LaTeX"},{ruleId:"hint_citation_on_page_undefined",regexToMatch:/^LaTeX (Font )?(Warning|Info): Citation `(.+?)' on page (.+?) undefined/,package:"LaTeX"},{ruleId:"hint_command_invalid_in_math_mode",regexToMatch:/^LaTeX (Font )?(Warning|Info): Command (.+?) invalid in math mode/,package:"LaTeX"},{ruleId:"hint_document_class",regexToMatch:/^LaTeX (Font )?(Warning|Info): Document Class\s*: (.+)/,package:"LaTeX"},{ruleId:"hint_empty_thebibliography_environment",regexToMatch:/^LaTeX (Font )?(Warning|Info): Empty `thebibliography' environment/,package:"LaTeX"},{ruleId:"hint_encoding_has_changed_to_for",regexToMatch:/^LaTeX (Font )?(Warning|Info): Encoding (.+?) has changed to (.+?) for/,package:"LaTeX"},{ruleId:"hint_end_occurred_inside_a_group_at_level",regexToMatch:/^\(\\end occurred inside a group at level (.+)\)/,package:"TeX"},{ruleId:"hint_when_condition_on_line_was_incomplete",regexToMatch:/^\(\\end occurred when (.+?) on line (.+) was incomplete\)/,package:"TeX"},{ruleId:"hint_external_font_loaded_for_size",regexToMatch:/^LaTeX (Font )?(Warning|Info): External font (.+?) loaded for size (.+)/,package:"LaTeX"},{ruleId:"hint_faking_for_font_family_in_ts1_encoding",regexToMatch:/^Package TeXtcomp (Warning|Info): Faking (.+?) for font family (.+?) in TS1 encoding/,package:"TeXtcomp"},{ruleId:"hint_file_already_exists_on_the_system_not_generating_it_from_this_source",regexToMatch:/^LaTeX (Font )?(Warning|Info): File `(.+?)' already exists on the system\.\nNot generating it from this source\./,package:"LaTeX"},{ruleId:"hint_file",regexToMatch:/^LaTeX (Font )?(Warning|Info): File\s*: (.+)/,package:"LaTeX"},{ruleId:"hint_file_font_definition",regexToMatch:/^LaTeX (Font )?(Warning|Info): File\s*: (.+?)\.fd (.+)/,package:"LaTeX"},{ruleId:"hint_float_too_large_for_page_by",regexToMatch:/^LaTeX (Font )?(Warning|Info): Float too large for page by (.+)/,package:"LaTeX"},{ruleId:"hint_font_shape_in_size_not_available_external_font_used",regexToMatch:/^LaTeX (Font )?(Warning|Info): Font shape (.+?) in size (.+?) not available\nexternal font (.+?) used/,package:"LaTeX"},{ruleId:"hint_font_shape_in_size_not_available_size_substituted",regexToMatch:/^LaTeX (Font )?(Warning|Info): Font shape (.+?) in size (.+?) not available\nsize (.+?) substituted/,package:"LaTeX"},{ruleId:"hint_font_shape_in_size_not_available_shape_forme_tried",regexToMatch:/^LaTeX (Font )?(Warning|Info): Font shape (.+?) in size (.+?) not available\nshape (.+?) tried/,package:"LaTeX"},{ruleId:"hint_font_shape_forme_undefined_using_autre_forme_instead",regexToMatch:/^LaTeX (Font )?(Warning|Info): Font shape (.+?) undefined\. Using `(.+?)' instead/,package:"LaTeX"},{ruleId:"hint_font_shape_forme_will_be_scaled_to_size_taille_",regexToMatch:/^LaTeX (Font )?(Warning|Info): Font shape (.+?) will be scaled to size (.+)/,package:"LaTeX"},{ruleId:"hint_foreign_command",regexToMatch:/^Package amsmath (Warning|Info): Foreign command (.+?);/,package:"amsmath"},{ruleId:"hint_form_feed_has_been_converted_to_blank_line",regexToMatch:/^LaTeX (Font )?(Warning|Info): Form feed has been converted to Blank Line/,package:"LaTeX"},{ruleId:"hint_float_specifier_changed",regexToMatch:/^LaTeX (Font )?(Warning|Info): `(.+?)' float specifier changed to `(.+?)'/,package:"LaTeX"},{ruleId:"hint_ignoring_text_after_end",regexToMatch:/^LaTeX (Font )?(Warning|Info): Ignoring text `(.+?)' after \\end{(.+?)}/,package:"LaTeX"},{ruleId:"hint_label_multiply_defined",regexToMatch:/^LaTeX (Font )?(Warning|Info): Label `(.+?)' multiply defined/,package:"LaTeX"},{ruleId:"hint_labels_may_have_changed_rerun_to_get_cross_references_right",regexToMatch:/^LaTeX (Font )?(Warning|Info): Label\(s\) may have changed\. Rerun to get cross-references right\./,package:"LaTeX"},{ruleId:"hint_loose_hbox_badness",regexToMatch:/^Loose \\hbox \(badness (.+?)\) (.+)/,package:"TeX"},{ruleId:"hint_loose_vbox_badness",regexToMatch:/^Loose \\vbox \(badness (.+?)\) (.+)/,package:"TeX"},{ruleId:"hint_making_an_active_character",regexToMatch:/^Package babel (Warning|Info): Making (.+?) an active character/,package:"babel"},{ruleId:"hint_marginpar_on_page_moved",regexToMatch:/^LaTeX (Font )?(Warning|Info): Marginpar on page (.+?) moved/,package:"LaTeX"},{ruleId:"hint_missing_character_there_is_no_in_font",regexToMatch:/^Missing character\s*: There is no (.+?) in font (.+?)!/,package:"TeX"},{ruleId:"hint_no_author_given",regexToMatch:/^LaTeX (Font )?(Warning|Info): No \\author given/,package:"LaTeX"},{ruleId:"hint_no_auxiliary_output_files",regexToMatch:/^LaTeX (Font )?(Warning|Info): No auxiliary output files/,package:"LaTeX"},{ruleId:"hint_no_characters_defined_by_input_encoding_change_to",regexToMatch:/^LaTeX (Font )?(Warning|Info): No characters defined by input encoding change to (.+)/,package:"LaTeX"},{ruleId:"hint_no_file",regexToMatch:/^LaTeX (Font )?(Warning|Info): No file (.+)/,package:"LaTeX"},{ruleId:"hint_no_hyphenation_patterns_were_loaded_for_the_language",regexToMatch:/^Package babel (Warning|Info): No hyphenation patterns were loaded for the language `(.+?)'/,package:"babel"},{ruleId:"hint_no_input_encoding_specified_for_language",regexToMatch:/^Package babel (Warning|Info): No input encoding specified for (.+?) language/,package:"babel"},{ruleId:"hint_no_positions_in_optional_float_specifier",regexToMatch:/^LaTeX (Font )?(Warning|Info): No positions in optional float specifier\./,package:"LaTeX"},{ruleId:"hint_oldstyle_digits_unavailable_for_family",regexToMatch:/^LaTeX (Font )?(Warning|Info): Oldstyle digits unavailable for family (.+)/,package:"Textcomp"},{ruleId:"hint_optional_argument_of_twocolumn_too_tall_on_page",regexToMatch:/^LaTeX (Font )?(Warning|Info): Optional argument of \\twocolumn too tall on page (.+)/,package:"LaTeX"},{ruleId:"hint_oval_circle_or_line_size_unavailable",regexToMatch:/^LaTeX (Font )?(Warning|Info): \\oval, \\circle, or \\line size unavailable/,package:"LaTeX"},{ruleId:"hint_overfull_hbox_too_wide_quelque_part_",regexToMatch:/^Overfull \\hbox \((.+?)pt too wide\) (.+)/,package:"TeX"},{ruleId:"hint_overfull_vbox_pt_too_wide",regexToMatch:/^Overfull \\vbox \((.+?)pt too wide\)\) (.+)/,package:"TeX"},{ruleId:"hint_overwriting_encoding_scheme_quelque_chose_defaults",regexToMatch:/^LaTeX (Font )?(Warning|Info): Overwriting encoding scheme (.+?) defaults/,package:"LaTeX"},{ruleId:"hint_overwriting_in_version",regexToMatch:/^LaTeX (Font )?(Warning|Info): Overwriting (.+?) in version `(.+)'/,package:"LaTeX"},{ruleId:"hint_package",regexToMatch:/^LaTeX (Font )?(Warning|Info): Package: (.+)/,package:"LaTeX"},{ruleId:"hint_redeclaring_font_encoding",regexToMatch:/^LaTeX (Font )?(Warning|Info): Redeclaring font encoding (.+)/,package:"LaTeX"},{ruleId:"hint_redeclaring_math_accent",regexToMatch:/^LaTeX (Font )?(Warning|Info): Redeclaring math accent (.+)/,package:"LaTeX"},{ruleId:"hint_redeclaring_math_alphabet",regexToMatch:/^LaTeX (Font )?(Warning|Info): Redeclaring math alphabet (.+)/,package:"LaTeX"},{ruleId:"hint_redeclaring_math_symbol",regexToMatch:/^LaTeX (Font )?(Warning|Info): Redeclaring math symbol (.+)/,package:"LaTeX"},{ruleId:"hint_redeclaring_math_version",regexToMatch:/^LaTeX (Font )?(Warning|Info): Redeclaring math version (.+)/,package:"LaTeX"},{ruleId:"hint_redeclaring_symbol_font",regexToMatch:/^LaTeX (Font )?(Warning|Info): Redeclaring symbol font (.+)/,package:"LaTeX"},{ruleId:"hint_reference_on_page_undefined",regexToMatch:/^LaTeX (Font )?(Warning|Info): Reference `(.+?)' on page (.+?) undefined/,package:"LaTeX"},{ruleId:"hint_size_substitutions_with_differences_up_to_have_occurred",regexToMatch:/^LaTeX (Font )?(Warning|Info): Size substitutions with differences up to (.+?) have occurred/,package:"LaTeX"},{ruleId:"hint_some_font_shapes_were_not_available_defaults_substituted",regexToMatch:/^LaTeX (Font )?(Warning|Info): Some font shapes were not available, defaults substituted/,package:"LaTeX"},{ruleId:"hint_tab_has_been_converted_to_blank_space",regexToMatch:/^LaTeX (Font )?(Warning|Info): Tab has been converted to Blank Space/,package:"LaTeX"},{ruleId:"hint_text_page_contains_only_floats",regexToMatch:/^LaTeX (Font )?(Warning|Info): text page (.+?) contains only floats/,package:"LaTeX"},{ruleId:"hint_there_were_multiply_defined_labels",regexToMatch:/^LaTeX (Font )?(Warning|Info): There were multiply-defined labels/,package:"LaTeX"},{ruleId:"hint_there_were_undefined_references",regexToMatch:/^LaTeX (Font )?(Warning|Info): There were undefined references/,package:"LaTeX"},{ruleId:"hint_tight_hbox_badness",regexToMatch:/^Tight \\hbox \(badness (.+?)\) (.+)/,package:"TeX"},{ruleId:"hint_tight_vbox_badness",regexToMatch:/^Tight \\vbox \(badness (.+?)\) (.+)/,package:"TeX"},{ruleId:"hint_try_loading_font_information_for",regexToMatch:/^LaTeX (Font )?(Warning|Info): Try loading font information for (.+?)\+(.+)/,package:"LaTeX"},{ruleId:"hint_unable_to_redefine_math_accent",regexToMatch:/^Package amsmath (Warning|Info): Unable to redefine math accent (.+)/,package:"amsmath"},{ruleId:"hint_hbox_badness_detected_at_line",regexToMatch:/^Underfull \\hbox \(badness (.+?)\) (.+?) detected at line (.+)/,package:"TeX"},{ruleId:"hint_hbox_badness_has_occurred_while_output_is_active",regexToMatch:/^Underfull \\hbox \(badness (.+?)\) (.+?) has occurred while \\output is active/,package:"TeX"},{ruleId:"hint_hbox_badness_in_alignment_at_lines",regexToMatch:/^Underfull \\hbox \(badness (.+?)\) (.+?) in alignment at lines (.+)/,package:"TeX"},{ruleId:"hint_hbox_badness_in_paragraph_at_lines",regexToMatch:/^Underfull \\hbox \(badness (.+?)\) (.+?) in paragraph at lines (.+)/,package:"TeX"},{ruleId:"hint_vbox_badness_detected_at_line",regexToMatch:/^Underfull \\vbox \(badness (.+?)\) (.+?) detected at line (.+)/,package:"TeX"},{ruleId:"hint_vbox_badness_has_occurred_while_output_is_active",regexToMatch:/^Underfull \\vbox \(badness (.+?)\) (.+?) has occurred while \\output is active/,package:"TeX"},{ruleId:"hint_vbox_badness_in_alignment_at_lines",regexToMatch:/^Underfull \\vbox \(badness (.+?)\) (.+?) in alignment at lines (.+)/,package:"TeX"},{ruleId:"hint_unused_global_options",regexToMatch:/^LaTeX (Font )?(Warning|Info): Unused global option\(s\)\s*: \[(.+?)]/,package:"LaTeX"},{ruleId:"hint_writing_file",regexToMatch:/^LaTeX (Font )?(Warning|Info): Writing file `(.+?)'/,package:"LaTeX"},{ruleId:"hint_writing_text_before_end_as_last_line_of",regexToMatch:/^LaTeX (Font )?(Warning|Info): Writing text `(.+?)' before \\end{(.+?)} as last line of (.+)/,package:"LaTeX"},{ruleId:"hint_you_have_more_than_once_selected_the_attribute_for_language",regexToMatch:/^Package babel (Warning|Info): You have more than once selected the attribute `(.+?)' for language (.+)/,package:"babel"},{ruleId:"hint_you_have_requested_package_or_class_but_the_package_or_class_provides",regexToMatch:/^LaTeX (Font )?(Warning|Info): You have requested (package|class) `(.+?)', but the (package|class) provides `(.+?)'/,package:"LaTeX"},{ruleId:"hint_you_have_requested_release_date_of_latex_but_only_release_ancienne_date_is_available",regexToMatch:/^LaTeX (Font )?(Warning|Info): You have requested release `(.+?)' of LaTeX, but only release `(.+?)' is available/,package:"LaTeX"},{ruleId:"hint_you_have_requested_on_line_version_of_but_only_version_is_available",regexToMatch:/^LaTeX (Font )?(Warning|Info): You have requested, on line (.+?), version `(.+?)' of (.+?), but only version `(.+?)' is available/,package:"LaTeX"}],j={parse(e,t){const n="string"==typeof e?new C(e,t).parse():e,r={};for(const e of n.all){const t=T.find((t=>t.regexToMatch.test(e.message)));if(t){if(t.ruleId&&(e.ruleId=t.ruleId),t.newMessage&&(e.message=e.message.replace(t.regexToMatch,t.newMessage)),t.contentRegex){const n=e.content.match(t.contentRegex);n&&(e.contentDetails=n.slice(1))}if(e.contentDetails&&t.improvedTitle){const n=t.improvedTitle(e.message,e.contentDetails);Array.isArray(n)?e.message=n[0]:e.message=n}if(e.contentDetails&&t.highlightCommand&&(e.command=t.highlightCommand(e.contentDetails)),t.cascadesFrom)for(const n of t.cascadesFrom)r[n]&&(e.suppressed=!0);if(t.types)for(const e of t.types)r[e]=!0}}for(const[e,t]of Object.entries(n))"object"==typeof t&&t.length>0&&(n[e]=Array.from(t).filter((e=>!e.suppressed)));return n}};n(74786);const P=/^\[(\d+)].*>\s(INFO|WARN|ERROR)\s-\s(.*)$/,$=/^Warning--(.+)\n--line (\d+) of file (.+)$/m,R=/^Warning--(.+)$/m,X=/^(.*)---line (\d+) of file (.*)\n([^]+?)\nI'm skipping whatever remains of this entry$/m,A=/^(A bad cross reference---entry ".+?"\nrefers to entry.+?, which doesn't exist)$/m,q=/^(.*)\n?---line (\d+) of file (.*)\n([^]+?)\nI'm skipping whatever remains of this command$/m,L=/^(.*?)\nwhile executing---line (\d+) of file (.*)/m,I={INFO:"info",WARN:"warning",ERROR:"error"},N=function(e){return function(t,n){const[r,o]=t,[i,a]=n,[s,l]=function(t,n,r){let o,i=t;const a=[];let s=0;for(;o=n.exec(i);){s++;const t=r(o);if(null!=e&&s>=e)return[a,""];a.push(t),i=o.input.slice(0,o.index)+o.input.slice(o.index+o[0].length+1,o.input.length)}return[a,i]}(o,i,a);return[r.concat(s),l]}};class D{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"!=typeof e)throw new Error("BibLogParser Error: text parameter must be a string");this.text=e.replace(/(\r\n)|\r/g,"\n"),this.options=t,this.lines=e.split("\n"),this.warningParsers=[[$,function(e){const[t,n,r,o]=e;return{file:o,level:"warning",message:n,line:r,raw:t}}],[R,function(e){const[t,n]=e;return{file:"",level:"warning",message:n,line:"",raw:t}}]],this.errorParsers=[[X,function(e){const[t,n,r,o,i]=e;return{file:o,level:"error",message:n+"\n"+i,line:r,raw:t}}],[A,function(e){const[t,n]=e;return{file:"",level:"error",message:n,line:"",raw:t}}],[q,function(e){const[t,n,r,o,i]=e;return{file:o,level:"error",message:n+"\n"+i,line:r,raw:t}}],[L,function(e){const[t,n,r,o]=e;return{file:o,level:"error",message:n,line:r,raw:t}}]]}parseBibtex(){const[e,t]=this.warningParsers.reduce(N(this.options.maxErrors),[[],this.text]),[n]=this.errorParsers.reduce(N(this.options.maxErrors),[[],t]);return{all:e.concat(n),errors:n,warnings:e,files:[],typesetting:[]}}parseBiber(){const e={all:[],errors:[],warnings:[],files:[],typesetting:[]};return this.lines.forEach((function(t){const n=t.match(P);if(n){const[t,,r,o]=n,i={file:"",level:I[r]||"INFO",message:o,line:"",raw:t},a=i.message.match(/^BibTeX subsystem: \/.+\/(\w+\.\w+)_.+, line (\d+), (.+)$/);if(a){const[,e,t,n]=a;i.file=e,i.line=t,i.message=n}switch(e.all.push(i),i.level){case"error":return e.errors.push(i);case"warning":return e.warnings.push(i)}}})),e}parse(){const e=this.lines[0];if(e.match(/^.*INFO - This is Biber.*$/))return this.parseBiber();if(e.match(/^This is BibTeX, Version.+$/))return this.parseBibtex();throw new Error("BibLogParser Error: cannot determine whether text is biber or bibtex output")}}var W=n(35287);n(63308);const M=/^(Reference|Citation).+undefined on input line/,U=1048576,F=U;let V=1;const G=async(e,t,n)=>{const r={log:null,logEntries:{errors:[],warnings:[],typesetting:[]}};function o(e,t){for(const n in r.logEntries)if(e[n]){for(const r of e[n])t&&(r.type=e.type),r.file&&(r.file=B(r.file)),r.key="compile-log-entry-"+V++;r.logEntries[n].push(...e[n])}}const i=e.get("output.log");if(i){r.log=await z(Z(i,t.pdfDownloadDomain),n,U);try{let{errors:e,warnings:n,typesetting:i}=j.parse(r.log,{ignoreDuplicates:!0});"stopped-on-first-error"===t.status&&(n=n.filter((e=>!function(e){return M.test(e.message)}(e)))),o({errors:e,warnings:n,typesetting:i})}catch(e){u.$.warn(e)}}const a=[];for(const[t,n]of e)t.endsWith(".blg")&&a.push(n);for(const e of a){const r=await z(Z(e,t.pdfDownloadDomain),n,F);try{const{errors:e,warnings:t}=new D(r,{maxErrors:100}).parse();o({errors:e,warnings:t},"BibTeX:")}catch(e){}}return r.logEntries.all=[...r.logEntries.errors,...r.logEntries.warnings,...r.logEntries.typesetting],r};function Z(e,t){return e.build&&t?`${t}${e.url}`:`${window.origin}${e.url}`}function B(e,t){return e=(e=(e=e.replace(/\/\//g,"/")).replace(/^.*\/compiles\/[0-9a-f]{24}(-[0-9a-f]{24})?\/(\.\/)?/,"")).replace(/^\/compile\//,""),t&&(e=e.replace(/^\.\//,t+"/")),e}async function z(e,t,n){let r="";try{const o=new AbortController;t.addEventListener("abort",(()=>{o.abort()}));const i=await fetch(e,{signal:o.signal});if(!i.ok)throw new Error("Failed to fetch log file");const a=i.body.pipeThrough(new TextDecoderStream);for await(const e of a)r+=e,r.length>n&&o.abort()}catch(e){u.$.warn(e)}return r}var Y=n(86316),H=n(10646);const K=["bbl","gls","ind"],J=["output.fls","output.fdb_latexmk"];var ee=n(56447),te=n(85960),ne=n(60440),re=n(93588),oe=n(89997),ie=n(66020),ae=n(17112),se=n(68543),le=n(55937),ce=n(37664);var de=n(58528),he=n(9155),ue=n(37603),me=n.n(ue);const pe=(0,r.createContext)(void 0),ge=e=>{let{children:t}=e;const{hasPremiumCompile:n,isProjectOwner:a}=(0,H.mi)(),{openDocWithId:c,openDocs:m}=(0,se.TS)(),{currentDocument:p}=(0,le.Wq)(),{role:O}=(0,re.Q2)(),{projectId:b,joinedOnce:v,project:w}=(0,Y.Om)(),{rootDocId:_,imageName:x,compiler:y}=w||{},{pdfPreviewOpen:k}=(0,ee.LV)(),{features:C,alphaProgram:S,labsProgram:Q}=(0,te.ur)(),{fileTreeData:T}=(0,ne.Q)(),{findEntityByPath:j}=(0,oe.m8)(),[P,$]=(0,r.useState)(!1),[R,X]=(0,r.useState)(!1),[A,q]=(0,r.useState)(!1),[L,I]=(0,r.useState)(),[N,D]=(0,r.useState)(),{userSettings:M}=(0,ie.dk)(),{pdfViewer:U,syntaxValidation:F}=M,[V,z]=(0,r.useState)(),[ue,ge]=(0,r.useState)(!1),[fe,Oe]=(0,r.useState)(!1),[be,ve]=(0,r.useState)(),[we,_e]=(0,r.useState)(),xe=we?we.rootDocId??_:null,[ye,ke]=(0,r.useState)((()=>()=>{})),[Ce,Se]=(0,r.useState)({}),[Qe,Ee]=(0,r.useState)(!1),[Te,je]=(0,r.useState)((0,s.A)("ol-projectOwnerHasPremiumOnPageLoad")&&(0,de.g9)("populate-clsi-cache")&&"detached"!==O),[Pe,$e]=(0,r.useState)(!1),[Re,Xe]=(0,r.useState)(),[Ae,qe]=(0,r.useState)(!1),[Le,Ie]=(0,r.useState)(!1),[Ne,De]=(0,r.useState)(!1),We=(0,r.useCallback)((()=>{Ie((e=>(e||(0,f.JY)("ide-open-logs-once"),!e)))}),[Ie]),[Me,Ue]=(0,r.useState)(),[Fe,Ve]=(0,r.useState)(),[Ge,Ze]=(0,r.useState)(),[Be,ze]=(0,r.useState)(),[Ye,He]=(0,r.useState)(),[Ke,Je]=(e=>{const[t,n]=(0,r.useState)(),o=(0,r.useRef)(e);(0,r.useEffect)((()=>{o.current=e}),[e]);const i=(0,r.useRef)(null);return(0,r.useEffect)((()=>{if(e){const t=ce.A.getItem(`pdf.position.${e}`);t&&(u.$.log("loaded position for",e,t),i.current=t,n(t))}}),[e]),(0,r.useEffect)((()=>{o.current&&t&&t!==i.current&&(u.$.log("storing position for",o.current,t),ce.A.setItem(`pdf.position.${o.current}`,t))}),[t]),[t,n]})(xe),[et,tt]=(0,o.A)(`autocompile_enabled:${b}`,!1,{listen:!0}),[nt,rt]=(0,o.A)(`draft:${b}`,!1,{listen:!0}),[ot,it]=(0,o.A)(`stop_on_first_error:${b}`,!1,{listen:!0}),[at,st]=(0,r.useState)(!1),[lt,ct]=(0,o.A)(`stop_on_validation_error:${b}`,!0,{listen:!0}),[dt,ht]=(0,r.useState)(!1),[ut,mt]=(0,r.useState)(0),{signal:pt}=(0,i.A)(),gt=(0,r.useCallback)((()=>{z(void 0),I(void 0),D({})}),[z,I,D]),ft=(0,r.useRef)(!1);(0,r.useEffect)((()=>{ft.current=P}),[P]);const Ot=(0,r.useCallback)((e=>function(e,t,n){const r=(0,W.pD)(t,n),o={},i={};for(const n of e)if(n.file){n.file=B(n.file,r);const e=(0,W.Xk)(t,n.file)?.entity;if(e){e._id in o||(o[e._id]=[]);const t={id:n.key,entryIndex:o[e._id].length,row:n.line-1,type:"error"===n.level?"error":"warning",text:n.message,source:"compile",ruleId:n.ruleId,command:n.command};"typesetting"!==n.level&&(i[n.line]||(t.firstOnLine=!0,i[n.line]=!0)),o[e._id].push(t)}}return o}(e,T,xe)),[T,xe]),bt=(0,r.useRef)(Ot);(0,r.useEffect)((()=>{bt.current=Ot}),[Ot]);const[vt]=(0,r.useState)((()=>new g({projectId:b,setChangedAt:mt,setCompiling:$,setData:_e,setFirstRenderDone:ke,setDeliveryLatencies:Se,setError:Ue,cleanupCompileResult:gt,compilingRef:ft,signal:pt,openDocs:m})));(0,r.useEffect)((()=>{vt.currentDoc=p}),[vt,p]),(0,r.useEffect)((()=>{vt.projectRootDocId=_}),[vt,_]),(0,r.useEffect)((()=>{vt.setOption("draft",nt)}),[vt,nt]),(0,r.useEffect)((()=>{vt.setOption("stopOnFirstError",ot)}),[vt,ot]),(0,r.useEffect)((()=>{ge(ut>0)}),[ge,ut]),(0,r.useEffect)((()=>{Oe(ut>0)}),[Oe,ut]),(0,r.useEffect)((()=>{Te&&!Pe&&($e(!0),(0,l.hm)(`/project/${b}/output/cached/output.overleaf.json`).then((e=>{Xe(e)})).catch((()=>{je(!1),$e(!1)})))}),[b,Te,Pe]),(0,r.useEffect)((()=>{if(!Re)return;if(!v)return;if(!p)return;if(Qe)return;let e=!1;try{Re.rootDocId=j(Re.options?.rootResourcePath||"")?.entity?._id;e=(vt.getRootDocOverrideId()||_)===Re.rootDocId&&Re.options.imageName===x&&Re.options.compiler===y&&Re.options.draft===nt&&!!Re.options.stopOnFirstError>=ot}catch(e){(0,he.C)(me().tag(e,"validate compile options",{options:Re.options}))}e&&((0,f._)("compile-from-cache",{projectId:b}),_e(Re),Ee(!0)),Xe(void 0),je(!1),$e(!1)}),[b,Re,v,p,Qe,_,j,vt,y,x,ot,nt]),(0,r.useEffect)((()=>{Qe||!p||Te||Pe||(Ee(!0),vt.compile({isAutoCompileOnLoad:!0}))}),[Qe,p,Te,Pe,vt]),(0,r.useEffect)((()=>{q(void 0!==C?.compileTimeout&&C.compileTimeout<=60)}),[C]),(0,r.useEffect)((()=>{if(A&&P&&a){const e=window.setTimeout((()=>{X(!0)}),3e4);return()=>{window.clearTimeout(e)}}}),[P,a,A]);const wt=(0,ae.u)("compile-log-events"),_t=(0,r.useRef)(null),xt=(0,r.useRef)({}),yt=(0,r.useCallback)((e=>{xt.current[e]=!0}),[]);(0,r.useEffect)((()=>{if(!v)return;const e=new AbortController,t=xt.current;if(xt.current={},we){if(we.clsiServerId&&ve(we.clsiServerId),we.outputFiles){const n=new Map;for(const e of we.outputFiles)n.set(e.path,{...e});"success"===we.status&&z(function(e,t,n){const r=e.get("output.pdf");if(!r)return null;r.editorId=r.editorId||d.$3,r.clsiCacheShard=n.clsiCacheShard||"cache";const o=new URLSearchParams;return n.compileGroup&&o.set("compileGroup",n.compileGroup),n.clsiServerId&&o.set("clsiserverid",n.clsiServerId),h.lW&&o.set("enable_pdf_caching","true"),r.pdfUrl=`${Z(r,n.pdfDownloadDomain)}?${o}`,n.fromCache?r.pdfDownloadUrl=r.downloadURL:(o.set("popupDownload","true"),r.pdfDownloadUrl=`/download/project/${t}/build/${r.build}/output/output.pdf?${o}`),r}(n,b,we)),Ve(function(e,t){let{clsiServerId:n,clsiCacheShard:r,compileGroup:o,outputFilesArchive:i,fromCache:a=!1}=t;const s={top:[],other:[]};if(e){const t=new URLSearchParams;a?t.set("clsiserverid",r||"cache"):n&&t.set("clsiserverid",n),o&&t.set("compileGroup",o);const l=t.toString(),c=[];for(const t of e.values())J.includes(t.path)||(t.main=t.path.startsWith("output."),l.length&&(t.url+=`?${l}`),c.push(t));c.sort(((e,t)=>e.main&&!t.main?-1:t.main&&!e.main?1:e.path.localeCompare(t.path,void 0,{numeric:!0})));for(const e of c)K.includes(e.type)?s.top.push(e):"pdf"===e.type&&!0===e.main||s.other.push(e);const d=[...s.top,...s.other];i&&d.length>0&&(d.forEach((e=>t.append("files",e.path))),s.archive={...i,fileCount:d.length,url:`${i.url}?${t.toString()}`})}return s}(n,we)),D(void 0),I(void 0),Ze(void 0),G(n,we,e.signal).then((e=>{if(Ze(e.log),I(e.logEntries),D(bt.current(e.logEntries.all)),!S&&(["success","stopped-on-first-error"].includes(we.status)&&(0,f.MY)("compile-result",{errors:e.logEntries.errors.length,warnings:e.logEntries.warnings.length,typesetting:e.logEntries.typesetting.length,newPdfPreview:!0,stopOnFirstError:we.options.stopOnFirstError},.01),wt||Q)){const n=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t={};for(const n of e){const e=`${n.level}_${n.ruleId}`;t[e]=t[e]?t[e]+1:1}return t}(e.logEntries.all),r=we.rootDocId||vt.projectRootDocId,o=_t.current;_t.current={ruleCounts:n,rootDocId:r};const i=o&&o.rootDocId===r?((e,t)=>{const n={};for(const[r,o]of Object.entries(e)){const e=t[r]??0;n[`delta_${r}`]=o-e}for(const[r,o]of Object.entries(t))r in e||(n[r]=0,n[`delta_${r}`]=-o);return n})(n,o.ruleCounts):{};(0,f._)("compile-log-entries",{status:we.status,stopOnFirstError:we.options.stopOnFirstError,isAutoCompileOnLoad:!!we.options.isAutoCompileOnLoad,isAutoCompileOnChange:!!we.options.isAutoCompileOnChange,rootDocId:r,...t,...n,...i})}}))}switch(we.status){case"success":Ue(void 0),Ie(!1);break;case"stopped-on-first-error":Ue(void 0),Ie(!0);break;case"clsi-maintenance":case"compile-in-progress":case"exited":case"failure":case"project-too-large":case"rate-limited":case"terminated":case"too-recently-compiled":Ue(we.status);break;case"timedout":Ue("timedout"),!n&&a&&(0,f.tN)("subscription-funnel","editor-click-feature","compile-timeout");break;case"autocompile-backoff":we.options.isAutoCompileOnLoad||(Ue("autocompile-disabled"),tt(!1));break;case"unavailable":Ue("clsi-unavailable");break;case"validation-problems":Ue("validation-problems"),ze(we.validationProblems);break;default:Ue("error")}st("stopped-on-first-error"===we.status)}return()=>{e.abort()}}),[v,we,S,Q,C,wt,n,a,b,tt,ve,I,D,z,vt]),(0,r.useEffect)((()=>{Me&&Ie(!0)}),[Me]);const kt=Boolean(et&&F&&dt),Ct=lt&&kt,St=Boolean(et&&k&&!Ct),Qt=Boolean(St&&ue&&Qe);(0,r.useEffect)((()=>{St?ut>0&&vt.debouncedAutoCompile():vt.debouncedAutoCompile.cancel()}),[vt,St,ut]),(0,r.useEffect)((()=>()=>{vt.debouncedAutoCompile.cancel()}),[vt]);const Et=(0,r.useCallback)((e=>{Ee(!0),vt.compile(e)}),[vt,Ee]),Tt=(0,r.useCallback)((()=>{vt.stopCompile()}),[vt]),jt=(0,r.useCallback)((()=>(qe(!0),vt.clearCache().then((()=>{Ve(void 0),z(void 0)})).finally((()=>{qe(!1)})))),[vt]),Pt=(0,r.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=j(e.file);n&&"doc"===n.type&&c(n.entity._id,{gotoLine:e.line??void 0,gotoColumn:e.column??void 0,keepCurrentView:t})}),[j,c]),$t=(0,r.useCallback)((()=>{jt().then((()=>{vt.compile()}))}),[jt,vt]),Rt=(0,r.useMemo)((()=>we?.options||{}),[we]),Xt=(0,r.useMemo)((()=>({animateCompileDropdownArrow:Ne,autoCompile:et,clearCache:jt,clearingCache:Ae,clsiServerId:be,codeCheckFailed:Ct,compiling:P,deliveryLatencies:Ce,draft:nt,editedSinceCompileStarted:fe,error:Me,fileList:Fe,hasChanges:Qt,hasShortCompileTimeout:A,highlights:Ye,isProjectOwner:a,lastCompileOptions:Rt,logEntryAnnotations:N,logEntries:L,pdfDownloadUrl:V?.pdfDownloadUrl,pdfFile:V,pdfUrl:V?.pdfUrl,pdfViewer:U,position:Ke,rawLog:Ge,recompileFromScratch:$t,setAnimateCompileDropdownArrow:De,setAutoCompile:tt,setCompiling:$,setDraft:rt,setError:Ue,setHasLintingError:ht,setHighlights:He,setPosition:Je,showCompileTimeWarning:R,setShowCompileTimeWarning:X,setShowLogs:Ie,toggleLogs:We,setStopOnFirstError:it,setStopOnValidationError:ct,showLogs:Le,startCompile:Et,stopCompile:Tt,stopOnFirstError:ot,stopOnValidationError:lt,stoppedOnFirstError:at,uncompiled:ue,validationIssues:Be,firstRenderDone:ye,setChangedAt:mt,cleanupCompileResult:gt,syncToEntry:Pt,recordAction:yt})),[Ne,et,jt,Ae,be,Ct,P,Ce,nt,fe,Me,Fe,Qt,A,Ye,a,Rt,L,N,Ke,V,U,Ge,$t,De,tt,rt,Ue,ht,He,Je,X,it,ct,R,Le,Et,Tt,ot,lt,at,ue,Be,ye,mt,gt,Ie,We,Pt,yt]);return(0,E.jsx)(pe.Provider,{value:Xt,children:t})};function fe(){const e=(0,r.useContext)(pe);if(!e)throw new Error("useLocalCompileContext is only available inside LocalCompileProvider");return e}},81714:()=>{},82108:(e,t,n)=>{"use strict";n.d(t,{S:()=>o,g:()=>i});var r=n(5383);const o=(e,t)=>{const n=t.getChild(r.ShortTextArgument)?.getChild(r.ShortArg),o=t.getChild(r.TextArgument)?.getChild(r.LongArg);if(n&&o){const t=e.sliceDoc(n.from,n.to).trim(),r=e.sliceDoc(o.from,o.to).trim();if(t&&r)return{name:t,label:r}}},i=(e,t)=>{let n="plain";const r=new Map,o=t.topNode;if(o&&"LaTeX"===o.name){const t=o.getChild("Text"),i=t?t.getChildren("Command"):o.getChildren("Command");for(const t of i){const o=t.getChild("KnownCommand")?.getChild("$Command");if(o)if(o.type.is("TheoremStyleCommand")){const t=a(e,o);t&&(n=t)}else if(o.type.is("NewTheoremCommand")){const t=a(e,o);t&&r.set(t,n)}}}return r},a=(e,t)=>{const n=t.getChild(r.ShortTextArgument)?.getChild(r.ShortArg);return n?e.sliceDoc(n.from,n.to):null}},82174:(e,t,n)=>{"use strict";n(82438),n(50020);const r=n(45250),o=n(64347).assert,i=n(97277),a=n(12628),s=n(14679),l=n(91810),c=n(50614);class d extends a{constructor(e,t,n,r){super(),o.match(e,i.HEX_HASH_RX),t&&o.match(t,i.HEX_HASH_RX),o.greaterOrEqual(n,0),o.maybe.array.of.instance(r,l),this.hash=e,this.rangesHash=t,this.stringLength=n,this.operations=r||[]}static fromRaw(e){return new d(e.hash,e.rangesHash,e.stringLength,e.operations&&r.map(e.operations,c.fromJSON))}toRaw(){const e={hash:this.hash,stringLength:this.stringLength};return this.rangesHash&&(e.rangesHash=this.rangesHash),this.operations.length&&(e.operations=r.map(this.operations,(function(e){return e.toJSON()}))),e}getHash(){return this.operations.length?null:this.hash}getRangesHash(){return this.operations.length?null:this.rangesHash}isEditable(){return!0}getByteLength(){return this.stringLength}getStringLength(){return this.stringLength}getOperations(){return this.operations}async toEager(e){const[t,n]=await Promise.all([e.getString(this.hash),this.rangesHash?e.getObject(this.rangesHash):Promise.resolve(void 0)]),o=new s(t,n?.comments,n?.trackedChanges);return function(e,t){r.each(e,(e=>e.apply(t)))}(this.operations,o),o}async toLazy(){return this}async toHollow(){return a.createHollow(null,this.stringLength)}edit(e){this.stringLength=e.applyToLength(this.stringLength),this.operations.push(e)}async store(e){if(0===this.operations.length){const e={hash:this.hash};return this.rangesHash&&(e.rangesHash=this.rangesHash),e}const t=await this.toEager(e),n=await t.store(e);return this.hash=n.hash,this.rangesHash=n.rangesHash,this.operations.length=0,n}}e.exports=d},82306:(e,t,n)=>{"use strict";n.d(t,{j:()=>h});n(82438),n(50020);var r=n(83173),o=n(29587),i=n(21947),a=n(51301),s=n(82108),l=n(5383);const c=new Map([["red","rgb(255,0,0)"],["green","rgb(0,255,0)"],["blue","rgb(0,0,255)"],["brown","rgb(195,127,63)"],["lime","rgb(195,255,0)"],["orange","rgb(255,127,0)"],["pink","rgb(255,195,195)"],["purple","rgb(195,0,63)"],["teal","rgb(0,127,127)"],["violet","rgb(127,0,127)"],["cyan","rgb(0,255,255)"],["magenta","rgb(255,0,255)"],["yellow","rgb(255,255,0)"],["olive","rgb(127,127,0)"],["black","rgb(0,0,0)"],["darkgray","rgb(63,63,63)"],["gray","rgb(127,127,127)"],["lightgray","rgb(195,195,195)"],["white","rgb(255,255,255)"]]),d=(e,t)=>{const n=t.getChild(l.ShortTextArgument)?.getChild(l.ShortArg),r=t.getChild(l.TextArgument)?.getChild(l.LongArg);if(n&&r){const{from:t,to:o}=r;if(o>t){const r=e.sliceDoc(n.from,n.to).trim();if(r){const e=c.get(r);if(e)return{color:e,from:t,to:o}}}}},h=r.Z9.define((e=>{const t=(t,n)=>{const o=[],l=(0,s.g)(t,n);for(const{from:s,to:c}of e.visibleRanges)n?.iterate({from:s,to:c,enter(e){if(e.type.is("KnownCommand")||e.type.is("UnknownCommand")){const n=e.node.getChild("$CtrlSeq")??e.node.firstChild?.getChild("$CtrlSeq");if(n){const i=t.doc.sliceString(n.from+1,n.to);if("label"===i){const t=e.from,n=e.to;n>t&&o.push(r.NZ.mark({class:`ol-cm-${i}`,inclusive:!0}).range(t,n))}else{const t=n.to+1,a=e.to-1;a>t&&o.push(r.NZ.mark({class:`ol-cm-command-${i}`,inclusive:!0}).range(t,a))}}}else if(e.type.is("SectioningCommand")){const n=e.node.getChild("$CtrlSeq");if(n){const i=t.doc.sliceString(n.from+1,n.to);o.push(r.NZ.mark({class:`ol-cm-heading ol-cm-command-${i}`}).range(e.from,e.to))}}else if(e.type.is("Caption")||e.type.is("Label")){const n=e.type.is("Caption")?"caption":"label";if(e.node.getChild("$Argument")){const i={start:t.doc.lineAt(e.from),end:t.doc.lineAt(e.to)};for(let e=i.start.number;e<=i.end.number;e++){const i=t.doc.line(e);o.push(r.NZ.line({class:`ol-cm-${n}-line`}).range(i.from))}}}else if(e.type.is("TextColorCommand")){const n=d(t,e.node);if(n){const{color:e,from:t,to:i}=n;o.push(r.NZ.mark({class:"ol-cm-textcolor",inclusive:!0,attributes:{style:`color: ${e}`}}).range(t,i))}}else if(e.type.is("ColorBoxCommand")){const n=d(t,e.node);if(n){const{color:e,from:t,to:i}=n;o.push(r.NZ.mark({class:"ol-cm-colorbox",inclusive:!0,attributes:{style:`background-color: ${e}`}}).range(t,i))}}else if(e.type.is("$Environment")){const n=(0,i.hN)(e.node,t);if(n)switch(n){case"abstract":case"figure":case"table":case"verbatim":case"lstlisting":{const i=Boolean((0,a.y)(e)),s={start:t.doc.lineAt(e.from),end:t.doc.lineAt(e.to)};for(let e=s.start.number;e<=s.end.number;e++){const a=t.doc.line(e),s=[`ol-cm-environment-${n}`,"ol-cm-environment-line"];i&&s.push("ol-cm-environment-centered"),o.push(r.NZ.line({class:s.join(" ")}).range(a.from))}}break;case"quote":case"quotation":case"quoting":case"displayquote":{const i={start:t.doc.lineAt(e.from),end:t.doc.lineAt(e.to)};for(let e=i.start.number;e<=i.end.number;e++){const i=t.doc.line(e),a=[`ol-cm-environment-${n}`,"ol-cm-environment-quote-block","ol-cm-environment-line"];o.push(r.NZ.line({class:a.join(" ")}).range(i.from))}}break;default:if(l.has(n)){const i=l.get(n);if(i){const n={start:t.doc.lineAt(e.from),end:t.doc.lineAt(e.to)};o.push(r.NZ.line({class:[`ol-cm-environment-theorem-${i}`,"ol-cm-environment-first-line"].join(" ")}).range(n.start.from));for(let e=n.start.number+1;e<=n.end.number-1;e++){const n=t.doc.line(e);o.push(r.NZ.line({class:[`ol-cm-environment-theorem-${i}`,"ol-cm-environment-line"].join(" ")}).range(n.from))}o.push(r.NZ.line({class:[`ol-cm-environment-theorem-${i}`,"ol-cm-environment-last-line"].join(" ")}).range(n.start.from))}}}}}});return r.NZ.set(o,!0)};let n=(0,o.mv)(e.state);return{decorations:t(e.state,n),update(e){const r=(0,o.mv)(e.state);r.type===n.type&&r.length<e.view.viewport.to?this.decorations=this.decorations.map(e.changes):(r!==n||e.viewportChanged)&&(n=r,this.decorations=t(e.state,r))}}}),{decorations:e=>e.decorations})},82927:(e,t,n)=>{"use strict";const r=n(8010),o=n(50614);class i extends r{constructor(e,t){super(),this.pathname=e,this.operation=t}toRaw(){return{pathname:this.pathname,...this.operation.toJSON()}}static fromRaw(e){return new i(e.pathname,o.fromJSON(e))}getPathname(){return this.pathname}getOperation(){return this.operation}applyTo(e){e.editFile(this.pathname,this.operation)}canBeComposedWithForUndo(e){return this.canBeComposedWith(e)&&this.operation.canBeComposedWithForUndo(e.operation)}canBeComposedWith(e){return e instanceof i&&(this.getPathname()===e.getPathname()&&this.operation.canBeComposedWith(e.operation))}compose(e){return new i(this.pathname,this.operation.compose(e.operation))}}e.exports=i},83096:(e,t,n)=>{"use strict";n.d(t,{B:()=>f,T:()=>O});n(97107);var r=n(14041),o=n(97434),i=n(28812),a=n(71627),s=n(31085);function l(e){let{title:t,message:n,...r}=e;const{t:l}=(0,o.Bd)();return(0,s.jsxs)(i.Ay,{...r,children:[(0,s.jsx)(i.IK,{closeButton:!0,children:(0,s.jsx)(i.rA,{children:t})}),(0,s.jsx)(i.$8,{className:"modal-body-share",children:n}),(0,s.jsx)(i.E9,{children:(0,s.jsx)(a.A,{variant:"secondary",onClick:()=>r.onHide(),children:l("ok")})})]})}const c=(0,r.memo)(l);var d=n(89753);function h(e){let{editorContent:t,show:n,onHide:l}=e;const{t:c}=(0,o.Bd)(),h=(0,d.z)(),[u,m]=(0,r.useState)(!1),p=(t.match(/\n/g)?.length||0)+1;function g(){l(),h.reload()}return(0,s.jsxs)(i.Ay,{show:n,onHide:g,className:"out-of-sync-modal",backdrop:!1,keyboard:!1,children:[(0,s.jsx)(i.IK,{closeButton:!0,children:(0,s.jsx)(i.rA,{children:c("out_of_sync")})}),(0,s.jsx)(i.$8,{className:"modal-body-share",children:(0,s.jsx)(o.x6,{i18nKey:"out_of_sync_detail",components:[(0,s.jsx)("br",{}),(0,s.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:"/learn/Kb/Editor_out_of_sync_problems"})]})}),(0,s.jsxs)(i.$8,{children:[(0,s.jsx)(a.A,{variant:"secondary",onClick:()=>m((e=>!e)),children:c(u?"hide_local_file_contents":"show_local_file_contents")}),u?(0,s.jsx)("div",{className:"text-preview",children:(0,s.jsx)("textarea",{className:"scroll-container",readOnly:!0,rows:p,value:t})}):null]}),(0,s.jsx)(i.E9,{children:(0,s.jsx)(a.A,{variant:"secondary",onClick:g,children:c("reload_editor")})})]})}const u=(0,r.memo)(h);function m(e){let{title:t,message:n,confirmLabel:r,primaryVariant:l="primary",onConfirm:c,...d}=e;const{t:h}=(0,o.Bd)();return(0,s.jsxs)(i.Ay,{...d,children:[(0,s.jsx)(i.IK,{closeButton:!0,children:(0,s.jsx)(i.rA,{children:t})}),(0,s.jsx)(i.$8,{className:"modal-generic-confirm",children:n}),(0,s.jsxs)(i.E9,{children:[(0,s.jsx)(a.A,{variant:"secondary",onClick:()=>d.onHide(),children:h("cancel")}),(0,s.jsx)(a.A,{variant:l,onClick:c,children:r||h("ok")})]})]})}const p=(0,r.memo)(m),g=(0,r.createContext)(void 0),f=e=>{let{children:t}=e;const[n,o]=(0,r.useState)(!1),[i,a]=(0,r.useState)(!1),[l,d]=(0,r.useState)({title:"",message:""}),[h,m]=(0,r.useState)({title:"",message:"",onConfirm:()=>{}}),[f,O]=(0,r.useState)(!1),[b,v]=(0,r.useState)({editorContent:""}),w=(0,r.useCallback)((()=>{o(!1)}),[]),_=(0,r.useCallback)((()=>{a(!1)}),[]),x=(0,r.useCallback)((()=>{h.onConfirm(),a(!1)}),[h]),y=(0,r.useCallback)(((e,t)=>{d({title:e,message:t}),o(!0)}),[]),k=(0,r.useCallback)((e=>{m(e),a(!0)}),[]),C=(0,r.useCallback)((()=>{O(!1)}),[]),S=(0,r.useCallback)((e=>{v({editorContent:e}),O(!0)}),[]),Q=(0,r.useMemo)((()=>({showGenericMessageModal:y,showGenericConfirmModal:k,genericModalVisible:n,showOutOfSyncModal:S})),[y,k,n,S]);return(0,s.jsxs)(g.Provider,{value:Q,children:[t,(0,s.jsx)(c,{show:n,onHide:w,...l}),(0,s.jsx)(p,{show:i,onHide:_,...h,onConfirm:x}),(0,s.jsx)(u,{...b,show:f,onHide:C})]})};function O(){const e=(0,r.useContext)(g);if(!e)throw new Error("useModalsContext is only available inside ModalsContextProvider");return e}},83290:(e,t,n)=>{"use strict";n.d(t,{FW:()=>h,Ib:()=>m,Nw:()=>c,a9:()=>u,nE:()=>g,sp:()=>d});n(82438),n(50020),n(69033),n(68903),n(21018),n(1415),n(4448),n(58871),n(56539);var r=n(57195),o=n(83173),i=n(15947),a=n(38188),s=n(60961);function l(e,t){return e?{...e,from:t.mapPos(e.from),to:t.mapPos(e.to)}:e}class c{constructor(e){this.props=e}get from(){return this.props.from}get to(){return this.props.to}get caption(){return this.props.caption}get label(){return this.props.label}get width(){return this.props.width}get unknownGraphicsArguments(){return this.props.unknownGraphicsArguments}get graphicsCommandArguments(){return this.props.graphicsCommandArguments}get graphicsCommand(){return this.props.graphicsCommand}get file(){return this.props.file}map(e){return new c({from:e.mapPos(this.from),to:e.mapPos(this.to),caption:l(this.caption,e),label:l(this.label,e),graphicsCommand:l(this.graphicsCommand,e),width:this.width,file:l(this.file,e),graphicsCommandArguments:l(this.graphicsCommandArguments,e),unknownGraphicsArguments:this.unknownGraphicsArguments})}}const d=r.Pe.define(),h=r.sU.define({create:()=>null,update:(e,t)=>{let n;for(const e of t.effects)e.is(d)&&(n=e.value);return void 0!==n?n:e?e.map(t.changes):e}}),u=()=>[h];function m(e){const t=new AbortController,n=new Promise((n=>{const r=()=>{s.$.warn("Aborting wait for file tree update"),(0,i.QV)(e,a.TY,o),n()};function o(){t.signal.aborted||(t.signal.removeEventListener("abort",r),n())}t.signal.addEventListener("abort",r,{once:!0}),(0,i.By)(e,a.TY,o,{once:!0})}));return{withTimeout(){return setTimeout((()=>t.abort()),arguments.length>0&&void 0!==arguments[0]?arguments[0]:500),n},promise:n}}const p=new Set(["image/jpeg","image/png","application/pdf"]),g=()=>o.Lz.domEventHandlers({drop:e=>{if(!e.dataTransfer||0===e.dataTransfer.files.length)return;const t=e.dataTransfer.files[0];p.has(t.type)&&window.dispatchEvent(new CustomEvent("figure-modal:paste-image",{detail:{name:t.name,type:t.type,data:t}}))},paste:e=>{if(!e.clipboardData||0===e.clipboardData.files.length)return;if(e.clipboardData.types.includes("text/plain"))return;const t=e.clipboardData.files[0];p.has(t.type)&&window.dispatchEvent(new CustomEvent("figure-modal:paste-image",{detail:{name:t.name,type:t.type,data:t}}))}})},83681:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(7853),o=n(31085);const i=function(e){let{prepend:t,children:n,badgeContentRef:i,...a}=e;return(0,o.jsxs)(r.A,{...a,children:[t&&(0,o.jsx)("span",{className:"badge-prepend",children:t}),(0,o.jsx)("span",{className:"badge-content",ref:i,children:n})]})}},84140:(e,t,n)=>{"use strict";const r=n(8010);e.exports=class extends r{constructor(e,t){super(),this.pathname=e,this.newPathname=t}toRaw(){return{pathname:this.pathname,newPathname:this.newPathname}}getPathname(){return this.pathname}getNewPathname(){return this.newPathname}isRemoveFile(){return""===this.getNewPathname()}applyTo(e){e.moveFile(this.getPathname(),this.getNewPathname())}}},84452:(e,t,n)=>{"use strict";n.d(t,{p:()=>r});const r=new(n(79066).uY)},85544:(e,t,n)=>{n(97107);const r=n(58756),o=n(43921),i=n(90482),a=n(91810);class s extends a{constructor(e,t){super(),this.commentId=e,this.resolved=t}toJSON(){return{resolved:this.resolved,commentId:this.commentId}}apply(e){const t=e.comments.getComment(this.commentId);if(t){const n=new o(t.id,t.ranges,this.resolved);e.comments.add(n)}}invert(e){const t=e.comments.getComment(this.commentId);return t?new s(this.commentId,t.resolved):new i}canBeComposedWith(e){return e instanceof s&&this.commentId===e.commentId||e instanceof r.DeleteCommentOperation&&this.commentId===e.commentId}compose(e){if(e instanceof s&&e.commentId===this.commentId)return e;if(e instanceof r.DeleteCommentOperation&&e.commentId===this.commentId)return e;throw new Error(`Trying to compose SetCommentStateOperation with ${e?.constructor?.name}.`)}static fromJSON(e){return new s(e.commentId,e.resolved)}}e.exports=s},86040:(e,t,n)=>{"use strict";n.d(t,{Wz:()=>a,vO:()=>s});n(97107);var r=n(14041),o=n(31085);const i=(0,r.createContext)(void 0),a=e=>{let{children:t}=e;const[n,a]=(0,r.useState)(!1);return(0,o.jsx)(i.Provider,{value:{showSwitcherModal:n,setShowSwitcherModal:a},children:t})},s=()=>{const e=(0,r.useContext)(i);if(!e)throw new Error("useIdeRedesignSwitcherContext is only available inside IdeRedesignSwitcherProvider");return e}},86316:(e,t,n)=>{"use strict";n.d(t,{Np:()=>f,Om:()=>g});n(97107),n(82438),n(50020);var r=n(14041),o=n(64932),i=(n(12266),n(90165)),a=n.n(i),s=n(58756),l=n(37858);class c{constructor(e){this.projectId=e,this.snapshot=new s.Snapshot,this.version=0,this.refreshPromise=Promise.resolve(),this.initialized=!1,this.refreshing=!1,this.queued=!1,this.blobStore=new d(this.projectId)}async refresh(){this.queued?await this.refreshPromise:this.refreshing?(this.refreshPromise=this.queueRefresh(),await this.refreshPromise):(this.refreshPromise=this.startRefresh(),await this.refreshPromise)}getDocPaths(){return this.snapshot.getFilePathnames().filter((e=>this.snapshot.getFile(e)?.isEditable()))}getDocContents(e){const t=this.snapshot.getFile(e);return null==t?null:t.getContent({filterTrackedDeletes:!0})??null}async startRefresh(){this.refreshing=!0;try{this.initialized?await this.loadChanges():await this.initialize()}finally{this.refreshing=!1}}async queueRefresh(){this.queued=!0;try{await this.refreshPromise}catch{}this.queued=!1,await this.startRefresh()}async initialize(){await h(this.projectId);const e=await async function(e){const t=await(0,l.hm)(`/project/${e}/latest/history`);return s.Chunk.fromRaw(t.chunk)}(this.projectId);this.snapshot=e.getSnapshot(),this.snapshot.applyAll(e.getChanges()),this.version=e.getEndVersion(),await this.loadDocs(),this.initialized=!0}async loadChanges(){await h(this.projectId);let e=!0;for(;e;){const t=await u(this.projectId,this.version),n=t.changes;this.snapshot.applyAll(n),this.version+=n.length,e=t.hasMore}await this.loadDocs()}async loadDocs(){const e=this.getDocPaths(),t=a()(10);await Promise.all(e.map((e=>t((async()=>{const t=this.snapshot.getFile(e);await(t?.load("eager",this.blobStore))})))))}}class d{constructor(e){this.projectId=e}async getString(e){return await async function(e,t){const n=`/project/${e}/blob/${t}`,r=await fetch(n);if(!r.ok)throw new l.fk("Failed to fetch blob",n,void 0,r);return await r.text()}(this.projectId,e)}async getObject(e){const t=await this.getString(e);return JSON.parse(t)}}async function h(e){await(0,l.TB)(`/project/${e}/flush`)}async function u(e,t){const n=await(0,l.hm)(`/project/${e}/changes?since=${t}&paginated=true`);let r,o;return Array.isArray(n)?(r=n,o=!1):(r=n.changes,o=n.hasMore),{changes:r.map(s.Change.fromRaw).filter((e=>null!=e)),hasMore:o}}var m=n(31085);const p=(0,r.createContext)(void 0);function g(){const e=(0,r.useContext)(p);if(!e)throw new Error("useProjectContext is only available inside ProjectProvider");return e}const f=e=>{let{children:t}=e;const[n,i]=(0,r.useState)(!1),[a,s]=(0,r.useState)(null),l=a?a._id:(0,o.A)("ol-project_id"),d=a?a.name:"",h=a?a.features:{},u=(0,r.useCallback)((e=>{s(e),i(!0)}),[]),g=(0,r.useCallback)((e=>{s((t=>{if(!t)throw new Error("Project not initialized. Use joinProject first.");return Object.assign({},t,e)}))}),[]),[f]=(0,r.useState)((()=>new c(l))),O=(0,r.useMemo)((()=>((0,o.A)("ol-projectTags")||[]).map((e=>({...e,name:e.name??""})))),[]),b={projectId:l,project:a,joinProject:u,updateProject:g,joinedOnce:n,projectSnapshot:f,tags:O,features:h,name:d};return(0,m.jsx)(p.Provider,{value:b,children:t})}},86841:(e,t,n)=>{"use strict";n.d(t,{O:()=>i});n(97107);var r=n(64932);let o;const i=async e=>(o||(o=new Promise(((t,n)=>{const o=[["\\(","\\)"]];(e={enableMenu:!1,singleDollar:!0,useLabelIds:!1,...e}).singleDollar&&o.push(["$","$"]),window.MathJax={tex:{macros:{bm:["\\boldsymbol{#1}",1],coloneq:"\\coloneqq"},inlineMath:o,displayMath:[["\\[","\\]"],["$$","$$"]],packages:{"[-]":["html","require"]},processEscapes:!0,processEnvironments:!0,useLabelIds:e.useLabelIds,tags:e.numbering},loader:{load:["ui/safe"]},options:{enableMenu:e.enableMenu},startup:{typeset:!1,pageReady(){window.MathJax.startup.document.menu.menu.findID("Renderer").disable()},ready(){window.MathJax.startup.defaultReady();const{safe:e}=window.MathJax.startup.document;e.filterAttributes.set("fontfamily","filterFontFamily"),e.filterMethods.filterFontFamily=(e,t)=>t.split(/;/)[0]}}};const i=document.createElement("script"),a=(0,r.A)("ol-mathJaxPath");a?(i.src=a,i.addEventListener("load",(async()=>{await window.MathJax.startup.promise,document.head.appendChild(window.MathJax.svgStylesheet()),t(window.MathJax)})),i.addEventListener("error",n),document.head.append(i)):n(new Error("No MathJax path found"))}))),o)},87520:(e,t,n)=>{"use strict";const r=n(64347).assert,o=n(79600),i=n(8010);class a extends i{constructor(e,t){super(),r.string(e,"bad pathname"),r.object(t,"bad file"),this.pathname=e,this.file=t}getPathname(){return this.pathname}static fromRaw(e){return new a(e.pathname,o.fromRaw(e.file))}toRaw(){return{pathname:this.pathname,file:this.file.toRaw()}}getFile(){return this.file}findBlobHashes(e){const t=this.file.getHash();t&&e.add(t)}async loadFiles(e,t){return await this.file.load(e,t)}async store(e){const t=await this.file.store(e);return{pathname:this.pathname,file:t}}applyTo(e){e.addFile(this.pathname,this.file.clone())}}e.exports=a},87776:(e,t,n)=>{"use strict";n.d(t,{E:()=>r});n(71879);const r=(e,t)=>AbortSignal.any([e,AbortSignal.timeout(t)])},88119:(e,t,n)=>{"use strict";n.d(t,{A:()=>Ye});var r={};n.r(r),n.d(r,{default:()=>w});var o=n(14041);const i=n.p+"images/both-generators-720p-37915caeb13dc49b94d7.mp4";var a=n(75962),s=n(6638),l=n(97434),c=n(96713),d=n(58528),h=n(64932),u=n(35447),m=n(71627),p=n(10646),g=n(85960),f=n(31085);const O="wf-features-moved",b=()=>{const e=(0,g.ur)();return(0,h.A)("ol-cannot-use-ai")||!(0,d.g9)("overleaf-assist-bundle")||!0!==e.writefull?.enabled||!e.signUpDate||e.signUpDate>="2025-03-28"?null:(0,f.jsx)(v,{})},v=()=>{const{t:e}=(0,l.Bd)(),{showPopup:t,tryShowingPopup:n,completeTutorial:r}=(0,u.A)(O,{name:"writefull-rebranded-features-notification"}),{inactiveTutorials:d}=(0,p.mi)(),h=d.includes(O),g=(0,o.useCallback)((()=>{r({action:"complete",event:"promo-click"})}),[r]);return(0,o.useEffect)((()=>{h||n()}),[n,h]),t?(0,f.jsxs)("div",{className:"feature-rebrand-promo-container p-2 px-3 rounded",children:[(0,f.jsxs)("div",{className:"feature-rebrand-promo-title-container gap-3 mb-2",children:[(0,f.jsx)("h3",{className:"feature-rebrand-promo-title-text my-0",children:(0,f.jsx)("strong",{children:(0,f.jsx)(l.x6,{i18nKey:"new_create_tables_and_equations",components:{sparkle:(0,f.jsx)("img",{alt:"sparkle",className:"ol-cm-toolbar-ai-sparkle-white",src:s,"aria-hidden":"true"})}})})}),(0,f.jsx)(a.A,{onDismiss:g,variant:"dark"})]}),(0,f.jsxs)("div",{className:"feature-rebrand-promo-body",children:[(0,f.jsx)("video",{className:"teaser-video",autoPlay:!0,loop:!0,muted:!0,children:(0,f.jsx)("source",{src:i,type:"video/mp4"})}),(0,f.jsxs)("p",{className:"mb-0",children:[e("generate_tables_and_equations")," ",(0,f.jsx)(c.A,{type:"calculate"})," ",(0,f.jsx)(c.A,{type:"table_chart"})]}),(0,f.jsx)("div",{className:"pull-right",children:(0,f.jsx)(m.A,{variant:"secondary",onClick:g,children:e("ok")})})]})]}):null},w=(0,o.memo)(b);var _=n(53373),x=n.n(_),y=n(2727),k=n(8164);const C=(0,o.lazy)((()=>Promise.all([n.e(1865),n.e(6597),n.e(8641),n.e(5460)]).then(n.bind(n,43826))));function S(){const{pdfUrl:e,pdfFile:t,pdfViewer:n}=(0,k.Rf)();return e?"native"===n?(0,f.jsx)("iframe",{title:"PDF Preview",src:e}):(0,f.jsx)(C,{url:e,pdfFile:t}):null}const Q=(0,o.memo)(S);var E=n(90214),T=n(98509),j=n(56447),P=n(41026),$=n(69954),R=n(59162),X=n(61160),A=n(71805);const q=/Mac/i.test(navigator.platform)?"Cmd":"Ctrl";function L(e,t,n){$._("recompile-setting-changed",{setting:n,settingVal:e}),t(e)}function I(){const{animateCompileDropdownArrow:e,autoCompile:t,compiling:n,draft:r,hasChanges:o,setAutoCompile:i,setDraft:a,setStopOnValidationError:s,stopOnFirstError:c,stopOnValidationError:d,startCompile:h,stopCompile:u,recompileFromScratch:p}=(0,k.Rf)(),{enableStopOnFirstError:g,disableStopOnFirstError:O}=(0,P.V)({eventSource:"dropdown"}),{t:b}=(0,l.Bd)(),{detachRole:v}=(0,j.LV)(),w=(0,f.jsxs)(f.Fragment,{children:[b("recompile_pdf")," ",(0,f.jsxs)("span",{className:"keyboard-shortcut",children:["(",q," + Enter)"]})]}),_=x()({"detach-compile-button-animate":e,"btn-striped-animated":o},"no-left-border","dropdown-button-toggle","compile-dropdown-toggle"),y=x()("align-items-center py-0 no-left-radius px-3","compile-button",{"btn-striped-animated":o});return(0,f.jsxs)(X.ms,{as:A.A,className:"compile-button-group",children:[(0,f.jsx)(R.A,{description:w,id:"compile",tooltipProps:{className:"keyboard-tooltip"},overlayProps:{delay:{show:500,hide:0},placement:"detached"===v?"bottom":void 0},children:(0,f.jsx)(m.A,{variant:"primary",disabled:n,isLoading:n,onClick:()=>h(),className:y,loadingLabel:`${b("compiling")}…`,children:b("recompile")})}),(0,f.jsx)(X.C,{as:X.fu,split:!0,variant:"primary",id:"pdf-recompile-dropdown",size:"sm","aria-label":b("toggle_compile_options_menu"),className:_}),(0,f.jsxs)(X.rI,{children:[(0,f.jsx)(X.hO,{children:b("auto_compile")}),(0,f.jsx)("li",{role:"none",children:(0,f.jsx)(X.tJ,{as:"button",onClick:()=>L(!0,i,"auto-compile"),trailingIcon:t?"check":null,children:b("on")})}),(0,f.jsx)("li",{role:"none",children:(0,f.jsx)(X.tJ,{as:"button",onClick:()=>L(!1,i,"auto-compile"),trailingIcon:t?null:"check",children:b("off")})}),(0,f.jsx)(X.rx,{}),(0,f.jsx)(X.hO,{children:b("compile_mode")}),(0,f.jsx)("li",{role:"none",children:(0,f.jsx)(X.tJ,{as:"button",onClick:()=>L(!1,a,"compile-mode"),trailingIcon:r?null:"check",children:b("normal")})}),(0,f.jsx)("li",{role:"none",children:(0,f.jsxs)(X.tJ,{as:"button",onClick:()=>L(!0,a,"compile-mode"),trailingIcon:r?"check":null,children:[b("fast")," ",(0,f.jsx)("span",{className:"subdued",children:"[draft]"})]})}),(0,f.jsx)(X.rx,{}),(0,f.jsx)(X.hO,{children:"Syntax Checks"}),(0,f.jsx)("li",{role:"none",children:(0,f.jsx)(X.tJ,{as:"button",onClick:()=>L(!0,s,"syntax-check"),trailingIcon:d?"check":null,children:b("stop_on_validation_error")})}),(0,f.jsx)("li",{role:"none",children:(0,f.jsx)(X.tJ,{as:"button",onClick:()=>L(!1,s,"syntax-check"),trailingIcon:d?null:"check",children:b("ignore_validation_errors")})}),(0,f.jsx)(X.rx,{}),(0,f.jsx)(X.hO,{children:b("compile_error_handling")}),(0,f.jsx)("li",{role:"none",children:(0,f.jsx)(X.tJ,{as:"button",onClick:g,trailingIcon:c?"check":null,children:b("stop_on_first_error")})}),(0,f.jsx)("li",{role:"none",children:(0,f.jsx)(X.tJ,{as:"button",onClick:O,trailingIcon:c?null:"check",children:b("try_to_compile_despite_errors")})}),(0,f.jsx)(X.rx,{}),(0,f.jsx)("li",{role:"none",children:(0,f.jsx)(X.tJ,{as:"button",onClick:()=>u(),disabled:!n,"aria-disabled":!n,children:b("stop_compile")})}),(0,f.jsx)("li",{role:"none",children:(0,f.jsx)(X.tJ,{as:"button",onClick:()=>{$._("recompile-setting-changed",{setting:"from-scratch"}),p()},disabled:n,"aria-disabled":n,children:b("recompile_from_scratch")})})]})]})}const N=(0,o.memo)(I);const D=function(){const{pdfLayout:e,restoreView:t,detachRole:n}=(0,j.LV)(),{t:r}=(0,l.Bd)();return n||"sideBySide"===e?null:(0,f.jsxs)(m.A,{variant:"secondary",size:"sm",onClick:function(){t(),window.setTimeout((()=>{window.dispatchEvent(new Event("editor:focus"))}))},children:[(0,f.jsx)(c.A,{type:"code"}),r("switch_to_editor")]})};var W=n(35722);function M(){const{error:e,logEntries:t,toggleLogs:n,showLogs:r,stoppedOnFirstError:i}=(0,k.Rf)(),{t:a}=(0,l.Bd)(),s=(0,o.useCallback)((()=>{r||$._("logs-click"),n()}),[n,r]),d=Number(t?.errors?.length),h=d+Number(t?.warnings?.length);return(0,f.jsx)(R.A,{id:"logs-toggle",description:a("logs_and_output_files"),overlayProps:{placement:"bottom"},children:(0,f.jsxs)(m.A,{variant:"link",disabled:Boolean(e||i),active:r,className:"pdf-toolbar-btn toolbar-item log-btn",onClick:s,style:{position:"relative"},"aria-label":a(r?"view_pdf":"view_logs"),children:[(0,f.jsx)(c.A,{type:"description"}),!r&&h>0&&(0,f.jsx)(W.A,{bg:0===d?"warning":"danger",children:h})]})})}const U=(0,o.memo)(M);var F=n(86316);const V=function(){const{pdfDownloadUrl:e}=(0,k.Rf)(),{projectId:t}=(0,F.Om)(),{t:n}=(0,l.Bd)(),r=n(e?"download_pdf":"please_compile_pdf_before_download");return(0,f.jsx)(R.A,{id:"download-pdf",description:r,overlayProps:{placement:"bottom"},children:(0,f.jsx)(m.A,{onClick:function(e){const n=e;"true"!==n.currentTarget.dataset.disabled?(0,$._)("download-pdf-button-click",{projectId:t,location:"pdf-preview",isSmallDevice:$.mP}):n.preventDefault()},variant:"link",className:"pdf-toolbar-btn",draggable:!1,"data-disabled":!e,disabled:!e,download:!0,href:e||"#",target:"_blank",style:{pointerEvents:"auto"},"aria-label":n("download_pdf"),children:(0,f.jsx)(c.A,{type:"download"})})})};function G(){const{codeCheckFailed:e,error:t,toggleLogs:n}=(0,k.Rf)(),{t:r}=(0,l.Bd)(),i=(0,o.useCallback)((()=>{n()}),[n]);return e?(0,f.jsxs)(m.A,{variant:"danger",size:"sm",disabled:Boolean(t),className:"btn-toggle-logs toolbar-item",onClick:i,children:[(0,f.jsx)(c.A,{type:"warning"}),(0,f.jsx)("span",{className:"toolbar-text",children:r("code_check_failed")})]}):null}const Z=(0,o.memo)(G);var B=n(69139),z=n(89753);function Y(){const{t:e}=(0,l.Bd)(),t=(0,z.z)(),n=(0,o.useCallback)((()=>{t.assign((0,B.Z)(null).toString())}),[t]);return(0,f.jsx)(m.A,{variant:"primary",size:"sm",onClick:n,children:e("redirect_to_editor")})}const H=(0,o.memo)(Y);var K=n(44167),J=n(82151);function ee(){const{detachRole:e,detachIsLinked:t}=(0,j.LV)(),n=(0,o.useRef)(),[r,i]=(0,o.useState)(!1),a=!t&&"detached"===e;(0,o.useEffect)((()=>{n.current&&window.clearTimeout(n.current),a?n.current=window.setTimeout((()=>{i(!0)}),5e3):i(!1)}),[a]);let s=null;return s=r?(0,f.jsx)(ne,{}):a?(0,f.jsx)(re,{}):(0,f.jsx)(te,{}),(0,f.jsx)(T.A,{className:"toolbar toolbar-pdf toolbar-pdf-hybrid",children:s})}function te(){return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:"toolbar-pdf-left",children:[(0,f.jsx)(N,{}),(0,f.jsx)(U,{}),(0,f.jsx)(V,{})]}),(0,f.jsxs)("div",{className:"toolbar-pdf-right",children:[(0,f.jsx)("div",{className:"toolbar-pdf-controls",id:"toolbar-pdf-controls"}),(0,f.jsx)(Z,{}),(0,f.jsx)(D,{}),(0,f.jsx)(K.Yu,{})]})]})}function ne(){const{t:e}=(0,l.Bd)();return(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)("div",{className:"toolbar-pdf-orphan",children:[e("tab_no_longer_connected"),(0,f.jsx)(H,{})]})})}function re(){const{t:e}=(0,l.Bd)();return(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)("div",{className:"toolbar-pdf-orphan",children:[(0,f.jsx)(J.A,{animation:"border","aria-hidden":"true",size:"sm",role:"status"})," ",e("tab_connecting"),"…"]})})}const oe=(0,o.memo)(ee),ie=e=>{let{children:t}=e;return(0,f.jsx)("div",{className:"pdf-preview-messages",children:t})};var ae=n(42093),se=n(79953),le=n(4607);const ce=e=>{let{handleDismissWarning:t,segmentation:n}=e;const{t:r}=(0,l.Bd)();return(0,f.jsx)(se.A,{action:(0,f.jsx)(le.A,{source:"compile-time-warning",segmentation:n,buttonProps:{variant:"secondary",size:"sm"},children:r("start_free_trial_without_exclamation")}),ariaLive:"polite",content:(0,f.jsxs)("div",{children:[(0,f.jsx)("div",{children:(0,f.jsx)("span",{children:r("your_project_near_compile_timeout_limit")})}),(0,f.jsx)("strong",{children:r("upgrade_for_more_compile_time")}),". "]}),type:"warning",title:r("took_a_while"),isActionBelowContent:!0,isDismissible:!0,onDismiss:t})},de=e=>{let{isProjectOwner:t=!1,handleDismissChangingSoon:n,segmentation:r}=e;const{t:o}=(0,l.Bd)(),i=(0,f.jsx)("a",{"aria-label":o("read_more_about_compile_timeout_changes"),href:"/blog/changes-to-free-compile-timeout",rel:"noopener noreferrer",target:"_blank",onClick:()=>{$._("paywall-info-click",{"paywall-type":"compile-time-warning",...r,content:"blog"})}},"compileTimeoutBlogLink1"),a=(0,f.jsx)("a",{"aria-label":o("read_more_about_fix_prevent_timeout"),href:"/learn/how-to/Fixing_and_preventing_compile_timeouts",target:"_blank",rel:"noopener noreferrer"},"compileTimeoutBlogLink2");return t?(0,f.jsx)(se.A,{action:(0,f.jsx)(le.A,{segmentation:r,source:"compile-time-warning",buttonProps:{variant:"secondary",size:"sm"},children:o("start_free_trial_without_exclamation")}),ariaLive:"polite",content:(0,f.jsxs)("div",{children:[(0,f.jsx)("p",{children:(0,f.jsx)(l.x6,{i18nKey:"introducing_shorter_compile_timeout",components:[i]})}),(0,f.jsxs)("p",{className:"row-spaced",children:[(0,f.jsx)(l.x6,{i18nKey:"you_may_be_able_to_fix_issues_to_speed_up_the_compile",components:[a]})," ",(0,f.jsx)(l.x6,{i18nKey:"and_upgrade_for_compile_time",components:{strong:(0,f.jsx)("strong",{})}})]})]}),title:o("your_project_compiled_but_soon_might_not"),type:"warning",isActionBelowContent:!0,isDismissible:!0,onDismiss:n}):(0,f.jsx)(se.A,{ariaLive:"polite",content:(0,f.jsxs)("div",{children:[(0,f.jsxs)("p",{children:[(0,f.jsx)(l.x6,{i18nKey:"introducing_shorter_compile_timeout",components:[i]})," ",(0,f.jsx)(l.x6,{i18nKey:"you_may_be_able_to_fix_issues_to_speed_up_the_compile",components:[a]})]}),(0,f.jsx)("p",{className:"row-spaced",children:(0,f.jsx)(l.x6,{i18nKey:"tell_the_project_owner_and_ask_them_to_upgrade",components:[(0,f.jsx)("strong",{})]})})]}),title:o("this_project_compiled_but_soon_might_not"),type:"warning",isDismissible:!0,onDismiss:n})};function he(){const{isProjectOwner:e,deliveryLatencies:t,compiling:n,showLogs:r,error:i}=(0,k.Rf)(),[a,s]=(0,o.useState)(!1),[l,c]=(0,o.useState)(!1),[d,u]=(0,ae.A)("has-dismissed-10s-compile-time-warning-until"),{reducedTimeoutWarning:m}=(0,h.A)("ol-compileSettings"),p="enabled"===m?7:10,g=(0,o.useMemo)((()=>({"10s-timeout-warning":m,"is-owner":e})),[e,m]),O=(0,o.useMemo)((()=>({content:"warning",compileTime:p,...g})),[g,p]),b=(0,o.useMemo)((()=>({content:"changes",compileTime:10,...g})),[g]),v=(0,o.useCallback)((t=>{s(!1),c(!1),"enabled"===m&&t>1e4?c(!0):t>1e3*p&&e&&(!d||new Date(d)<new Date)&&(s(!0),$._("compile-time-warning-displayed",{compileTime:p,isProjectOwner:e}))}),[e,d,m,p]),w=(0,o.useCallback)((()=>{$._("compile-time-warning-dismissed",{compileTime:p,isProjectOwner:e}),$._("paywall-dismiss",{"paywall-type":"compile-time-warning",content:"warning",compileTime:p,...g}),s(!1);const t=new Date;t.setDate(t.getDate()+1),u(t)}),[e,u,p,g]),_=(0,o.useCallback)((()=>{$._("paywall-dismiss",{"paywall-type":"compile-time-warning",compileTime:10,content:"changes",...g}),c(!1)}),[g]);return(0,o.useEffect)((()=>{n||i||r||v(t.compileTimeServerE2E)}),[n,i,r,t,v]),(0,h.A)("ol-ExposedSettings").enableSubscriptions?n||i||r||!t.compileTimeServerE2E?null:a||l?(0,f.jsxs)("div",{children:[a&&e&&(0,f.jsx)(ce,{handleDismissWarning:w,segmentation:O}),l&&(0,f.jsx)(de,{isProjectOwner:e,handleDismissChangingSoon:_,segmentation:b})]}):null:null}const ue=(0,o.memo)(he);var me=n(63815);function pe(){return(0,f.jsxs)(T.A,{className:"toolbar toolbar-pdf toolbar-pdf-hybrid",children:[(0,f.jsxs)("div",{className:"toolbar-pdf-left",children:[(0,f.jsx)(N,{}),(0,f.jsx)(V,{})]}),(0,f.jsxs)("div",{className:"toolbar-pdf-right",children:[(0,f.jsx)("div",{className:"toolbar-pdf-controls",id:"toolbar-pdf-controls"}),(0,f.jsx)(D,{}),(0,f.jsx)(K.Yu,{})]})]})}const ge=(0,o.memo)(pe);var fe=n(70569),Oe=n(97536),be=n(211);const ve=()=>{const{t:e}=(0,l.Bd)(),{openTab:t}=(0,fe.h)();return(0,f.jsx)(_e,{title:e("pdf_couldnt_compile"),description:e("we_are_unable_to_generate_the_pdf_at_this_time"),iconType:"warning",iconClassName:"pdf-error-state-warning-icon",actions:(0,f.jsx)(m.A,{variant:"secondary",size:"sm",onClick:()=>{t("errors")},children:e("check_logs")}),extraContent:(0,f.jsxs)("div",{className:"pdf-error-state-info-box",children:[(0,f.jsxs)("div",{className:"pdf-error-state-info-box-title",children:[(0,f.jsx)(c.A,{type:"info",unfilled:!0}),e("why_might_this_happen")]}),(0,f.jsxs)("ul",{className:"pdf-error-state-info-box-text",children:[(0,f.jsx)("li",{children:e("there_is_an_unrecoverable_latex_error")}),(0,f.jsx)("li",{children:e("the_document_environment_contains_no_content")}),(0,f.jsx)("li",{children:e("this_project_contains_a_file_called_output")})]})]})})},we=()=>{const{t:e}=(0,l.Bd)();return(0,f.jsx)(_e,{title:e("compile_limit_reached"),description:e("compile_limit_upgrade_prompt"),iconType:"running_with_errors",actions:(0,f.jsx)(m.A,{variant:"premium",size:"sm",onClick:()=>(0,be.k)("compile-timeout"),children:e("upgrade")})})},_e=e=>{let{title:t,description:n,iconType:r,actions:o,iconClassName:i,extraContent:a}=e;return(0,f.jsxs)("div",{className:"pdf-error-state",children:[(0,f.jsxs)("div",{className:"pdf-error-state-top-section",children:[(0,f.jsx)("div",{className:x()("pdf-error-state-icon",i),children:(0,f.jsx)(c.A,{type:r})}),(0,f.jsxs)("div",{className:"pdf-error-state-text",children:[(0,f.jsx)("p",{className:"pdf-error-state-label",children:t}),(0,f.jsx)("p",{className:"pdf-error-state-description",children:n})]}),o]}),a]})},xe=function(){const{loadingError:e}=(0,me.J)(),{hasShortCompileTimeout:t,error:n,showLogs:r}=(0,k.Rf)();return(0,Oe.G)()&&(e||r)?t&&"timedout"===n?(0,f.jsx)(we,{}):(0,f.jsx)(ve,{}):null};function ye(){const{t:e}=(0,l.Bd)(),{codeCheckFailed:t}=(0,k.Rf)();return t?(0,f.jsx)("div",{className:"pdf-code-check-failed-banner-container",children:(0,f.jsxs)("div",{className:"pdf-code-check-failed-banner",children:[(0,f.jsx)(c.A,{unfilled:!0,type:"picture_as_pdf"}),e("code_check_failed_explanation")]})}):null}function ke(){const{pdfUrl:e}=(0,k.Rf)(),{compileTimeout:t}=(0,h.A)("ol-compileSettings"),n=x()("pdf","full-size",{"pdf-empty":!e}),i=(0,Oe.G)(),a=[{import:r,path:"/overleaf/services/web/modules/writefull/frontend/js/components/promotions/feature-rebrand-promotion"}];return(0,f.jsx)("div",{className:n,children:(0,f.jsxs)(me.K,{children:[i?(0,f.jsx)(ge,{}):(0,f.jsx)(oe,{}),i&&(0,f.jsx)(ye,{}),(0,f.jsx)(ie,{children:t<60&&(0,f.jsx)(ue,{})}),(0,f.jsx)(o.Suspense,{fallback:(0,f.jsx)(E.e,{delay:500}),children:(0,f.jsx)("div",{className:"pdf-viewer","data-testid":"pdf-viewer",children:(0,f.jsx)(Q,{})})}),i?(0,f.jsx)(xe,{}):(0,f.jsx)(y.A,{}),a.map((e=>{let{import:{default:t},path:n}=e;return(0,f.jsx)(t,{},n)}))]})})}const Ce=(0,o.memo)(ke);var Se=n(67984),Qe=n(7174),Ee=(n(69033),n(68903),n(21018),n(1415),n(4448),n(58871),n(56539),n(48200)),Te=n(83173),je=n(57195),Pe=n(69475),$e=n(49412),Re=n(38188),Xe=n(11235),Ae=n(88222),qe=n(74656),Le=n(60440),Ie=n(89997),Ne=n(6077),De=n(53969),We=n(95646),Me=n(82306),Ue=n(55937),Fe=n(25133),Ve=n(14791);const Ge=e=>{let{view:t}=e;const[n,r]=(0,o.useState)(),{fileTreeData:i}=(0,Le.Q)(),{previewByPath:a}=(0,Ie.m8)(),{currentDocument:s,openDocName:l}=(0,Ue.Wq)(),c=(0,Ae.i)(),d=(0,Pe.A)(),h=(0,o.useRef)(),u=(0,o.useRef)(null),m=(0,o.useRef)(a),p=(0,o.useRef)({labels:new Set,packageNames:new Set,referenceKeys:new Set,commands:[],fileTreeData:i});return(0,o.useEffect)((()=>{if(!s)return;const e=je.$t.create({doc:t.state.doc,extensions:[Te.Lz.lineWrapping,je.$t.readOnly.of(!0),Te.Lz.editable.of(!1),je.$t.phrases.of(c),(0,$e.yN)("main.tex"),(0,Re.BH)("main.tex",p.current,{syntaxValidation:!1}),(0,qe.w4)({fontSize:14,fontFamily:"monaco",lineHeight:"normal",activeOverallTheme:"light"}),Te.Lz.theme({"&.cm-editor":{background:"#fff"},".ol-cm-preamble-wrapper, .ol-cm-end-document-widget":{visibility:"hidden"}}),Ne.K,Ne.Q,De.L,Ve.eQ,(0,We.x)({previewByPath:m.current}),Me.j,Xe.aK,Te.Lz.contentAttributes.of({"aria-label":"Visual preview"})]}),n=new Te.Lz({state:e,dispatchTransactions(e){n.update(e),d.current&&r(n.state)},scrollTo:Te.Lz.scrollIntoView(e.selection.main,{y:"center"})});(0,qe.BJ)("overleaf").then((e=>{n.dispatch(e)})),u.current?.replaceChildren(n.dom),h.current=n,t.dispatch({effects:je.Pe.appendConfig.of([Te.Lz.updateListener.of((e=>{if(e.docChanged)for(const t of e.transactions)n.dispatch({changes:t.changes});e.selectionSet&&n.dispatch({effects:Te.Lz.scrollIntoView(e.state.selection.main,{y:"center"})})}))])})}),[c,t,s,d]),(0,o.useEffect)((()=>{i&&(p.current.fileTreeData=i,window.setTimeout((()=>{h.current?.dispatch((0,Re.kq)(p.current))})))}),[i,t]),(0,o.useEffect)((()=>()=>{h.current?.destroy()}),[t]),l&&(0,Fe.K)(l)?(0,f.jsx)(Ee.LI.Provider,{value:n,children:(0,f.jsx)(Ee.rr.Provider,{value:h.current,children:(0,f.jsx)("div",{ref:u,style:{height:"100%"}})})}):null};var Ze=n(46039),Be=n(17112);function ze(){const{detachRole:e}=(0,j.LV)(),{view:t}=(0,Ze.xl)(),n=(0,Be.u)("visual-preview");return"detacher"===e?null:n&&t?(0,f.jsx)(Ge,{view:t}):(0,f.jsx)(Ce,{})}const Ye=(0,Se.A)((0,o.memo)(ze),(()=>(0,f.jsx)(Qe.A,{type:"preview"})))},88222:(e,t,n)=>{"use strict";n.d(t,{i:()=>i});var r=n(97434),o=n(14041);const i=()=>{const{t:e,i18n:t}=(0,r.Bd)(),n=(0,o.useMemo)((()=>({"Fold line":e("fold_line"),"Unfold line":e("unfold_line")})),[e]),i=(0,o.useMemo)((()=>({getOwnPropertyDescriptor:(e,n)=>Object.prototype.hasOwnProperty.call(e,n)?Object.getOwnPropertyDescriptor(e,n):t.exists(n)?{enumerable:!1,configurable:!0,writable:!0}:Object.getOwnPropertyDescriptor(e,n),get:(n,r)=>Object.prototype.hasOwnProperty.call(n,r)?n[r]:t.exists(r)?e(r):n[r]})),[e,t]);return(0,o.useMemo)((()=>new Proxy(n,i)),[i,n])}},88495:(e,t,n)=>{"use strict";n.d(t,{A:()=>s,c:()=>a});var r=n(14041),o=n(89139),i=n(94234);const a=e=>{if(e.shiftKey||e.altKey)return!1;if(e.ctrlKey){if("s"===e.key||"Enter"===e.key||"."===e.key)return!0;if("S"===e.key&&!e.shiftKey)return!0}else if(e.metaKey){if("s"===e.key||"Enter"===e.key)return!0;if("S"===e.key&&!e.shiftKey)return!0}};function s(e,t){const n=(0,r.useCallback)((t=>{a(t)&&(t.preventDefault(),e())}),[e]),s=(0,r.useCallback)((()=>{e()}),[e]);(0,o.A)("pdf:recompile",s),(0,r.useEffect)((()=>(document.body.addEventListener("keydown",n),()=>{document.body.removeEventListener("keydown",n)})),[n]);const l=(0,i.A)("set-changed-at",t,"detacher","detached"),c=(0,r.useCallback)((()=>{l(Date.now())}),[l]);(0,o.A)("doc:changed",c)}},89135:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(53373),o=n.n(r),i=n(31085);const a=function(e){let{type:t,spin:n,fw:r,modifier:a,className:s="",accessibilityLabel:l,...c}=e;const d=o()("fa",`fa-${t}`,{"fa-spin":n,"fa-fw":r,[`fa-${a}`]:a},s);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("i",{className:d,"aria-hidden":"true",...c}),l&&(0,i.jsx)("span",{className:"visually-hidden",children:l})]})}},89139:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(14041);function o(e,t){(0,r.useEffect)((()=>(window.addEventListener(e,t),()=>{window.removeEventListener(e,t)})),[e,t])}},89327:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});n(82438),n(91020),n(50020);var r=n(14041),o=n(60961);const i=e=>e.flatMap((e=>[e.content,...e.tool_calls.map((e=>`${e.tool} ${JSON.stringify(e.args)||""}`))])).join("\n\n"),a=async e=>{const t=await fetch("https://script.google.com/macros/s/AKfycbzReBQ1jUgZVWQ8m0Kiwb_SFcBYTvpBseiwS99P4c0ObZmgQHFntrt0I8JG15tLxUj_/exec",{mode:"no-cors",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return t.ok||o.$.error(await t.text()),t};function s(e,t,n,s){return(0,r.useCallback)((async r=>{r.preventDefault();try{const e=new FormData(r.target),o={level:t.level,ruleId:t.ruleId,rating:s,notes:e.get("notes")};null!==e.get("reason")&&(o.reason=e.get("reason")),e.get("consent")&&(o.rawLog=t.raw,o.messages=i(n)),await a(o)}catch(e){o.$.error(e)}finally{e()}}),[t,n,s,e])}},89997:(e,t,n)=>{"use strict";n.d(t,{m8:()=>d,rL:()=>c});n(97107);var r=n(14041),o=n(60440),i=n(64932),a=n(35287),s=n(31085);const l=(0,r.createContext)(void 0),c=e=>{let{children:t}=e;const{fileTreeData:n}=(0,o.Q)(),c=(0,i.A)("ol-project_id"),d=(0,r.useCallback)((e=>(0,a.$X)(n,e)),[n]),h=(0,r.useCallback)((e=>(0,a.Xk)(n,e)),[n]),u=(0,r.useCallback)((e=>(0,a.bJ)(n,c,e)),[n,c]),m=(0,r.useCallback)((e=>(0,a.pD)(n,e)),[n]),p=(0,r.useMemo)((()=>({pathInFolder:d,findEntityByPath:h,previewByPath:u,dirname:m})),[d,h,u,m]);return(0,s.jsx)(l.Provider,{value:p,children:t})};function d(){const e=(0,r.useContext)(l);if(!e)throw new Error("useFileTreePathContext is only available inside FileTreePathProvider");return e}},90082:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});n(82438),n(50020);var r=n(97434),o=n(14041),i=n(61160),a=n(31085);function s(e){let{fileList:t}=e;const{t:n}=(0,r.Bd)();if(!t)return null;function o(e){return e.path.split("/").pop()}return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.hO,{children:n("other_output_files")}),t.top.map((e=>(0,a.jsx)("li",{role:"menuitem",children:(0,a.jsx)(i.tJ,{role:"link",download:o(e),href:e.downloadURL||e.url,children:e.path})},e.path))),t.other.length>0&&t.top.length>0&&(0,a.jsx)(i.rx,{}),t.other.map((e=>(0,a.jsx)("li",{role:"menuitem",children:(0,a.jsx)(i.tJ,{role:"link",download:o(e),href:e.downloadURL||e.url,children:e.path})},e.path))),void 0!==t.archive?.fileCount&&t.archive?.fileCount>0&&(0,a.jsx)("li",{role:"menuitem",children:(0,a.jsxs)(i.tJ,{role:"link",download:o(t.archive),href:t.archive.url,children:[n("download_all")," (",t.archive.fileCount,")"]})})]})}const l=(0,o.memo)(s)},90482:(e,t,n)=>{const r=n(91810);class o extends r{apply(e){}toJSON(){return{noOp:!0}}static fromJSON(){return new o}}e.exports=o},91542:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(14041),o=n(67353);function i(e,t){const{scopeEventEmitter:n}=(0,o.nK)();(0,r.useEffect)((()=>n.on(e,t)),[n,e,t])}},91810:(e,t,n)=>{n(97107);class r{constructor(){if(this.constructor===r)throw new Error("Cannot instantiate abstract class")}toJSON(){throw new Error("Abstract method not implemented")}apply(e){throw new Error("Abstract method not implemented")}applyToLength(e){return e}invert(e){throw new Error("Abstract method not implemented")}canBeComposedWith(e){return!1}canBeComposedWithForUndo(e){return!1}compose(e){throw new Error("Abstract method not implemented")}}e.exports=r},91822:(e,t,n)=>{"use strict";const r=n(64347).assert;class o{constructor(e,t,n,o){r.string(e,"bad text"),r.maybe.integer(t,"bad author id"),r.date(n,"bad timestamp"),r.integer(o,"bad version"),this.text=e,this.authorId=t,this.timestamp=n,this.version=o}static fromRaw(e){return new o(e.text,e.authorId,new Date(e.timestamp),e.version)}toRaw(){return{text:this.text,authorId:this.authorId,timestamp:this.timestamp.toISOString(),version:this.version}}getText(){return this.text}getAuthorId(){return this.authorId}getTimestamp(){return this.timestamp}getVersion(){return this.version}}e.exports=o},92329:(e,t,n)=>{"use strict";n.d(t,{UA:()=>r,dT:()=>o});const r=e=>`\\begin{${e}}\n\t$1\n\\end{${e}}`,o=new Map([["abstract",r("abstract")],["align",r("align")],["align*",r("align*")],["array","\\begin{array}{${1:cc}}\n\t$2 & $3 \\\\\n\t$4 & $5\n\\end{array}"],["center",r("center")],["description","\\begin{description}\n\t\\item[$1] $2\n\\end{description}"],["document",(i="document",`\\begin{${i}}\n$1\n\\end{${i}}`)],["equation",r("equation")],["equation*",r("equation*")],["enumerate","\\begin{enumerate}\n\t\\item $1\n\\end{enumerate}"],["figure","\\begin{figure}\n\t\\centering\n\t\\includegraphics[width=0.5\\linewidth]{$1}\n\t\\caption{${2:Caption}}\n\t\\label{${3:fig:enter-label}}\n\\end{figure}"],["frame","\\begin{frame}{${1:Frame Title}}\n\t$2\n\\end{frame}"],["gather",r("gather")],["gather*",r("gather*")],["itemize","\\begin{itemize}\n\t\\item $1\n\\end{itemize}"],["multline",r("multline")],["multline*",r("multline*")],["quote",r("quote")],["split",r("split")],["table","\\begin{table}[$1]\n\t\\centering\n\t\\begin{tabular}{${2:c|c}}\n\t\t$3 & $4 \\\\\n\t\t$5 & $6\n\t\\end{tabular}\n\t\\caption{${7:Caption}}\n\t\\label{${8:tab:my_label}}\n\\end{table}"],["tabular","\\begin{tabular}{${1:c|c}}\n\t$2 & $3 \\\\\n\t$4 & $5\n\\end{tabular}"],["verbatim",r("verbatim")]]);var i},92956:(e,t,n)=>{"use strict";n.d(t,{A:()=>_});var r=n(14041),o=n(53373),i=n.n(o),a=n(97434),s=n(33288),l=n(59162),c=n(71627),d=n(96713),h=n(31085);const u=function(e){let{sourceLocation:t,level:n,headerTitle:o,headerIcon:u,logType:m,showSourceLocationLink:p=!0,onSourceLocationClick:g}=e;const{t:f}=(0,a.Bd)(),O=(0,r.useRef)(null),[b,v]=(0,r.useState)(!1);(0,s.A)(O,b,(function(e){const t=e.target,n=t.scrollWidth>t.clientWidth;v(n)}));const w=t?t.file:null,_=t?t.line:null,x=i()("log-entry-header",{"log-entry-header-error":"error"===n,"log-entry-header-warning":"warning"===n,"log-entry-header-info":"info"===n,"log-entry-header-typesetting":"typesetting"===n,"log-entry-header-raw":"raw"===n,"log-entry-header-success":"success"===n}),y=i()("log-entry-header-link",{"log-entry-header-link-error":"error"===n,"log-entry-header-link-warning":"warning"===n,"log-entry-header-link-typesetting":"typesetting"===n,"log-entry-header-link-raw":"raw"===n,"log-entry-header-link-info":"info"===n,"log-entry-header-link-success":"success"===n}),k=f("navigate_log_source",{location:w+(_?`, ${_}`:"")}),C=p&&w?`${w}${_?`, ${_}`:""}`:null,S=C?(0,h.jsxs)(c.A,{variant:"ghost",className:y,"aria-label":k,onClick:g,children:[(0,h.jsx)(d.A,{type:"link"}),(0,h.jsx)("span",{ref:O,className:"log-entry-header-link-location",translate:"no",children:`‪${C}‬`})]}):null,Q=m?`${m} ${o}`:o;return(0,h.jsxs)("header",{className:x,children:[u?(0,h.jsx)("div",{className:"log-entry-header-icon-container",children:u}):null,(0,h.jsx)("h3",{className:"log-entry-header-title",children:Q}),b&&C&&S?(0,h.jsx)(l.A,{id:C,description:C,overlayProps:{placement:"left"},tooltipProps:{className:"log-location-tooltip",translate:"no"},children:S}):S]})};var m=n(14768),p=n(62817),g=n(69954),f=n(64932),O=n(97536),b=n(50329),v=n(17112);function w(e){let{ruleId:t,headerTitle:n,headerIcon:o,rawContent:i,logType:a,formattedContent:s,extraInfoURL:l,level:c,sourceLocation:d,showSourceLocationLink:w=!0,entryAriaLabel:_,contentDetails:x,onSourceLocationClick:y,index:k,logEntry:C,id:S}=e;const Q=(0,f.A)("ol-showAiErrorAssistant");if(t&&p.A[t]){const e=p.A[t];s=e.formattedContent(x),l=e.extraInfoURL}const E=(0,r.useCallback)((e=>{if(e.preventDefault(),y&&d){y(d);const e=d?.file?.split("."),n=e?.length&&e?.length>1?e.pop():"";(0,g._)("log-entry-link-click",{level:c,ruleId:t,extension:n})}}),[c,y,t,d]),T=(0,O.G)(),j=(0,v.u)("new-editor-error-logs-redesign");return T&&j?(0,h.jsx)(b.A,{index:k,id:S,logEntry:C,ruleId:t,headerTitle:n,formattedContent:s,rawContent:i,logType:a,level:c,contentDetails:x,entryAriaLabel:_,sourceLocation:d,onSourceLocationClick:y,showSourceLocationLink:w,extraInfoURL:l}):(0,h.jsxs)("div",{className:"log-entry","aria-label":_,"data-ruleid":t,"data-log-entry-id":S,children:[(0,h.jsx)(u,{level:c,sourceLocation:d,headerTitle:n,headerIcon:o,logType:a,showSourceLocationLink:w,onSourceLocationClick:E}),(i||s||Q)&&(0,h.jsx)(m.A,{rawContent:i,formattedContent:s,extraInfoURL:l,index:k,logEntry:C})]})}const _=(0,r.memo)(w)},93516:e=>{class t{constructor(){this.type="none"}equals(e){return e instanceof t}canMergeWith(e){return e instanceof t}mergeWith(e){return this}toRaw(){return{type:"none"}}}e.exports=t},93588:(e,t,n)=>{"use strict";n.d(t,{lt:()=>u,Q2:()=>m});n(97107);var r=n(14041),o=n(64932),i=n(69139);n(69033),n(68903),n(21018),n(1415),n(4448),n(58871),n(56539);var a=n(60961),s=n(31085);const l=(0,r.createContext)(void 0),c=(0,o.A)("ol-debugPdfDetach"),d=(0,o.A)("ol-project_id"),h="BroadcastChannel"in window?new BroadcastChannel(`detach-${d}`):void 0,u=e=>{let{children:t}=e;const[n,d]=(0,r.useState)(),[u,m]=(0,r.useState)((()=>(0,o.A)("ol-detachRole")||null)),{addHandler:p,deleteHandler:g,callHandlers:f}=function(){const e=(0,r.useRef)(new Set),t=(0,r.useCallback)((t=>{e.current.add(t)}),[]),n=(0,r.useCallback)((t=>{e.current.delete(t)}),[]),o=(0,r.useCallback)((function(){for(const t of e.current)t(...arguments)}),[]);return{addHandler:t,deleteHandler:n,callHandlers:o}}();(0,r.useEffect)((()=>{c&&a.$.warn("Effect",{role:u}),window.history.replaceState({},"",(0,i.Z)(u).toString())}),[u]),(0,r.useEffect)((()=>{if(h){const e=e=>{c&&a.$.warn("Receiving:",e.data),f(e.data)};return h.addEventListener("message",e),()=>{h.removeEventListener("message",e)}}}),[f]);const O=(0,r.useCallback)(((e,t)=>{if(!u)return void(c&&a.$.warn("Not Broadcasting (no role)",{role:u,event:e,data:t}));c&&a.$.warn("Broadcasting",{role:u,event:e,data:t});const n={role:u,event:e};t&&(n.data=t),h?.postMessage(n)}),[u]);(0,r.useEffect)((()=>{O("connected")}),[O]),(0,r.useEffect)((()=>{const e=()=>O("closed");return window.addEventListener("beforeunload",e),()=>window.removeEventListener("beforeunload",e)}),[O]),(0,r.useEffect)((()=>{const e=e=>{"detached"===e.role&&"connected"===e.event&&d(new Date)};return p(e),()=>g(e)}),[p,g]);const b=(0,r.useMemo)((()=>({role:u,setRole:m,broadcastEvent:O,lastDetachedConnectedAt:n,addEventHandler:p,deleteEventHandler:g})),[u,m,O,n,p,g]);return(0,s.jsx)(l.Provider,{value:b,children:t})};function m(){const e=(0,r.useContext)(l);if(!e)throw new Error("useDetachContext is only available inside DetachProvider");return e}},93852:(e,t,n)=>{"use strict";n.d(t,{i:()=>o});const r=(0,n(64932).A)("ol-projectHistoryBlobsEnabled");function o(e,t,n){return r&&n?`/project/${e}/blob/${n}?fallback=${t}`:`/project/${e}/file/${t}`}},94012:(e,t,n)=>{"use strict";n.d(t,{B4:()=>g,iH:()=>p});n(97107),n(69033),n(68903),n(21018),n(1415),n(4448),n(58871),n(56539);var r=n(5804),o=n(14041),i=n(78494),a=n(16896),s=n(37858),l=n(60440),c=n(41479),d=n(60961),h=n(89139),u=n(31085);const m=(0,o.createContext)(void 0),p=e=>{let{children:t}=e;const{fileTreeData:n}=(0,l.Q)(),{eventEmitter:p,projectId:g}=(0,i.yn)(),{socket:f}=(0,a.FX)(),[O,b]=(0,o.useState)(new Set),[v,w]=(0,o.useState)({}),_=(0,o.useCallback)((async e=>(0,s.TB)(`/project/${g}/references/indexAll`,{body:{shouldBroadcast:e}}).then((e=>{b(new Set(e.keys))})).catch((e=>{d.$.error(e)}))),[g]),x=(0,o.useCallback)(((e,t)=>{const n=e.doc_id,o=e.getSnapshot(),i=Date.now(),a=(0,r.V)("blob "+o.length+"\0"+o),s=v[n];s&&s.timestamp>i-216e5&&s.hash===a||(_(t),w((e=>({...e,[n]:{hash:a,timestamp:i}}))))}),[v,_]);(0,o.useEffect)((()=>{const e=e=>{let{detail:[t]}=e;t.doc_id&&(0,c.p)(n,t.doc_id)?.name?.endsWith(".bib")&&x(t,!0)};return p.on("document:closed",e),()=>{p.off("document:closed",e)}}),[p,n,x]),(0,h.A)("reference:added",(0,o.useCallback)((()=>{_(!0)}),[_])),(0,o.useEffect)((()=>{const e=()=>{f.on("references:keys:updated",((e,t)=>{b((n=>t?new Set(e):new Set([...n,...e])))})),_(!1)};return p.once("project:joined",e),()=>{p.off("project:joined",e)}}),[p,_,f]);const y=(0,o.useMemo)((()=>({referenceKeys:O,indexAllReferences:_})),[_,O]);return(0,u.jsx)(m.Provider,{value:y,children:t})};function g(){const e=(0,o.useContext)(m);if(!e)throw new Error("useReferencesContext is only available inside ReferencesProvider");return e}},94234:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(14041),o=n(93588),i=n(64932),a=n(60961);const s=(0,i.A)("ol-debugPdfDetach");function l(e,t,n,i){const{role:l,broadcastEvent:c,addEventHandler:d,deleteEventHandler:h}=(0,o.Q2)(),u=`action-${e}`,m=(0,r.useCallback)((function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];l===n?c(u,{args:r}):t(...r)}),[l,n,u,t,c]),p=(0,r.useCallback)((e=>{e.event===u&&l===i&&(s&&a.$.warn(`Do ${t.name} on event ${u}`),t(...e.data.args))}),[l,i,u,t]);return(0,r.useEffect)((()=>(d(p),()=>h(p))),[d,h,p]),m}},94355:(e,t,n)=>{"use strict";n.d(t,{Kn:()=>s,l_:()=>i});var r=n(97900);n(47200);const o=(e,t,n)=>{const o=(0,r.G2)(e,...n);if(o){const e=t.doc.sliceString(o.from,o.to);if(e.length>0)return e}return null},i=(e,t,n,i)=>{if(t.type.is("NewCommand")||t.type.is("RenewCommand")){if(!i(t.node))return;const a=o(t.node,e,["LiteralArgContent","Csname"]);if(null===a)return;const s=t.node.getChildren("OptionalArgument");let l=0;if(s.length>0){const t=s[0],n=(0,r.H)(e,t);if(n)try{l=parseInt(n,10)}catch(e){}}const c=2===s.length;c&&l>0&&l--,n.push({line:e.doc.lineAt(t.from).number,title:a,from:t.from,to:t.to,optionalArgCount:c?1:0,requiredArgCount:l,type:"definition",raw:e.sliceDoc(t.from,t.to)})}else if(t.type.is("Def")){if(!i(t.node))return;const r=o(t.node,e,["Csname","CtrlSym"]);if(null===r)return;const a=t.node.getChildren("MacroParameter").length,s=t.node.getChildren("OptionalMacroParameter").length;n.push({line:e.doc.lineAt(t.from).number,title:r,from:t.from,to:t.to,optionalArgCount:s,requiredArgCount:a,type:"definition",raw:e.sliceDoc(t.from,t.to)})}else if(t.type.is("Let")){if(!i(t.node))return;const r=o(t.node,e,["Csname"]);if(null===r)return;n.push({line:e.doc.lineAt(t.from).number,title:r,from:t.from,to:t.to,ignoreInAutocomplete:!0,optionalArgCount:void 0,requiredArgCount:void 0,type:"definition",raw:e.sliceDoc(t.from,t.to)})}else if(t.type.is("UnknownCommand")||t.type.is("KnownCommand")||t.type.is("MathUnknownCommand")||t.type.is("DefinitionFragmentUnknownCommand")){if(!i(t.node))return;let r=t.node;if(t.type.is("KnownCommand")&&(r=r.firstChild),!r)return;const o=r.getChild("$CtrlSeq");if(!o)return;if(o.type.is("$CtrlSym"))return;const a=r.getChildren("OptionalArgument"),s=r.getChildren("$Argument"),l=e.doc.sliceString(o.from,o.to);n.push({line:e.doc.lineAt(r.from).number,title:l,from:r.from,to:r.to,optionalArgCount:a.length,requiredArgCount:s.length-a.length,type:"usage",raw:void 0})}},a={tex:0,pdf:1},s=(e,t,n)=>{if("\\texorpdfstring"===o(t.node,e,["CtrlSeq"])){const r=t.getChildren("TextArgument")[a[n]]?.getChild("LongArg");if(r)return e.doc.sliceString(r.from,r.to)}}},94857:(e,t,n)=>{"use strict";n.d(t,{c:()=>r});const r=/Mac/.test(window.navigator?.platform)},95646:(e,t,n)=>{"use strict";n.d(t,{x:()=>Yt});n(82438),n(50020);var r=n(57195),o=n(83173),i=n(29587),a=n(14791);class s extends o.xO{bullets=["disc","circle","square"];numbers=["decimal","lower-alpha","lower-roman","upper-alpha"];constructor(e,t,n){super(),this.currentEnvironment=e,this.ordinal=t,this.listDepth=n,"itemize"===e?(this.listType=this.bullets[(n-1)%this.bullets.length],this.suffix="' '"):(this.listType=this.numbers[(n-1)%this.numbers.length],this.suffix="'. '")}toDOM(){const e=document.createElement("span");return e.classList.add("ol-cm-item"),e.textContent=" ",this.setProperties(e),e}eq(e){return e.currentEnvironment===this.currentEnvironment&&e.ordinal===this.ordinal&&e.listDepth===this.listDepth}updateDOM(e){return this.setProperties(e),!0}ignoreEvent(e){return"mousedown"!==e.type&&"mouseup"!==e.type}coordsAt(e){return e.getBoundingClientRect()}setProperties(e){e.style.setProperty("--list-depth",String(this.listDepth)),e.style.setProperty("--list-ordinal",String(this.ordinal)),e.style.setProperty("--list-type",this.listType),e.style.setProperty("--list-suffix",this.suffix)}}class l extends o.xO{toDOM(){const e=document.createElement("span");return e.classList.add("ol-cm-tex"),e.innerHTML="L<sup>a</sup>T<sub>e</sub>X",e}eq(){return!0}ignoreEvent(e){return"mousedown"!==e.type&&"mouseup"!==e.type}coordsAt(e){return e.getBoundingClientRect()}}class c extends o.xO{constructor(e){super(),this.content=e}toDOM(){const e=document.createElement("span");return e.classList.add("ol-cm-brace"),void 0!==this.content&&(e.textContent=this.content),e}ignoreEvent(e){return"mousedown"!==e.type&&"mouseup"!==e.type}eq(e){return e.content===this.content}coordsAt(e){return e.getBoundingClientRect()}}var d=n(15133),h=n(86841);const u=(e,t)=>{e.dispatch({selection:r.OF.single(t.from+1,t.to-1),scrollIntoView:!0})};class m extends o.xO{constructor(e){super(),this.content=e}toDOM(){const e=document.createElement("span");return e.classList.add("ol-cm-character"),e.textContent=this.content,e}eq(e){return e.content===this.content}updateDOM(e){return e.textContent=this.content,!0}ignoreEvent(e){return"mousedown"!==e.type&&"mouseup"!==e.type}coordsAt(e){return e.getBoundingClientRect()}}const p=new Map([["\\"," "],["\\%","%"],["\\_","_"],["\\}","}"],["\\~","~"],["\\&","&"],["\\#","#"],["\\{","{"],["\\$","$"],["\\textasciicircum","^"],["\\textless","<"],["\\textasciitilde","~"],["\\textordfeminine","ª"],["\\textasteriskcentered","⁎"],["\\textordmasculine","º"],["\\textbackslash","\\"],["\\textparagraph","¶"],["\\textbar","|"],["\\textperiodcentered","·"],["\\textbardbl","‖"],["\\textpertenthousand","‱"],["\\textperthousand","‰"],["\\textbraceleft","{"],["\\textquestiondown","¿"],["\\textbraceright","}"],["\\textquotedblleft","“"],["\\textbullet","•"],["\\textquotedblright","”"],["\\textcopyright","©"],["\\textquoteleft","‘"],["\\textdagger","†"],["\\textquoteright","’"],["\\textdaggerdbl","‡"],["\\textregistered","®"],["\\textdollar","$"],["\\textsection","§"],["\\textellipsis","…"],["\\textsterling","£"],["\\textemdash","—"],["\\texttrademark","™"],["\\textendash","–"],["\\textunderscore","_"],["\\textexclamdown","¡"],["\\textvisiblespace","␣"],["\\textgreater",">"],["\\ddag","‡"],["\\pounds","£"],["\\copyright","©"],["\\dots","…"],["\\S","§"],["\\dag","†"],["\\P","¶"],["\\aa","å"],["\\DH","Ð"],["\\L","Ł"],["\\o","ø"],["\\th","þ"],["\\AA","Å"],["\\DJ","Đ"],["\\l","ł"],["\\oe","œ"],["\\TH","Þ"],["\\AE","Æ"],["\\dj","đ"],["\\NG","Ŋ"],["\\OE","Œ"],["\\ae","æ"],["\\IJ","Ĳ"],["\\ng","ŋ"],["\\ss","ß"],["\\dh","ð"],["\\ij","ĳ"],["\\O","Ø"],["\\SS","ẞ"],["\\guillemetleft","«"],["\\guilsinglleft","‹"],["\\quotedblbase","„"],["\\textquotedbl",'"'],["\\guillemetright","»"],["\\guilsinglright","›"],["\\quotesinglbase","‚"],["\\textbaht","฿"],["\\textdollar","$"],["\\textwon","₩"],["\\textcent","¢"],["\\textlira","₤"],["\\textyen","¥"],["\\textcentoldstyle","¢"],["\\textdong","₫"],["\\textnaira","₦"],["\\textcolonmonetary","₡"],["\\texteuro","€"],["\\textpeso","₱"],["\\textcurrency","¤"],["\\textflorin","ƒ"],["\\textsterling","£"],["\\textcircledP","℗"],["\\textcopyright","©"],["\\textservicemark","℠"],["\\textregistered","®"],["\\texttrademark","™"],["\\textblank","␢"],["\\textpilcrow","¶"],["\\textbrokenbar","¦"],["\\textquotesingle","'"],["\\textdblhyphen","⹀"],["\\textdblhyphenchar","⹀"],["\\textdiscount","⁒"],["\\textrecipe","℞"],["\\textestimated","℮"],["\\textreferencemark","※"],["\\textinterrobang","‽"],["\\textthreequartersemdash","—"],["\\textinterrobangdown","⸘"],["\\texttildelow","˷"],["\\textnumero","№"],["\\texttwelveudash","—"],["\\textopenbullet","◦"],["\\ldots","…"]]);const g=new Map([["TextBoldCommand",{elementType:"b"}],["TextItalicCommand",{elementType:"i"}],["TextSmallCapsCommand",{elementType:"span",className:"ol-cm-command-textsc"}],["TextTeletypeCommand",{elementType:"span",className:"ol-cm-command-texttt"}],["TextSuperscriptCommand",{elementType:"sup"}],["TextSubscriptCommand",{elementType:"sub"}],["EmphasisCommand",{elementType:"em"}],["UnderlineCommand",{elementType:"span",className:"ol-cm-command-underline"}]]),f=new Map([["\\and",{elementType:"span",className:"ol-cm-command-and"}]]);function O(e,t,n){n instanceof r.$t&&(n=n.sliceDoc.bind(n));const o=e.getChild("LongArg");o&&(e=o);const i=[t],a=()=>i[i.length-1];let s=e.from;const l=(e,t)=>{const n=document.createElement(e.elementType);e.className&&n.classList.add(e.className),(e=>{i.push(e)})(n),s=b(t)};return e.cursor().iterate((function(e){const t=e.node;s<t.from&&(a().append(document.createTextNode(n(s,t.from))),s=t.from);const r=g.get(t.type.name);if(r)return void l(r,t);const o=w(t,n);if(o){const e=f.get(o);if(e)return void l(e,t);if(["\\corref","\\fnref","\\thanks"].includes(o))return s=t.to,!1;const n=p.get(o);if(n)return a().append(document.createTextNode(n)),s=t.to,!1}else t.type.is("LineBreak")&&(a().append(document.createElement("br")),s=t.to)}),(function(e){const t=e.node;if(v(t,n)){const e=i.pop();a().appendChild(e);const n=t.getChild("TextArgument"),r=n?.getChild("CloseBrace");r&&(s=r.to)}})),s<e.to&&a().append(document.createTextNode(n(s,e.to))),t}const b=e=>e.getChild("TextArgument")?.getChild("LongArg")?.from??e.to,v=(e,t)=>{if(g.has(e.type.name))return!0;const n=w(e,t);return n&&f.has(n)},w=(e,t)=>{if(e.type.is("UnknownCommand")){const n=e.getChild("$CtrlSeq");if(n)return t(n.from,n.to).trim()}};class _ extends o.xO{destroyed=!1;constructor(e){super(),this.preamble=e}toDOM(e){this.destroyed=!1;const t=document.createElement("div");return t.classList.add("ol-cm-maketitle"),this.buildContent(e,t),t}eq(e){return function(e,t){if(e.title?.content!==t.title?.content)return!1;if(e.authors.length!==t.authors.length)return!1;for(let n=0;n<e.authors.length;n++)if(e.authors[n].content!==t.authors[n].content)return!1;return!0}(e.preamble,this.preamble)}updateDOM(e,t){return this.destroyed=!1,e.textContent="",this.buildContent(t,e),t.requestMeasure(),!0}ignoreEvent(e){return"mouseup"!==e.type}destroy(){this.destroyed=!0}coordsAt(e){return e.getBoundingClientRect()}buildContent(e,t){if(this.preamble.title){const n=function(e,t){const n=document.createElement("div");return n.classList.add("ol-cm-title"),O(t,n,e),n}(e.state,this.preamble.title.node);n.addEventListener("mouseup",(()=>{this.preamble.title&&u(e,this.preamble.title.node)})),t.append(n),(0,h.O)().then((async n=>{this.destroyed||(await n.typesetPromise([t]),e.requestMeasure(),n.typesetClear([t]))})).catch((()=>{t.classList.add("ol-cm-error")}))}if(this.preamble.authors.length){const n=function(e,t){const n=document.createElement("div");n.classList.add("ol-cm-authors");for(const{node:r}of e){const e=document.createElement("div");O(r,e,t.state);let o=document.createElement("div");for(o.classList.add("ol-cm-author"),n.append(o);e.firstChild;){const t=e.firstChild;t instanceof HTMLElement&&t.classList.contains("ol-cm-command-and")?(o=document.createElement("div"),o.classList.add("ol-cm-author"),n.append(o),t.remove()):o.append(t)}o.addEventListener("mouseup",(()=>{u(t,r)}))}return n}(this.preamble.authors,e);t.append(n)}}}class x extends o.xO{destroyed=!1;constructor(e){super(),this.environment=e}toDOM(e){this.destroyed=!1;const t=document.createElement("div");return this.buildElement(t,e),t.addEventListener("mouseup",(t=>{t.preventDefault(),e.dispatch((0,a.vU)(e,t))})),t}eq(e){return e.environment===this.environment}updateDOM(e,t){return this.destroyed=!1,e.textContent="",e.className="",this.buildElement(e,t),!0}destroy(){this.destroyed=!0}ignoreEvent(e){return"mouseup"!==e.type}coordsAt(e){return e.getBoundingClientRect()}buildName(e,t){e.textContent=this.environment}buildElement(e,t){e.classList.add("ol-cm-begin",`ol-cm-begin-${this.environment}`);const n=document.createElement("span");n.classList.add("ol-cm-environment-padding","ol-cm-environment-start-padding"),e.appendChild(n);const r=document.createElement("span");r.classList.add("ol-cm-environment-name"),this.buildName(r,t),e.appendChild(r);const o=document.createElement("span");o.classList.add("ol-cm-environment-padding","ol-cm-environment-end-padding"),e.appendChild(o)}}class y extends o.xO{toDOM(){const e=document.createElement("div");return e.classList.add("ol-cm-end"),e}eq(){return!0}coordsAt(e){return e.getBoundingClientRect()}}var k=n(21947);class C extends o.xO{destroyed=!1;constructor(e,t,n){super(),this.math=e,this.displayMode=t,this.preamble=n}toDOM(e){this.destroyed=!1;const t=document.createElement(this.displayMode?"div":"span");return t.classList.add("ol-cm-math"),t.style.height=this.estimatedHeight+"px",this.displayMode&&t.addEventListener("mouseup",(t=>{t.preventDefault(),e.dispatch((0,a.vU)(e,t))})),this.renderMath(t).catch((()=>{t.classList.add("ol-cm-math-error")})).finally((()=>{e.requestMeasure()})),t}eq(e){return e.math===this.math&&e.displayMode===this.displayMode&&e.preamble===this.preamble}updateDOM(e,t){return this.destroyed=!1,this.renderMath(e).catch((()=>{e.classList.add("ol-cm-math-error")})).finally((()=>{t.requestMeasure()})),!0}ignoreEvent(e){return"mouseup"!==e.type&&!(!this.displayMode&&"mousedown"===e.type)}destroy(){this.destroyed=!0}get estimatedHeight(){return 40*this.math.split("\n").length}coordsAt(e){return e.getBoundingClientRect()}async renderMath(e){const t=await(0,h.O)();if(this.destroyed)return;if(t.texReset([0]),this.preamble)try{await t.tex2svgPromise(this.preamble)}catch{}if(!e.isConnected)return;const n=await t.tex2svgPromise(this.math,{...t.getMetricsFor(e,this.displayMode),display:this.displayMode});e.replaceChildren(n),e.style.height="auto"}}class S extends o.xO{constructor(e){super(),this.content=e}toDOM(){const e=document.createElement("span");return e.classList.add("ol-cm-brace"),e.classList.add("ol-cm-icon-brace"),void 0!==this.content&&(e.textContent=this.content),e}ignoreEvent(e){return"mousedown"!==e.type&&"mouseup"!==e.type}eq(e){return e.content===this.content}updateDOM(e){return e.textContent=this.content??"",!0}coordsAt(e){return e.getBoundingClientRect()}}class Q extends o.xO{toDOM(){const e=document.createElement("span");return e.classList.add("ol-cm-tex"),e.innerHTML="T<sub>e</sub>X",e}eq(){return!0}ignoreEvent(e){return"mousedown"!==e.type&&"mouseup"!==e.type}coordsAt(e){return e.getBoundingClientRect()}}var E=n(51301);class T extends o.xO{destroyed=!1;constructor(e){super(),this.frame=e}toDOM(e){this.destroyed=!1;const t=document.createElement("div");t.classList.add("ol-cm-frame-widget","ol-cm-divider");const n=document.createElement("div");if(n.classList.add("ol-cm-frame-title","ol-cm-heading"),n.addEventListener("mouseup",(()=>u(e,this.frame.title.node))),O(this.frame.title.node,n,e.state),t.appendChild(n),this.frame.subtitle){const n=document.createElement("div");n.classList.add("ol-cm-frame-subtitle","ol-cm-heading"),O(this.frame.subtitle.node,n,e.state),n.addEventListener("mouseup",(()=>u(e,this.frame.subtitle.node))),t.appendChild(n)}return(0,h.O)().then((async n=>{this.destroyed||(await n.typesetPromise([t]),e.requestMeasure(),n.typesetClear([t]))})).catch((()=>{t.classList.add("ol-cm-error")})),t}destroy(){this.destroyed=!0}eq(e){return e.frame.title.content===this.frame.title.content&&e.frame.subtitle?.content===this.frame.subtitle?.content}ignoreEvent(e){return"mouseup"!==e.type}coordsAt(e){return e.getBoundingClientRect()}}class j extends o.xO{toDOM(){const e=document.createElement("div");return e.classList.add("ol-cm-divider"),e}eq(){return!0}updateDOM(){return!0}coordsAt(e){return e.getBoundingClientRect()}}const P=r.Pe.define();class $ extends o.xO{constructor(e){super(),this.expanded=e}toDOM(e){const t=document.createElement("div");t.classList.add("ol-cm-preamble-wrapper"),t.classList.toggle("ol-cm-preamble-expanded",this.expanded);const n=document.createElement("div");t.appendChild(n),n.classList.add("ol-cm-preamble-widget");const o=document.createElement("i");o.classList.add("ol-cm-preamble-expand-icon","fa","fa-chevron-down");const i=document.createElement("div"),a=document.createElement("a");a.href="/learn/latex/Learn_LaTeX_in_30_minutes#The_preamble_of_a_document",a.target="_blank";const s=document.createElement("i");s.classList.add("fa","fa-question-circle"),s.title=e.state.phrase("learn_more"),a.appendChild(s);const l=document.createElement("span");return l.classList.add("ol-cm-preamble-text"),l.textContent=this.getToggleText(e),i.appendChild(l),this.expanded&&i.append(document.createTextNode(" "),a),n.append(i,o),n.addEventListener("mouseup",(t=>0!==t.button||(!!a.contains(t.target)||(t.preventDefault(),void(this.expanded?e.dispatch({effects:P.of(!0)}):e.dispatch({selection:r.OF.cursor(0),scrollIntoView:!0})))))),t}ignoreEvent(e){return"mouseup"!==e.type}eq(e){return this.expanded===e.expanded}coordsAt(e){return e.getBoundingClientRect()}get estimatedHeight(){return this.expanded?-1:54}getToggleText(e){return this.expanded?e.state.phrase("hide_document_preamble"):e.state.phrase("show_document_preamble")}}class R extends o.xO{toDOM(e){const t=document.createElement("div");return t.classList.add("ol-cm-end-document-widget"),t.textContent=e.state.phrase("end_of_document"),t.addEventListener("mouseup",(t=>{t.preventDefault(),e.dispatch((0,a.vU)(e,t))})),t}ignoreEvent(e){return"mouseup"!==e.type}eq(){return!0}coordsAt(e){return e.getBoundingClientRect()}get estimatedHeight(){return 30}}class X extends o.xO{constructor(e,t){super(),this.environment=e,this.line=t}toDOM(){const e=document.createElement("div");e.classList.add(`ol-cm-environment-${this.environment}`),e.classList.add("ol-cm-environment-edge");const t=document.createElement("div");switch(e.append(t),t.classList.add("ol-cm-environment-line"),t.classList.add(`ol-cm-environment-${this.environment}`),this.line){case"begin":e.classList.add("ol-cm-environment-top"),t.classList.add("ol-cm-environment-first-line");break;case"end":e.classList.add("ol-cm-environment-bottom"),t.classList.add("ol-cm-environment-last-line")}return e}eq(e){return e.environment===this.environment&&e.line===this.line}ignoreEvent(e){return"mousedown"!==e.type&&"mouseup"!==e.type}coordsAt(e){return e.getBoundingClientRect()}}var A=n(16851),q=n(45250),L=n(60961);class I extends o.xO{destroyed=!1;height=300;constructor(e,t,n,r){super(),this.filePath=e,this.previewByPath=t,this.centered=n,this.figureData=r}toDOM(e){this.destroyed=!1;const t=document.createElement("div");return t.classList.add("ol-cm-environment-figure"),t.classList.add("ol-cm-environment-line"),t.classList.toggle("ol-cm-environment-centered",this.centered),this.renderGraphic(t,e),t.addEventListener("mouseup",(t=>{t.preventDefault(),e.dispatch((0,a.vU)(e,t))})),t}eq(e){return e.filePath===this.filePath&&e.centered===this.centered&&(0,q.isEqual)(this.figureData,e.figureData)}updateDOM(e,t){return this.destroyed=!1,e.classList.toggle("ol-cm-environment-centered",this.centered),this.filePath===e.dataset.filepath&&e.dataset.width===String(this.figureData?.width?.toString())||(this.renderGraphic(e,t),t.requestMeasure()),!0}ignoreEvent(e){return"mouseup"!==e.type&&!(e.target instanceof HTMLElement&&e.target.closest(".ol-cm-graphics-edit-button"))}destroy(){this.destroyed=!0}coordsAt(e){return e.getBoundingClientRect()}get estimatedHeight(){return this.height}renderGraphic(e,t){e.textContent="";const n=this.previewByPath(this.filePath);if(e.dataset.filepath=this.filePath,e.dataset.width=this.figureData?.width?.toString(),!n){const t=document.createElement("div");return t.classList.add("ol-cm-graphics-error"),t.classList.add("ol-cm-monospace"),t.textContent=this.filePath,void e.append(t)}if("pdf"===n.extension){const r=document.createElement("canvas");r.classList.add("ol-cm-graphics"),this.renderPDF(t,r,n.url).catch(L.$.error),e.append(r)}else e.append(this.createImage(t,n.url))}getFigureWidth(){return this.figureData?.width?`min(100%, ${100*this.figureData.width}%)`:""}createImage(e,t){const n=document.createElement("img");n.classList.add("ol-cm-graphics"),n.classList.add("ol-cm-graphics-loading");const r=this.getFigureWidth();return n.style.width=r,n.style.maxWidth=r,n.src=t,n.addEventListener("load",(()=>{n.classList.remove("ol-cm-graphics-loading"),this.height=n.height,e.requestMeasure()})),n}async renderPDF(e,t,r){const{loadPdfDocumentFromUrl:o}=await Promise.all([n.e(1865),n.e(6597),n.e(7170)]).then(n.bind(n,62404));if(this.destroyed)return;const i=await o(r).promise,a=await i.getPage(1);if(this.destroyed)return;const s=a.getViewport({scale:1});t.width=s.width,t.height=s.height;const l=this.getFigureWidth();t.style.width=l,t.style.maxWidth=l,a.render({canvasContext:t.getContext("2d"),viewport:s}),this.height=s.height,e.requestMeasure()}}var N=n(83290),D=n(29450);class W extends I{setEditDispatcher(e,t){e.classList.toggle("hidden",!this.figureData),this.figureData?e.onmousedown=e=>(e.preventDefault(),e.stopImmediatePropagation(),t.dispatch({effects:N.sp.of(this.figureData)}),window.dispatchEvent(new CustomEvent("figure-modal:open-modal")),(0,D.ng)(t,"toolbar-figure-modal-edit"),!1):e.onmousedown=null}updateDOM(e,t){if(this.destroyed=!1,e.classList.toggle("ol-cm-environment-centered",this.centered),this.filePath===e.dataset.filepath&&e.dataset.width===String(this.figureData?.width?.toString())){const n=e.querySelector(".ol-cm-graphics-edit-button");return n&&this.setEditDispatcher(n,t),!0}return this.renderGraphic(e,t),t.requestMeasure(),!0}coordsAt(e){return e.getBoundingClientRect()}createEditButton(e){const t=document.createElement("button");t.setAttribute("aria-label",e.state.phrase("edit_figure")),this.setEditDispatcher(t,e),t.classList.add("btn","btn-secondary","ol-cm-graphics-edit-button");const n=document.createElement("span");return n.classList.add("fa","fa-pencil"),t.append(n),t}renderGraphic(e,t){if(super.renderGraphic(e,t),this.figureData){const n=this.createEditButton(t);e.prepend(n)}}}class M extends W{updateElementData(e){e.dataset.filepath=this.filePath,e.dataset.width=this.figureData?.width?.toString(),this.figureData?.width?e.style.width=`min(100%, ${100*this.figureData.width}%)`:e.style.width=""}toDOM(e){this.destroyed=!1;const t=document.createElement("span");t.classList.add("ol-cm-graphics-inline-edit-wrapper"),this.updateElementData(t);const n=document.createElement("span");return n.classList.add("ol-cm-graphics-inline"),this.renderGraphic(n,e),t.append(n),t}updateDOM(e,t){return!!super.updateDOM(e,t)&&(this.updateElementData(e),t.requestMeasure(),!0)}ignoreEvent(e){return"mousedown"!==e.type&&"mouseup"!==e.type}coordsAt(e){return e.getBoundingClientRect()}getFigureWidth(){return"100%"}}var U=n(5383);const F={footnote:"*",endnote:"†"};class V extends o.xO{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"footnote";super(),this.type=e}toDOM(){const e=document.createElement("span");return e.classList.add("ol-cm-footnote"),e.setAttribute("role","button"),e.innerHTML=F[this.type],e}eq(e){return this.type===e.type}updateDOM(e){return e.innerHTML=F[this.type],!0}ignoreEvent(e){return"mousedown"!==e.type&&"mouseup"!==e.type}coordsAt(e){return e.getBoundingClientRect()}}var G=n(32629);class Z extends o.xO{toDOM(){const e=document.createElement("span");return e.textContent=" ",e}eq(){return!0}coordsAt(e){return e.getBoundingClientRect()}}class B extends x{constructor(e,t,n){super(e),this.environment=e,this.name=t,this.argumentNode=n}toDOM(e){const t=super.toDOM(e);return t.classList.add("ol-cm-begin-theorem"),t}updateDOM(e,t){return super.updateDOM(e,t),e.classList.add("ol-cm-begin-theorem"),!0}eq(e){return super.eq(e)&&e.name===this.name&&e.argumentNode===this.argumentNode}coordsAt(e){return e.getBoundingClientRect()}buildName(e,t){if(e.textContent=this.name,this.argumentNode){const n=document.createElement("span");O(this.argumentNode,n,t.state),e.append(" (",n,")"),(0,h.O)().then((async n=>{this.destroyed||(await n.typesetPromise([e]),t.requestMeasure(),n.typesetClear([e]))})).catch((()=>{e.classList.add("ol-cm-error")}))}}}var z=n(82108);class Y extends o.xO{constructor(e){super(),this.content=e}toDOM(){const e=document.createElement("span");return e.classList.add("ol-cm-indicator"),e.textContent=this.content,e}eq(e){return e.content===this.content}updateDOM(e){return e.textContent=this.content,!0}ignoreEvent(e){return"mousedown"!==e.type&&"mouseup"!==e.type}coordsAt(e){return e.getBoundingClientRect()}}var H=n(25873),K=(n(97107),n(14041)),J=(n(34840),n(31085));class ee{constructor(e,t){this.from=e,this.to=t??e}contains(e,t){const{minX:n,maxX:r,minY:o,maxY:i}=this.normalized(),{from:a,to:s}=t.getCellBoundaries(e.row,e.cell);return a>=n&&s<=r&&e.row>=o&&e.row<=i}selectRow(e,t,n){return new ee({row:t?this.from.row:e,cell:0},{row:e,cell:n.columns.length-1})}selectColumn(e,t,n){return new ee({row:0,cell:t?this.from.cell:e},{row:n.rows.length-1,cell:e})}normalized(){return{minX:Math.min(this.from.cell,this.to.cell),maxX:Math.max(this.from.cell,this.to.cell),minY:Math.min(this.from.row,this.to.row),maxY:Math.max(this.from.row,this.to.row)}}bordersLeft(e,t,n){const{minX:r}=this.normalized();return r===n.getCellBoundaries(e,t).from}bordersRight(e,t,n){const{maxX:r}=this.normalized();return r===n.getCellBoundaries(e,t).to}bordersTop(e){const{minY:t}=this.normalized();return t===e}bordersBottom(e){const{maxY:t}=this.normalized();return t===e}toString(){return`TableSelection(${this.from.row}, ${this.from.cell}) -> (${this.to.row}, ${this.to.cell})`}isRowSelected(e,t){const{minX:n,maxX:r,minY:o,maxY:i}=this.normalized();return e>=o&&e<=i&&0===n&&r===t.columns.length-1}isAnyRowSelected(e){for(let t=0;t<e.rows.length;++t)if(this.isRowSelected(t,e))return!0;return!1}isAnyColumnSelected(e){for(let t=0;t<e.columns.length;++t)if(this.isColumnSelected(t,e))return!0;return!1}isColumnSelected(e,t){const n=t.rows.length,{minX:r,maxX:o,minY:i,maxY:a}=this.normalized();return e>=r&&e<=o&&0===i&&a===n-1}eq(e){return this.from.row===e.from.row&&this.from.cell===e.from.cell&&this.to.row===e.to.row&&this.to.cell===e.to.cell}explode(e){const t=t=>{if(t.to.row>=e.rows.length||t.to.cell>=e.columns.length)throw new Error("Can't expand selection outside of table");const{minX:n,maxX:r,minY:o,maxY:i}=t.normalized();for(let a=o;a<=i;++a){const o=e.getCellBoundaries(a,n),i=e.getCellBoundaries(a,r);if(o.from<n)return t.from.cell===n?new ee({row:t.from.row,cell:o.from},{row:t.to.row,cell:t.to.cell}):new ee({row:t.from.row,cell:t.from.cell},{row:t.to.row,cell:o.from});if(i.to>r)return t.to.cell===r?new ee({row:t.from.row,cell:t.from.cell},{row:t.to.row,cell:i.to}):new ee({row:t.from.row,cell:i.to},{row:t.to.row,cell:t.to.cell})}return t};let n=this;for(let e=t(n);!e.eq(n);e=t(n))n=e;return n}moveRight(e){const t=e.columns.length,n=Math.min(t-1,e.getCellBoundaries(this.to.row,this.to.cell).to+1);return new ee({row:this.to.row,cell:n}).explode(e)}moveLeft(e){const t=this.to.row,n=e.getCellBoundaries(t,this.to.cell).from,r=Math.max(0,n-1);return new ee({row:this.to.row,cell:r}).explode(e)}moveUp(e){const t=Math.max(0,this.to.row-1);return new ee({row:t,cell:this.to.cell}).explode(e)}moveDown(e){const t=e.rows.length,n=Math.min(t-1,this.to.row+1),r=e.getCellBoundaries(this.to.row,this.to.cell).from;return new ee({row:n,cell:r}).explode(e)}moveNext(e){const t=e.rows.length,n=e.columns.length,{row:r,cell:o}=this.to,i=e.getCellBoundaries(r,o);return i.to===n-1&&r===t-1?new ee(this.to).explode(e):i.to===n-1?new ee({row:r+1,cell:0}).explode(e):new ee({row:r,cell:i.to+1}).explode(e)}movePrevious(e){const t=e.columns.length,{row:n,cell:r}=this.to,o=e.getCellBoundaries(n,r);return 0===o.from&&0===this.to.row?new ee(this.to).explode(e):0===o.from?new ee({row:this.to.row-1,cell:t-1}).explode(e):new ee({row:this.to.row,cell:o.from-1})}extendRight(e){const t=e.columns.length,{minY:n,maxY:r}=this.normalized();let o=this.to.cell;for(let t=n;t<=r;++t){const n=e.getCellBoundaries(t,this.to.cell).to+1;o=Math.max(o,n)}return o=Math.min(t-1,o),new ee({row:this.from.row,cell:this.from.cell},{row:this.to.row,cell:o}).explode(e)}extendLeft(e){const{minY:t,maxY:n}=this.normalized();let r=this.to.cell;for(let o=t;o<=n;++o){const t=e.getCellBoundaries(o,this.to.cell).from-1;r=Math.min(r,t)}return r=Math.max(0,r),new ee({row:this.from.row,cell:this.from.cell},{row:this.to.row,cell:r}).explode(e)}extendUp(e){const t=Math.max(0,this.to.row-1);return new ee({row:this.from.row,cell:this.from.cell},{row:t,cell:this.to.cell}).explode(e)}extendDown(e){const t=e.rows.length,n=Math.min(t-1,this.to.row+1);return new ee({row:this.from.row,cell:this.from.cell},{row:n,cell:this.to.cell}).explode(e)}spansEntireTable(e){const t=e.rows.length,n=e.columns.length,{minX:r,maxX:o,minY:i,maxY:a}=this.normalized();return 0===r&&o===n-1&&0===i&&a===t-1}isMergedCellSelected(e){if(this.from.row!==this.to.row)return!1;const t=e.getCellBoundaries(this.from.row,this.from.cell),n=e.getCellBoundaries(this.to.row,this.to.cell);if(t.from!==n.from)return!1;const r=e.getCell(this.from.row,t.from);return r&&Boolean(r.multiColumn)}isMergeableCells(e){const{minX:t,maxX:n,minY:r,maxY:o}=this.normalized();if(r!==o)return!1;if(t===n)return!1;for(let r=t;r<=n;++r){if(e.getCell(this.from.row,r).multiColumn)return!1}return!0}isOnlyFixedWidthColumns(e){const{minX:t,maxX:n}=this.normalized();for(let r=t;r<=n;++r){if(!this.isColumnSelected(r,e))return!1;if(!e.columns[r].isParagraphColumn)return!1}return!0}isOnlyParagraphCells(e){const{minX:t,maxX:n}=this.normalized();for(let r=t;r<=n;++r)if(!e.columns[r].isParagraphColumn)return!1;return!0}isOnlyNonFixedWidthColumns(e){const{minX:t,maxX:n}=this.normalized();for(let r=t;r<=n;++r){if(!this.isColumnSelected(r,e))return!1;if(e.columns[r].isParagraphColumn)return!1}return!0}width(){const{minX:e,maxX:t}=this.normalized();return t-e+1}height(){const{minY:e,maxY:t}=this.normalized();return t-e+1}maximumCellWidth(e){const{minX:t,maxX:n,minY:r,maxY:o}=this.normalized();let i=1;for(let a=r;a<=o;++a){const r=e.getCellIndex(a,t),o=e.getCellIndex(a,n);i=Math.max(i,o-r+1)}return i}}const te=(0,K.createContext)(void 0),ne=()=>{const e=(0,K.useContext)(te);if(void 0===e)throw new Error("useSelectionContext is only available inside SelectionContext.Provider");return e},re=e=>{let{children:t}=e;const[n,r]=(0,K.useState)(null),[o,i]=(0,K.useState)(!1);return(0,J.jsx)(te.Provider,{value:{selection:n,setSelection:r,dragging:o,setDragging:i},children:t})};var oe=n(53373),ie=n.n(oe),ae=n(59162),se=n(96713),le=n(48200);function ce(e,t){(0,D.Vs)(e,"codemirror-table-generator-event",t)}const de=(0,K.memo)((function(e){let{id:t,className:n,label:r,command:o,active:i=!1,disabled:a,icon:s,hidden:l=!1,disabledLabel:c}=e;const d=(0,le.u9)(),h=(0,K.useCallback)((e=>{e.preventDefault()}),[]),u=(0,K.useCallback)((e=>{o&&(ce(d,t),e.preventDefault(),o(d))}),[o,d,t]),m=(0,J.jsx)("button",{className:ie()("table-generator-toolbar-button",n,{hidden:l,active:i}),"aria-label":r,onMouseDown:h,onClick:a?void 0:u,disabled:a,"aria-disabled":a,type:"button",children:(0,J.jsx)(se.A,{type:s})}),p=a&&c?(0,J.jsx)("div",{children:c}):(0,J.jsx)("div",{children:r});return(0,J.jsx)(ae.A,{id:t,description:p,overlayProps:{placement:"bottom"},children:m})}));var he=n(32487),ue=n(67777),me=n(64735),pe=n(32424);const ge=(0,K.createContext)(void 0),fe=e=>{let{children:t}=e;const n=(0,K.useRef)(null),[r,o]=(0,K.useState)(!1),[i,a]=(0,K.useState)(!1),s=(0,K.useCallback)((()=>o(!0)),[]),l=(0,K.useCallback)((()=>o(!1)),[]),c=(0,K.useCallback)((()=>a(!0)),[]),d=(0,K.useCallback)((()=>a(!1)),[]);return(0,J.jsx)(ge.Provider,{value:{ref:n,helpShown:r,showHelp:s,hideHelp:l,columnWidthModalShown:i,openColumnWidthModal:c,closeColumnWidthModal:d},children:t})},Oe=()=>{const e=(0,K.useContext)(ge);if(!e)throw new Error("TabularContext must be used within TabularProvider");return e},be=(0,K.memo)((function(e){let{icon:t,id:n,label:r,children:o,disabled:i,disabledLabel:a}=e;const s=(0,K.useRef)(null),{open:l,onToggle:c,ref:d}=(0,he.A)(),{ref:h}=Oe(),u=(0,J.jsxs)("button",{type:"button",className:"table-generator-toolbar-button table-generator-toolbar-button-menu","aria-label":r,onMouseDown:e=>{e.preventDefault(),e.stopPropagation()},onClick:()=>{c(!l)},disabled:i,"aria-disabled":i,ref:s,children:[(0,J.jsx)(se.A,{type:t}),(0,J.jsx)(se.A,{type:"expand_more"})]}),m=h.current&&(0,J.jsx)(me.A,{show:l,target:s.current,placement:"bottom",container:h.current,containerPadding:0,transition:!0,rootClose:!0,onHide:()=>c(!1),children:(0,J.jsx)(pe.A,{id:`${n}-menu`,ref:d,className:"table-generator-button-menu-popover",children:(0,J.jsx)(ue.A,{role:"menu",onClick:()=>{c(!1)},className:"d-block",children:o})})});return(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(ae.A,{hidden:l,id:n,description:(0,J.jsx)("div",{children:i&&a?a:r}),overlayProps:{placement:"bottom"},children:u}),m]})})),ve=e=>{let{id:t,label:n,children:r,btnClassName:o="table-generator-toolbar-dropdown-toggle",icon:i="expand_more",tooltip:a,disabled:s,disabledTooltip:l,showCaret:c}=e;const{open:d,onToggle:h,ref:u}=(0,he.A)(),m=(0,K.useRef)(null),{ref:p}=Oe(),g=(0,J.jsxs)("button",{ref:m,type:"button",id:t,"aria-haspopup":"true",className:o,onMouseDown:e=>{e.preventDefault(),e.stopPropagation()},onClick:()=>{h(!d)},"aria-label":a,disabled:s,"aria-disabled":s,children:[n&&(0,J.jsx)("span",{children:n}),(0,J.jsx)(se.A,{type:i}),c&&(0,J.jsx)(se.A,{type:"expand_more"})]}),f=p.current&&(0,J.jsx)(me.A,{show:d,target:m.current,placement:"bottom",container:p.current,transition:!0,rootClose:!0,containerPadding:0,onHide:()=>h(!1),children:(0,J.jsx)(pe.A,{id:`${t}-popover`,ref:u,className:"table-generator-toolbar-dropdown-popover",children:(0,J.jsx)("div",{className:"table-generator-toolbar-dropdown-menu",id:`${t}-menu`,"aria-labelledby":t,onClick:()=>{h(!1)},children:r})})});return a||s&&l?(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(ae.A,{hidden:d,id:t,description:s&&l?l:a,overlayProps:{placement:"bottom"},children:g}),f]}):(0,J.jsxs)(J.Fragment,{children:[g,f]})},we=e=>{let{children:t,command:n,id:r,icon:o,active:i,...a}=e;const s=(0,le.u9)(),l=(0,K.useCallback)((()=>{ce(s,r),n()}),[s,n,r]);return(0,J.jsxs)("button",{className:ie()("ol-cm-toolbar-menu-item",{"ol-cm-toolbar-dropdown-option-active":i}),role:"menuitem",type:"button",...a,onClick:l,children:[o&&(0,J.jsx)(se.A,{type:o}),(0,J.jsx)("span",{className:"ol-cm-toolbar-dropdown-option-content",children:t}),i&&(0,J.jsx)(se.A,{type:"check"})]})};n(12266),n(57327),n(74786);const _e=/[pbm]\{\s*(\d*[.]?\d+)\s*(mm|cm|pt|in)\s*\}/,xe=/[pbm]\{\s*(\d*[.]?\d+)\s*\\(linewidth|textwidth|columnwidth)\s*\}/,ye=["mm","cm","in","pt"],ke=["%",...ye,"custom"],Ce=["c","l","r","p","m","b",">"];function Se(e,t){if("{"!==e.charAt(t))throw new Error("Missing opening brace");let n=0;for(let r=t;r<e.length;r++)if("{"===e.charAt(r)?n++:"}"===e.charAt(r)&&n--,0===n)return r;throw new Error("Missing closing brace")}function Qe(e){const t=[];let n,r,o=0,i=0,a="",s="",l="",c="",d=!1;function h(){void 0!==n&&(t.push({alignment:n,borderLeft:o,borderRight:i,content:a,cellSpacingLeft:s,cellSpacingRight:l,customCellDefinition:c,isParagraphColumn:d,size:r}),n=void 0,o=0,i=0,a="",s="",l="",c="",d=!1,r=void 0)}for(let t=0;t<e.length;t++){Ce.includes(e.charAt(t))&&h();const u=void 0!==n,m=e.charAt(t);switch(m){case"|":u?i++:o++;break;case"c":n="center",a+="c";break;case"l":n="left",a+="l";break;case"r":n="right",a+="r";break;case"p":case"m":case"b":{if(d=!0,n="paragraph",""!==c){const e=c.match(/>\{\s*\\(raggedleft|raggedright|centering)\s*\\arraybackslash\s*\}/);if(e)switch(e[1]){case"raggedleft":n="right";break;case"raggedright":n="left";break;case"centering":n="center"}}a+=m;const o=Se(e,t+1),i=e.slice(t,o+1),s=i.match(_e),l=i.match(xe);if(s)r={unit:s[2],width:parseFloat(s[1])};else if(l){const e=parseFloat(l[1])||0;r={unit:"%",width:100*e,command:l[2]}}else r={unit:"custom",width:i.slice(2,-1)};a+=i.slice(1),t=o;break}case"@":case"!":{const r=Se(e,t+1),o=e.slice(t,r+1);t=r,n?l=o:s=o;break}case">":{const n=Se(e,t+1),r=e.slice(t,n+1);t=n,c=r;break}case" ":case"\n":case"\t":a+=m}}return h(),t}const Ee=e=>e.type.is("Command")&&Boolean(e.getChild("KnownCtrlSym")?.getChild("LineBreak")),Te=e=>e.type.is("Command")&&Boolean(e.getChild("KnownCommand")?.getChild("HorizontalLine")),je=e=>e.type.is("Command")&&Boolean(e.getChild("KnownCommand")?.getChild("MultiColumn"));function Pe(e,t){const n=e.getChild("BeginEnv")?.getChild("TextArgument")?.getChild("LongArg");if(!n)throw new Error("Missing column specification");const r=Qe(t.sliceDoc(n.from,n.to)),o=e.getChild("Content")?.getChild("TabularContent");if(!o)throw new Error("Missing table body");const i=function(e,t){const n=e.firstChild,r={rows:[{cells:[],hlines:[],cellSeparators:[],position:{from:e.from,to:e.from}}],rowSeparators:[]};function o(){return r.rows[r.rows.length-1]}function i(){return o().cells[o().cells.length-1]}o().cells.push({content:"",position:{from:e.from,to:e.from}});for(let e=n;e;e=e.nextSibling)if(Ee(e)){const t=o();r.rows.push({cells:[],hlines:[],cellSeparators:[],position:{from:e.to,to:e.to}}),t.position.to=e.to,r.rowSeparators.push({from:e.from,to:e.to}),o().cells.push({content:"",position:{from:e.to,to:e.to}})}else{if(e.type.is("Ampersand"))o().cells.push({content:"",position:{from:e.to,to:e.to}}),o().cellSeparators.push({from:e.from,to:e.to});else{if(je(e)){const n=e.getChild("KnownCommand").getChild("MultiColumn"),r=n.getChild("ColumnArgument")?.getChild("ShortTextArgument")?.getChild("ShortArg"),a=n.getChild("SpanArgument")?.getChild("ShortTextArgument")?.getChild("ShortArg"),s=n.getChild("TabularArgument")?.getChild("TabularContent");if(!r)throw new Error("Invalid multicolumn definition: missing column specification argument");if(!a)throw new Error("Invalid multicolumn definition: missing colspan argument");if(!s)throw new Error("Invalid multicolumn definition: missing cell content");if(i()?.content.trim())throw new Error("Invalid multicolumn definition: multicolumn must be at the start of a cell");const l=Qe(t.sliceDoc(r.from,r.to)),c=parseInt(t.sliceDoc(a.from,a.to)),d=t.sliceDoc(s.from,s.to);i()||o().cells.push({content:"",position:{from:e.from,to:e.from}});const h=i();h.multiColumn={columnSpecification:{position:{from:r.from,to:r.to},specification:l},span:c,preamble:{from:e.from,to:s.from},postamble:{from:s.to,to:e.to},position:{from:e.from,to:e.to}},h.content=d,h.position.from=s.from,h.position.to=s.to;continue}if(e.type.is("NewLine")||e.type.is("Whitespace")||e.type.is("Comment")||e.type.is("BlankLine")){const n=i();n?.multiColumn||n&&(""===n.content.trim()?(n.position.from=e.to,n.position.to=e.to):(n.content+=t.sliceDoc(e.from,e.to),n.position.to=e.to))}else if(Te(e)){const t=i();if(t?.content.trim())throw new Error("\\hline must be at the start of a row");t&&(t.position.from=e.to,t.position.to=e.to),o().hlines.push({position:{from:e.from,to:e.to},atBottom:!1})}else{i()||o().cells.push({content:"",position:{from:e.from,to:e.from}});const n=i();n.content+=t.sliceDoc(e.from,e.to),n.position.to=e.to}}o().position.to=e.to}const a=o();if(r.rows.length>1&&1===a.cells.length&&""===a.cells[0].content.trim()){const e=a.hlines.map((e=>({...e,atBottom:!0})));r.rows.pop(),o().hlines.push(...e);const n=t.sliceDoc(a.position.from,a.position.to),i=n.length-n.trimEnd().length;o().position.to=a.position.to-i}return r}(o,t),a=i.rows.map((e=>e.cells.map((e=>e.multiColumn?.position??e.position)))),s=i.rows.map((e=>e.cellSeparators)),l=i.rows.map((e=>({...e.position,hlines:e.hlines.map((e=>e.position))}))),c=i.rows.map((e=>({cells:e.cells.map((e=>{const t={content:e.content,from:e.position.from,to:e.position.to};return e.multiColumn&&(t.multiColumn={columns:{specification:e.multiColumn.columnSpecification.specification,from:e.multiColumn.columnSpecification.position.from,to:e.multiColumn.columnSpecification.position.to},columnSpan:e.multiColumn.span,from:e.multiColumn.position.from,to:e.multiColumn.position.to,preamble:{from:e.multiColumn.preamble.from,to:e.multiColumn.preamble.to},postamble:{from:e.multiColumn.postamble.from,to:e.multiColumn.postamble.to}}),t})),borderTop:e.hlines.filter((e=>!e.atBottom)).length,borderBottom:e.hlines.filter((e=>e.atBottom)).length})));return{table:new $t(c,r),cellPositions:a,specification:n,rowPositions:l,rowSeparators:i.rowSeparators,cellSeparators:s}}var $e=n(79384);let Re=function(e){return e[e.NO_BORDERS=0]="NO_BORDERS",e[e.FULLY_BORDERED=1]="FULLY_BORDERED",e[e.BOOKTABS=2]="BOOKTABS",e}({});const Xe={[Re.NO_BORDERS]:{column:()=>({left:!1,right:!1}),row:()=>!1,multicolumn:()=>({left:!1,right:!1})},[Re.FULLY_BORDERED]:{column:(e,t)=>({left:!0,right:e===t-1}),row:()=>"\\hline",multicolumn:()=>({left:!0,right:!0}),lastRow:()=>"\\hline"},[Re.BOOKTABS]:{column:()=>({left:!1,right:!1}),row:e=>0===e?"\\toprule":1===e&&"\\midrule",lastRow:()=>"\\bottomrule",multicolumn:()=>({left:!1,right:!1})}};const Ae=(e,t,n,r,o)=>{const i=function(e,t,n,r,o){const i=[],a=t.state.sliceDoc(r.columnDeclarations.from,r.columnDeclarations.to),s=Qe(a);s.forEach(((t,n)=>{const{left:r,right:o}=e.column(n,s.length);t.borderLeft=r?1:0,t.borderRight=o?1:0}));const l=Le(s);l!==a&&i.push({from:r.columnDeclarations.from,to:r.columnDeclarations.to,insert:l});for(let n=0;n<r.rowPositions.length;n++){const a=r.rowPositions[n],s=e.row(n,r.rowPositions.length);if(s){let e=!1;for(const r of a.hlines)r.from>o[n]?.to||(e?i.push({from:r.from,to:r.to,insert:""}):(t.state.sliceDoc(r.from,r.to).trim()!==s&&i.push({from:r.from,to:r.to,insert:s}),e=!0));e||i.push({from:a.from,to:a.from,insert:s})}else for(const e of a.hlines)e.from>o[n]?.to||i.push({from:e.from,to:e.to,insert:""})}const c=r.rowPositions[r.rowPositions.length-1],d=e.lastRow?.();if(r.rowPositions.length===o.length)if(d){let e=!1;for(const n of c.hlines)n.from<o[r.rowPositions.length-1].to||(e?i.push({from:n.from,to:n.to,insert:""}):(t.state.sliceDoc(n.from,n.to).trim()!==d&&i.push({from:n.from,to:n.to,insert:d}),e=!0));if(!e){const e=o[r.rowPositions.length-1];i.push({from:e.to,to:e.to,insert:` ${d}`})}}else for(const e of c.hlines)e.from<o[r.rowPositions.length-1].to||i.push({from:e.from,to:e.to,insert:""});else d&&i.push({from:c.to,to:c.to,insert:`\\\\ ${d}`});for(const r of n.rows)for(const n of r.cells)if(n.multiColumn){const{left:r,right:o}=e.multicolumn(),a=t.state.sliceDoc(n.multiColumn.columns.from,n.multiColumn.columns.to),s=Qe(a);s.forEach((e=>{e.borderLeft=r?1:0,e.borderRight=o?1:0}));const l=Le(s);l!==a&&i.push({from:n.multiColumn.columns.from,to:n.multiColumn.columns.to,insert:l})}return i}(Xe[t],e,o,n,r);e.dispatch({changes:i})},qe=(e,t,n,r,o)=>{if(t.isMergedCellSelected(o)){if("paragraph"===n)return;const{minX:r,minY:i}=t.normalized(),a=o.getCell(i,r);if(!a.multiColumn)return;const s=Qe(e.state.sliceDoc(a.multiColumn.columns.from,a.multiColumn.columns.to));for(const e of s)e.alignment!==n&&(e.alignment=n,e.content=n[0]);const l=Le(s);return void e.dispatch({changes:{from:a.multiColumn.columns.from,to:a.multiColumn.columns.to,insert:l}})}const i=Qe(e.state.sliceDoc(r.columnDeclarations.from,r.columnDeclarations.to)),{minX:a,maxX:s}=t.normalized();for(let e=a;e<=s;e++)if(t.isColumnSelected(e,o)){if(i[e].alignment===n)continue;if(i[e].alignment=n,i[e].isParagraphColumn)i[e].customCellDefinition=Ge(n);else{if("paragraph"===n)continue;i[e].content=n[0]}}const l=Le(i);e.dispatch({changes:[{from:r.columnDeclarations.from,to:r.columnDeclarations.to,insert:l}]})},Le=e=>e.map((e=>{let{borderLeft:t,borderRight:n,content:r,cellSpacingLeft:o,cellSpacingRight:i,customCellDefinition:a}=e;return`${"|".repeat(t)}${o}${a}${r}${i}${"|".repeat(n)}`})).join(""),Ie=(e,t,n)=>{const r=t.slice(0,1);r[0].borderLeft=0,r[0].borderRight=0;const o=Le(r),i=[];i.push({from:n.columnDeclarations.from,to:n.columnDeclarations.to,insert:o});const a=n.rowPositions[0].from,s=n.rowPositions[n.rowPositions.length-1].to;i.push({from:a,to:s,insert:"\\\\"}),e.dispatch({changes:i})},Ne=(e,t,n,r,o,i)=>{const{maxY:a,minY:s}=t.normalized(),l=t.height(),c=r?n.rowPositions[a].to:n.rowPositions[s].from,d=i.columns.length,h=i.getBorderTheme(),u=h===Re.FULLY_BORDERED?"\\hline":"",m=`${r&&o.length===i.rows.length-1?"\\\\":""}${h!==Re.FULLY_BORDERED||r||0!==s?"":"\\hline"}\n${" &".repeat(d-1)}\\\\${u}`.repeat(l);return e.dispatch({changes:{from:c,to:c,insert:m}}),r?new ee({cell:0,row:a+1},{cell:d-1,row:a+1}):t},De=(e,t,n,r,o)=>{const i=t.explode(o),{maxX:a,minX:s}=i.normalized(),l=i.maximumCellWidth(o),c=[],d=r?a:s;for(let e=0;e<n.rowPositions.length;e++){const t=o.getCell(e,d),n=t.multiColumn??t,i=r?n.to:n.from;c.push({from:i,insert:" &".repeat(l)})}const h=Qe(e.state.sliceDoc(n.columnDeclarations.from,n.columnDeclarations.to)),u=o.getBorderTheme(),m=u===Re.FULLY_BORDERED?1:0,p=r?a+1:s;return h.splice(p,0,...Array.from({length:l},(()=>({alignment:"left",borderLeft:0,borderRight:m,content:"l",cellSpacingLeft:"",cellSpacingRight:"",customCellDefinition:"",isParagraphColumn:!1})))),0===p&&u===Re.FULLY_BORDERED&&(h[0].borderLeft=Math.max(1,h[0].borderLeft)),c.push({from:n.columnDeclarations.from,to:n.columnDeclarations.to,insert:Le(h)}),e.dispatch({changes:c}),r?new ee({cell:a+1,row:0},{cell:a+1,row:n.rowPositions.length-1}):i},We=function(e){const t=[];for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];for(const e of r)void 0!==e&&t.push({from:e.from,to:e.to,insert:""});e.dispatch({changes:t})},Me=(e,t)=>{let{from:n,to:r}=e,{from:o,to:i}=t;return n<=o&&r>=i},Ue=(e,t,n,o)=>{const i=[],a="above"===n?t.tabular.from:t.tabular.to,s=r.OF.cursor(a);if(o?.caption){const{caption:e}=o;if(e.from<t.tabular.from&&"above"===n||e.from>t.tabular.to&&"below"===n)return}const{pos:l,prefix:c,suffix:d}=(0,$e.Ms)(e.state,s,n);if(o?.caption){const{caption:t,label:r}=o;let a=e.state.sliceDoc(t.from,t.to);if(r&&!Me(t,r)){a+=`\n${e.state.sliceDoc(r.from,r.to)}`,i.push({from:r.from,to:r.to,insert:""})}i.push({...Fe(e,l,2,n),insert:`${c}${a}${d}`}),i.push({from:t.from,to:t.to,insert:""})}else{let t="\\label{tab:my_table}";o?.label&&(i.push({from:o.label.from,to:o.label.to,insert:""}),t=e.state.sliceDoc(o.label.from,o.label.to)),i.push({...Fe(e,l,2,n),insert:`${c}\\caption{Caption}\n${t}${d}`})}e.dispatch({changes:i})},Fe=(e,t,n,r)=>{const o=e.state.doc.lineAt(t);return 0!==o.length?{from:t,to:t}:"above"===r?{from:(0,a.Br)(e.state.doc,o,n),to:t}:{from:t,to:(0,a.xS)(e.state.doc,o,n)}},Ve={left:"\\raggedright",right:"\\raggedleft",center:"\\centering",paragraph:""},Ge=e=>"paragraph"===e?"":`>{${Ve[e]}\\arraybackslash}`;function Ze(e){if(!e.isParagraphColumn)return"p";const t=e.content[0];return"m"===t||"b"===t?t:"p"}const Be=(0,K.createContext)(void 0),ze=e=>{let{tableData:t,children:n,tableNode:r,tabularNode:o,view:i,directTableChild:a}=e;try{const e={cells:t.cellPositions,columnDeclarations:t.specification,rowPositions:t.rowPositions,tabular:{from:o.from,to:o.to}},i=r?function(e){const t={table:{from:e.from,to:e.to}};return e.cursor().iterate((e=>{let{type:n,from:r,to:o}=e;if(t.caption&&t.label)return!1;n.is("Caption")?t.caption={from:r,to:o}:n.is("Label")&&(t.label={from:r,to:o})})),t}(r):void 0;return(0,J.jsx)(Be.Provider,{value:{...t,positions:e,tableEnvironment:i,rows:t.table.rows.length,columns:t.table.columns.length,directTableChild:a},children:n})}catch{return(0,J.jsx)(TableRenderingError,{view:i,codePosition:o.from})}},Ye=()=>{const e=(0,K.useContext)(Be);if(void 0===e)throw new Error("useTableContext must be used within a TableProvider");return e};var He=n(97434),Ke=n(77631);const Je=(0,K.memo)((function(){const{selection:e,setSelection:t}=ne(),n=(0,le.u9)(),{positions:r,rowSeparators:o,cellSeparators:i,tableEnvironment:a,table:s,directTableChild:l}=Ye(),{showHelp:c,openColumnWidthModal:d}=Oe(),{t:h}=(0,He.Bd)(),u=(0,K.useMemo)((()=>{switch(s.getBorderTheme()){case Re.FULLY_BORDERED:return h("all_borders");case Re.NO_BORDERS:return h("no_borders");case Re.BOOKTABS:return h("booktabs");default:return h("custom_borders")}}),[s,h]),m=(0,K.useMemo)((()=>a?.caption?a.caption.from<r.tabular.from?"above":"below":"no_caption"),[a,r]),p=(0,K.useMemo)((()=>{switch(m){case"no_caption":return h("no_caption");case"above":return h("caption_above");case"below":return h("caption_below")}}),[h,m]),g=(0,K.useMemo)((()=>{if(!e)return;if(e.isMergedCellSelected(s)){const t=s.getCell(e.from.row,e.from.cell);if(t.multiColumn)return t.multiColumn.columns.specification[0].alignment}const{minX:t,maxX:n}=e.normalized(),r=s.columns[t].alignment;for(let e=t+1;e<=n;e++)if(s.columns[e].alignment!==r)return;return r}),[e,s]),f=(0,K.useMemo)((()=>{switch(g){case"left":default:return"format_align_left";case"center":return"format_align_center";case"right":return"format_align_right";case"paragraph":return"format_align_justify"}}),[g]),O=(0,K.useMemo)((()=>s.columns.some((e=>e.size))),[s.columns]);if(!e)return null;const b=e.maximumCellWidth(s),v=e.height(),w=e.isOnlyFixedWidthColumns(s),_=e.isOnlyNonFixedWidthColumns(s);return(0,J.jsxs)("div",{className:ie()("table-generator-floating-toolbar",{"table-generator-toolbar-floating-custom-sizes":O}),children:[(0,J.jsxs)("div",{className:"table-generator-button-group",children:[(0,J.jsxs)(ve,{id:"table-generator-caption-dropdown",label:p,disabled:!a||!l,disabledTooltip:h("to_insert_or_move_a_caption_make_sure_tabular_is_directly_within_table"),children:[(0,J.jsx)(we,{id:"table-generator-caption-none",command:()=>{((e,t)=>{t?.caption&&t.label&&Me(t.caption,t.label)?We(e,t.caption):We(e,t?.caption,t?.label)})(n,a)},active:"no_caption"===m,children:h("no_caption")}),(0,J.jsx)(we,{id:"table-generator-caption-above",command:()=>{Ue(n,r,"above",a)},active:"above"===m,children:h("caption_above")}),(0,J.jsx)(we,{id:"table-generator-caption-below",command:()=>{Ue(n,r,"below",a)},active:"below"===m,children:h("caption_below")})]}),(0,J.jsxs)(ve,{id:"table-generator-borders-dropdown",label:u,children:[(0,J.jsx)(we,{id:"table-generator-borders-fully-bordered",command:()=>{Ae(n,Re.FULLY_BORDERED,r,o,s)},active:s.getBorderTheme()===Re.FULLY_BORDERED,icon:"border_all",children:h("all_borders")}),(0,J.jsx)(we,{id:"table-generator-borders-no-borders",command:()=>{Ae(n,Re.NO_BORDERS,r,o,s)},active:s.getBorderTheme()===Re.NO_BORDERS,icon:"border_clear",children:h("no_borders")}),(0,J.jsx)(we,{id:"table-generator-borders-booktabs",command:()=>{Ae(n,Re.BOOKTABS,r,o,s)},active:s.getBorderTheme()===Re.BOOKTABS,icon:"border_top",children:h("booktabs")})]})]}),(0,J.jsxs)("div",{className:"table-generator-button-group",children:[(0,J.jsxs)(be,{label:h("alignment"),icon:f,id:"table-generator-align-dropdown",disabledLabel:h("select_a_column_or_a_merged_cell_to_align"),disabled:!e.isColumnSelected(e.from.cell,s)&&!e.isMergedCellSelected(s),children:[(0,J.jsx)(de,{icon:"format_align_left",id:"table-generator-align-left",label:h("left"),command:()=>{qe(n,e,"left",r,s)},active:"left"===g}),(0,J.jsx)(de,{icon:"format_align_center",id:"table-generator-align-center",label:h("center"),command:()=>{qe(n,e,"center",r,s)},active:"center"===g}),(0,J.jsx)(de,{icon:"format_align_right",id:"table-generator-align-right",label:h("right"),command:()=>{qe(n,e,"right",r,s)},active:"right"===g}),w&&!e.isMergedCellSelected(s)&&(0,J.jsx)(de,{icon:"format_align_justify",id:"table-generator-align-justify",label:h("justify"),command:()=>{qe(n,e,"paragraph",r,s)},active:"paragraph"===g})]}),(0,J.jsxs)(ve,{id:"format_text_wrap",btnClassName:"table-generator-toolbar-button",icon:e.isOnlyParagraphCells(s)?"format_text_wrap":"width",tooltip:h("adjust_column_width"),disabled:!e.isAnyColumnSelected(s),disabledTooltip:h("select_a_column_to_adjust_column_width"),showCaret:!0,children:[(0,J.jsx)(we,{id:"table-generator-unwrap-text",icon:"width",active:_,command:()=>((e,t,n,r)=>{const{minX:o,maxX:i}=t.normalized(),a=Qe(e.state.sliceDoc(n.columnDeclarations.from,n.columnDeclarations.to));for(let e=o;e<=i;e++)t.isColumnSelected(e,r)&&(a[e].customCellDefinition="","paragraph"===a[e].alignment?(a[e].content="l",a[e].alignment="left"):a[e].content=a[e].alignment[0]);const s=Le(a);e.dispatch({changes:[{from:n.columnDeclarations.from,to:n.columnDeclarations.to,insert:s}]})})(n,e,r,s),disabled:!e.isAnyColumnSelected(s),children:h("stretch_width_to_text")}),(0,J.jsx)(we,{id:"table-generator-wrap-text",icon:"format_text_wrap",active:w,command:d,disabled:!e.isAnyColumnSelected(s),children:h(w?"fixed_width":"fixed_width_wrap_text")}),w&&(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)("hr",{}),(0,J.jsx)(we,{id:"table-generator-resize",command:d,children:h("set_column_width")})]})]}),(0,J.jsx)(de,{icon:"cell_merge",id:"table-generator-merge-cells",label:e.isMergedCellSelected(s)?h("unmerge_cells"):h("merge_cells"),active:e.isMergedCellSelected(s),disabled:!e.isMergedCellSelected(s)&&!e.isMergeableCells(s),disabledLabel:h("select_cells_in_a_single_row_to_merge"),command:()=>{e.isMergedCellSelected(s)?((e,t,n)=>{const r=n.getCell(t.from.row,t.from.cell);r.multiColumn&&e.dispatch({changes:[{from:r.multiColumn.preamble.from,to:r.multiColumn.preamble.to,insert:""},{from:r.multiColumn.postamble.from,to:r.multiColumn.postamble.to,insert:"&".repeat(r.multiColumn.columnSpan-1)}]})})(n,e,s):((e,t,n)=>{const{minX:r,maxX:o,minY:i,maxY:a}=t.normalized();if(i!==a)return;if(r===o)return;const s=[];for(let e=r;e<=o;e++)s.push(n.getCell(i,e).content.trim());const l=s.join(" ").trim(),c=n.getBorderTheme()===Re.FULLY_BORDERED?"|":"",d=`\\multicolumn{${o-r+1}}{${c}c${c}}{`,{from:h}=n.getCell(i,r),{to:u}=n.getCell(i,o);e.dispatch({changes:{from:h,to:u,insert:`${d}${l}}`}})})(n,e,s)}}),(0,J.jsx)(de,{icon:"delete",id:"table-generator-remove-column-row",label:h("delete_row_or_column"),disabledLabel:h("select_a_row_or_a_column_to_delete"),disabled:!e.isAnyRowSelected(s)&&!e.isAnyColumnSelected(s)||!e.eq(e.explode(s)),command:()=>t(((e,t,n,r,o)=>{const{minX:i,maxX:a,minY:s,maxY:l}=t.normalized(),c=o.getBorderTheme(),d=[],h=Qe(e.state.sliceDoc(n.columnDeclarations.from,n.columnDeclarations.to)),u=h.length,m=n.rowPositions.length;if(t.spansEntireTable(o))return Ie(e,h,n),new ee({cell:0,row:0});const p=Number(t.isRowSelected(s,o))*t.height(),g=Number(t.isColumnSelected(i,o))*t.width(),f=t.isColumnSelected(0,o);for(let e=s;e<=l;e++)if(t.isRowSelected(e,o)){const t=n.rowPositions[e];let r="";e===m-1&&c===Re.FULLY_BORDERED&&(r="\\hline"),d.push({from:t.from,to:t.to,insert:r})}else for(let s=i;s<=a;){const i=o.getCellIndex(e,s),a=n.cells[e][i];if(t.isColumnSelected(s,o))if(f){const n=a.from,o=r[e][i].to;if(void 0===n||void 0===o)return L.$.error("Failed to remove column"),t;d.push({from:n,to:o,insert:""})}else{const n=r[e][i-1].from,o=a.to;if(void 0===n||void 0===o)return L.$.error("Failed to remove column"),t;d.push({from:n,to:o,insert:""})}s+=o.rows[e].cells[i].multiColumn?.columnSpan??1}const O=h.filter(((e,n)=>!t.isColumnSelected(n,o)));o.getBorderTheme()===Re.FULLY_BORDERED&&h[0]?.borderLeft>0&&O.length&&(O[0].borderLeft=Math.max(1,O[0].borderLeft));const b=Le(O);d.push({from:n.columnDeclarations.from,to:n.columnDeclarations.to,insert:b}),e.dispatch({changes:d});const v=m-p,w=u-g;return new ee({cell:Math.max(0,Math.min(w-1,i)),row:Math.max(0,Math.min(v-1,s))})})(n,e,r,i,s))}),(0,J.jsxs)(ve,{id:"table-generator-add-dropdown",btnClassName:"table-generator-toolbar-button",icon:"add",tooltip:h("insert"),disabled:!e,children:[(0,J.jsx)(we,{id:"table-generator-insert-column-left",command:()=>{t(De(n,e,r,!1,s))},children:(0,J.jsx)("span",{className:"table-generator-button-label",children:1===b?h("insert_column_left"):h("insert_x_columns_left",{columns:b})})}),(0,J.jsx)(we,{id:"table-generator-insert-column-right",command:()=>{t(De(n,e,r,!0,s))},children:(0,J.jsx)("span",{className:"table-generator-button-label",children:1===b?h("insert_column_right"):h("insert_x_columns_right",{columns:b})})}),(0,J.jsx)("hr",{}),(0,J.jsx)(we,{id:"table-generator-insert-row-above",command:()=>{t(Ne(n,e,r,!1,o,s))},children:(0,J.jsx)("span",{className:"table-generator-button-label",children:1===v?h("insert_row_above"):h("insert_x_rows_above",{rows:v})})}),(0,J.jsx)(we,{id:"table-generator-insert-row-below",command:()=>{t(Ne(n,e,r,!0,o,s))},children:(0,J.jsx)("span",{className:"table-generator-button-label",children:1===v?h("insert_row_below"):h("insert_x_rows_below",{rows:v})})})]})]}),(0,J.jsxs)("div",{className:"table-generator-button-group",children:[(0,J.jsx)(de,{icon:"delete_forever",id:"table-generator-remove-table",label:h("delete_table"),command:()=>{We(n,a?.table??r.tabular),n.focus()}}),(0,J.jsx)(de,{icon:"help",id:"table-generator-show-help",label:h("help"),command:c}),(0,J.jsx)("div",{className:"toolbar-beta-badge",children:(0,J.jsx)(Ke.n,{id:"table-generator-feedback",url:"https://forms.gle/9dHxXPGugxEHgY3L9",text:(0,J.jsx)(et,{})})})]})]})})),et=()=>(0,J.jsxs)(J.Fragment,{children:["We have a new way to insert and edit tables.",(0,J.jsx)("br",{}),"Click to give feedback"]}),tt=(0,K.createContext)(void 0),nt=()=>{const e=(0,K.useContext)(tt);if(void 0===e)throw new Error("useEditingContext is only available inside EditingContext.Provider");return e},rt=e=>{let{children:t}=e;const{table:n}=Ye(),[r,o]=(0,K.useState)(null),[i,a]=(0,K.useState)(void 0),s=(0,le.u9)(),l=(0,K.useCallback)(((e,t,r)=>{const{from:l,to:c}=n.getCell(e,t);s.state.sliceDoc(l,c)===i||void 0===i?(a(void 0),s.dispatch({changes:{from:l,to:c,insert:r}}),s.requestMeasure(),o(null)):L.$.error("Cell has changed since editing started, not overwriting")}),[s,n,i]),c=(0,K.useCallback)((()=>{if(!r)return;if(!r.dirty)return o(null),void a(void 0);const{rowIndex:e,cellIndex:t,content:n}=r;l(e,t,n),o(null)}),[o,r,l]),d=(0,K.useCallback)((()=>{o(null)}),[o]),h=(0,K.useCallback)(((e,t,i)=>{r?.dirty&&c(),a(i);const s=n.getCell(e,t).content.trim();o({cellIndex:t,rowIndex:e,content:s,dirty:!1})}),[o,r,c,n]),u=(0,K.useCallback)((e=>{o((t=>t&&{...t,content:e,dirty:!0}))}),[o]),m=(0,K.useCallback)((e=>{const t=[],{minX:r,minY:o,maxX:i,maxY:a}=e.normalized();for(let e=o;e<=a;e++)for(let o=r;o<=i;o++){const{from:r,to:i}=n.getCell(e,o);t.push({from:r,to:i,insert:""})}s.dispatch({changes:t})}),[s,n]);return(0,J.jsx)(tt.Provider,{value:{cellData:r,updateCellData:u,cancelEditing:d,commitCellData:c,startEditing:h,clearCells:m},children:t})};var ot=n(45696);const it=(0,K.forwardRef)((function(e,t){let{value:n,...r}=e;const o=(0,K.useRef)(null);return(0,K.useImperativeHandle)(t,(()=>({focus(e){o.current?.setSelectionRange(n.length,n.length),o.current?.focus(e)}}))),(0,K.useLayoutEffect)((()=>{o?.current&&(o.current.style.height="1px",o.current.style.height=`${o.current.scrollHeight}px`)}),[n]),(0,J.jsx)("textarea",{...r,value:n,ref:o})})),at=e=>{let{cellData:t,columnSpecification:n,rowIndex:r,columnIndex:o,row:i}=e;const a=t.multiColumn?t.multiColumn.columns.specification[0]:n,{selection:s,setSelection:l,dragging:c,setDragging:d}=ne(),{table:u}=Ye(),m=(0,K.useRef)(null),p=(0,K.useRef)(null),{cellData:g,updateCellData:f,startEditing:b,commitCellData:v}=nt(),w=(0,K.useRef)(null),_=(0,le.u9)(),x=g?.rowIndex===r&&g?.cellIndex>=o&&g?.cellIndex<o+(t.multiColumn?.columnSpan??1),y=(0,K.useCallback)((e=>{x||0===e.button&&(d(!0),document.getSelection()?.empty(),l((t=>e.shiftKey&&t?new ee(t.from,{cell:o,row:r}).explode(u):new ee({cell:o,row:r}).explode(u))))}),[d,o,r,l,u,x]),k=(0,K.useCallback)((()=>{c&&d(!1)}),[d,c]),C=(0,K.useCallback)((e=>{if(c){if(1!==e.buttons)return void d(!1);if(document.getSelection()?.empty(),s?.to.cell===o&&s?.to.row===r)return;e.stopPropagation(),l((e=>e?new ee(e.from,{row:r,cell:o}).explode(u):new ee({row:r,cell:o}).explode(u)))}}),[c,o,r,l,s,d,u]);(0,K.useEffect)((()=>{x&&w.current&&w.current.focus()}),[x,t.content.length]);const S=(0,K.useCallback)((e=>e.replaceAll(/(^&|[^\\]&)/g,(e=>1===e.length?"\\&":`${e[0]}\\&`)).replaceAll(/(^%|[^\\]%)/g,(e=>1===e.length?"\\%":`${e[0]}\\%`)).replaceAll("\\\\","")),[]),Q=s?.to.row===r&&s?.to.cell>=o&&s?.to.cell<o+(t.multiColumn?.columnSpan??1);(0,K.useEffect)((()=>{Q&&!x&&p.current&&p.current.focus({preventScroll:!0})}),[Q,x]),(0,K.useEffect)((()=>{const e=t.content.trim();if(m.current&&!x){const t=ot.K.parse(e).topNode;m.current.innerText="",O(t,m.current,e.substring.bind(e)),(0,h.O)().then((async e=>{const t=m.current;t&&(await e.typesetPromise([t]),_.requestMeasure(),e.typesetClear([t]))})).catch((()=>{}))}}),[t.content,x,_]);const E=(0,K.useCallback)((e=>{f(S(e.target.value))}),[f,S]);let T=(0,J.jsx)("div",{ref:m,className:"table-generator-cell-render"});x&&(T=(0,J.jsx)(it,{className:"table-generator-cell-input",value:g.content,onBlur:v,onInput:E,ref:w}));const j=s?.contains({row:r,cell:o},u),P=(0,K.useCallback)((()=>{_.state.readOnly||b(r,o,t.content)}),[o,r,b,t.content,_]);return(0,J.jsx)("td",{onDoubleClick:P,tabIndex:i.cells.length*r+o+1,onMouseDown:y,onMouseUp:k,onMouseMove:C,colSpan:t.multiColumn?.columnSpan,ref:p,className:ie()("table-generator-cell",{"table-generator-cell-border-left":a.borderLeft>0,"table-generator-cell-border-right":a.borderRight>0,"table-generator-row-border-top":i.borderTop>0,"table-generator-row-border-bottom":i.borderBottom>0,"alignment-left":"left"===a.alignment,"alignment-center":"center"===a.alignment,"alignment-right":"right"===a.alignment,"alignment-paragraph":"paragraph"===a.alignment,selected:j,"selection-edge-top":j&&s?.bordersTop(r),"selection-edge-bottom":j&&s?.bordersBottom(r),"selection-edge-left":j&&s?.bordersLeft(r,o,u),"selection-edge-right":j&&s?.bordersRight(r,o,u),editing:x}),children:T})},st=e=>{let{index:t}=e;const{selection:n,setSelection:r}=ne(),{table:o}=Ye(),i=(0,K.useCallback)((e=>{e.preventDefault(),r(n?n.selectColumn(t,e.shiftKey,o):new ee({row:0,cell:t},{row:o.rows.length-1,cell:t}))}),[t,r,n,o]),a=n?.isColumnSelected(t,o);return(0,J.jsx)("td",{onMouseDown:i,className:ie()("table-generator-selector-cell column-selector",{"fully-selected":a})})},lt=e=>{let{index:t}=e;const{table:n}=Ye(),{selection:r,setSelection:o}=ne(),i=(0,K.useCallback)((e=>{e.preventDefault(),o(r?r.selectRow(t,e.shiftKey,n):new ee({row:t,cell:0},{row:t,cell:n.columns.length-1}))}),[t,o,n,r]),a=r?.isRowSelected(t,n);return(0,J.jsx)("td",{onMouseDown:i,className:ie()("table-generator-selector-cell row-selector",{"fully-selected":a})})},ct=(e,t)=>{let n=0;for(let r=0;r<t;++r)n+=e.cells[r].multiColumn?.columnSpan??1;return n},dt=e=>{let{columnSpecifications:t,row:n,rowIndex:r}=e;return(0,J.jsxs)("tr",{children:[(0,J.jsx)(lt,{index:r}),n.cells.map(((e,o)=>(0,J.jsx)(at,{cellData:e,rowIndex:r,row:n,columnIndex:ct(n,o),columnSpecification:t[ct(n,o)]},o)))]})};var ht=n(47143),ut=n(88495);const mt=e=>{let{size:t,onClick:n}=e;const{t:r}=(0,He.Bd)(),{selection:o}=ne(),{unit:i,width:a}=t,s=(0,K.useMemo)((()=>"custom"===i?a:`${function(e){return e.toFixed(2).replace(/\.0+$/,"")}(a)}${i}`),[i,a]);return o?(0,J.jsx)(ae.A,{id:"tooltip-column-width-button",description:"custom"===i?r("column_width_is_custom_click_to_resize"):r("column_width_is_x_click_to_resize",{width:s}),overlayProps:{delay:0,placement:"bottom"},children:(0,J.jsxs)("button",{className:"btn table-generator-column-indicator-button",onClick:n,children:[(0,J.jsx)(se.A,{type:"format_text_wrap",className:"table-generator-column-indicator-icon"}),(0,J.jsx)("span",{className:"table-generator-column-indicator-label",children:s})]})}):null};var pt=n(94857);const gt=()=>{const{selection:e,setSelection:t}=ne(),{cellData:n,cancelEditing:r,startEditing:o,commitCellData:i,clearCells:a,updateCellData:s}=nt(),{table:l}=Ye(),{openColumnWidthModal:c,columnWidthModalShown:d}=Oe(),h=(0,K.useRef)(null),u=(0,le.u9)(),{columns:m,tableWidth:p}=(0,K.useMemo)((()=>{const e=Array.from({length:l.columns.length},(()=>15));for(let t=0;t<l.rows.length;++t)for(let r=0;r<l.columns.length;r+=l.getCell(t,r).multiColumn?.columnSpan??1){const o=l.getCell(t,r).multiColumn?.columnSpan??1;let i=l.getCell(t,r).content.length+3;n?.rowIndex===t&&n?.cellIndex===r&&(i=Math.max(i,Math.min(n.content.length+3,20)));for(let t=0;t<o;++t)e[r+t]=Math.max(e[r+t],i/o)}const t=e.reduce(((e,t)=>e+t),0);for(let t=0;t<e.length;++t)e[t]=Math.log2(e[t]);const r=e.reduce(((e,t)=>e+t),0);for(let t=0;t<e.length;++t)e[t]=Math.round(e[t]/r*100);return{columns:e,tableWidth:t}}),[l,n?.cellIndex,n?.rowIndex,n?.content.length]),g=(0,K.useMemo)((()=>({ArrowRight:{run:()=>e.moveRight(l),shift:()=>e.extendRight(l)},ArrowLeft:{run:()=>e.moveLeft(l),shift:()=>e.extendLeft(l)},ArrowUp:{run:()=>e.moveUp(l),shift:()=>e.extendUp(l)},ArrowDown:{run:()=>e.moveDown(l),shift:()=>e.extendDown(l)},Tab:{run:()=>e.moveNext(l),shift:()=>e.movePrevious(l),canExitEditing:!0}})),[e,l]),f=(0,K.useCallback)((e=>Boolean(e.code)&&1===e.key?.length&&!e.ctrlKey&&!e.metaKey&&!e.altKey),[]),O=(0,K.useCallback)((c=>{if((0,ut.c)(c))return;if(u.state.readOnly)return;const d=pt.c?c.metaKey:c.ctrlKey;if("Enter"!==c.code||c.shiftKey)if("Escape"===c.code)c.preventDefault(),c.stopPropagation(),n?r():(t(null),u.focus());else if("Delete"===c.code||"Backspace"===c.code){if(n)return;if(!e)return;c.preventDefault(),c.stopPropagation(),a(e),u.requestMeasure(),setTimeout((()=>{if(h.current){const{minY:t}=e.normalized(),n=h.current.querySelectorAll("tbody tr")[t];n&&n.getBoundingClientRect().top<0&&n.scrollIntoView({block:"center"})}}),0)}else if(Object.prototype.hasOwnProperty.call(g,c.code)){const{run:r,shift:o,canExitEditing:a}=g[c.code];if(n&&!a)return;if(c.preventDefault(),!e)return void t(new ee({row:0,cell:0},{row:0,cell:0}).explode(l));const s=c.shiftKey?o():r();n&&a&&i(),t(s)}else if(f(c)&&!n){if(c.preventDefault(),c.stopPropagation(),!e)return;o(e.to.row,e.to.cell),s(c.key),t(new ee(e.to,e.to))}else n||"z"!==c.key||c.shiftKey||!d?!n&&("y"===c.key||"Z"===c.key&&c.shiftKey&&d)&&(c.preventDefault(),(0,ht.ZS)(u)):(c.preventDefault(),(0,ht.tN)(u));else{if(c.preventDefault(),c.stopPropagation(),!e)return;if(n)i();else{const t=l.getCell(e.to.row,e.to.cell).content;o(e.to.row,e.to.cell,t)}t(new ee(e.to,e.to).explode(l))}}),[e,n,t,r,o,i,g,u,a,s,f,l]);(0,K.useEffect)((()=>{const t=t=>{if(u.state.readOnly)return!1;if(n||!e||d)return!1;t.preventDefault();const r=[],o=t.clipboardData?.getData("text/plain");if(o){const t=o.split("\n").map((e=>e.split("\t"))),{minY:n,minX:i}=e.normalized();for(let e=0;e<t.length;++e){const o=n+e;if(o>=l.rows.length)break;const a=l.getCellIndex(o,i);for(let n=0;n<t[e].length;++n){const i=a+n;if(i>=l.rows[o].cells.length)break;const s=l.rows[o].cells[i];r.push({from:s.from,to:s.to,insert:t[e][n]})}}}u.dispatch({changes:r})},r=t=>{if(n||!e||d)return!1;t.preventDefault();const{minY:r,maxY:o}=e.normalized(),i=Array.from({length:o-r+1},(()=>[]));l.iterateSelection(e,((e,t)=>{i[t-r].push(e.content)}));const a=i.map((e=>e.join("\t"))).join("\n");navigator.clipboard.writeText(a)};return window.addEventListener("paste",t),window.addEventListener("copy",r),()=>{window.removeEventListener("paste",t),window.removeEventListener("copy",r)}}),[n,e,l,u,d]);const b=(0,K.useMemo)((()=>l.columns.some((e=>e.size))),[l.columns]);return(0,J.jsxs)("table",{className:"table-generator-table",onKeyDown:O,tabIndex:-1,ref:h,style:{width:`min(${p}ch, 95%)`},children:[(0,J.jsxs)("colgroup",{children:[(0,J.jsx)("col",{width:"20"}),l.columns.map(((e,t)=>(0,J.jsx)("col",{width:`${m[t]}%`},t)))]}),(0,J.jsxs)("thead",{children:[b&&(0,J.jsxs)("tr",{className:"table-generator-column-widths-row",children:[(0,J.jsx)("td",{}),l.columns.map(((e,n)=>(0,J.jsx)("td",{align:"center",children:e.size&&(0,J.jsx)(mt,{size:e.size,onClick:()=>{return t(new ee({row:0,cell:e=n},{row:l.rows.length-1,cell:e})),void c();var e}})},n)))]}),(0,J.jsxs)("tr",{children:[(0,J.jsx)("td",{}),l.columns.map(((e,t)=>(0,J.jsx)(st,{index:t},t)))]})]}),(0,J.jsx)("tbody",{children:l.rows.map(((e,t)=>(0,J.jsx)(dt,{row:e,rowIndex:t,columnSpecifications:l.columns},t)))})]})};var ft=n(7350),Ot=n(28812),bt=n(71627);const vt=()=>{const{helpShown:e,hideHelp:t}=Oe(),{t:n}=(0,He.Bd)();return e?(0,J.jsxs)(Ot.Ay,{show:e,onHide:t,className:"table-generator-help-modal",children:[(0,J.jsx)(Ot.IK,{closeButton:!0,children:(0,J.jsx)(Ot.rA,{children:n("help")})}),(0,J.jsxs)(Ot.$8,{children:[(0,J.jsx)("p",{children:(0,J.jsx)(He.x6,{i18nKey:"this_tool_helps_you_insert_simple_tables_into_your_project_without_writing_latex_code_give_feedback",components:[(0,J.jsx)("a",{href:"https://forms.gle/ri3fzV1oQDAjmfmD7",target:"_blank",rel:"noopener noreferrer"})]})}),(0,J.jsx)("b",{children:n("how_it_works")}),(0,J.jsx)("p",{children:(0,J.jsx)(He.x6,{i18nKey:"youll_get_best_results_in_visual_but_can_be_used_in_source",components:[(0,J.jsx)("b",{}),(0,J.jsx)("b",{})]})}),(0,J.jsx)("b",{children:n("customizing_tables")}),(0,J.jsx)("p",{children:(0,J.jsx)(He.x6,{i18nKey:"if_you_need_to_customize_your_table_further_you_can",components:[(0,J.jsx)("a",{href:"https://www.overleaf.com/learn/latex/Tables",target:"_blank",rel:"noopener"})]})}),(0,J.jsx)("b",{children:n("changing_the_position_of_your_table")}),(0,J.jsx)("p",{children:(0,J.jsx)(He.x6,{i18nKey:"latex_places_tables_according_to_a_special_algorithm",components:[(0,J.jsx)("a",{href:"https://www.overleaf.com/learn/latex/Positioning_images_and_tables",target:"_blank",rel:"noopener"})]})}),(0,J.jsx)("b",{children:n("understanding_labels")}),(0,J.jsx)("p",{children:(0,J.jsx)(He.x6,{i18nKey:"labels_help_you_to_reference_your_tables",components:[(0,J.jsx)("code",{}),(0,J.jsx)("a",{href:"https://www.overleaf.com/learn/latex/Inserting_Images#Labels_and_cross-references",target:"_blank",rel:"noopener"})]})})]}),(0,J.jsx)(Ot.E9,{children:(0,J.jsx)(bt.A,{variant:"secondary",onClick:t,children:n("close")})})]}):null};var wt=n(17112),_t=n(30280),xt=n(73152),yt=n(12327),kt=n(96700),Ct=n(7829),St=n(61157),Qt=n(95851),Et=n(1705);const Tt=(0,K.memo)((function(){const{columnWidthModalShown:e}=Oe();return e?(0,J.jsx)(jt,{}):null})),jt=()=>{const{columnWidthModalShown:e,closeColumnWidthModal:t}=Oe(),n=(0,le.u9)(),{selection:r}=ne(),{positions:o,table:i}=Ye(),{t:a}=(0,He.Bd)(),[s,l]=(0,K.useState)("%"),[c,d]=(0,K.useState)(""),h=(0,K.useRef)(null),u=(0,K.useMemo)((()=>{switch(s){case"%":return{label:a("percent_is_the_percentage_of_the_line_width"),tooltip:a("line_width_is_the_width_of_the_line_in_the_current_environment")};case"custom":return{label:a("enter_any_size_including_units_or_valid_latex_command")};default:return}}),[s,a]);(0,K.useEffect)((()=>{if(e){if(h.current?.focus(),!r||1!==r.width()||!i.columns[r.to.cell].isParagraphColumn||!i.columns[r.to.cell].size)return l("%"),void d("");const{to:e}=r,t=e.cell,n=i.columns[t],o=n.size;if("%"===o.unit){l("%");const e=Math.round(100*o.width)/100;d(e.toString())}else"custom"===o.unit?(l("custom"),d(n.content.slice(2,-1))):(l(o.unit),d(o.width.toString()))}}),[e,r,i]);const m=(0,K.useCallback)((e=>{if(e.preventDefault(),r&&s){const e=parseFloat(c);let t;t="custom"===s?{unit:"custom",width:c}:{unit:s,width:e},((e,t,n,r,o)=>{const{minX:i,maxX:a}=t.normalized(),s=Qe(e.state.sliceDoc(r.columnDeclarations.from,r.columnDeclarations.to));for(let e=i;e<=a;e++)if(t.isColumnSelected(e,o)){const t=(c=n.unit,d=o.columns[e].size,"custom"===c?"":"%"===c?"%"===d?.unit&&d.command?`\\${d.command}`:"\\linewidth":c),r="%"===(l=n).unit?l.width/100:l.width;s[e].customCellDefinition=Ge(s[e].alignment);const i=Ze(s[e]);s[e].content=`${i}{${r}${t}}`}var l,c,d;const h=Le(s);e.dispatch({changes:[{from:r.columnDeclarations.from,to:r.columnDeclarations.to,insert:h}]})})(n,r,t,o,i)}return t(),!1}),[t,s,c,o,r,i,n]);return(0,J.jsxs)(Ot.Ay,{show:e,onHide:t,className:"table-generator-width-modal",children:[(0,J.jsx)(Ot.IK,{closeButton:!0,children:(0,J.jsx)(Ot.rA,{children:a("set_column_width")})}),(0,J.jsx)(Ot.$8,{children:(0,J.jsxs)(Et.A,{id:"table-generator-width-form",onSubmit:m,children:[(0,J.jsxs)(Qt.A,{className:"g-3",children:[(0,J.jsx)(St.A,{lg:8,children:(0,J.jsxs)(yt.A,{controlId:"column-width-modal-width",className:"mb-0",children:[(0,J.jsx)(kt.A,{children:a("column_width")}),(0,J.jsx)(Ct.A,{value:c,required:!0,onChange:e=>d(e.target.value),type:"custom"===s?"text":"number",ref:h})]})}),(0,J.jsx)(St.A,{lg:4,children:(0,J.jsx)(yt.A,{className:"mb-0",children:(0,J.jsx)(_t.l,{label:(0,J.jsxs)(J.Fragment,{children:[" ",(0,J.jsx)("span",{className:"sr-only",children:a("length_unit")})]}),items:ke,itemToKey:e=>e??"",itemToString:e=>"custom"===e?a("custom"):e??"",onSelectedItemChanged:e=>l(e),defaultItem:s})})})]}),u&&(0,J.jsxs)("p",{className:"my-1",children:[u.label," ",u.tooltip&&(0,J.jsx)(ae.A,{id:"table-generator-unit-tooltip",description:u.tooltip,overlayProps:{delay:0,placement:"top"},children:(0,J.jsx)("span",{children:(0,J.jsx)(se.A,{type:"help",className:"align-middle"})})})]}),(0,J.jsx)("div",{className:"mt-2",children:(0,J.jsx)(He.x6,{i18nKey:"to_use_text_wrapping_in_your_table_make_sure_you_include_the_array_package",components:[(0,J.jsx)("b",{}),(0,J.jsx)("code",{})]})}),(0,J.jsxs)("div",{className:"mt-1 table-generator-usepackage-copy",children:[(0,J.jsxs)("code",{children:["\\usepackage","{","array","}"]}),(0,J.jsx)(xt.$,{content:"\\usepackage{array} % required for text wrapping in tables",tooltipId:"table-generator-array-copy"})]})]})}),(0,J.jsxs)(Ot.E9,{children:[(0,J.jsx)(bt.A,{variant:"secondary",onClick:()=>{t()},children:a("cancel")}),(0,J.jsx)(bt.A,{variant:"primary",form:"table-generator-width-form",type:"submit",children:a("ok")})]})]})};var Pt=n(79953);class $t{constructor(e,t){this.rows=e,this.columns=t}getCellIndex(e,t){let n=0;for(let r=0;r<this.rows[e].cells.length;r++)if(n+=this.rows[e].cells[r].multiColumn?.columnSpan??1,t<n)return r;return this.rows[e].cells.length-1}iterateCells(e,t,n,r,o){for(let i=e;i<=t;++i){let e=this.getCellBoundaries(i,n).from;const t=this.getCellIndex(i,n),a=this.getCellIndex(i,r);for(let n=t;n<=a;++n){const t=this.rows[i].cells[n],r=t.multiColumn?.columnSpan??1;o(t,i,e),e+=r}}}iterateSelection(e,t){const{minX:n,maxX:r,minY:o,maxY:i}=e.normalized();this.iterateCells(o,i,n,r,t)}getCell(e,t){return this.rows[e].cells[this.getCellIndex(e,t)]}getCellBoundaries(e,t){let n=0;for(let r=0;r<this.rows[e].cells.length;++r){const o=this.rows[e].cells[r],i=o.multiColumn?.columnSpan??1;if(n+i>t)return{from:n,to:n+i-1};n+=i}throw new Error("Couldn't find cell boundaries")}getBorderTheme(){if(0===this.rows.length||0===this.columns.length)return null;const e=1===this.rows[0].borderTop,t=1===this.rows[1]?.borderTop&&(2===this.rows.length||0===this.rows[1]?.borderBottom),n=1===this.rows[this.rows.length-1].borderBottom&&(2===this.rows.length||0===this.rows[this.rows.length-1].borderTop);if(e&&t&&n){let e=!0;for(const t of this.rows.slice(2,-1))(t.borderTop>0||t.borderBottom>0)&&(e=!1);for(const t of this.columns)(t.borderLeft>0||t.borderRight>0)&&(e=!1);if(e)return Re.BOOKTABS}const r=this.rows[this.rows.length-1].borderBottom>0,o=this.columns[0].borderLeft>0;for(const e of this.rows)if(r===(0===e.borderTop))return null;const i=r;for(const e of this.columns)if(o===(0===e.borderRight))return null;for(const e of this.rows)for(const t of e.cells)if(t.multiColumn){if(0===t.multiColumn.columns.specification.length)return null;if(o===(0===t.multiColumn.columns.specification[0].borderLeft))return null;for(const e of t.multiColumn.columns.specification)if(o===(0===e.borderRight))return null}const a=o;return i&&a?Re.FULLY_BORDERED:i||a?null:Re.NO_BORDERS}}const TableRenderingError=e=>{let{view:t,codePosition:n}=e;const{t:o}=(0,He.Bd)();return(0,J.jsx)(Pt.A,{type:"info",content:(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)("p",{children:(0,J.jsx)("strong",{children:o("sorry_your_table_cant_be_displayed_at_the_moment")})}),(0,J.jsx)("p",{children:o("this_could_be_because_we_cant_support_some_elements_of_the_table")})]}),action:void 0!==n?(0,J.jsx)(bt.A,{variant:"secondary",onClick:()=>t.dispatch({selection:r.OF.cursor(n)}),size:"sm",children:o("view_code")}):void 0})},Rt=e=>{let{tabularNode:t,view:n,tableNode:r,parsedTableData:o,directTableChild:i}=e;return(0,J.jsx)(ft.tH,{fallbackRender:()=>(0,J.jsx)(TableRenderingError,{view:n,codePosition:t.from}),children:(0,J.jsx)(wt.M6,{children:(0,J.jsx)(le.rr.Provider,{value:n,children:(0,J.jsxs)(fe,{children:[(0,J.jsx)(ze,{tabularNode:t,tableData:o,tableNode:r,directTableChild:i,view:n,children:(0,J.jsxs)(re,{children:[(0,J.jsx)(rt,{children:(0,J.jsx)(Xt,{})}),(0,J.jsx)(Tt,{})]})}),(0,J.jsx)(vt,{})]})})})})},Xt=()=>{const{setSelection:e,selection:t}=ne(),{commitCellData:n,cellData:r}=nt(),{ref:o}=Oe(),i=(0,le.u9)();return(0,K.useEffect)((()=>{const a=a=>{o.current?.contains(a.target)||a.target.closest(".table-generator-help-modal")||a.target.closest(".table-generator-width-modal")?i.dispatch():(t&&e(null),r&&n())};return window.addEventListener("mousedown",a),()=>{window.removeEventListener("mousedown",a)}}),[r,n,t,e,o,i]),(0,J.jsxs)("div",{className:"table-generator",ref:o,children:[!i.state.readOnly&&(0,J.jsx)(Je,{}),(0,J.jsx)(gt,{})]})};class At extends o.xO{static roots=(()=>new WeakMap)();constructor(e,t,n,r,o){super(),this.parsedTableData=e,this.tabularNode=t,this.content=n,this.tableNode=r,this.isDirectChildOfTableEnvironment=o}renderInDOMContainer(e,t){const n=At.roots.get(t)||(0,H.H)(t);At.roots.has(t)||At.roots.set(t,n),n.render(e)}toDOM(e){const t=document.createElement("div");return t.classList.add("ol-cm-tabular"),this.tableNode&&t.classList.add("ol-cm-environment-table"),this.renderInDOMContainer((0,J.jsx)(Rt,{view:e,tabularNode:this.tabularNode,parsedTableData:this.parsedTableData,tableNode:this.tableNode,directTableChild:this.isDirectChildOfTableEnvironment}),t),t}eq(e){return this.tabularNode.from===e.tabularNode.from&&this.tableNode?.from===e.tableNode?.from&&this.tableNode?.to===e.tableNode?.to&&this.content===e.content&&this.isDirectChildOfTableEnvironment===e.isDirectChildOfTableEnvironment}updateDOM(e,t){return this.renderInDOMContainer((0,J.jsx)(Rt,{view:t,tabularNode:this.tabularNode,parsedTableData:this.parsedTableData,tableNode:this.tableNode,directTableChild:this.isDirectChildOfTableEnvironment}),e),!0}coordsAt(e){return e.getBoundingClientRect()}get estimatedHeight(){return 50*this.parsedTableData.table.rows.length}destroy(e){const t=At.roots.get(e);t&&(At.roots.delete(e),t.unmount())}}var qt=n(77213);const Lt=e=>o.Z9.define((t=>{let n=!1;const a=function(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=e,a=t.state.facet(o.Lz.atomicRanges).map((e=>e(t)));for(const[n,o]of e.ranges.entries()){const i=It(t.state,a,o.anchor),s=It(t.state,a,o.head);i===o.anchor&&s===o.head||(e=e.replaceRange(r.OF.range(i,s),n))}(n||e!==i)&&window.setTimeout((()=>{t.dispatch({selection:e,scrollIntoView:!0})}))},s=()=>{const n=t.state.field(e,!1)?.preamble;n&&a(r.OF.create([r.OF.cursor(n.to+1)]),!0)};return{update(e){if(n)e.transactions.some((e=>e.effects.some((e=>e.is(P)))))&&s();else{const{state:t}=e;(0,i.mv)(t).length===t.doc.length&&(n=!0,t.selection.eq(r.OF.create([r.OF.cursor(0)]))?s():a(t.selection))}}}})),It=(e,t,n)=>{let r;do{r=n;for(const e of t)e.between(n,n,((e,t)=>{t>n&&(n=t)}));n!==r&&e.doc.lineAt(n).to===n&&n++}while(n!==r);return Math.min(n,e.doc.length)};class Nt extends o.xO{constructor(e){super(),this.hasTableNode=Boolean(e)}toDOM(e){const t=document.createElement("div");t.classList.add("notification","notification-type-info"),t.role="alert";const n=document.createElement("div");n.classList.add("notification-icon");const r=document.createElement("span");r.classList.add("material-symbols"),r.setAttribute("aria-hidden","true"),r.setAttribute("translate","no"),r.textContent="info",n.appendChild(r),t.appendChild(n);const o=document.createElement("div");o.classList.add("notification-content-and-cta");const i=document.createElement("div");i.classList.add("notification-content");const a=document.createElement("p"),s=document.createElement("strong");s.textContent=e.state.phrase("sorry_your_table_cant_be_displayed_at_the_moment"),a.appendChild(s);const l=document.createElement("p");l.textContent=e.state.phrase("this_could_be_because_we_cant_support_some_elements_of_the_table"),i.appendChild(a),i.appendChild(l),o.appendChild(i),t.appendChild(o);const c=document.createElement("div");return c.classList.add("table-generator","table-generator-error-container"),c.appendChild(t),this.hasTableNode&&c.classList.add("ol-cm-environment-table"),c}coordsAt(e){return e.getBoundingClientRect()}}class Dt extends I{toDOM(e){this.destroyed=!1;const t=document.createElement("span");return t.classList.add("ol-cm-graphics-inline"),this.renderGraphic(t,e),t}ignoreEvent(e){return"mousedown"!==e.type&&"mouseup"!==e.type}coordsAt(e){return e.getBoundingClientRect()}}const Wt=e=>r.$t.transactionFilter.of((t=>{if(t.selection&&t.isUserEvent("select.pointer")){const n=(0,i.mv)(t.state);let r=t.selection;const o=(0,a.ct)(t.state);let s=!1;const l=t.state.field(e,!1)?.decorations;for(const[e,t]of r.ranges.entries()){if(l){let e=!1;if(l.between(t.anchor,t.anchor,((n,r)=>{if(r>t.anchor)return e=!0,!1})),!1===e)continue}const i=Mt(n,t,o,1)||Mt(n,t,o,-1);i&&(r=r.replaceRange(i,e),s=!0)}if(s)return[t,{selection:r}]}return t})),Mt=(e,t,n,o)=>{const i=e.resolveInner(t.anchor,o),s=(0,A.Bw)(i,"$Command");if(!s)return;if(void 0!==n&&(0,a.$m)(n,s))return;const[l]=(0,A.wS)(s,"$TextArgument");if(l)if(1===o){if(t.anchor===l.from+1||t.anchor===s.from){if(t.empty)return r.OF.cursor(l.from+1);if(Math.abs(t.head-l.to)<2)return r.OF.range(l.from+1,l.to-1)}}else if(t.anchor===l.to-1||t.anchor===s.to){if(t.empty)return r.OF.cursor(l.to-1);if(Math.abs(t.head-s.from)<2)return r.OF.range(l.to-1,l.from+1)}};class Ut extends o.xO{constructor(e){super(),this.listDepth=e}toDOM(){const e=document.createElement("span");return e.classList.add("ol-cm-description-item"),this.setProperties(e),e}eq(e){return e.listDepth===this.listDepth}updateDOM(e){return this.setProperties(e),!0}ignoreEvent(e){return"mousedown"!==e.type&&"mouseup"!==e.type}coordsAt(e){return e.getBoundingClientRect()}setProperties(e){e.style.setProperty("--list-depth",String(this.listDepth))}}class Ft extends o.xO{constructor(e){super(),this.width=e}toDOM(){const e=document.createElement("span");return e.classList.add("ol-cm-space"),e.style.width=this.width,e}eq(e){return e.width===this.width}updateDOM(e){return e.style.width=this.width,!0}ignoreEvent(e){return"mousedown"!==e.type&&"mouseup"!==e.type}coordsAt(e){return e.getBoundingClientRect()}}const Vt=new Map([["\\thinspace","calc(3em / 18)"],["\\,","calc(3em / 18)"],["\\negthinspace","calc(-3em / 18)"],["\\!","calc(-3em / 18)"],["\\medspace","calc(4em / 18)"],["\\:","calc(4em / 18)"],["\\>","calc(4em / 18)"],["\\thickspace","calc(5em / 18)"],["\\;","calc(5em / 18)"],["\\negthickspace","calc(-5em / 18)"],["\\enspace","0.5em"],["\\quad","1em"],["\\qquad","2em"]]);var Gt=n(73547);function Zt(e,t){return e.readOnly||!(0,a.$m)(e.selection,t)}function Bt(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{open:U.OpenBrace,close:U.CloseBrace};if(!t)return[];const s=t.getChild(a.open),l=t.getChild(a.close);return s&&l&&s.to>n&&(r||t.to-t.from>2)?[o.NZ.replace({widget:e}).range(n,s.to),o.NZ.replace({widget:i}).range(l.from,l.to)]:[]}const zt=e=>e.getChild("EnvNameGroup")?.getChild("CloseBrace"),Yt=e=>{const{previewByPath:t}=e,n=(e,n)=>{const r=[],i=[];let h;const u=[];let g=0,f=0;const O=new Map([["theorem","Theorem"],["corollary","Corollary"],["lemma","lemma"],["proof","Proof"]]);let b="";const v={from:0,to:0,authors:[]};let w=!1;if(n.iterate({enter(n){if(n.node.type.is("Maketitle")){const e=(0,A.Bw)(n.node,"$Environment");e?.type.is("DocumentEnvironment")&&(v.to=n.node.from)}else if(n.node.type.is("DocumentEnvironment"))w||(v.to=n.node.getChild("Content")?.from??n.node.from,w=!0);else if(n.node.type.is("Title")){const t=n.node.getChild("TextArgument");if(t){const r=e.sliceDoc(t.from,t.to);v.title={node:t,content:r},v.to=n.node.to}}else if(n.node.type.is("Author")){const t=n.node.getChild("TextArgument");if(t){const r=e.sliceDoc(t.from,t.to);v.authors.push({node:t,content:r}),v.to=n.node.to}}else if(n.node.type.is("Affil")||n.node.type.is("Affiliation")){n.node.getChild("TextArgument")&&(v.to=n.node.to)}if(n.type.is("$Environment")){const t=(0,k.hN)(n.node,e);if(t&&["figure","table","verbatim","lstlisting","quote","quotation","quoting","displayquote"].includes(t)){const i=n.node.getChild("BeginEnv"),s=n.node.getChild("EndEnv");if(i&&s&&zt(i)&&zt(s)){const l=e.doc.lineAt(i.from),c=e.doc.lineAt(s.from),d={from:l.from,to:(0,a.xS)(e.doc,l)},h={from:(0,a.Br)(e.doc,c),to:c.to};if(Zt(e,{from:d.from,to:h.to})){r.push(o.NZ.replace({widget:new X(t,"begin"),block:!0}).range(d.from,d.to),o.NZ.replace({widget:new X(t,"end"),block:!0}).range(h.from,h.to));const i=(0,E.y)(n);if(i){const t=e.doc.lineAt(i.from),n=(0,a.Br)(e.doc,t),s=(0,a.xS)(e.doc,t);r.push(o.NZ.replace({block:!0}).range(n,s))}}}}else if(n.type.is("ListEnvironment")){const t=n.node.getChild("BeginEnv"),i=n.node.getChild("EndEnv");if(t&&i&&zt(t)&&zt(i)){const s=e.doc.lineAt(t.from),l=e.doc.lineAt(i.from),c={from:s.from,to:(0,a.xS)(e.doc,s)},d={from:(0,a.Br)(e.doc,l),to:l.to};!(0,a.$m)(e.selection,c)&&!(0,a.$m)(e.selection,d)&&(0,G.L1)(n.node).length>0&&r.push(o.NZ.replace({block:!0}).range(c.from,c.to),o.NZ.replace({block:!0}).range(d.from,d.to))}}else if(n.type.is("TabularEnvironment")&&Zt(e,n)){const t=n.node,i=(0,A.Bw)(t,"TableEnvironment"),a=(0,A.u0)(t.parent,i);let s=null,l=!1;try{s=Pe(t,e),l=(e=>{for(const t of e.table.rows){const n=t.cells.reduce(((e,t)=>e+(t.multiColumn?.columnSpan??1)),0);for(const e of t.cells)if(e.multiColumn?.columns.specification&&1!==e.multiColumn.columns.specification.length)return!1;if(n!==e.table.columns.length)return!1}return!0})(s)}catch(e){L.$.error(e)}if(s&&l)return r.push(o.NZ.replace({widget:new At(s,t,e.doc.sliceString((i??t).from,(i??t).to),i,a),block:!0}).range(n.from,n.to)),!1;r.push(o.NZ.widget({widget:new Nt(i),block:!0}).range(n.from,n.from))}}else if(n.type.is("BeginEnv")){const t=(0,k.hN)(n.node,e);if(t)switch(t){case"itemize":case"enumerate":case"description":(e=>{h&&(i.push(h),u.push(g)),h=e,g=0})(t),f++;break;case"abstract":Zt(e,n)&&r.push(o.NZ.replace({widget:new x(t),block:!0}).range(n.from,n.to));break;case"frame":if(Zt(e,n)){const t=n.node.parent;if(t?.type.is("Environment")){const i=(0,k.E9)(t);if(!i)break;if(i.length>0){const t=i[0];if(!t)break;let a=t.to;const s=t.getChild("LongArg");if(!s)break;const l={title:{node:t,content:e.sliceDoc(s.from,s.to)}};if(i.length>1){const t=i[1];if(t){const n=t.getChild("LongArg");n&&(a=t.to,l.subtitle={node:t,content:e.sliceDoc(n.from,n.to)})}}r.push(o.NZ.replace({widget:new T(l),block:!0}).range(n.from,a))}}}break;default:{const i=O.get(t);if(i&&Zt(e,n)){const e=n.node.getChild("OptionalArgument")?.getChild("ShortOptionalArg");r.push(o.NZ.replace({widget:new B(t,i,e),block:!0}).range(n.from,n.to))}}}}else if(n.type.is("EndEnv")){const t=(0,k.$2)(n.node,e);if(t)switch(t){case"itemize":case"enumerate":case"description":h===t&&(h=i.pop(),g=u.pop()??0),f--;break;case"abstract":Zt(e,n)&&r.push(o.NZ.replace({widget:new y,block:!0}).range(n.from,n.to));break;case"document":Zt(e,n)&&r.push(o.NZ.replace({widget:new R,block:!0}).range(n.from,n.to));break;case"frame":Zt(e,n)&&r.push(o.NZ.replace({widget:new j,block:!0}).range(n.from,n.to));break;default:O.has(t)&&Zt(e,n)&&r.push(o.NZ.replace({widget:new y,block:!0}).range(n.from,n.to))}}else if(n.type.is("$SectioningCtrlSeq")){const t=(0,d.rn)(e,n.to,"SectioningCommand");if(t){const i=t.getChild("SectioningArgument");if(i){const s=i.getChild(U.OpenBrace),l=i.getChild(U.CloseBrace);if(!s||!l)return!1;const d=t.getChild("$CtrlSeq");if(!d)return!1;const h=i.getChild("LongArg");if(!h)return!1;if(!e.sliceDoc(h.from,h.to).trim())return!1;const u=(0,a.$m)(e.selection,d)||(0,a.$m)(e.selection,s)||(0,a.$m)(e.selection,l);return r.push(o.NZ.replace({widget:new c(u?"{":"")}).range(n.from,h.from)),r.push(o.NZ.replace({widget:new c(u?"}":"")}).range(l.from,l.to)),!1}}}else{if(n.type.is("VerbCommand")){if(Zt(e,n)){const e=n.node.getChild("VerbContent");e&&e.to-e.from>2&&(r.push(o.NZ.replace({}).range(n.from,e.from+1)),r.push(o.NZ.replace({}).range(n.to-1,n.to)))}return!1}if(n.type.is("NewCommand")||n.type.is("RenewCommand")||n.type.is("Def")){const t=n.node.getChild("LiteralArgContent")??n.node.getChild("Csname")??n.node.getChild("CtrlSym");if(t){const r=e.sliceDoc(t.from,t.to).trim();if(/^\\\w+/.test(r)){const t=e.sliceDoc(n.from,n.to);t&&(b+=`${t}\n`)}}}else if(n.type.is("RenewEnvironment")||n.type.is("NewEnvironment")){const t=n.node.getChild("LiteralArgContent");if(t){const r=e.sliceDoc(t.from,t.to).trim();if(/^\w+/.test(r)){const t=e.sliceDoc(n.from,n.to);t&&(b+=`${t}\n`)}}}else if(n.type.is("Let")){const t=n.node.getChildren("Csname");if(2!==t.length)return;const r=t[0];if(r){const t=e.sliceDoc(r.from,r.to).trim();if(t.length>1&&t.startsWith("\\")){const t=e.sliceDoc(n.from,n.to);t&&(b+=`${t}\n`)}}}else{if(n.type.is("Cite")){if(Zt(e,n)){const e=n.node.getChild("BibKeyArgument")?.getChild("ShortTextArgument");r.push(...Bt(new S("📚"),e,n.from))}return!1}if(n.type.is("Ref")){const t=n.node.getChild("RefArgument")?.getChild("ShortTextArgument"),o=!Zt(e,n)||t?.from===t?.to;return r.push(...Bt(new S(o?"🏷{":"🏷"),t,n.from,!0,new c(o?"}":""))),!1}if(n.type.is("Label")){if(Zt(e,n)){const e=n.node.getChild("LabelArgument")?.getChild("ShortTextArgument");r.push(...Bt(new S("🏷"),e,n.from))}return!1}if(n.type.is("Include")){if(Zt(e,n)){const e=n.node.getChild("IncludeArgument")?.getChild("FilePathArgument");r.push(...Bt(new S("🔗"),e,n.from))}return!1}if(n.type.is("Input")){if(Zt(e,n)){const e=n.node.getChild("InputArgument");e&&e.to-e.from>2&&(r.push(o.NZ.replace({widget:new S("🔗")}).range(n.from,e.from+1)),r.push(o.NZ.replace({widget:new c}).range(n.to-1,n.to)))}return!1}if(n.type.is("Math")){const t=(0,Gt.E)(e,n.from);if(t&&(t.type.is("$Environment")?function(e,t){return Zt(e,{from:e.doc.lineAt(t.from).from,to:e.doc.lineAt(t.to).to})}(e,t):Zt(e,t))){const i=(0,Gt.R)(e,n,t);i&&i.passToMathJax&&r.push(o.NZ.replace({widget:new C(i.content,i.displayMode,b),block:i.displayMode}).range(t.from,t.to))}return!1}if(n.type.is("HrefCommand")){const t=n.node.getChild("UrlArgument"),o=t?.getChild("LiteralArgContent"),i=n.node.getChild("ShortTextArgument"),a=i?.getChild("ShortArg");if(t&&o&&i&&a){const t=!Zt(e,n)||a.from===a.to;e.sliceDoc(o.from,o.to).includes("\n")||r.push(...Bt(new c(t?"{":""),i,n.from,!0,new c(t?"}":"")))}}else if(n.type.is("UrlCommand")){const t=n.node.getChild("UrlArgument");if(t){const o=t.getChild("LiteralArgContent"),i=!Zt(e,n)||o?.from===o?.to;r.push(...Bt(new c(i?"{":""),t,n.from,!1,new c(i?"}":"")))}}else if(n.type.is("Tilde"))Zt(e,n)&&r.push(o.NZ.replace({widget:new Z}).range(n.from,n.to));else{if(n.type.is("LineBreak")){const t=n.node.getChild("OptionalArgument");return t&&!Zt(e,t)||r.push(o.NZ.replace({widget:new Y("↩")}).range(n.from,n.to)),!1}if(n.type.is("Caption")){if(Zt(e,n)){const e=n.node.getChild("TextArgument");r.push(...Bt(new c,e,n.from))}}else if(n.type.is("IncludeGraphics")){if(Zt(e,n)){const i=n.node.getChild("IncludeGraphicsArgument")?.getChild("FilePathArgument")?.getChild("LiteralArgContent");if(i){const a=e.doc.sliceString(i.from,i.to);if(a){const i=(0,d.rn)(e,n.from,"FigureEnvironment"),s=Boolean(i&&(0,E.y)(i)),l=i?(0,k.qI)(i,e):null,c=e.doc.lineAt(n.from);if(c.text.trim().length===n.to-n.from){const n=e.readOnly?I:W;r.push(o.NZ.replace({widget:new n(a,t,s,l),block:!0}).range(c.from,c.to))}else{const i=e.readOnly?Dt:M;r.push(o.NZ.replace({widget:new i(a,t,s,l)}).range(n.from,n.to))}}return!1}}}else if(n.type.is("Maketitle")){if(Zt(e,n)){const t=e.doc.lineAt(n.from),i=(0,a.Br)(e.doc,t),{to:s}=e.doc.lineAt(n.to);return Zt(e,{from:i,to:s})&&r.push(o.NZ.replace({widget:new _(v),block:!0}).range(i,s)),!1}}else if(n.type.is("Item")){if(h){g++;const t=e.doc.lineAt(n.from),i=/^\s*$/.test(e.sliceDoc(t.from,n.from))?t.from:n.from;if("description"!==h)return r.push(o.NZ.replace({widget:new s(h||"document",g,f)}).range(i,n.to)),!1;{const a=n.node.getChild(U.OptionalArgument),s=a?a.from:n.to;if(!a&&/^\s*$/.test(e.sliceDoc(n.to,t.to))||r.push(o.NZ.replace({widget:new Ut(f)}).range(i,s)),a){const t=Zt(e,a);r.push(...Bt(new c(t?"":"["),a,i,!1,new c(t?"":"]"),{open:U.OpenBracket,close:U.CloseBracket}))}}}}else if(n.type.is("NewTheoremCommand")){const t=(0,z.S)(e,n.node);if(t){const{name:e,label:n}=t;O.set(e,n)}}else if(n.type.is("TextColorCommand")||n.type.is("ColorBoxCommand")){if(Zt(e,n)){const e=n.node.getChild(U.ShortTextArgument),t=n.node.getChild(U.TextArgument);e&&t&&r.push(...Bt(new c,t,n.from))}}else if(n.type.is("$ToggleTextFormattingCommand")){const t=n.node.getChild("TextArgument"),o=t?.getChild("LongArg"),i=!Zt(e,n)||o?.from===o?.to;r.push(...Bt(new c(i?"{":""),t,n.from,!0,new c(i?"}":"")))}else if(n.type.is("$OtherTextFormattingCommand")){const t=n.node.getChild("TextArgument");Zt(e,n)&&r.push(...Bt(new c,t,n.from))}else if(n.type.is("FootnoteCommand")||n.type.is("EndnoteCommand")){const t=n.node.getChild("TextArgument");if(t)if(e.readOnly&&(0,a.$m)(e.selection,n))r.push(...Bt(new c,t,n.from),o.NZ.mark({class:"ol-cm-footnote ol-cm-footnote-view"}).range(t.from,t.to));else if(Zt(e,n))return r.push(o.NZ.replace({widget:new V(n.type.is("FootnoteCommand")?"footnote":"endnote")}).range(n.from,n.to)),!1}else if(n.type.is("UnknownCommand")){const t=n.node,i=t.getChild("$CtrlSeq");if(i){const a=e.doc.sliceString(i.from,i.to).trim();if(a.length>0){const i=t.getChild("TextArgument");if("\\keywords"===a){if(Zt(e,n))return r.push(...Bt(new c("keywords: "),i,n.from)),!1}else if("\\LaTeX"===a){if(Zt(e,n))return r.push(o.NZ.replace({widget:new l}).range(n.from,n.to)),!1}else if("\\TeX"===a){if(Zt(e,n))return r.push(o.NZ.replace({widget:new Q}).range(n.from,n.to)),!1}else if("\\ce"===a){if(i&&Zt(e,n)){if(e.doc.sliceString(i.from+1,i.to-1).trim().length){const t=e.doc.sliceString(n.from,n.to);r.push(o.NZ.replace({widget:new C(t,!1)}).range(n.from,n.to))}return!1}}else if(P=a,p.has(P)){if(Zt(e,n)){const e=function(e){const t=p.get(e);if(void 0!==t)return new m(t)}(a);if(e)return r.push(o.NZ.replace({widget:e}).range(n.from,n.to)),!1}}else if(function(e){return Vt.has(e)}(a)&&Zt(e,n)){const e=function(e){const t=Vt.get(e);if(void 0!==t)return new Ft(t)}(a);if(e)return r.push(o.NZ.replace({widget:e}).range(n.from,n.to)),!1}}}}}}}var P}}),v.to>0){const t=e.doc.lineAt(v.to).number;for(let n=1;n<=t;++n){const i=e.doc.line(n),a=["ol-cm-preamble-line"];1===n&&a.push("ol-cm-environment-first-line"),n===t&&a.push("ol-cm-environment-last-line"),r.push(o.NZ.line({class:a.join(" ")}).range(i.from))}const n=(0,a.$m)(e.selection,v);n?r.push(o.NZ.widget({widget:new $(n),block:!0,side:-1}).range(0)):r.push(o.NZ.replace({widget:new $(n),block:!0}).range(0,v.to))}return{decorations:o.NZ.set(r,!0),preamble:v}};return[r.sU.define({create(e){const t=(0,i.mv)(e),{decorations:r,preamble:o}=n(e,t);return{mousedown:!1,decorations:r,preamble:o,previousTree:t}},update(e,t){for(const n of t.effects)n.is(a.D5)&&(e={...e,mousedown:n.value});const r=(0,i.mv)(t.state);if(r.type===e.previousTree.type&&r.length<t.state.doc.length)e={...e,decorations:e.decorations.map(t.changes)};else if(!e.mousedown&&(r!==e.previousTree||t.selection||(0,a.v2)(t))){const{decorations:o,preamble:i}=n(t.state,r);e={...e,decorations:o,preamble:i,previousTree:r}}return e},provide:e=>[o.Lz.decorations.from(e,(e=>e.decorations)),o.Lz.atomicRanges.from(e,(e=>()=>e.decorations)),o.Z9.define((e=>({update(t){for(const n of t.transactions)"\\href{}{}"===n.annotation(qt.rK)?.label&&window.setTimeout((()=>(0,qt.tN)(e)))}}))),Lt(e),Wt(e)]})]}},95896:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(14041),o=n(99200);function i(e,t){const[n,i]=(0,r.useState)(e);return(0,o.i)(t,n),[n,i]}},95899:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var r=n(14041),o=n(97434),i=n(71627),a=n(92956),s=n(8164),l=n(41026),c=n(31085);function d(){const{t:e}=(0,o.Bd)(),{startCompile:t,setAnimateCompileDropdownArrow:n}=(0,s.Rf)(),{disableStopOnFirstError:d}=(0,l.V)({eventSource:"logs-pane"}),h=(0,r.useCallback)((()=>{d(),t({stopOnFirstError:!1}),n(!0)}),[d,t,n]);return(0,c.jsx)(a.A,{headerTitle:e("stop_on_first_error_enabled_title"),formattedContent:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(o.x6,{i18nKey:"stop_on_first_error_enabled_description",components:[(0,c.jsx)("strong",{})]})," ",(0,c.jsx)(i.A,{variant:"primary",size:"sm",onClick:h,children:e("disable_stop_on_first_error")})]}),level:"info"})}},96110:(e,t,n)=>{var r={"./ambiance.json":[4327,8089],"./chaos.json":[19605,5280],"./chrome.json":[16853,5291],"./clouds.json":[58465,2482],"./clouds_midnight.json":[61582,909],"./cobalt.json":[26744,8100],"./crimson_editor.json":[88696,4303],"./dawn.json":[64629,1494],"./dracula.json":[39387,1505],"./dreamweaver.json":[96322,7112],"./eclipse.json":[58284,4848],"./github.json":[77492,9241],"./gob.json":[43249,2050],"./gruvbox.json":[79558,4859],"./idle_fingers.json":[11812,7668],"./iplastic.json":[19954,2061],"./katzenmilch.json":[34375,1062],"./kr_theme.json":[75808,3871],"./kuroir.json":[30183,8264],"./merbivore.json":[26690,1073],"./merbivore_soft.json":[14887,3953],"./mono_industrial.json":[17646,9560],"./monokai.json":[5003,5763],"./nord_dark.json":[21007,6762],"./one_dark.json":[92270,2965],"./overleaf.json":[17945,156],"./pastel_on_dark.json":[66199,8583],"./solarized_dark.json":[5679,5774],"./solarized_light.json":[34485,537],"./sqlserver.json":[51834,7728],"./terminal.json":[85763,6294],"./textmate.json":[52369,9103],"./tomorrow.json":[71688,2900],"./tomorrow_night.json":[11541,5709],"./tomorrow_night_blue.json":[44262,5698],"./tomorrow_night_bright.json":[72062,91],"./tomorrow_night_eighties.json":[75704,80],"./twilight.json":[89835,2889],"./vibrant_ink.json":[38576,8126],"./xcode.json":[90916,935]};function o(e){if(!n.o(r,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],o=t[0];return n.e(t[1]).then((()=>n.t(o,19)))}o.keys=()=>Object.keys(r),o.id=96110,e.exports=o},96283:(e,t,n)=>{"use strict";n.d(t,{Ef:()=>h,dB:()=>u});n(97107);var r=n(14041),o=n(37664),i=n(42093),a=n(64932),s=n(99200),l=n(69954),c=n(31085);const d=(0,r.createContext)(void 0);const h=e=>{let{children:t}=e;const[n,h]=(0,i.A)("editor.lastUsedMode",function(){const e=`editor.mode.${(0,a.A)("ol-project_id")}`,t=o.A.getItem(e);return t&&o.A.removeItem(e),"rich-text"===t}(),{converter:{toPersisted:e=>e?"visual":"code",fromPersisted:e=>"visual"===e}});(0,s.i)("editor.showVisual",n);const[u,m]=(0,r.useState)(!1),p=(0,r.useCallback)((()=>{m((e=>{const t=!e;return(0,l._)(t?"symbol-palette-show":"symbol-palette-hide"),t}))}),[m]),[g,f]=(0,r.useState)(!0),[O,b]=(0,r.useState)(!1),[v,w]=(0,r.useState)(!1),[_,x]=(0,r.useState)(!1),y={showVisual:n,setShowVisual:h,showSymbolPalette:u,setShowSymbolPalette:m,toggleSymbolPalette:p,opening:g,setOpening:f,trackChanges:O,setTrackChanges:b,wantTrackChanges:v,setWantTrackChanges:w,errorState:_,setErrorState:x};return(0,c.jsx)(d.Provider,{value:y,children:t})},u=()=>{const e=(0,r.useContext)(d);if(!e)throw new Error("useEditorPropertiesContext is only available inside EditorPropertiesContext.Provider");return e}},96837:(e,t,n)=>{"use strict";const r=n(64347).assert,o=n(12628);class i extends o{constructor(e){super(),r.integer(e,"HollowBinaryFileData: bad byteLength"),r.greaterOrEqual(e,0,"HollowBinaryFileData: low byteLength"),this.byteLength=e}static fromRaw(e){return new i(e.byteLength)}toRaw(){return{byteLength:this.byteLength}}getByteLength(){return this.byteLength}isEditable(){return!1}async toHollow(){return this}}e.exports=i},97277:(e,t,n)=>{"use strict";var r;function o(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(97107);const i=n(64347).assert,a=n(37603),s=n(45317);class NotFoundError extends a{constructor(e){super(`blob ${e} not found`,{hash:e}),this.hash=e}}class l{constructor(e,t,n){this.setHash(e),this.setByteLength(t),this.setStringLength(n)}static fromRaw(e){return e?new l(e.hash,e.byteLength,e.stringLength):null}toRaw(){return{hash:this.hash,byteLength:this.byteLength,stringLength:this.stringLength}}getHash(){return this.hash}setHash(e){i.match(e,l.HEX_HASH_RX,"bad hash"),this.hash=e}getByteLength(){return this.byteLength}setByteLength(e){i.integer(e,"bad byteLength"),this.byteLength=e}getStringLength(){return this.stringLength}setStringLength(e){i.maybe.integer(e,"bad stringLength"),this.stringLength=e}}r=l,o(l,"HEX_HASH_RX_STRING","^[0-9a-f]{40,40}$"),o(r,"HEX_HASH_RX",new RegExp(r.HEX_HASH_RX_STRING)),o(r,"MAX_EDITABLE_BYTE_LENGTH_BOUND",3*s.MAX_STRING_LENGTH),o(r,"NotFoundError",NotFoundError),e.exports=l},97348:(e,t,n)=>{"use strict";n(82438),n(57327),n(50020);const r=n(64347).assert,o=n(90953),i=n(35078),a=n(44838);class s{constructor(e,t){r.instance(e,a,"bad snapshot"),r.maybe.array.of.instance(t,i,"bad changes"),this.snapshot=e,this.changes=t||[]}static fromRaw(e){return new s(a.fromRaw(e.snapshot),e.changes.map(i.fromRaw))}toRaw(){return{snapshot:this.snapshot.toRaw(),changes:this.changes.map((function(e){return e.toRaw()}))}}getSnapshot(){return this.snapshot}getChanges(){return this.changes}countChanges(){return this.changes.length}pushChanges(e){this.changes.push.apply(this.changes,e)}findBlobHashes(e){this.snapshot.findBlobHashes(e),this.changes.forEach((function(t){t.findBlobHashes(e)}))}async loadFiles(e,t){await Promise.all([this.snapshot.loadFiles(e,t),async function(n){for(const r of n)await r.loadFiles(e,t)}(this.changes)])}async store(e,t){r.maybe.number(t,"bad concurrency");const[n,i]=await Promise.all([this.snapshot.store(e,t),o(this.changes,(async function(n){return await n.store(e,t)}),{concurrency:t||1})]);return{snapshot:n,changes:i}}}e.exports=s},97536:(e,t,n)=>{"use strict";n.d(t,{G:()=>s,x:()=>a});var r=n(66020),o=n(29349),i=n(58528);const a=()=>(0,o.$)("editor-redesign")||(0,i.g9)("editor-redesign"),s=()=>{const{userSettings:e}=(0,r.dk)(),t=a(),n=e.enableNewEditor;return t&&n}},97900:(e,t,n)=>{"use strict";n.d(t,{B9:()=>nodeHasError,G2:()=>a,H:()=>i,I8:()=>o});n(82438),n(34840);var r=n(29587);const o=(e,t,n)=>{const o=(0,r.a_)(e,t,100);if(!o)return null;const i=o.resolve(t),a=i?.prevSibling;return a?.type.name===n},i=(e,t)=>{const n=t.getChild("ShortOptionalArg");if(n)return e.doc.sliceString(n.from,n.to)},nodeHasError=e=>{let t=!1;return e.cursor().iterate((e=>{let{type:n}=e;return!t&&(!n.isError||(t=!0,!1))})),t},a=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];let o=null;return e.cursor().iterate((e=>{if(null!==o)return!1;for(const t of n)if(e.type.is(t))return o=e.node,!1;return!0})),o}},98695:(e,t,n)=>{const r=n(58756),o=n(90482),i=n(91810);class a extends i{constructor(e){super(),this.commentId=e}toJSON(){return{deleteComment:this.commentId}}apply(e){e.comments.delete(this.commentId)}invert(e){const t=e.comments.getComment(this.commentId);return t?new r.AddCommentOperation(t.id,t.ranges.slice(),t.resolved):new o}static fromJSON(e){return new a(e.deleteComment)}}e.exports=a},99200:(e,t,n)=>{"use strict";n.d(t,{i:()=>i});var r=n(67353),o=n(14041);function i(e,t){const{unstableStore:n}=(0,r.nK)();(0,o.useEffect)((()=>{n.set(e,t)}),[n,e,t])}},99568:(e,t,n)=>{"use strict";n(82438),n(12266);const r=n(45250),o=n(64347),i=n(10729);e.exports={assertV1:function(e,t){const n=e.filter((function(e){return null!=e}));if(n.length>0){const e=o.integer(n[0])?o.assert.integer:r.partial(o.assert.instance,r,i);r.each(n,(function(n){e(n,t)}))}},assertV2:function(e,t){r.each(e,(function(e){o.assert.maybe.match(e,/^[0-9a-f]{24}$/,t)}))}}},99806:(e,t,n)=>{"use strict";n.d(t,{k_:()=>k,vd:()=>C});n(97107),n(61412),n(91883),n(70286);var r=n(14041),o=n(33829),i=n(85960),a=n(86316),s=n(37858);n(27534),n(82438),n(57327);const l=3e5;function c(e,t,n){if(n.includes(t.id))return{messages:e,uniqueMessageIds:n};(n=n.slice(0)).push(t.id);const r=e[e.length-1];return{messages:e=r&&t&&t.user&&r.user&&t.user.id&&t.user.id===r.user.id&&t.timestamp-r.timestamp<l?e.slice(0,e.length-1).concat({...r,id:t.id,timestamp:t.timestamp,contents:r.contents.concat(t.content)}):e.slice(0).concat({id:t.id,user:t.user,timestamp:t.timestamp,contents:[t.content]}),uniqueMessageIds:n}}function d(e,t,n){const r=e.slice(0);return n=n.slice(0),t.slice(0).reverse().forEach((e=>{if(n.includes(e.id))return;n.push(e.id);const t=r[0];t&&e&&t.user&&e.user&&e.user.id===t.user.id&&t.timestamp-e.timestamp<l?(t.id=e.id,t.timestamp=e.timestamp,t.contents=[e.content].concat(t.contents)):r.unshift({id:e.id,user:e.user,timestamp:e.timestamp,contents:[e.content]})})),{messages:r,uniqueMessageIds:n}}var h=n(30741),u=n(56447),m=n(67353),p=n(64932),g=n(60961),f=n(70569),O=n(97536),b=n(31085);const v=()=>(0,o.A)();let w=1;function _(e,t){switch(t.type){case"INITIAL_FETCH_MESSAGES":return{...e,status:"pending",initialMessagesLoaded:!0};case"FETCH_MESSAGES":return{...e,status:"pending"};case"FETCH_MESSAGES_SUCCESS":return{...e,status:"idle",...d(e.messages,t.messages,e.uniqueMessageIds),lastTimestamp:t.messages[0]?t.messages[0].timestamp:null,atEnd:t.messages.length<50};case"SEND_MESSAGE":return{...e,...c(e.messages,{id:""+w++,user:t.user,content:t.content,timestamp:Date.now()},e.uniqueMessageIds)};case"RECEIVE_MESSAGE":return{...e,...c(e.messages,t.message,e.uniqueMessageIds),unreadMessageCount:e.unreadMessageCount+1};case"MARK_MESSAGES_AS_READ":return{...e,unreadMessageCount:0};case"CLEAR":return{...x};case"ERROR":return{...e,status:"error",error:t.error};default:throw new Error("Unknown action")}}const x={status:"idle",messages:[],initialMessagesLoaded:!1,lastTimestamp:null,atEnd:!1,unreadMessageCount:0,error:null,uniqueMessageIds:[]},y=(0,r.createContext)(void 0),k=e=>{let{children:t}=e;const n=(0,p.A)("ol-capabilities")?.includes("chat"),o=(0,r.useRef)();void 0===o.current&&(o.current=v());const l=(0,i.ur)(),{projectId:c}=(0,a.Om)(),{chatIsOpen:d}=(0,u.LV)(),{selectedTab:w,isOpen:k}=(0,f.h)(),C=(0,O.G)()?"chat"===w&&k:d,{hasFocus:S,flashTitle:Q,stopFlashingTitle:E}=(0,h.A)(),[T,j]=(0,r.useReducer)(_,x),{loadInitialMessages:P,loadMoreMessages:$,reset:R}=(0,r.useMemo)((()=>{function e(){if(T.atEnd)return;const e={limit:String(50)};T.lastTimestamp&&(e.before=String(T.lastTimestamp));const t=new URLSearchParams(e),n=`/project/${c}/messages?${t.toString()}`;(0,s.hm)(n).then((function(){j({type:"FETCH_MESSAGES_SUCCESS",messages:(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reverse()})})).catch((e=>{j({type:"ERROR",error:e})}))}return{loadInitialMessages:function(){n?T.initialMessagesLoaded||(j({type:"INITIAL_FETCH_MESSAGES"}),e()):g.$.warn("chat is disabled, won't load initial messages")},loadMoreMessages:function(){n?(j({type:"FETCH_MESSAGES"}),e()):g.$.warn("chat is disabled, won't load messages")},reset:function(){n?(j({type:"CLEAR"}),e()):g.$.warn("chat is disabled, won't reset chat")}}}),[n,c,T.atEnd,T.initialMessagesLoaded,T.lastTimestamp]),X=(0,r.useCallback)((e=>{if(!n)return void g.$.warn("chat is disabled, won't send message");if(!e)return;j({type:"SEND_MESSAGE",user:l,content:e});const t=`/project/${c}/messages`;(0,s.TB)(t,{body:{content:e,client_id:o.current}}).catch((e=>{j({type:"ERROR",error:e})}))}),[n,c,l]),A=(0,r.useCallback)((()=>{n?j({type:"MARK_MESSAGES_AS_READ"}):g.$.warn("chat is disabled, won't mark messages as read")}),[n]),{socket:q}=(0,m.nK)();(0,r.useEffect)((()=>{if(n&&q)return q.on("new-chat-message",e),()=>{q&&q.removeListener("new-chat-message",e)};function e(e){e.clientId!==o.current&&j({type:"RECEIVE_MESSAGE",message:e})}}),[n,q]),(0,r.useEffect)((()=>{S&&(E(),C&&A()),!S&&T.unreadMessageCount>0&&Q("New Message")}),[S,C,T.unreadMessageCount,Q,E,A]);const L=(0,r.useMemo)((()=>({status:T.status,messages:T.messages,initialMessagesLoaded:T.initialMessagesLoaded,atEnd:T.atEnd,unreadMessageCount:T.unreadMessageCount,loadInitialMessages:P,loadMoreMessages:$,reset:R,sendMessage:X,markMessagesAsRead:A,error:T.error})),[P,$,A,R,X,T.atEnd,T.error,T.initialMessagesLoaded,T.messages,T.status,T.unreadMessageCount]);return(0,b.jsx)(y.Provider,{value:L,children:t})};function C(){const e=(0,r.useContext)(y);if(!e)throw new Error("useChatContext is only available inside ChatProvider");return e}}}]);